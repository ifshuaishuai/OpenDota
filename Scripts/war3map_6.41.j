globalsinteger array Aboolean array Binteger array Cinteger array Dinteger array Eboolean F=falseboolean array Gboolean H=falsestring array Iboolean array jtimer array Jinteger array Ktimer array Linteger array Mtimer n=CreateTimer()integer array Ninteger o=0integer O=0item P=nullinteger array qinteger array Qboolean R=falseboolean S=falseboolean T=falseboolean U=falseboolean v=falsereal V=0item W=nullinteger X=0real array Yitem array Zmultiboard aa=nullunit aA=nullboolean array abinteger aB=150boolean ac=falseboolean aC=falseboolean ad=falselocation aD=nulllocation ae=nulllocation aE=nulllocation af=nulllocation aF=nullboolean ag=trueboolean aG=trueboolean ah=trueboolean aH=trueboolean ai=trueboolean aI=trueboolean aj=trueboolean aJ=trueboolean ak=trueboolean aK=trueboolean al=trueboolean aL=trueinteger am=3integer aM=1location an=nulllocation aN=nulllocation ao=nulllocation aO=nulllocation ap=nulllocation aP=nulllocation aq=nulllocation aQ=nulllocation ar=nulllocation aR=nulllocation as=nulllocation aS=nulllocation at=nulllocation aT=nullinteger array auinteger array aUinteger array avinteger array aVinteger aw=80integer array aWinteger ax=0integer array aXunit array ayboolean aY=falseinteger az=0integer aZ=0player array a0player array a1boolean a2=falseinteger array a3integer array a4integer array a5integer array a6integer array a7integer array a8unit array a9integer array Aaforce Ab=CreateForce()force AB=CreateForce()player array Acplayer array ACplayer Ad=nullplayer AD=nullboolean Ae=falseleaderboard array AEinteger Af=0integer AF=0integer array Aggamecache AG=nullreal array Ahplayer AH=nullunit Ai=nullinteger Aj=0real AJ=0item array Akitem array AKitem array Alitem array ALitem array Amitem array AMboolean An=falseboolean AN=falseinteger Ao=0location array AOunit Ap=nullgroup Aq=CreateGroup()boolean AQ=falseboolean Ar=falseboolean As=falseboolean At=falseboolean AT=falseboolean Au=falseboolean AU=falseboolean Av=falsestring AV=""boolean Aw=falseboolean AW=falsestring AX=""item AY=nullplayer Az=nullstring array AZboolean A0=falseboolean array A1integer array A2integer A3=0force A4=CreateForce()boolean A5=falsereal A6=.0boolean A7=falseboolean A8=trueboolean A9=truelightning ba=nullboolean bA=falseboolean array bbstring bB=""boolean array bcboolean array bCboolean bd=falseboolean bD=falsetrigger be=nullboolean bE=falseweathereffect bf=nullweathereffect bF=nullboolean bg=falselocation bG=nullreal bh=0boolean bH=falseboolean bi=falsestring bI=""integer bj=0string array bJrect bkrect bKrect blrect bLrect bmrect bMrect bnrect bNrect borect bOrect bprect bPrect bqrect bQrect brrect bRrect bsrect bSrect btrect bTrect burect bUrect bvrect bVrect bwrect bWrect bxrect bXrect byrect bYrect bzrect bZrect b0rect b1rect b2rect b3rect b4rect b5rect b6rect b7rect b8rect b9rect Barect BArect Bbrect BBrect Bcrect BCrect Bdrect BDrect Berect BErect Bfcamerasetup BF=CreateCameraSetup()camerasetup Bg=CreateCameraSetup()camerasetup BG=CreateCameraSetup()camerasetup Bh=CreateCameraSetup()sound BHsound Bisound BIsound Bjsound BJsound Bksound BKsound Blsound BLsound Bmsound BMsound Bnsound BNsound Botrigger BO=CreateTrigger()trigger Bp=CreateTrigger()trigger BP=CreateTrigger()trigger Bqtrigger BQ=CreateTrigger()trigger Br=CreateTrigger()trigger BR=CreateTrigger()trigger Bs=CreateTrigger()trigger BS=CreateTrigger()trigger Bt=CreateTrigger()trigger BT=CreateTrigger()trigger Bu=CreateTrigger()trigger BU=CreateTrigger()trigger Bv=CreateTrigger()trigger BV=CreateTrigger()trigger Bw=CreateTrigger()trigger BW=CreateTrigger()trigger BX=CreateTrigger()trigger BY=CreateTrigger()trigger Bz=CreateTrigger()trigger BZ=CreateTrigger()trigger B0=CreateTrigger()trigger B1=CreateTrigger()trigger B2=CreateTrigger()trigger B3=CreateTrigger()trigger B4=CreateTrigger()trigger B5=CreateTrigger()trigger B6=CreateTrigger()trigger B7=CreateTrigger()trigger B8=CreateTrigger()trigger B9=CreateTrigger()trigger ca=CreateTrigger()trigger cA=CreateTrigger()trigger cb=CreateTrigger()trigger cB=CreateTrigger()trigger cc=CreateTrigger()trigger cC=CreateTrigger()trigger cd=CreateTrigger()trigger cD=CreateTrigger()trigger ce=CreateTrigger()trigger cE=CreateTrigger()trigger cf=CreateTrigger()trigger cF=CreateTrigger()trigger cg=CreateTrigger()trigger cG=CreateTrigger()trigger ch=CreateTrigger()trigger cH=CreateTrigger()trigger ci=CreateTrigger()trigger cI=CreateTrigger()trigger cj=CreateTrigger()trigger cJ=CreateTrigger()trigger ck=CreateTrigger()trigger cK=CreateTrigger()trigger cl=CreateTrigger()trigger cL=CreateTrigger()trigger cm=CreateTrigger()trigger cM=CreateTrigger()trigger cn=CreateTrigger()trigger cN=CreateTrigger()trigger co=CreateTrigger()trigger cO=CreateTrigger()trigger cp=CreateTrigger()trigger cP=CreateTrigger()trigger cq=CreateTrigger()trigger cQ=CreateTrigger()trigger cr=CreateTrigger()trigger cR=CreateTrigger()trigger cs=CreateTrigger()trigger cS=CreateTrigger()trigger ct=CreateTrigger()trigger cT=CreateTrigger()trigger cu=CreateTrigger()trigger cU=CreateTrigger()trigger cv=CreateTrigger()trigger cV=CreateTrigger()trigger cw=CreateTrigger()trigger cW=CreateTrigger()trigger cx=CreateTrigger()trigger cX=nulltrigger cy=nulltrigger cY=nulltrigger cz=nulltrigger cZ=nulltrigger c1=nulltrigger c2=nulltrigger c3=nulltrigger c4=nulltrigger c5=nulltrigger c6=nulltrigger c7=nulltrigger c8=nulltrigger c9=nulltrigger Ca=nulltrigger CA=nulltrigger Cb=nulltrigger CB=nulltrigger Cc=nulltrigger CC=nulltrigger Cd=nulltrigger CD=nulltrigger Ce=nulltrigger CE=nulltrigger Cf=nulltrigger Cg=nulltrigger CG=nulltrigger Ch=nulltrigger CH=nulltrigger Ci=nulltrigger CI=nulltrigger Cj=nulltrigger CJ=nulltrigger Ck=nulltrigger CK=nulltrigger Cl=nulltrigger CL=nulltrigger Cm=nulltrigger CM=nulltrigger Cn=nulltrigger CN=nulltrigger Co=nulltrigger CO=nulltrigger Cp=nulltrigger CP=nulltrigger Cq=nulltrigger CQ=nulltrigger Cr=nulltrigger CR=nulltrigger Cs=nulltrigger CS=nulltrigger Ct=nulltrigger CT=nulltrigger Cu=nulltrigger CU=nulltrigger Cv=nulltrigger CV=nulltrigger Cw=nulltrigger CW=nulltrigger CX=nulltrigger CY=CreateTrigger()trigger Cz=nulltrigger CZ=nulltrigger C0=nulltrigger C1=nulltrigger C2=nulltrigger C3=nulltrigger C4=nulltrigger C5=nulltrigger C6=nulltrigger C7=nulltrigger C8=nulltrigger C9=nulltrigger da=nulltrigger dA=nulltrigger db=nulltrigger dB=nulltrigger dc=nulltrigger dC=nulltrigger dd=nulltrigger dD=nulltrigger de=nulltrigger dE=nulltrigger df=nulltrigger dF=nulltrigger dg=nulltrigger dG=nulltrigger dh=nulltrigger dH=nulltrigger di=nulltrigger dI=nulltrigger dj=nulltrigger dJ=nulltrigger dk=nulltrigger dK=nulltrigger dl=nulltrigger dL=nulltrigger dm=nulltrigger dM=nulltrigger dn=nulltrigger dN=nulltrigger do=nullunit dOunit dpunit dPunit dqunit dQinteger dr=1integer dR=2integer ds=3unit dSunit dtunit dTunit duunit dUunit dvunit dVunit dwunit dWunit dXunit dyunit dYunit dzunit dZunit d0unit d1unit d2unit d3unit d4unit d5unit d6unit d7unit d8unit d9unit Daunit DAunit Dbunit DBunit Dcunit DCunit Ddunit DDunit Deunit DEunit Dfunit DFunit Dgunit DGunit Dhunit DHunit Diunit DIunit Djunit DJunit Dkunit DKunit Dlunit DLunit Dmunit Dnunit DNunit Dounit DOunit Dpunit DPunit Dqunit DQunit Drunit DRunit Dsunit DSunit Dtunit DTunit Duunit Dvunit DVunit Dwunit Dxunit DXunit Dyunit DYunit Dzunit DZunit D0unit D1unit D2unit D3unit D4unit D5unit D6unit D7unit D8unit D9unit eaunit eAunit ebunit eBunit ecunit eCunit edplayer eDplayer eeinteger array eEinteger array efinteger array eFinteger array egstring array eGinteger ehinteger eHinteger eiinteger eIinteger array ejinteger eJinteger array ekinteger eKinteger array elinteger eLstring array emunit eMunit enunit eNunit eounit eOunit epunit ePunit eqinteger array eQinteger array erinteger array eRinteger array esinteger array eSinteger array etmultiboarditem eTmultiboarditem eumultiboard eUtrigger evinteger array eVgroup ew=CreateGroup()string eW="No Mode"unit exunit eXunit eyunit eYinteger array eztrigger eZboolean array e0trigger e1endglobalsfunction e2 takes handle h returns integerreturn hreturn 0endfunctionfunction e3 takes nothing returns nothingcall FlushGameCache(InitGameCache("DotACache.x"))set AG=InitGameCache("DotACache.x")endfunctionfunction e4 takes handle h returns stringreturn I2S(e2(h))endfunctionfunction e5 takes string e6 returns nothingcall FlushStoredMission(AG,e6)endfunctionfunction e7 takes string e6,string e8,handle e9 returns nothingcall StoreInteger(AG,e6,e8,e2(e9))endfunctionfunction Ea takes string e6,string e8,integer EA returns nothingcall StoreInteger(AG,e6,e8,EA)endfunctionfunction Eb takes string e6,string e8,real EA returns nothingcall StoreReal(AG,e6,e8,EA)endfunctionfunction EB takes string e6,string e8,string EA returns nothingcall StoreString(AG,e6,e8,EA)endfunctionfunction Ec takes string e6,string e8,boolean EA returns nothingcall StoreBoolean(AG,e6,e8,EA)endfunctionfunction EC takes string e6,string e8 returns unitreturn GetStoredInteger(AG,e6,e8)return nullendfunctionfunction Ed takes string e6,string e8 returns playerreturn GetStoredInteger(AG,e6,e8)return nullendfunctionfunction ED takes string e6,string e8 returns timerreturn GetStoredInteger(AG,e6,e8)return nullendfunctionfunction Ee takes string e6,string e8 returns triggerreturn GetStoredInteger(AG,e6,e8)return nullendfunctionfunction EE takes string e6,string e8 returns groupreturn GetStoredInteger(AG,e6,e8)return nullendfunctionfunction Ef takes string e6,string e8 returns effectreturn GetStoredInteger(AG,e6,e8)return nullendfunctionfunction EF takes string e6,string e8 returns lightningreturn GetStoredInteger(AG,e6,e8)return nullendfunctionfunction Eg takes string e6,string e8 returns locationreturn GetStoredInteger(AG,e6,e8)return nullendfunctionfunction EG takes string e6,string e8 returns triggeractionreturn GetStoredInteger(AG,e6,e8)return nullendfunctionfunction Eh takes string e6,string e8 returns itemreturn GetStoredInteger(AG,e6,e8)return nullendfunctionfunction EH takes string e6,string e8 returns integerreturn GetStoredInteger(AG,e6,e8)endfunctionfunction Ei takes string e6,string e8 returns realreturn GetStoredReal(AG,e6,e8)endfunctionfunction EI takes string e6,string e8 returns booleanreturn GetStoredBoolean(AG,e6,e8)endfunctionfunction Ej takes string e6,string e8 returns stringreturn GetStoredString(AG,e6,e8)endfunctionfunction EJ takes player Ek returns booleanif(Ek==Ac[0])thenreturn trueendifif(Ek==Ac[1])thenreturn trueendifif(Ek==Ac[2])thenreturn trueendifif(Ek==Ac[3])thenreturn trueendifif(Ek==Ac[4])thenreturn trueendifif(Ek==Ac[5])thenreturn trueendifreturn falseendfunctionfunction EK takes player Ek returns booleanif(Ek==AC[0])thenreturn trueendifif(Ek==AC[1])thenreturn trueendifif(Ek==AC[2])thenreturn trueendifif(Ek==AC[3])thenreturn trueendifif(Ek==AC[4])thenreturn trueendifif(Ek==AC[5])thenreturn trueendifreturn falseendfunctionfunction El takes player EL returns booleanif(GetPlayerSlotState(EL)==PLAYER_SLOT_STATE_PLAYING)thenif(GetPlayerController(EL)==MAP_CONTROL_USER)thenreturn trueendifendifreturn falseendfunctionfunction Em takes player EL returns booleanreturn GetPlayerSlotState(EL)==PLAYER_SLOT_STATE_EMPTYendfunctionfunction En takes nothing returns nothingif(El(GetEnumPlayer()))thenset bj_forceCountPlayers=bj_forceCountPlayers+1endifendfunctionfunction EN takes force f returns integerset bj_forceCountPlayers=0call ForForce(f,function En)return bj_forceCountPlayersendfunctionfunction Eo takes nothing returns nothingif GetPlayerSlotState(GetEnumPlayer())==PLAYER_SLOT_STATE_PLAYING thenif GetEnumPlayer()!=Player(13)and GetEnumPlayer()!=Player(14)thenset bj_forceCountPlayers=bj_forceCountPlayers+1endifendifendfunctionfunction EO takes force f returns integerset bj_forceCountPlayers=0call ForForce(f,function Eo)return bj_forceCountPlayersendfunctionfunction Ep takes integer EP,player EL returns nothingcall SetPlayerTechMaxAllowed(EL,EP,0)set B[GetUnitPointValueByType(EP)]=trueendfunctionfunction Eq takes integer EP returns nothingcall Ep(EP,Ac[1])call Ep(EP,Ac[2])call Ep(EP,Ac[3])call Ep(EP,Ac[4])call Ep(EP,Ac[5])call Ep(EP,AC[1])call Ep(EP,AC[2])call Ep(EP,AC[3])call Ep(EP,AC[4])call Ep(EP,AC[5])endfunctionfunction EQ takes integer EP returns nothingcall SetPlayerTechMaxAllowed(Ac[1],EP,0)call SetPlayerTechMaxAllowed(Ac[2],EP,0)call SetPlayerTechMaxAllowed(Ac[3],EP,0)call SetPlayerTechMaxAllowed(Ac[4],EP,0)call SetPlayerTechMaxAllowed(Ac[5],EP,0)call SetPlayerTechMaxAllowed(AC[1],EP,0)call SetPlayerTechMaxAllowed(AC[2],EP,0)call SetPlayerTechMaxAllowed(AC[3],EP,0)call SetPlayerTechMaxAllowed(AC[4],EP,0)call SetPlayerTechMaxAllowed(AC[5],EP,0)endfunctionfunction Er takes player EL returns nothinglocal integer ER=ehlocal integer Es=eHloopexitwhen ER>Escall SetPlayerTechMaxAllowed(EL,eg[ER],0)set ER=ER+1endloopset ER=eiset Es=eIloopexitwhen ER>Escall SetPlayerTechMaxAllowed(EL,eg[ER],0)set ER=ER+1endloopcall SetPlayerTechMaxAllowed(EL,'E01L',0)endfunctionfunction ES takes nothing returns nothingcall Er(Ac[1])call Er(Ac[2])call Er(Ac[3])call Er(Ac[4])call Er(Ac[5])call Er(AC[1])call Er(AC[2])call Er(AC[3])call Er(AC[4])call Er(AC[5])endfunctionfunction Et takes nothing returns nothingcall SetPlayerTechMaxAllowed(Ac[1],'E01L',0)call SetPlayerTechMaxAllowed(Ac[2],'E01L',0)call SetPlayerTechMaxAllowed(Ac[3],'E01L',0)call SetPlayerTechMaxAllowed(Ac[4],'E01L',0)call SetPlayerTechMaxAllowed(Ac[5],'E01L',0)call SetPlayerTechMaxAllowed(AC[1],'E01L',0)call SetPlayerTechMaxAllowed(AC[2],'E01L',0)call SetPlayerTechMaxAllowed(AC[3],'E01L',0)call SetPlayerTechMaxAllowed(AC[4],'E01L',0)call SetPlayerTechMaxAllowed(AC[5],'E01L',0)endfunctionfunction EndGameButton takes nothing returns nothingcall EndGame(true)endfunctionfunction ET takes player Eu returns nothinglocal trigger t=CreateTrigger()local dialog d=DialogCreate()call RemovePlayer(Eu,PLAYER_GAME_RESULT_DEFEAT)set bj_changeLevelShowScores=truecall DialogSetMessage(d,"Defeat!")set t=CreateTrigger()call TriggerRegisterDialogButtonEvent(t,DialogAddButton(d,"Quit Game",GetLocalizedHotkey("GAMEOVER_QUIT_MISSION")))call TriggerAddAction(t,function CustomDefeatQuitBJ)call DialogDisplay(Eu,d,true)call VolumeGroupSetVolumeForPlayerBJ(Eu,SOUND_VOLUMEGROUP_UI,1.)call StartSoundForPlayerBJ(Eu,bj_defeatDialogSound)endfunctionfunction EU takes player Eu returns nothinglocal trigger t=CreateTrigger()local dialog d=DialogCreate()call RemovePlayer(Eu,PLAYER_GAME_RESULT_VICTORY)set bj_changeLevelShowScores=truecall DialogSetMessage(d,GetLocalizedString("GAMEOVER_VICTORY_MSG"))set t=CreateTrigger()call TriggerRegisterDialogButtonEvent(t,DialogAddButton(d,"Quit Game",GetLocalizedHotkey("GAMEOVER_QUIT_MISSION")))call TriggerAddAction(t,function CustomVictoryQuitBJ)call DialogDisplay(Eu,d,true)call VolumeGroupSetVolumeForPlayerBJ(Eu,SOUND_VOLUMEGROUP_UI,1.)call StartSoundForPlayerBJ(Eu,bj_victoryDialogSound)endfunctionfunction Ev takes nothing returns booleanreturn IsUnitAlly(GetFilterUnit(),GetOwningPlayer(Ai))and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>0 and(GetOwningPlayer(GetFilterUnit())==Ac[0])or(GetOwningPlayer(GetFilterUnit())==AC[0])endfunctionfunction EV takes unit Ew,real EW,real Ex returns booleanlocal group EX=CreateGroup()local boolexpr Ey=Condition(function Ev)local real xlocal real yif EJ(GetOwningPlayer(Ew))thenset x=4575set y=4375elseset x=-5000set y=-5500endifif(x-EW)*(x-EW)+(y-Ex)*(y-Ex)>9000000 thenreturn falseendifset Ai=Ewcall GroupEnumUnitsInRange(EX,x,y,3000,Ey)call DestroyBoolExpr(Ey)if CountUnitsInGroup(EX)>0 thencall DestroyGroup(EX)return falseendifcall DestroyGroup(EX)return trueendfunctionfunction EY takes nothing returns nothinglocal integer ERlocal integer Eslocal integer Ez=0set Af=ehset ER=ehset Es=eHloopexitwhen ER>Esset Ez=Ez+1set Ag[Ez]=ERset ER=ER+1endloopset ER=eiset Es=eIloopexitwhen ER>Esset Ez=Ez+1set Ag[Ez]=ERset ER=ER+1endloopset AF=Ezendfunctionfunction EZ takes nothing returns integerlocal integer E0=GetRandomInt(Af,AF)local integer E1=Ag[E0]set E1=Ag[E0]if(Af==AF)thenset Ag[E0]=0return E1endifif(E0==AF)thenset AF=AF-1return E1endifset Ag[E0]=Ag[AF]set AF=AF-1return E1endfunctionfunction E2 takes unit Ew returns booleanreturn GetUnitAbilityLevel(Ew,'B01T')>0 or GetUnitAbilityLevel(Ew,'BNsi')>0 or GetUnitAbilityLevel(Ew,'B01X')>0 or GetUnitAbilityLevel(Ew,'BNdo')>0 or GetUnitAbilityLevel(Ew,'B02M')>0 or GetUnitAbilityLevel(Ew,'Bhea')>0 or GetUnitAbilityLevel(Ew,'B05V')>0endfunctionfunction E3 takes string E4 returns integerif E4=="a"thenreturn 10elseif E4=="b"thenreturn 11elseif E4=="c"thenreturn 12elseif E4=="d"thenreturn 13elseif E4=="e"thenreturn 14elseif E4=="f"thenreturn 15elsereturn S2I(E4)endifendfunctionfunction E5 takes string E6 returns integerreturn E3(SubString(E6,0,1))*16+E3(SubString(E6,1,2))endfunctionfunction E7 takes player Eu returns integerreturn E5(SubString(I[GetPlayerId(Eu)],4,6))endfunctionfunction E8 takes player Eu returns integerreturn E5(SubString(I[GetPlayerId(Eu)],6,8))endfunctionfunction E9 takes player Eu returns integerreturn E5(SubString(I[GetPlayerId(Eu)],8,10))endfunctionfunction fa takes integer fA returns booleanlocal integer i=1loopexitwhen i>A3if fA==A2[i]thenreturn falseendifset i=i+1endloopreturn trueendfunctionfunction fb takes player Eu,integer fB returns nothinglocal texttag t=CreateTextTag()call SetPlayerState(Eu,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(Eu,PLAYER_STATE_RESOURCE_GOLD)+fB)call SetTextTagText(t,"+"+I2S(fB),.025)call SetTextTagPosUnit(t,ay[GetPlayerId(Eu)],0)call SetTextTagColor(t,255,220,0,255)call SetTextTagVelocity(t,0,.03)if GetLocalPlayer()==Eu thencall SetTextTagVisibility(t,true)elsecall SetTextTagVisibility(t,false)endifcall SetTextTagFadepoint(t,2)call SetTextTagLifespan(t,3)call SetTextTagPermanent(t,false)endfunctionfunction fc takes player Eu returns nothinglocal integer x=1if IsPlayerAlly(Eu,Ac[0])thenloopexitwhen x>5if Ac[x]!=Eu thencall fb(Ac[x],200)endifset x=x+1endloopendifset x=1if IsPlayerAlly(Eu,AC[0])thenloopexitwhen x>5if AC[x]!=Eu thencall fb(AC[x],200)endifset x=x+1endloopendifendfunctionfunction fC takes unit Ew returns nothingif IsUnitAlly(GetDyingUnit(),GetOwningPlayer(GetKillingUnit()))thenreturnendifif GetOwningPlayer(Ew)==Ac[0]thencall fb(Ac[1],200)call fb(Ac[2],200)call fb(Ac[3],200)call fb(Ac[4],200)call fb(Ac[5],200)elseif IsUnitAlly(Ew,Ac[0])thencall fc(GetOwningPlayer(Ew))endifif GetOwningPlayer(Ew)==AC[0]thencall fb(AC[1],200)call fb(AC[2],200)call fb(AC[3],200)call fb(AC[4],200)call fb(AC[5],200)elseif IsUnitAlly(Ew,AC[0])thencall fc(GetOwningPlayer(Ew))endifendfunctionfunction fd takes player EL returns nothinglocal integer fDlocal integer felocal location fElocal integer E0local boolean GotHero=falseset ab[GetPlayerId(EL)]=trueif EJ(EL) thenset fD=ehset fe=eHset fE=GetRectCenter(bs)elseset fD=eiset fe=eIset fE=GetRectCenter(bR)endifif U thenif(GetRandomInt(1,2)==1)thenset fD=ehset fe=eHelseset fD=eiset fe=eIendifendifloopset E0=GetRandomInt(fD,fe)exitwhen B[E0]==falseendloopif At==false thencall EQ(eg[E0])set B[E0]=trueendifcall CreateUnitAtLoc(EL,eg[E0],fE,0)call RemoveLocation(fE)endfunctionfunction ff takes boolean fF,boolean fg returns integerlocal integer fDlocal integer feif fF and fg thenif(GetRandomInt(1,2)==1)thenset fD=ehset fe=eHelseset fD=eiset fe=eIendifelseif fF thenset fD=ehset fe=eHelseset fD=eiset fe=eIendifreturn GetRandomInt(fD,fe)endfunctionfunction fG takes unit Ew returns stringreturn eG[GetUnitPointValue(Ew)]endfunctionfunction fh takes player Eu,string fH returns nothinglocal sound fi=CreateSound(fH,false,false,false,10,10,"DefaultEAXON")if(GetLocalPlayer()==Eu)thencall StartSound(fi)endifcall KillSoundWhenDone(fi)endfunctionfunction fI takes player fj,string fJ returns nothinglocal sound fk=CreateSoundFromLabel("InterfaceError",false,false,false,10,10)if(GetLocalPlayer()==fj)thenif(fJ!="")and(fJ!=null)thencall ClearTextMessages()call DisplayTimedTextToPlayer(fj,.5,-1.,2.,"|cffffcc00"+fJ+"|r")endifcall StartSound(fk)endifcall KillSoundWhenDone(fk)endfunctionfunction fK takes player fj,string fJ returns nothinglocal sound fk=CreateSoundFromLabel("InterfaceError",false,false,false,10,10)if(GetLocalPlayer()==fj)thenif(fJ!="")and(fJ!=null)thencall DisplayTimedTextToPlayer(fj,0,0,5.,"|cffffcc00"+fJ+"|r")endifcall StartSound(fk)endifcall KillSoundWhenDone(fk)endfunctionfunction fl takes string fL,unit fm,real fM,integer fn,integer fN,integer fo,integer fO returns nothinglocal texttag t=CreateTextTag()call SetTextTagText(t,fL,.02)call SetTextTagPosUnit(t,fm,.0)call SetTextTagColor(t,fn,fN,fo,fO)call SetTextTagVelocity(t,0,.01)call SetTextTagVisibility(t,true)call SetTextTagFadepoint(t,2.)call SetTextTagLifespan(t,fM)call SetTextTagPermanent(t,false)endfunctionfunction fp takes unit fP returns nothingcall PauseUnit(fP,true)call IssueImmediateOrderById(fP,851972)call PauseUnit(fP,false)endfunctionfunction fq takes nothing returns booleanif(GetTimeOfDay()>6. and GetTimeOfDay()<18.)thenreturn trueelsereturn falseendifendfunctionfunction fQ takes string fr,boolean fR returns nothingif fR thencall ExecuteFunc(fr)endifendfunctionfunction fs takes real x returns reallocal real fS=GetRectMinX(bj_mapInitialPlayableArea)+50if(x<fS)thenreturn fSendifset fS=GetRectMaxX(bj_mapInitialPlayableArea)-50if(x>fS)thenreturn fSendifreturn xendfunctionfunction ft takes real y returns reallocal real fS=GetRectMinY(bj_mapInitialPlayableArea)+50if(y<fS)thenreturn fSendifset fS=GetRectMaxY(bj_mapInitialPlayableArea)-50if(y>fS)thenreturn fSendifreturn yendfunctionfunction fT takes integer fU returns nothinglocal unit u=CreateUnit(Player(15),'e01W',0,0,270)call UnitAddAbility(u,fU)call UnitRemoveAbility(u,fU)call RemoveUnit(u)endfunctionfunction fv takes nothing returns nothingcall KillDestructable(GetEnumDestructable())endfunctionfunction fV takes unit fw returns nothingcall e5(e4(fw))call RemoveUnit(fw)endfunctionfunction fW takes unit Ew,integer fX,integer fy returns nothingif GetUnitAbilityLevel(Ew,fX)==0 thencall UnitAddAbility(Ew,fX)endifcall SetUnitAbilityLevel(Ew,fX,fy)endfunctionfunction fY takes unit Ew,integer fz returns itemlocal integer fZlocal item f0set fZ=0loopexitwhen fZ>5set f0=UnitItemInSlot(Ew,fZ)if(f0!=null)and(GetItemTypeId(f0)==fz)thenreturn UnitItemInSlot(Ew,fZ)endifset fZ=fZ+1endloopreturn nullendfunctionfunction f1 takes integer a,integer b returns integerif(a<b)thenreturn aelsereturn bendifendfunctionfunction f2 takes integer a,integer b returns integerif(a<b)thenreturn belsereturn aendifendfunctionfunction f3 takes integer f4,integer a,integer b returns integerreturn f2(f1(f4,b),a)endfunctionfunction f5 takes real a,real b returns realif(a<b)thenreturn aelsereturn bendifendfunctionfunction f6 takes real a,real b returns realif(a<b)thenreturn belsereturn aendifendfunctionfunction f7 takes nothing returns nothinglocal string f8=e4(GetExpiredTimer())local unit Ew=EC(f8,"Unit")call SetUnitState(Ew,UNIT_STATE_LIFE,GetUnitState(Ew,UNIT_STATE_LIFE)+Ei(f8,"Damage"))endfunctionfunction f9 takes unit Ew,real Fa returns nothinglocal timer t=CreateTimer()local string f8=e4(t)call Eb(f8,"Damage",Fa)call e7(f8,"Unit",Ew)call TimerStart(t,0,false,function f7)endfunctionfunction FA takes unit Ew,real Fa returns nothinglocal real Fb=GetUnitState(Ew,UNIT_STATE_MAX_LIFE)local real FB=GetUnitState(Ew,UNIT_STATE_LIFE)if Fa>(Fb-FB)thenif Fa>=FB thencall SetUnitState(Ew,UNIT_STATE_LIFE,Fb)call f9(Ew,Fa-(Fb-FB))elsecall f9(Ew,Fa)endifelsecall SetUnitState(Ew,UNIT_STATE_LIFE,GetUnitState(Ew,UNIT_STATE_LIFE)+Fa)endifendfunctionfunction Fc takes unit FC,unit Fd,real FD returns booleanlocal real Fe=GetUnitX(FC)local real FE=GetUnitY(FC)local real EW=GetUnitX(Fd)local real Ex=GetUnitY(Fd)if((Fe-EW)*(Fe-EW)+(FE-Ex)*(FE-Ex))<FD*FD thenreturn trueelsereturn falseendifendfunctionfunction Ff takes unit FC,unit Fd returns reallocal real Fe=GetUnitX(FC)local real FE=GetUnitY(FC)local real EW=GetUnitX(Fd)local real Ex=GetUnitY(Fd)if FC==null or Fd==null thenreturn 0x540BE3FFelsereturn SquareRoot((Fe-EW)*(Fe-EW)+(FE-Ex)*(FE-Ex))endifendfunctionfunction FF takes unit FC,location Fd returns reallocal real Fe=GetUnitX(FC)local real FE=GetUnitY(FC)local real EW=GetLocationX(Fd)local real Ex=GetLocationY(Fd)if FC==null thenreturn 0x540BE3FFelsereturn SquareRoot((Fe-EW)*(Fe-EW)+(FE-Ex)*(FE-Ex))endifendfunctionfunction Fg takes unit Ew returns nothingcall SetUnitState(Ew,UNIT_STATE_MANA,GetUnitState(Ew,UNIT_STATE_MAX_MANA))endfunctionfunction FG takes force Fh,real fM,string FH returns nothingif(IsPlayerInForce(GetLocalPlayer(),Fh))thencall DisplayTimedTextToPlayer(GetLocalPlayer(),0,A6,fM,FH)endifendfunctionfunction Fi takes unit Ew,real FI returns nothingcall SetUnitState(Ew,UNIT_STATE_LIFE,GetUnitState(Ew,UNIT_STATE_LIFE)+FI)endfunctionfunction Fj takes trigger t returns nothingcall DestroyTrigger(t)endfunctionfunction FJ takes nothing returns nothingcall PauseAllUnitsBJ(true)endfunctionfunction Fk takes nothing returns nothinglocal timer t=CreateTimer()call TimerStart(t,1,true,function FJ)endfunctionfunction FK takes nothing returns nothinglocal trigger t=GetTriggeringTrigger()local string f8=e4(t)call DestroyEffect(Ef(f8,"fx"))call e5(f8)call Fj(t)endfunctionfunction Fl takes string FL,unit Ew,string Fm,integer fM returns nothinglocal effect fx=AddSpecialEffectTarget(FL,Ew,Fm)local trigger t=CreateTrigger()local string f8=e4(t)call e7(f8,"fx",fx)call TriggerRegisterUnitEvent(t,Ew,EVENT_UNIT_DEATH)call TriggerRegisterTimerEvent(t,fM,false)call TriggerAddAction(t,function FK)endfunctionfunction FM takes unit Ew,integer fz returns itemlocal integer fZ=0local item f0loopexitwhen fZ==6set f0=UnitItemInSlot(Ew,fZ)if f0!=null and GetItemTypeId(f0)==fz thenreturn f0endifset fZ=fZ+1endloopreturn nullendfunctionfunction Fn takes timer t returns nothingcall PauseTimer(t)call e5(e4(t))call DestroyTimer(t)endfunctionfunction FN takes real x1,real y1,real x2,real y2 returns realreturn SquareRoot((x1-x2)*(x1-x2)+(y1-y2)*(y1-y2))endfunctionfunction Fo takes unit a,unit b returns realreturn bj_RADTODEG*Atan2(GetUnitY(b)-GetUnitY(a),GetUnitX(b)-GetUnitX(a))endfunctionfunction FO takes nothing returns nothingcall DestroyLightning(EF(e4(GetExpiredTimer()),"Lightning"))endfunctionfunction Fp takes string FP,real x1,real y1,real x2,real y2,real r,real g,real b,real a,real fM returns nothinglocal timer t=CreateTimer()local lightning Fq=AddLightning(FP,true,x1,y1,x2,y2)call SetLightningColor(Fq,r,g,b,a)call e7(e4(t),"Lightning",Fq)call TimerStart(t,fM,false,function FO)endfunctionfunction FQ takes unit FC,unit Fd,integer Fr,real Fa returns nothingif Fr==0 thenreturnendifif Fr==dr thencall UnitDamageTarget(FC,Fd,Fa,true,true,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_FIRE,WEAPON_TYPE_WHOKNOWS)elseif Fr==dR thencall UnitDamageTarget(FC,Fd,Fa,true,true,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)elseif Fr==ds thencall UnitDamageTarget(FC,Fd,Fa,true,true,ATTACK_TYPE_HERO,DAMAGE_TYPE_FIRE,WEAPON_TYPE_WHOKNOWS)endifendfunctionfunction FR takes nothing returns nothingcall e3()call SetFloatGameState(GAME_STATE_TIME_OF_DAY,6.)call SuspendTimeOfDay(false)call SetTimeOfDayScale(.5)call SetSkyModel("Environment\\Sky\\FoggedSky\\FoggedSky.mdl")call SetCreepCampFilterState(true)set bB="DotA Allstars"call TimerStart(n,99999.,false,null)set bF=AddWeatherEffect(bj_mapInitialPlayableArea,'RAhr')set bf=AddWeatherEffect(bj_mapInitialPlayableArea,'SNbs')set Ac[0]=Player(0)set Ac[1]=Player(1)set Ac[2]=Player(2)set Ac[3]=Player(3)set Ac[4]=Player(4)set Ac[5]=Player(5)set AC[0]=Player(6)set AC[1]=Player(7)set AC[2]=Player(8)set AC[3]=Player(9)set AC[4]=Player(10)set AC[5]=Player(11)set Ad=Player(12)set AD=Player(15)call SetUnitPathing(dP,false)call SetUnitPathing(dq,false)call SetUnitPathing(dQ,false)call SetUnitPathing(dp,false)call SetUnitPathing(dO,false)call SetUnitInvulnerable(dO,true)call SetUnitInvulnerable(dp,true)call SetUnitInvulnerable(dQ,true)call SetUnitInvulnerable(dq,true)call SetUnitInvulnerable(dP,true)set aD=GetUnitLoc(dO)set ae=GetUnitLoc(dP)set aE=GetUnitLoc(dQ)set af=GetUnitLoc(dp)set aF=GetUnitLoc(dq)set Ao='A06G'set AO[1]=aeset AO[2]=afset AO[3]=aEset AO[4]=aFset AO[5]=aDset an=GetRectCenter(bK)set aN=GetRectCenter(bl)set ao=GetRectCenter(bk)set aO=GetRectCenter(bo)set aP=GetRectCenter(bO)set ap=GetRectCenter(bN)set aq=GetRectCenter(bQ)set ar=GetRectCenter(bq)set aQ=GetRectCenter(bP)set aR=GetRectCenter(bn)set aS=GetRectCenter(bM)set as=GetRectCenter(bm)set at=GetRectCenter(bS)set aT=GetRectCenter(br)set AW=trueendfunctionfunction Fs takes nothing returns nothingset dS=CreateUnit(Ac[0],'nfoh',-6720,-5920,270)set dt=CreateUnit(Ac[0],'hC95',-6400,-5952,270)set dT=CreateUnit(Ac[0],'n01K',-6720,-5504,270)set du=CreateUnit(Ac[0],'nC38',-6720,-5696,270)set dU=CreateUnit(Ac[0],'edos',-6080,-5952,270)set dv=CreateUnit(Ac[0],'n00V',-6208,-5312,270)set dV=CreateUnit(Ac[0],'n00W',-6336,-5248,270)set dw=CreateUnit(Ac[0],'n002',-6464,-5248,270)set dW=CreateUnit(Ac[0],'n00X',-6592,-5312,270)set dX=CreateUnit(Ac[0],'n009',-6720,-5184,270)set dy=CreateUnit(Ac[0],'etol',-4800,-6912,270)set dY=CreateUnit(Ac[0],'e00R',-6112,1504,270)set dz=CreateUnit(Ac[0],'e00R',-1504,-1824,270)set dZ=CreateUnit(Ac[0],'e00R',4960,-6752,270)set d0=CreateUnit(Ac[0],'e011',-6112,-1312,270)set d1=CreateUnit(Ac[0],'e011',-3488,-3296,270)set d2=CreateUnit(Ac[0],'e011',-544,-6688,270)set d3=CreateUnit(Ac[0],'e00S',-6240,-3808,270)set d4=CreateUnit(Ac[0],'e00S',-4384,-4448,270)set d5=CreateUnit(Ac[0],'e00S',-3424,-6560,270)set d6=CreateUnit(Ac[0],'e019',-4896,-6560,270)set d7=CreateUnit(Ac[0],'e019',-4512,-6816,270)set d8=CreateUnit(Ac[0],'eaom',-6400,-4224,270)set d9=CreateUnit(Ac[0],'eaom',-4288,-4992,270)set Da=CreateUnit(Ac[0],'eaom',-3776,-6720,270)set DA=CreateUnit(Ac[0],'eaoe',-5952,-4160,270)set Db=CreateUnit(Ac[0],'eaoe',-4800,-4608,270)set DB=CreateUnit(Ac[0],'eaoe',-3776,-6272,270)set Dc=CreateUnit(Ac[0],'emow',-5856,-4832,270)set DC=CreateUnit(Ac[0],'emow',-5280,-4192,270)set Dd=CreateUnit(Ac[0],'emow',-5280,-5344,270)set DD=CreateUnit(Ac[0],'emow',-4896,-5728,270)set De=CreateUnit(Ac[0],'emow',-4512,-6432,270)set DE=CreateUnit(Ac[0],'emow',-3744,-5536,270)set Df=CreateUnit(Ac[0],'emow',-3488,-5856,270)set DF=CreateUnit(Ac[0],'emow',-4256,-6944,270)set Dg=CreateUnit(Ac[0],'emow',-3360,-7008,270)set DG=CreateUnit(Ac[0],'emow',-5664,-3872,270)set Dh=CreateUnit(Ac[0],'eaow',-5440,-4800,270)set DH=CreateUnit(Ac[0],'edob',-3840,-5184,270)call SetUnitColor(dt,ConvertPlayerColor(0))call SetUnitColor(du,ConvertPlayerColor(12))call SetUnitColor(dT,ConvertPlayerColor(12))call SetUnitColor(dv,ConvertPlayerColor(12))call SetUnitColor(dV,ConvertPlayerColor(12))call SetUnitColor(dw,ConvertPlayerColor(12))call SetUnitColor(dW,ConvertPlayerColor(12))call SetUnitColor(dX,ConvertPlayerColor(12))call SetUnitInvulnerable(dY,true)call SetUnitInvulnerable(dz,true)call SetUnitInvulnerable(dZ,true)call SetUnitInvulnerable(d0,true)call SetUnitInvulnerable(d1,true)call SetUnitInvulnerable(d2,true)call SetUnitInvulnerable(d3,true)call SetUnitInvulnerable(d4,true)call SetUnitInvulnerable(d5,true)call SetUnitInvulnerable(d6,true)call SetUnitInvulnerable(d7,true)call SetUnitInvulnerable(dy,true)call SetUnitInvulnerable(d8,true)call SetUnitInvulnerable(d9,true)call SetUnitInvulnerable(Da,true)call SetUnitInvulnerable(DA,true)call SetUnitInvulnerable(Db,true)call SetUnitInvulnerable(DB,true)call SetUnitInvulnerable(Dh,true)call SetUnitInvulnerable(DH,true)call SetUnitInvulnerable(Dc,true)call SetUnitInvulnerable(DC,true)call SetUnitInvulnerable(Dd,true)call SetUnitInvulnerable(DD,true)call SetUnitInvulnerable(De,true)call SetUnitInvulnerable(DE,true)call SetUnitInvulnerable(Df,true)call SetUnitInvulnerable(DF,true)call SetUnitInvulnerable(Dg,true)call SetUnitInvulnerable(DG,true)endfunctionfunction FS takes nothing returns nothingset Di=CreateUnit(AC[0],'ndfl',6272,5504,270)set DI=CreateUnit(AC[0],'nC35',6464,5120,270)set Dj=CreateUnit(AC[0],'n01K',5952,5568,270)set DJ=CreateUnit(AC[0],'nC38',6080,5568,270)set Dk=CreateUnit(AC[0],'ugrv',6464,4736,270)set DK=CreateUnit(AC[0],'n00V',5696,5120,270)set Dl=CreateUnit(AC[0],'n00W',5568,5248,270)set DL=CreateUnit(AC[0],'n002',5568,5376,270)set Dm=CreateUnit(AC[0],'n00X',5696,5504,270)set Dn=CreateUnit(AC[0],'n009',5568,5696,270)set DN=CreateUnit(AC[0],'unpl',4992,4544,270)set Do=CreateUnit(AC[0],'u00M',-4704,5920,270)set DO=CreateUnit(AC[0],'u00M',1056,-160,270)set Dp=CreateUnit(AC[0],'u00M',6048,-2080,270)set DP=CreateUnit(AC[0],'u00D',32,5856,270)set Dq=CreateUnit(AC[0],'u00D',2400,1696,270)set DQ=CreateUnit(AC[0],'u00D',6112,-96,270)set Dr=CreateUnit(AC[0],'u00N',3168,5920,270)set DR=CreateUnit(AC[0],'u00N',3616,3296,270)set Ds=CreateUnit(AC[0],'u00N',6048,2784,270)set DS=CreateUnit(AC[0],'u00T',4640,4576,270)set Dt=CreateUnit(AC[0],'u00T',5088,4192,270)set DT=CreateUnit(AC[0],'usep',3776,5888,270)set Du=CreateUnit(AC[0],'usep',4096,3392,270)set Dv=CreateUnit(AC[0],'usep',6208,3264,270)set DV=CreateUnit(AC[0],'utod',3520,5376,270)set Dw=CreateUnit(AC[0],'utod',3776,3840,270)set Dx=CreateUnit(AC[0],'utod',5696,3264,270)set DX=CreateUnit(AC[0],'uzig',3168,4000,270)set Dy=CreateUnit(AC[0],'uzig',4192,5536,270)set DY=CreateUnit(AC[0],'uzig',4128,4512,270)set Dz=CreateUnit(AC[0],'uzig',4640,3680,270)set DZ=CreateUnit(AC[0],'uzig',4832,3104,270)set D0=CreateUnit(AC[0],'uzig',5408,2592,270)set D1=CreateUnit(AC[0],'uzig',5408,3296,270)set D2=CreateUnit(AC[0],'uzig',6112,4000,270)set D3=CreateUnit(AC[0],'uzig',3040,5088,270)set D4=CreateUnit(AC[0],'uzig',6304,3744,270)set D5=CreateUnit(AC[0],'usap',3520,4608,270)set D6=CreateUnit(AC[0],'uslh',4096,2624,270)call SetUnitColor(DI,ConvertPlayerColor(6))call SetUnitColor(DJ,ConvertPlayerColor(12))call SetUnitColor(Dj,ConvertPlayerColor(12))call SetUnitColor(DK,ConvertPlayerColor(12))call SetUnitColor(Dl,ConvertPlayerColor(12))call SetUnitColor(DL,ConvertPlayerColor(12))call SetUnitColor(Dm,ConvertPlayerColor(12))call SetUnitColor(Dn,ConvertPlayerColor(12))call SetUnitInvulnerable(Do,true)call SetUnitInvulnerable(DO,true)call SetUnitInvulnerable(Dp,true)call SetUnitInvulnerable(DP,true)call SetUnitInvulnerable(Dq,true)call SetUnitInvulnerable(DQ,true)call SetUnitInvulnerable(Dr,true)call SetUnitInvulnerable(DR,true)call SetUnitInvulnerable(Ds,true)call SetUnitInvulnerable(DS,true)call SetUnitInvulnerable(Dt,true)call SetUnitInvulnerable(DN,true)call SetUnitInvulnerable(DT,true)call SetUnitInvulnerable(Du,true)call SetUnitInvulnerable(Dv,true)call SetUnitInvulnerable(DV,true)call SetUnitInvulnerable(Dw,true)call SetUnitInvulnerable(Dx,true)call SetUnitInvulnerable(D5,true)call SetUnitInvulnerable(D6,true)call SetUnitInvulnerable(DX,true)call SetUnitInvulnerable(Dy,true)call SetUnitInvulnerable(DY,true)call SetUnitInvulnerable(Dz,true)call SetUnitInvulnerable(DZ,true)call SetUnitInvulnerable(D0,true)call SetUnitInvulnerable(D1,true)call SetUnitInvulnerable(D2,true)call SetUnitInvulnerable(D3,true)call SetUnitInvulnerable(D4,true)endfunctionfunction Ft takes nothing returns nothingset D7=CreateUnit(Player(1),'ncop',-6528,-6848,270)set D8=CreateUnit(Player(2),'ncop',-6400,-6848,270)set D9=CreateUnit(Player(3),'ncop',-6272,-6848,270)set ea=CreateUnit(Player(4),'ncop',-6144,-6848,270)set eA=CreateUnit(Player(5),'ncop',-6016,-6848,270)set eb=CreateUnit(Player(7),'ncop',5824,6464,270)set eB=CreateUnit(Player(8),'ncop',5952,6464,270)set ec=CreateUnit(Player(9),'ncop',6080,6464,270)set eC=CreateUnit(Player(10),'ncop',6208,6464,270)set ed=CreateUnit(Player(11),'ncop',6336,6464,270)call UnitAddItemToSlotById(D7,'I015',1)call UnitAddItemToSlotById(D8,'I015',1)call UnitAddItemToSlotById(D9,'I015',1)call UnitAddItemToSlotById(ea,'I015',1)call UnitAddItemToSlotById(eA,'I015',1)call UnitAddItemToSlotById(eb,'I015',1)call UnitAddItemToSlotById(eB,'I015',1)call UnitAddItemToSlotById(ec,'I015',1)call UnitAddItemToSlotById(eC,'I015',1)call UnitAddItemToSlotById(ed,'I015',1)endfunctionfunction FT takes nothing returns nothingset eE[GetPlayerId(Ac[1])]=0set ef[GetPlayerId(Ac[1])]=66set eF[GetPlayerId(Ac[1])]=255set eE[GetPlayerId(Ac[2])]=48set ef[GetPlayerId(Ac[2])]=230set eF[GetPlayerId(Ac[2])]=185set eE[GetPlayerId(Ac[3])]=50set ef[GetPlayerId(Ac[3])]=0set eF[GetPlayerId(Ac[3])]=129set eE[GetPlayerId(Ac[4])]=255set ef[GetPlayerId(Ac[4])]=252set eF[GetPlayerId(Ac[4])]=1set eE[GetPlayerId(Ac[5])]=255set ef[GetPlayerId(Ac[5])]=50set eF[GetPlayerId(Ac[5])]=0set eE[GetPlayerId(AC[1])]=220set ef[GetPlayerId(AC[1])]=50set eF[GetPlayerId(AC[1])]=50set eE[GetPlayerId(AC[2])]=50set ef[GetPlayerId(AC[2])]=50set eF[GetPlayerId(AC[2])]=50set eE[GetPlayerId(AC[3])]=75set ef[GetPlayerId(AC[3])]=150set eF[GetPlayerId(AC[3])]=190set eE[GetPlayerId(AC[4])]=16set ef[GetPlayerId(AC[4])]=60set eF[GetPlayerId(AC[4])]=18set eE[GetPlayerId(AC[5])]=68set ef[GetPlayerId(AC[5])]=42set eF[GetPlayerId(AC[5])]=4endfunctionfunction Fu takes nothing returns nothinglocal integer ER=1set AH=Ac[1]loopexitwhen El(AH)or ER>5set ER=ER+1set AH=Ac[ER]endloopif not El(AH)thenset AH=AC[1]set ER=1loopexitwhen El(AH)or ER>5set ER=ER+1set AH=AC[ER]endloopendifendfunctionfunction FU takes nothing returns nothinglocal integer ERlocal integer Esset I[GetPlayerId(Ac[0])]="|c00ff0303"set I[GetPlayerId(Ac[1])]="|c000042ff"set I[GetPlayerId(Ac[2])]="|c001ce6b9"set I[GetPlayerId(Ac[3])]="|c00540081"set I[GetPlayerId(Ac[4])]="|c00fffc01"set I[GetPlayerId(Ac[5])]="|c00ff8000"set I[GetPlayerId(AC[0])]="|c0020c000"set I[GetPlayerId(AC[1])]="|c00e55bb0"set I[GetPlayerId(AC[2])]="|c00959697"set I[GetPlayerId(AC[3])]="|c007ebff1"set I[GetPlayerId(AC[4])]="|c00106246"set I[GetPlayerId(AC[5])]="|c004e2a04"call SetPlayerColor(Ac[0],PLAYER_COLOR_RED)call SetPlayerColor(Ac[1],PLAYER_COLOR_BLUE)call SetPlayerColor(Ac[2],PLAYER_COLOR_CYAN)call SetPlayerColor(Ac[3],PLAYER_COLOR_PURPLE)call SetPlayerColor(Ac[4],PLAYER_COLOR_YELLOW)call SetPlayerColor(Ac[5],PLAYER_COLOR_ORANGE)call SetPlayerColor(AC[0],PLAYER_COLOR_GREEN)call SetPlayerColor(AC[1],PLAYER_COLOR_PINK)call SetPlayerColor(AC[2],PLAYER_COLOR_LIGHT_GRAY)call SetPlayerColor(AC[3],PLAYER_COLOR_LIGHT_BLUE)call SetPlayerColor(AC[4],PLAYER_COLOR_AQUA)call SetPlayerColor(AC[5],PLAYER_COLOR_BROWN)set ER=1set Es=5loopif(El(Ac[ER])==false)thencall SetPlayerName(Ac[ER],"Player "+I2S(ER))endifif(El(AC[ER])==false)thencall SetPlayerName(AC[ER],"Player "+I2S(5+ER))endifset ER=ER+1exitwhen ER>Esendloopendfunctionfunction Fv takes nothing returns nothingcall SetUnitOwner(D7,Ac[1],false)call SetUnitOwner(D8,Ac[2],false)call SetUnitOwner(D9,Ac[3],false)call SetUnitOwner(ea,Ac[4],false)call SetUnitOwner(eA,Ac[5],false)call SetUnitOwner(eb,AC[1],false)call SetUnitOwner(eB,AC[2],false)call SetUnitOwner(ec,AC[3],false)call SetUnitOwner(eC,AC[4],false)call SetUnitOwner(ed,AC[5],false)endfunctionfunction FV takes unit fP returns booleanlocal integer ID=GetUnitTypeId(fP)if ID=='n00V'or ID=='n00W'or ID=='n002'or ID=='n001'or ID=='n00X'or ID=='nC38'or ID=='n01K'or ID=='n009'thenreturn trueendifreturn falseendfunctionfunction Fw takes nothing returns nothingif(GetOwningPlayer(GetEnumUnit())==Player(0))thencall SetUnitOwner(GetEnumUnit(),Ac[0],false)if FV(GetEnumUnit())==false thencall SetUnitColor(GetEnumUnit(),ConvertPlayerColor(0))endifelsecall SetUnitOwner(GetEnumUnit(),AC[0],false)if FV(GetEnumUnit())==false thencall SetUnitColor(GetEnumUnit(),ConvertPlayerColor(6))endifendifendfunctionfunction FW takes nothing returns nothinglocal group EX=CreateGroup()call GroupEnumUnitsOfPlayer(EX,Player(0),null)call ForGroup(EX,function Fw)call GroupClear(EX)call GroupEnumUnitsOfPlayer(EX,Player(6),null)call ForGroup(EX,function Fw)call DestroyGroup(EX)endfunctionfunction Fx takes nothing returns nothinglocal integer Fylocal integer FYlocal integer ERlocal integer Eslocal integer x=0local integer y=0local trigger tif GetPlayerState(Ac[0],PLAYER_STATE_OBSERVER)!=0 or GetPlayerState(AC[0],PLAYER_STATE_OBSERVER)!=0 thenset AQ=trueset Ac[0]=Player(13)set AC[0]=Player(14)set eD=Player(0)set ee=Player(6)call SetAllyColorFilterState(0)loopexitwhen x>5call SetPlayerAlliance(Player(0),Ac[x],ConvertAllianceType(0),true)call SetPlayerAlliance(Player(0),Ac[x],ConvertAllianceType(4),true)call SetPlayerAlliance(Player(0),AC[x],ConvertAllianceType(0),false)call SetPlayerAlliance(Player(0),AC[x],ConvertAllianceType(4),false)set x=x+1endloopendifcall ForceAddPlayer(Ab,Ac[0])call ForceAddPlayer(Ab,Ac[1])call ForceAddPlayer(Ab,Ac[2])call ForceAddPlayer(Ab,Ac[3])call ForceAddPlayer(Ab,Ac[4])call ForceAddPlayer(Ab,Ac[5])call ForceAddPlayer(AB,AC[0])call ForceAddPlayer(AB,AC[1])call ForceAddPlayer(AB,AC[2])call ForceAddPlayer(AB,AC[3])call ForceAddPlayer(AB,AC[4])call ForceAddPlayer(AB,AC[5])call ForceAddPlayer(A4,Ac[1])call ForceAddPlayer(A4,Ac[2])call ForceAddPlayer(A4,Ac[3])call ForceAddPlayer(A4,Ac[4])call ForceAddPlayer(A4,Ac[5])call ForceAddPlayer(A4,AC[1])call ForceAddPlayer(A4,AC[2])call ForceAddPlayer(A4,AC[3])call ForceAddPlayer(A4,AC[4])call ForceAddPlayer(A4,AC[5])if AQ thencall ForceAddPlayer(A4,Player(0))call ForceAddPlayer(A4,Player(6))endifset x=0set y=0loopexitwhen x>5loopexitwhen y>5if(x!=y)thencall SetPlayerAlliance(Ac[x],Ac[y],ConvertAllianceType(0),true)call SetPlayerAlliance(Ac[x],Ac[y],ConvertAllianceType(1),true)call SetPlayerAlliance(Ac[x],Ac[y],ConvertAllianceType(2),true)call SetPlayerAlliance(Ac[x],Ac[y],ConvertAllianceType(3),true)call SetPlayerAlliance(Ac[x],Ac[y],ConvertAllianceType(4),true)call SetPlayerAlliance(Ac[x],Ac[y],ConvertAllianceType(5),true)call SetPlayerAlliance(Ac[x],Ac[y],ConvertAllianceType(6),false)call SetPlayerAlliance(Ac[x],Ac[y],ConvertAllianceType(7),false)call SetPlayerAlliance(AC[x],AC[y],ConvertAllianceType(0),true)call SetPlayerAlliance(AC[x],AC[y],ConvertAllianceType(1),true)call SetPlayerAlliance(AC[x],AC[y],ConvertAllianceType(2),true)call SetPlayerAlliance(AC[x],AC[y],ConvertAllianceType(3),true)call SetPlayerAlliance(AC[x],AC[y],ConvertAllianceType(4),true)call SetPlayerAlliance(AC[x],AC[y],ConvertAllianceType(5),true)call SetPlayerAlliance(AC[x],AC[y],ConvertAllianceType(6),false)call SetPlayerAlliance(AC[x],AC[y],ConvertAllianceType(7),false)call SetPlayerAlliance(Ac[x],AC[y],ConvertAllianceType(0),false)call SetPlayerAlliance(Ac[x],AC[y],ConvertAllianceType(1),false)call SetPlayerAlliance(Ac[x],AC[y],ConvertAllianceType(2),false)call SetPlayerAlliance(Ac[x],AC[y],ConvertAllianceType(3),false)call SetPlayerAlliance(Ac[x],AC[y],ConvertAllianceType(4),false)call SetPlayerAlliance(Ac[x],AC[y],ConvertAllianceType(5),false)call SetPlayerAlliance(Ac[x],AC[y],ConvertAllianceType(6),false)call SetPlayerAlliance(Ac[x],AC[y],ConvertAllianceType(7),false)call SetPlayerAlliance(AC[x],Ac[y],ConvertAllianceType(0),false)call SetPlayerAlliance(AC[x],Ac[y],ConvertAllianceType(1),false)call SetPlayerAlliance(AC[x],Ac[y],ConvertAllianceType(2),false)call SetPlayerAlliance(AC[x],Ac[y],ConvertAllianceType(3),false)call SetPlayerAlliance(AC[x],Ac[y],ConvertAllianceType(4),false)call SetPlayerAlliance(AC[x],Ac[y],ConvertAllianceType(5),false)call SetPlayerAlliance(AC[x],Ac[y],ConvertAllianceType(6),false)call SetPlayerAlliance(AC[x],Ac[y],ConvertAllianceType(7),false)endifset y=y+1endloopset y=0set x=x+1endloopcall SetPlayerTeam(Ac[0],0)call SetPlayerTeam(Ac[1],0)call SetPlayerTeam(Ac[2],0)call SetPlayerTeam(Ac[3],0)call SetPlayerTeam(Ac[4],0)call SetPlayerTeam(Ac[5],0)call SetPlayerTeam(AC[0],1)call SetPlayerTeam(AC[1],1)call SetPlayerTeam(AC[2],1)call SetPlayerTeam(AC[3],1)call SetPlayerTeam(AC[4],1)call SetPlayerTeam(AC[5],1)call SetPlayerName(Ac[0],"The Sentinel")call SetPlayerName(AC[0],"The Scourge")call Fv()if(Ac[0]!=Player(0)or AC[0]!=Player(6))thencall FW()endifcall FU()set FY=EO(Ab)set Fy=EO(AB)set ER=1set Es=5loopexitwhen ER>Esif(El(Ac[ER]))thencall SetPlayerState(Ac[ER],PLAYER_STATE_RESOURCE_GOLD,(3500/FY))call SetPlayerState(Ac[ER],PLAYER_STATE_RESOURCE_LUMBER,0)call SetPlayerState(Ac[ER],PLAYER_STATE_RESOURCE_FOOD_CAP,5)endifif(El(AC[ER]))thencall SetPlayerState(AC[ER],PLAYER_STATE_RESOURCE_GOLD,(3500/Fy))call SetPlayerState(AC[ER],PLAYER_STATE_RESOURCE_LUMBER,0)call SetPlayerState(AC[ER],PLAYER_STATE_RESOURCE_FOOD_CAP,5)endifset ER=ER+1endloopcall SetPlayerHandicapXP(Ac[1],1)call SetPlayerHandicapXP(Ac[2],1)call SetPlayerHandicapXP(Ac[3],1)call SetPlayerHandicapXP(Ac[4],1)call SetPlayerHandicapXP(Ac[5],1)call SetPlayerHandicapXP(AC[1],1)call SetPlayerHandicapXP(AC[2],1)call SetPlayerHandicapXP(AC[3],1)call SetPlayerHandicapXP(AC[4],1)call SetPlayerHandicapXP(AC[5],1)call SetPlayerState(Ac[0],PLAYER_STATE_GIVES_BOUNTY,1)call SetPlayerState(Ac[1],PLAYER_STATE_GIVES_BOUNTY,1)call SetPlayerState(Ac[2],PLAYER_STATE_GIVES_BOUNTY,1)call SetPlayerState(Ac[3],PLAYER_STATE_GIVES_BOUNTY,1)call SetPlayerState(Ac[4],PLAYER_STATE_GIVES_BOUNTY,1)call SetPlayerState(Ac[5],PLAYER_STATE_GIVES_BOUNTY,1)call SetPlayerState(AC[0],PLAYER_STATE_GIVES_BOUNTY,1)call SetPlayerState(AC[1],PLAYER_STATE_GIVES_BOUNTY,1)call SetPlayerState(AC[2],PLAYER_STATE_GIVES_BOUNTY,1)call SetPlayerState(AC[3],PLAYER_STATE_GIVES_BOUNTY,1)call SetPlayerState(AC[4],PLAYER_STATE_GIVES_BOUNTY,1)call SetPlayerState(AC[5],PLAYER_STATE_GIVES_BOUNTY,1)call Fu()call FT()endfunctionfunction Fz takes nothing returns nothingset eh=1set eg[1]='Hvwd'set eG[1]="Vengeful Spirit"set em[1]="ReplaceableTextures\\CommandButtons\\BTNAvengingWatcher.blp"set eg[2]='Hmbr'set eG[2]="Zeus"set em[2]="ReplaceableTextures\\CommandButtons\\BTNHeroMountainKing.blp"set eg[3]='Emoo'set eG[3]="Enchantress"set em[3]="ReplaceableTextures\\CommandButtons\\BTNDryad.blp"set eg[4]='O00P'set eG[4]="Morphling"set em[4]="ReplaceableTextures\\CommandButtons\\BTNSeaElemental.blp"set eg[5]='Hjai'set eG[5]="Rylai"set em[5]="ReplaceableTextures\\CommandButtons\\BTNJaina.blp"set eg[6]='H001'set eG[6]="Sven"set em[6]="ReplaceableTextures\\CommandButtons\\BTNFelGuardBlue.tga"set eg[7]='HC49'set eG[7]="Slithice"set em[7]="ReplaceableTextures\\CommandButtons\\BTNSeaWitch.blp"set eg[8]='Otch'set eG[8]="Earthshaker"set em[8]="ReplaceableTextures\\CommandButtons\\BTNTauren.blp"set eg[9]='HC92'set eG[9]="Rikimaru"set em[9]="ReplaceableTextures\\CommandButtons\\BTNSatyrTrickster.blp"set eg[10]='N01O'set eG[10]="Syllabear"set em[10]="ReplaceableTextures\\CommandButtons\\BTNDruidOfTheClaw.blp"set eg[11]='H004'set eG[11]="Lina"set em[11]="ReplaceableTextures\\CommandButtons\\BTNSorceress.blp"set eg[12]='Nbbc'set eG[12]="Yurnero"set em[12]="ReplaceableTextures\\CommandButtons\\BTNChaosBlademaster.blp"set eg[13]='N01A'set eG[13]="Nortrom"set em[13]="ReplaceableTextures\\CommandButtons\\BTNSpellBreaker.blp"set eg[14]='Hamg'set eG[14]="Rooftrellen"set em[14]="ReplaceableTextures\\CommandButtons\\BTNTreant.blp"set eg[15]='Uktl'set eG[15]="Enigma"set em[15]="ReplaceableTextures\\CommandButtons\\BTNSpell_Shadow_SummonVoidWalker.blp"set eg[16]='Hblm'set eG[16]="Ezalor"set em[16]="ReplaceableTextures\\CommandButtons\\BTNGhostMage.blp"set eg[17]='Huth'set eG[17]="Ursa"set em[17]="ReplaceableTextures\\CommandButtons\\BTNFurbolgTracker.blp"set eg[18]='Hmkg'set eG[18]="Ogre Magi"set em[18]="ReplaceableTextures\\CommandButtons\\BTNOgreMagi.blp"set eg[19]='Ntin'set eG[19]="Tinker"set em[19]="ReplaceableTextures\\CommandButtons\\BTNHeroTinker.blp"set eg[20]='Emns'set eG[20]="Furion"set em[20]="ReplaceableTextures\\CommandButtons\\BTNFurion.blp"set eg[21]='Ogrh'set eG[21]="Phantom Lancer"set em[21]="ReplaceableTextures\\CommandButtons\\BTNHellScream.blp"set eg[22]='Ucrl'set eG[22]="Tiny"set em[22]="ReplaceableTextures\\CommandButtons\\BTNMountainGiant.blp"set eg[23]='H00K'set eG[23]="Techies"set em[23]="ReplaceableTextures\\CommandButtons\\BTNGoblinSapper.blp"set eg[24]='H00A'set eG[24]="Chen"set em[24]="ReplaceableTextures\\CommandButtons\\BTNHeroFarseer.blp"set eg[25]='E005'set eG[25]="Luna"set em[25]="ReplaceableTextures\\CommandButtons\\BTNHuntress.blp"set eg[26]='Usyl'set eG[26]="Sniper"set em[26]="ReplaceableTextures\\CommandButtons\\BTNRifleman.blp"set eg[27]='N016'set eG[27]="Troll"set em[27]="ReplaceableTextures\\CommandButtons\\BTNForestTroll.blp"set eg[28]='Orkn'set eG[28]="Rhasta"set em[28]="ReplaceableTextures\\CommandButtons\\BTNShadowHunter.blp"set eg[29]='H008'set eG[29]="Bristleback"set em[29]="ReplaceableTextures\\CommandButtons\\BTNRazorManeChief.blp"set eg[30]='Npbm'set eG[30]="Panda"set em[30]="ReplaceableTextures\\CommandButtons\\BTNPandarenBrewmaster.blp"set eg[31]='H000'set eG[31]="Centaur"set em[31]="ReplaceableTextures\\CommandButtons\\BTNCentaurKhan.blp"set eg[32]='Naka'set eG[32]="Gondar"set em[32]="ReplaceableTextures\\CommandButtons\\BTNakama.blp"set eg[33]='Hlgr'set eG[33]="Knight Davion"set em[33]="ReplaceableTextures\\CommandButtons\\BTNTheCaptain.blp"set eg[34]='Edem'set eG[34]="Magina"set em[34]="ReplaceableTextures\\CommandButtons\\BTNHeroDemonHunter.blp"set eg[35]='Nbrn'set eG[35]="Traxex"set em[35]="ReplaceableTextures\\CommandButtons\\BTNBansheeRanger.tga"set eg[36]='Harf'set eG[36]="Omniknight"set em[36]="ReplaceableTextures\\CommandButtons\\BTNArthas.blp"set eg[37]='H00D'set eG[37]="Rexxar"set em[37]="ReplaceableTextures\\CommandButtons\\BTNBeastMaster.blp"set eg[38]='E00P'set eG[38]="Jakiro"set em[38]="ReplaceableTextures\\CommandButtons\\BTNChimaera.blp"set eg[39]='N01I'set eG[39]="Alchemist"set em[39]="ReplaceableTextures\\CommandButtons\\BTNHeroAlchemist.blp"set eg[40]='N01V'set eG[40]="Mirana"set em[40]="ReplaceableTextures\\CommandButtons\\BTNPriestessOfTheMoon.blp"set eH=40set ei=49set eg[49]='Eevi'set eG[49]="Terrorblade"set em[49]="ReplaceableTextures\\CommandButtons\\BTNEvilIllidan.blp"set eg[50]='Ekee'set eG[50]="Leshrac"set em[50]="ReplaceableTextures\\CommandButtons\\BTNKeeperGhostBlue.blp"set eg[51]='Ulic'set eG[51]="Lich"set em[51]="ReplaceableTextures\\CommandButtons\\BTNLichVersion2.blp"set eg[52]='UC76'set eG[52]="Krobelus"set em[52]="ReplaceableTextures\\CommandButtons\\BTNBanshee.blp"set eg[53]='UC18'set eG[53]="Lion"set em[53]="ReplaceableTextures\\CommandButtons\\BTNLion.BLP"set eg[54]='EC57'set eG[54]="Venomancer"set em[54]="ReplaceableTextures\\CommandButtons\\BTNHydralisk.blp"set eg[55]='UC11'set eG[55]="Magnus"set em[55]="ReplaceableTextures\\CommandButtons\\BTNBlueMagnataur.tga"set eg[56]='UC60'set eG[56]="Visage"set em[56]="ReplaceableTextures\\CommandButtons\\BTNSpiritWyvern.blp"set eg[57]='U00A'set eG[57]="Nessaj"set em[57]="ReplaceableTextures\\CommandButtons\\BTNChaosWarlord.blp"set eg[58]='U008'set eG[58]="Lycan"set em[58]="ReplaceableTextures\\CommandButtons\\BTNKiljaedin.blp"set eg[59]='U006'set eG[59]="Broodmother"set em[59]="ReplaceableTextures\\CommandButtons\\BTNSpiderBlack.blp"set eg[60]='Ewar'set eG[60]="Mortred"set em[60]="ReplaceableTextures\\CommandButtons\\BTNHeroWarden.blp"set eg[61]='H00V'set eG[61]="Medusa"set em[61]="ReplaceableTextures\\CommandButtons\\BTNNagaSeaWitch.blp"set eg[62]='Udre'set eG[62]="Balanar"set em[62]="ReplaceableTextures\\CommandButtons\\BTNTichondrius.blp"set eg[63]='NC00'set eG[63]="Leoric"set em[63]="ReplaceableTextures\\CommandButtons\\BTNSkeletonArcher.tga"set eg[64]='UC42'set eG[64]="Lucifer"set em[64]="ReplaceableTextures\\CommandButtons\\BTNDoomGuard.blp"set eg[65]='U000'set eG[65]="Nerubian Assassin"set em[65]="ReplaceableTextures\\CommandButtons\\BTNHeroCryptLord.tga"set eg[66]='UC91'set eG[66]="Slardar"set em[66]="ReplaceableTextures\\CommandButtons\\BTNNagaMyrmidon.tga"set eg[67]='UC01'set eG[67]="Akasha"set em[67]="ReplaceableTextures\\CommandButtons\\BTNBlueDemoness.tga"set eg[68]='E004'set eG[68]="Clinkz"set em[68]="ReplaceableTextures\\CommandButtons\\BTNSkeletonMage.blp"set eg[69]='EC45'set eG[69]="Void"set em[69]="ReplaceableTextures\\CommandButtons\\BTNFacelessOne.blp"set eg[70]='EC77'set eG[70]="Viper"set em[70]="ReplaceableTextures\\CommandButtons\\BTNNetherDragon.blp"set eg[71]='E002'set eG[71]="Razor"set em[71]="ReplaceableTextures\\CommandButtons\\BTNRevenant.blp"set eg[72]='U007'set eG[72]="Naix"set em[72]="ReplaceableTextures\\CommandButtons\\BTNGhoul.blp"set eg[73]='H00H'set eG[73]="Pugna"set em[73]="ReplaceableTextures\\CommandButtons\\BTNPugna.BLP"set eg[74]='Ofar'set eG[74]="Tidehunter"set em[74]="ReplaceableTextures\\CommandButtons\\BTNSeaGiantGreen.blp"set eg[75]='Oshd'set eG[75]="Atropos"set em[75]="ReplaceableTextures\\CommandButtons\\BTNVoidWalker.blp"set eg[76]='U00E'set eG[76]="Necrolyte"set em[76]="ReplaceableTextures\\CommandButtons\\BTNGhostOfKelThuzad.blp"set eg[77]='U00F'set eG[77]="Pudge"set em[77]="ReplaceableTextures\\CommandButtons\\BTNAbomination.blp"set eg[78]='O00J'set eG[78]="Barathrum"set em[78]="ReplaceableTextures\\CommandButtons\\BTNSpiritWalker.blp"set eg[79]='Ubal'set eG[79]="Weaver"set em[79]="ReplaceableTextures\\CommandButtons\\BTNNerubianQueen.blp"set eg[80]='Nfir'set eG[80]="Nevermore"set em[80]="ReplaceableTextures\\CommandButtons\\BTNShade.blp"set eg[81]='U00K'set eG[81]="Crixalis"set em[81]="ReplaceableTextures\\CommandButtons\\BTNArachnathidGreen.blp"set eg[82]='Opgh'set eG[82]="Axe"set em[82]="ReplaceableTextures\\CommandButtons\\BTNChaosGrom.blp"set eg[83]='Hvsh'set eG[83]="Strygwyr"set em[83]="ReplaceableTextures\\CommandButtons\\BTNShaman.blp"set eg[84]='Udea'set eG[84]="Abaddon"set em[84]="ReplaceableTextures\\CommandButtons\\BTNHeroDeathKnight.blp"set eg[85]='E01B'set eG[85]="Spectre"set em[85]="ReplaceableTextures\\CommandButtons\\BTNvengeanceincarnate.blp"set eg[86]='E01A'set eG[86]="Witch Doctor"set em[86]="ReplaceableTextures\\CommandButtons\\BTNWitchDoctor.blp"set eg[87]='U00P'set eG[87]="Destroyer"set em[87]="ReplaceableTextures\\CommandButtons\\BTNDestroyer.blp"set eg[88]='E01C'set eG[88]="Warlock"set em[88]="ReplaceableTextures\\CommandButtons\\BTNGuldan.blp"set eg[89]='H00I'set eG[89]="Geomancer"set em[89]="ReplaceableTextures\\CommandButtons\\BTNKoboldGeomancer.blp"set eg[90]='N01W'set eG[90]="Dazzle"set em[90]="ReplaceableTextures\\CommandButtons\\BTNDarkTrollShadowPriest.blp"set eI=90set ej[1]='Nbrn'set ej[2]='Edem'set ej[3]='N016'set ej[4]='Nbbc'set ej[5]='Naka'set ej[6]='O00P'set ej[7]='Usyl'set ej[8]='E005'set ej[9]='N01O'set ej[10]='HC92'set ej[11]='Hvwd'set ej[12]='HC49'set ej[13]='Huth'set ej[14]='Ogrh'set ej[15]='U006'set ej[16]='EC57'set ej[17]='Eevi'set ej[18]='Ubal'set ej[19]='E004'set ej[20]='EC77'set ej[21]='Hvsh'set ej[22]='Nfir'set ej[23]='E002'set ej[24]='EC45'set ej[25]='Ewar'set ej[26]='U000'set ej[27]='H00V'set ej[28]='E01B'set ej[29]='N01V'set ej[30]='H00I'set eJ=30set ek[1]='Npbm'set ek[2]='Hlgr'set ek[3]='Harf'set ek[4]='H000'set ek[5]='H001'set ek[6]='Hamg'set ek[7]='H008'set ek[8]='Ucrl'set ek[9]='Otch'set ek[10]='NC00'set ek[11]='Udre'set ek[12]='UC11'set ek[13]='Ofar'set ek[14]='U00F'set ek[15]='U00K'set ek[16]='O00J'set ek[17]='Udea'set ek[18]='Opgh'set ek[19]='U00A'set ek[20]='U007'set ek[21]='UC91'set ek[22]='UC42'set ek[23]='U008'set ek[24]='H00D'set ek[25]='N01I'set eK=25set el[1]='Orkn'set el[2]='Emoo'set el[3]='Emns'set el[4]='H004'set el[5]='Hjai'set el[6]='Uktl'set el[7]='Hmbr'set el[8]='H00K'set el[9]='Ntin'set el[10]='Hmkg'set el[11]='Hblm'set el[12]='N01A'set el[13]='H00A'set el[14]='Ulic'set el[15]='Ekee'set el[16]='UC76'set el[17]='UC18'set el[18]='UC01'set el[19]='UC60'set el[20]='H00H'set el[21]='Oshd'set el[22]='U00E'set el[23]='E01A'set el[24]='U00P'set el[25]='E00P'set el[26]='E01C'set el[27]='N01W'set eL=27call EY()endfunctionfunction FZ takes integer ID returns unitif ID<=11 thenreturn eMelseif ID<=22 thenreturn enelseif ID<=33 thenreturn eNelseif ID<=44 thenreturn eoelseif ID<=59 thenreturn eOelseif ID<=70 thenreturn epelseif ID<=81 thenreturn ePelseif ID<=92 thenreturn eqendifreturn nullendfunctionfunction Tavern_RemoveAllHeroes takes nothing returns nothinglocal integer i=ehloopexitwhen i>eHcall RemoveUnitFromStock(FZ(i),eg[i])set i=i+1endloopset i=eiloopexitwhen i>eIcall RemoveUnitFromStock(FZ(i),eg[i])set i=i+1endloopendfunctionfunction Tavern_AddAllHeroes takes nothing returns nothinglocal integer i=ehloopexitwhen i>eHcall AddUnitToStock(FZ(i),eg[i],0,1)set i=i+1endloopset i=eiloopexitwhen i>eIcall AddUnitToStock(FZ(i),eg[i],0,1)set i=i+1endloopendfunctionfunction F0 takes nothing returns nothinglocal player EL=Player(15)set eM=CreateUnit(EL,'n008',-6464,-6592,270)set en=CreateUnit(EL,'n01D',-6080,-6592,270)set eN=CreateUnit(EL,'ntav',-6464,-7104,270)set eo=CreateUnit(EL,'n01N',-6080,-7104,270)set eO=CreateUnit(EL,'n005',5888,6208,270)set ep=CreateUnit(EL,'n01P',6272,6208,270)set eP=CreateUnit(EL,'n007',5888,6720,270)set eq=CreateUnit(EL,'n01B',6272,6720,270)call SetUnitColor(eM,ConvertPlayerColor(0))call SetUnitColor(en,ConvertPlayerColor(0))call SetUnitColor(eN,ConvertPlayerColor(0))call SetUnitColor(eo,ConvertPlayerColor(0))call SetUnitColor(eO,ConvertPlayerColor(0))call SetUnitColor(ep,ConvertPlayerColor(0))call SetUnitColor(eP,ConvertPlayerColor(0))call SetUnitColor(eq,ConvertPlayerColor(0))endfunctionfunction F1 takes integer fz,string F2 returns nothingcall EB("ItemIcon",I2S(fz),F2)endfunctionfunction F3 takes item F4 returns stringif F4==null thenreturn"UI\\Widgets\\Console\\Undead\\undead-inventory-slotfiller.blp"endifif GetItemType(F4)==ITEM_TYPE_POWERUP thenreturn"ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"endifreturn Ej("ItemIcon",I2S(GetItemTypeId(F4)))endfunctionfunction F5 takes nothing returns nothingcall F1('olig',"ReplaceableTextures\\CommandButtons\\BTNArcaniteArmor.blp")call F1('sor3',"ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp")call F1('sor6',"ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp")call F1('sor5',"ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp")call F1('sor4',"ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp")call F1('gldo',"ReplaceableTextures\\CommandButtons\\BTNINV_ThrowingAxe_06.blp")call F1('ofro',"ReplaceableTextures\\CommandButtons\\BTNRodOfNecromancy.blp")call F1('rat6',"ReplaceableTextures\\CommandButtons\\BTNINV_Chest_Plate06.blp")call F1('tlum',"ReplaceableTextures\\CommandButtons\\BTNAbility_Rogue_Sprint.blp")call F1('tfar',"ReplaceableTextures\\CommandButtons\\BTNRunedBracers.blp")call F1('ofir',"ReplaceableTextures\\CommandButtons\\BTNINV_Weapon_Crossbow_10.blp")call F1('nspi',"ReplaceableTextures\\CommandButtons\\BTNINV_Hammer_10.blp")call F1('ocor',"ReplaceableTextures\\CommandButtons\\BTNINV_Hammer_10.blp")call F1('lure',"ReplaceableTextures\\CommandButtons\\BTNThoriumMelee.blp")call F1('rej5',"ReplaceableTextures\\CommandButtons\\BTNINV_Wand_06.blp")call F1('lnrn',"ReplaceableTextures\\CommandButtons\\BTNINV_Wand_06.blp")call F1('mlst',"ReplaceableTextures\\CommandButtons\\BTNINV_Wand_06.blp")call F1('mnsf',"ReplaceableTextures\\CommandButtons\\BTNINV_Wand_06.blp")call F1('rej1',"ReplaceableTextures\\CommandButtons\\BTNINV_Wand_06.blp")call F1('wswd',"ReplaceableTextures\\CommandButtons\\BTNINV_Sword_11.blp")call F1('rej2',"ReplaceableTextures\\CommandButtons\\BTNStaffofpurification.blp")call F1('tbak',"ReplaceableTextures\\CommandButtons\\BTNIceShard.blp")call F1('thdm',"ReplaceableTextures\\CommandButtons\\BTNIceShard.blp")call F1('spre',"ReplaceableTextures\\CommandButtons\\BTNINV_Sword_09.blp")call F1('pdiv',"ReplaceableTextures\\CommandButtons\\BTNGoldGloves.BLP")call F1('klmm',"ReplaceableTextures\\CommandButtons\\BTNINV_Helmet_17.blp")call F1('kgal',"ReplaceableTextures\\CommandButtons\\BTNHeartOfAszune.blp")call F1('rots',"ReplaceableTextures\\CommandButtons\\BTNINV_Helmet_13.blp")call F1('kybl',"ReplaceableTextures\\CommandButtons\\BTNOrb of Water.blp")call F1('ccmd',"ReplaceableTextures\\CommandButtons\\BTNINV_Axe_16.blp")call F1('rnec',"ReplaceableTextures\\CommandButtons\\BTNStormHammer.blp")call F1('schl',"ReplaceableTextures\\CommandButtons\\BTNINV_ThrowingAxe_02.blp")call F1('horl',"ReplaceableTextures\\CommandButtons\\BTNHelmOfValor.blp")call F1('mnst',"ReplaceableTextures\\CommandButtons\\BTNSpellShieldAmulet.blp")call F1('rugt',"ReplaceableTextures\\CommandButtons\\BTNINV_Weapon_Halberd_10.blp")call F1('sfog',"ReplaceableTextures\\CommandButtons\\BTNThoriumArmor.blp")call F1('ches',"ReplaceableTextures\\CommandButtons\\BTNNecromancerMaster.blp")call F1('gsou',"ReplaceableTextures\\CommandButtons\\BTNTalisman.tga")call F1('soul',"ReplaceableTextures\\CommandButtons\\BTNINV_Mace_10.blp")call F1('ratf',"ReplaceableTextures\\CommandButtons\\BTNOrbOfFire.blp")call F1('hlst',"ReplaceableTextures\\CommandButtons\\BTNWirtsLeg.blp")call F1('ram4',"ReplaceableTextures\\CommandButtons\\BTNTransmute.blp")call F1('oven',"ReplaceableTextures\\CommandButtons\\BTNHeartOfSearinox.blp")call F1('grsl',"ReplaceableTextures\\CommandButtons\\BTNRingVioletSpider.tga")call F1('ram1',"ReplaceableTextures\\CommandButtons\\BTNJapaneseSword.BLP")call F1('rnsp',"ReplaceableTextures\\CommandButtons\\BTNSpell_Holy_BlessingOfStrength.blp")call F1('bfhr',"ReplaceableTextures\\CommandButtons\\BTNHornOfDoom.blp")call F1('oslo',"ReplaceableTextures\\CommandButtons\\BTNPhilosophersStone.blp")call F1('tels',"ReplaceableTextures\\CommandButtons\\BTNAbility_Gouge.blp")call F1('rde4',"ReplaceableTextures\\CommandButtons\\BTNINV_ThrowingKnife_04.blp")call F1('sor9',"ReplaceableTextures\\CommandButtons\\BTNRevenant.blp")call F1('rde0',"ReplaceableTextures\\CommandButtons\\BTNINV_Sword_10.blp")call F1('pspd',"ReplaceableTextures\\CommandButtons\\BTNINV_Sword_25.blp")call F1('bgst',"ReplaceableTextures\\CommandButtons\\BTNBelt.blp")call F1('tmmt',"ReplaceableTextures\\CommandButtons\\BTNINV_ThrowingKnife_03.blp")call F1('tmsc',"ReplaceableTextures\\CommandButtons\\BTNClawsOfAttack.blp")call F1('belv',"ReplaceableTextures\\CommandButtons\\BTNBoots.blp")call F1('tgxp',"ReplaceableTextures\\CommandButtons\\BTNBootsOfSpeed.blp")call F1('sor2',"ReplaceableTextures\\CommandButtons\\BTNSteelMelee.blp")call F1('tbsm',"ReplaceableTextures\\CommandButtons\\BTNINV_Chest_Chain_12.blp")call F1('tbar',"ReplaceableTextures\\CommandButtons\\BTNCirclet.blp")call F1('sora',"ReplaceableTextures\\CommandButtons\\BTNINV_Sword_19.blp")call F1('srtl',"ReplaceableTextures\\CommandButtons\\BTNFrostMourne.blp")call F1('srbd',"ReplaceableTextures\\CommandButtons\\BTNINV_Weapon_Bow_06.blp")call F1('pgin',"ReplaceableTextures\\CommandButtons\\BTNEnchantedGemstone.blp")call F1('stwa',"ReplaceableTextures\\CommandButtons\\BTNGauntletsOfOgrePower.blp")call F1('oflg',"ReplaceableTextures\\CommandButtons\\BTNGem.blp")call F1('stre',"ReplaceableTextures\\CommandButtons\\BTNGlove.blp")call F1('scul',"ReplaceableTextures\\CommandButtons\\BTNHelmutPurple.blp")call F1('sprn',"ReplaceableTextures\\CommandButtons\\BTNPeriapt1.blp")call F1('iwbr',"ReplaceableTextures\\CommandButtons\\BTNNatureTouchGrow.blp")call F1('desc',"ReplaceableTextures\\CommandButtons\\BTNDaggerOfEscape.blp")call F1('sbok',"ReplaceableTextures\\CommandButtons\\BTNMantleOfIntelligence.blp")call F1('jdrn',"ReplaceableTextures\\CommandButtons\\BTNUndeadShrine.blp")call F1('rump',"ReplaceableTextures\\CommandButtons\\BTNSpiritWalkerMasterTraining.blp")call F1('flag',"ReplaceableTextures\\CommandButtons\\BTNHammer.blp")call F1('ram2',"ReplaceableTextures\\CommandButtons\\BTNStaffOfNegation.blp")call F1('sksh',"ReplaceableTextures\\CommandButtons\\BTNSpiritWalkerAdeptTraining.tga")call F1('sor1',"ReplaceableTextures\\CommandButtons\\BTNINV_Misc_Cape_08.blp")call F1('ram3',"ReplaceableTextures\\CommandButtons\\BTNINV_Chest_Plate13.blp")call F1('hbth',"ReplaceableTextures\\CommandButtons\\BTNUsedSoulGem.blp")call F1('whwd',"ReplaceableTextures\\CommandButtons\\BTNAlleriaFlute.blp")call F1('rej6',"ReplaceableTextures\\CommandButtons\\BTNGoldRing.blp")call F1('modt',"ReplaceableTextures\\CommandButtons\\BTNRingGreen.blp")call F1('tkno',"ReplaceableTextures\\CommandButtons\\BTNRingSkull.blp")call F1('ciri',"ReplaceableTextures\\CommandButtons\\BTNRobeOfTheMagi.blp")call F1('shrs',"ReplaceableTextures\\CommandButtons\\BTNStaffOfTeleportation.blp")call F1('shdt',"ReplaceableTextures\\CommandButtons\\BTNSlippersOfAgility.blp")call F1('shhn',"ReplaceableTextures\\CommandButtons\\BTNSobiMask.blp")call F1('shtm',"ReplaceableTextures\\CommandButtons\\BTNWandOfCyclone.blp")call F1('rej4',"ReplaceableTextures\\CommandButtons\\BTNImprovedUnholyArmor.blp")call F1('gvsm',"ReplaceableTextures\\CommandButtons\\BTNOrbofSlowness.blp")call F1('oli2',"ReplaceableTextures\\CommandButtons\\BTNSoulGem.blp")call F1('shcw',"ReplaceableTextures\\CommandButtons\\BTNPeriapt.blp")call F1('silk',"ReplaceableTextures\\CommandButtons\\BTNAncientOfTheEarth.blp")call F1('sman',"ReplaceableTextures\\CommandButtons\\BTNCritterChicken.blp")call F1('shea',"ReplaceableTextures\\CommandButtons\\BTNCheese.blp")call F1('plcl',"ReplaceableTextures\\CommandButtons\\BTNLesserClarityPotion.blp")call F1('sor8',"ReplaceableTextures\\CommandButtons\\BTNPotionBlueBig.blp")call F1('sor7',"ReplaceableTextures\\CommandButtons\\BTNSentryWard.blp")call F1('stwp',"ReplaceableTextures\\CommandButtons\\BTNScrollUber.blp")call F1('tgrh',"ReplaceableTextures\\CommandButtons\\BTNSentryWard.blp")call F1('I016',"ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp")call F1('I006',"ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp")call F1('I00T',"ReplaceableTextures\\CommandButtons\\BTNArcaneRing.blp")call F1('I00I',"ReplaceableTextures\\CommandButtons\\BTNBottle1.blp")call F1('I00H',"ReplaceableTextures\\CommandButtons\\BTNBottle2.blp")call F1('I00J',"ReplaceableTextures\\CommandButtons\\BTNBottle3.blp")call F1('I00K',"ReplaceableTextures\\CommandButtons\\BTNBottle4.blp")call F1('I00G',"ReplaceableTextures\\CommandButtons\\BTNBottle0.blp")call F1('I00Q',"ReplaceableTextures\\CommandButtons\\BTNThunderMallet.blp")call F1('I002',"ReplaceableTextures\\CommandButtons\\BTNNecromancerMaster.blp")call F1('I001',"ReplaceableTextures\\CommandButtons\\BTNNecromancerMaster.blp")call F1('I017',"ReplaceableTextures\\CommandButtons\\BTNOrbOfFrost.blp")call F1('I00L',"ReplaceableTextures\\CommandButtons\\BTNAdvancedUnholyArmor.blp")call F1('I012',"ReplaceableTextures\\CommandButtons\\BTNCloakOfFlames.blp")endfunctionfunction F6 takes integer F7,integer F8,integer F9,integer ga,integer gA returns nothingset au[ax]=F7set aU[ax]=F8set av[ax]=F9set aV[ax]=gaset aW[ax]=gAset aX[ax]=4if(F7==0)thenset aX[ax]=aX[ax]-1endifif(F8==0)thenset aX[ax]=aX[ax]-1endifif(F9==0)thenset aX[ax]=aX[ax]-1endifif(ga==0)thenset aX[ax]=aX[ax]-1endifset ax=ax+1set aw=axendfunctionfunction gb takes nothing returns nothingset ax=1call F6('rots','rump','mcri',0,'bfhr')call F6('stwa','tbar','rsps',0,'tfar')call F6('shdt','tbar','srrc',0,'sor9')call F6('vddl','sor1','ram3',0,'olig')call F6('rump','oli2','rwiz',0,'kgal')call F6('srbd','whwd','fgrg',0,'rde4')call F6('bgst','sksh','spsh',0,'ram1')call F6('belv','tmmt','sand',0,'rde0')call F6('ram1','rde0','wcyc',0,'rnsp')call F6('whwd','srtl','penr',0,'rugt')call F6('srtl','lure','rreb',0,'ofir')call F6('flag','stwa','rre1',0,'ocor')call F6('soul','rej2','lhst',0,'spre')call F6('rst1','tgxp','stre',0,'hlst')call F6('tbar','lgdh','sbok',0,'gsou')call F6('whwd','ciri','shhn',0,'soul')call F6('srtl','shrs','sora',0,'pspd')call F6('iwbr','tbsm','mcou',0,'sfog')call F6('rdis','tmmt','ciri',0,'wswd')call F6('modt','shhn',0,0,'grsl')call F6('tmmt','sora','rlif',0,'ccmd')call F6('scul','jdrn',0,0,'rots')call F6('ratf','flag','sora',0,'gldo')call F6('rhe2','sor2','tmsc',0,'lure')call F6('shcw','rej6',0,0,'ratf')call F6('shcw','shtm','ciri','gomn','rej2')call F6('jdrn','prvt',0,0,'horl')call F6('pgin','hbth','oli2',0,'oslo')call F6('soul','ratf','clfm',0,'oven')call F6('sor2','sksh','texp',0,'ofro')call F6('shrs','crys',0,0,'ram4')call F6('shtm','tmsc','rma2',0,'rej5')call F6('rej5','rma2',0,0,'lnrn')call F6('lnrn','rma2',0,0,'mlst')call F6('mlst','rma2',0,0,'mnsf')call F6('mnsf','rma2',0,0,'rej1')call F6('tgxp','rspl',0,0,'tlum')call F6('iwbr','tkno','stel',0,'klmm')call F6('tbsm','tmsc','tdex',0,'rat6')call F6('pgma','stre',0,0,'pdiv')call F6('pclr','ratf','gvsm',0,'kybl')call F6('infs','klmm','sfog',0,'mnst')call F6('belv','flag','pinv',0,'rnec')call F6('wswd','rde2','oli2',0,'schl')call F6('bgst','shtm','bspd',0,'ches')call F6('ches','bspd',0,0,'I002')call F6('I002','bspd',0,0,'I001')call F6('rej4','rej6','oli2',0,'I00L')call F6('I00V','pgin','modt',0,'I00T')call F6('srbd','rnec',0,0,'I00Q')call F6('grsl','jdrn','I014',0,'I012')call F6('I019',0,0,0,'I00J')endfunctionfunction gB takes nothing returns nothingset A2[1]='AImt'set A2[2]='AIda'set A2[3]='ANtm'set A2[4]='ACch'set A2[5]='AIxk'set A2[6]='A0CK'set A2[7]='A017'set A2[8]='A0B8'set A2[9]='A0HB'set A2[10]='A0D3'set A2[10]='A0DF'set A2[11]='A02W'set A2[12]='AIpr'set A2[13]='AIpl'set A2[14]='A0FO'set A2[15]='A0H7'set A2[16]='A0H6'set A2[17]='A02X'set A2[18]='AIsw'set A2[19]='A0CX'set A2[20]='A0B6'set A2[21]='Aeat'set A2[22]='A08L'set A2[23]='AIcy'set A2[24]='A05Z'set A2[25]='AIbk'set A2[26]='A0DY'set A2[27]='A0LZ'set A2[28]='A0OI'set A2[29]='A0KX'set A2[30]='A0KW'set A2[31]='A026'set A2[32]='A0C4'set A2[33]='A012'set A2[34]='A06K'set A2[35]='A02T'set A2[36]='AHfa'set A2[37]='A09V'set A2[38]='A05Y'set A2[39]='A0I9'set A2[40]='A0HA'set A2[41]='A0K5'set A3=41endfunctionfunction gc takes nothing returns nothingcall CreateQuestBJ(0,"Contacts","If you find any bugs or have suggestions or comments, please message me through www.getdota.com/contact\n\nIf you need to email, you may send to IceFrogDota@gmail.com","ReplaceableTextures\\CommandButtons\\BTNSpy.blp")call CreateQuestBJ(0,"Useful Information","Game Modes:\n-allpick(-ap), -allrandom(-ar), -leaguemode(-lm), -randomdraft (-rd), -mirrormatch(-mm), -teamrandom(-tr), -deathmatch(-dm), -moderandom(-mr), -voterandom(-vr), -reverse(-rv), -duplicatemode(-du), -shuffleplayers(-sp), -samehero(-sh), -allagility(-aa), -allintelligence(-ai), -allstrength(-as), -itemdrop(-id), -easymode(-em), -nopowerups(-np), -supercreeps(-sc)\n\nGame Commands:\n-ma, -ms, -cs, -cson, -csoff, -disablehelp, -enablehelp, -unstuck, -recreate, -swaphero, -showmsg, -hidemsg, -showdeny, -hidedeny, -weather rain, -weather snow, -weather off, -denyinfo (-di)\n\nFound a bug?\nwww.getdota.com/contact\n\nFor fun modes:\n-wtf","ReplaceableTextures\\CommandButtons\\BTNTome.blp")call CreateQuestBJ(0,"Credits","First and foremost, thanks to the community for supporting the map for so long. We wouldn't be here without you.\n\nSome people that have helped me in one form or another include, but not limited to: Ki-Hunterkiller, arthur5863, Neichus, coL.Warr1ck, Zetta, Plastic.Angel, TheRandomDude, Naz, IEatDeadPeoples, RodOfNod, DamnNoHtml, Mercurial, Trystero, Cottontop, Minotaar, Switch, Terrorblaze, Ro-Coco, unHOLYdoNUTS, eva00r, TheMantis, Ska_Goblin, ~PGRu-Unexpect3D, PitzerMike, snork, M3Th0dz, War-Mage, Malle, seerTneerGevoLI, Vexorian, MetallibaN, sSerenity and SetzerGabbiani. Many others have contributed in some form or another, thank you.\n\nThis map has been written from scratch. Though the map become something else entirely since, a few of the ideas are to be credited to Eul for the first DotA on ROC and then Meian/Guinsoo on TFT.\n\nDue to space limitations in this window, i cannot list everything here. For various other contributors and resource credits visit getdota.com/MiscCredits.txt","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")call CreateQuestBJ(2,"League Rules","TRIGSTR_7232","ReplaceableTextures\\CommandButtons\\BTNBansheeMaster.blp")call CreateQuestBJ(2,"TDA Rules","TRIGSTR_7244","ReplaceableTextures\\CommandButtons\\BTNBansheeMaster.blp")endfunctionfunction gC takes nothing returns nothinglocal player gd=Ed(e4(GetExpiredTimer()),"Leaver")local integer ER=1local integer gDlocal integer fB=GetPlayerState(gd,PLAYER_STATE_RESOURCE_GOLD)call SetPlayerState(gd,PLAYER_STATE_RESOURCE_GOLD,0)if EJ(gd)thenset gD=EN(Ab)elseset gD=EN(AB)endifif EJ(gd)thenloopexitwhen ER>5if El(Ac[ER])thencall SetPlayerState(Ac[ER],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(Ac[ER],PLAYER_STATE_RESOURCE_GOLD)+fB/gD)endifset ER=ER+1endloopelseloopexitwhen ER>5if El(AC[ER])thencall SetPlayerState(AC[ER],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(AC[ER],PLAYER_STATE_RESOURCE_GOLD)+fB/gD)endifset ER=ER+1endloopendifendfunctionfunction ge takes player gd returns nothinglocal timer t=CreateTimer()local string f8=e4(t)call e7(f8,"Leaver",gd)call TimerStart(t,2,true,function gC)endfunctionfunction gE takes nothing returns nothinglocal integer FY=EN(Ab)local integer Fy=EN(AB)local integer ERlocal integer Eslocal string gfif(O<10)thenset gf=I2S(o)+":0"+I2S(O)elseset gf=I2S(o)+":"+I2S(O)endifset bJ[GetPlayerId(GetTriggerPlayer())]=gfcall FG(bj_FORCE_ALL_PLAYERS,25.,I[GetPlayerId(GetTriggerPlayer())]+GetPlayerName(GetTriggerPlayer())+"|r"+"|c00ff0303 has left the game.|r")if(EJ(GetTriggerPlayer()))thenset ER=1set Es=5loopexitwhen ER>Esif(Ac[ER]!=GetTriggerPlayer())thenif(El(Ac[ER]))thencall SetPlayerAllianceStateBJ(GetTriggerPlayer(),Ac[ER],4)endifendifset ER=ER+1endloopelseset ER=1set Es=5loopexitwhen ER>Esif(AC[ER]!=GetTriggerPlayer())thenif(El(AC[ER]))thencall SetPlayerAllianceStateBJ(GetTriggerPlayer(),AC[ER],4)endifendifset ER=ER+1endloopendifcall ge(GetTriggerPlayer())endfunctionfunction gF takes unit fw returns nothingcall UnitRemoveAbility(fw,'A0AZ')call UnitRemoveAbility(fw,'A09J')call UnitRemoveAbility(fw,'A0KT')call UnitRemoveAbility(fw,'A0NW')call UnitRemoveAbility(fw,'A0NU')call UnitRemoveAbility(fw,'A0OW')call UnitRemoveAbility(fw,'A0OV')call UnitRemoveAbility(fw,'A0OX')call UnitRemoveAbility(fw,'A0OY')call UnitRemoveAbility(fw,'A0P0')endfunctionfunction gg takes unit gG returns booleanreturn GetUnitTypeId(gG)=='H00I'or GetUnitTypeId(gG)=='H00J'endfunctionfunction gh takes unit gH returns nothinglocal string f8=e4(GetOwningPlayer(gH))local unit gi=EC(f8,"Kobold0")local unit gI=EC(f8,"Kobold1")local unit gj=EC(f8,"Kobold2")local unit gJ=EC(f8,"Kobold3")local unit gkset gk=giif gk!=null thencall RemoveUnit(gk)endifset gk=gIif gk!=null thencall RemoveUnit(gk)endifset gk=gjif gk!=null thencall RemoveUnit(gk)endifset gk=gJif gk!=null thencall RemoveUnit(gk)endifendfunctionfunction gK takes unit gl,real x,real y returns nothinglocal string f8=e4(GetOwningPlayer(gl))local unit gi=EC(f8,"Kobold0")local unit gI=EC(f8,"Kobold1")local unit gj=EC(f8,"Kobold2")local unit gJ=EC(f8,"Kobold3")local unit gkset gk=giif gk!=null and gl!=gk thencall ReviveHero(gk,x,y,false)call SetUnitX(gk,x)call SetUnitY(gk,y)call gF(gk)call SetUnitPathing(gk,true)endifset gk=gIif gk!=null and gl!=gk thencall ReviveHero(gk,x,y,false)call SetUnitX(gk,x)call SetUnitY(gk,y)call gF(gk)call SetUnitPathing(gk,true)endifset gk=gjif gk!=null and gl!=gk thencall ReviveHero(gk,x,y,false)call SetUnitX(gk,x)call SetUnitY(gk,y)call gF(gk)call SetUnitPathing(gk,true)endifset gk=gJif gk!=null and gl!=gk thencall ReviveHero(gk,x,y,false)call SetUnitX(gk,x)call SetUnitY(gk,y)call gF(gk)call SetUnitPathing(gk,true)endifendfunctionfunction gL takes nothing returns nothinglocal unit fP=GetTriggerUnit()local player EL=GetOwningPlayer(fP)local real xlocal real yif EJ(GetOwningPlayer(fP))thenset x=GetRectCenterX(bp)set y=GetRectCenterY(bp)elseset x=GetRectCenterX(bL)set y=GetRectCenterY(bL)endifcall PanCameraToTimedForPlayer(EL,x,y,0)call ClearSelectionForPlayer(EL)call SelectUnitAddForPlayer(fP,EL)set A[GetPlayerId(EL)]=0if gg(fP)thencall gK(fP,x,y)endifcall SetUnitX(fP,x)call SetUnitY(fP,y)call gF(fP)call SetUnitPathing(fP,true)endfunctionfunction gm takes unit fw returns nothinglocal integer gM=GetUnitPointValue(fw)local unit gnif(gM==34)thencall ExecuteFunc("gN")elseif(gM==37)thencall ExecuteFunc("go")call ExecuteFunc("gO")call ExecuteFunc("gp")call ExecuteFunc("gP")elseif(gM==38)thencall ExecuteFunc("gq")call ExecuteFunc("gQ")call ExecuteFunc("gr")call ExecuteFunc("gR")elseif(gM==32)thencall ExecuteFunc("gs")call ExecuteFunc("gS")elseif(gM==29)thencall ExecuteFunc("gt")call ExecuteFunc("gT")call ExecuteFunc("gu")call ExecuteFunc("gU")elseif(gM==31)thencall ExecuteFunc("gv")call ExecuteFunc("gV")elseif(gM==24)thencall ExecuteFunc("gw")call ExecuteFunc("gW")call ExecuteFunc("gx")call ExecuteFunc("gX")elseif(gM==5)thencall ExecuteFunc("gy")elseif(gM==8)thencall ExecuteFunc("gY")call ExecuteFunc("gz")call ExecuteFunc("gZ")call ExecuteFunc("g0")call ExecuteFunc("g3")elseif(gM==3)thencall ExecuteFunc("g4")call ExecuteFunc("g5")call ExecuteFunc("g6")call ExecuteFunc("g7")elseif(gM==15)thencall ExecuteFunc("g8")call ExecuteFunc("g9")call ExecuteFunc("Ga")call ExecuteFunc("GA")elseif(gM==20)thencall ExecuteFunc("Gb")call ExecuteFunc("GB")elseif(gM==12)thencall ExecuteFunc("Gc")call ExecuteFunc("GC")elseif(gM==16)thencall ExecuteFunc("Gd")call ExecuteFunc("GD")call ExecuteFunc("Ge")call ExecuteFunc("GE")elseif(gM==25)thencall ExecuteFunc("Gf")call ExecuteFunc("GF")elseif(gM==4)thencall ExecuteFunc("Gg")call ExecuteFunc("GG")call ExecuteFunc("Gh")call ExecuteFunc("GH")call ExecuteFunc("Gi")call SetUnitPathing(fw,false)set gn=CreateUnit(GetOwningPlayer(fw),GetUnitTypeId(fw),GetUnitX(fw),GetUnitY(fw),GetUnitFacing(fw))call StoreBoolean(AG,e4(gn),"EnteredAlready",true)set ay[GetPlayerId(GetOwningPlayer(fw))]=gncall SetUnitPathing(gn,false)call SetUnitPosition(gn,GetUnitX(fw),GetUnitY(fw))if R thencall SetHeroXP(gn,GetHeroXP(fw),false)call UnitAddItem(gn,UnitItemInSlot(fw,0))call UnitAddItem(gn,UnitItemInSlot(fw,1))call UnitAddItem(gn,UnitItemInSlot(fw,2))call UnitAddItem(gn,UnitItemInSlot(fw,3))call UnitAddItem(gn,UnitItemInSlot(fw,4))call UnitAddItem(gn,UnitItemInSlot(fw,5))endifcall fV(fw)call SetUnitPathing(gn,true)call ClearSelectionForPlayer(GetOwningPlayer(gn))call SelectUnitAddForPlayer(gn,GetOwningPlayer(gn))elseif(gM==7)thencall ExecuteFunc("GI")elseif(gM==18)thencall ExecuteFunc("Gj")call ExecuteFunc("GJ")call ExecuteFunc("Gk")elseif(gM==36)thencall ExecuteFunc("GK")elseif(gM==21)thencall ExecuteFunc("Gl")call ExecuteFunc("GL")call ExecuteFunc("Gm")call ExecuteFunc("DW")elseif(gM==14)thencall ExecuteFunc("GM")call ExecuteFunc("Gn")elseif(gM==13)thencall ExecuteFunc("GN")call ExecuteFunc("Go")call ExecuteFunc("GO")call ExecuteFunc("GS")call ExecuteFunc("Gp")elseif(gM==26)thencall ExecuteFunc("SS")call ExecuteFunc("GP")call ExecuteFunc("Gq")elseif(gM==9)thencall ExecuteFunc("II")call ExecuteFunc("GQ")call ExecuteFunc("Gr")elseif(gM==10)thencall ExecuteFunc("GR")call ExecuteFunc("Gs")call ExecuteFunc("Gt")call ExecuteFunc("GT")call ExecuteFunc("Gu")call ExecuteFunc("GU")call ExecuteFunc("Gv")elseif(gM==23)thencall ExecuteFunc("GV")call ExecuteFunc("Gw")call ExecuteFunc("GW")elseif(gM==19)thencall ExecuteFunc("Gx")call ExecuteFunc("GX")call ExecuteFunc("Gy")elseif(gM==22)thencall ExecuteFunc("GY")call ExecuteFunc("Gz")call ExecuteFunc("GZ")call ExecuteFunc("G0")elseif(gM==17)thencall ExecuteFunc("G1")call ExecuteFunc("G2")call ExecuteFunc("G3")elseif(gM==1)thencall ExecuteFunc("G4")elseif(gM==2)thencall ExecuteFunc("G5")call ExecuteFunc("G6")call ExecuteFunc("G7")elseif(gM==27)thencall ExecuteFunc("G8")call ExecuteFunc("G9")elseif(gM==82)thencall ExecuteFunc("ha")call ExecuteFunc("hA")call ExecuteFunc("hb")call ExecuteFunc("hB")elseif(gM==75)thencall ExecuteFunc("hc")call ExecuteFunc("hC")elseif(gM==83)thencall ExecuteFunc("hd")call ExecuteFunc("hD")call ExecuteFunc("he")elseif(gM==59)thencall ExecuteFunc("hE")call ExecuteFunc("hf")elseif(gM==57)thencall ExecuteFunc("hF")elseif(gM==69)thencall ExecuteFunc("hg")call ExecuteFunc("hG")call ExecuteFunc("hh")elseif(gM==50)thencall ExecuteFunc("hH")elseif(gM==51)thencall ExecuteFunc("CF")elseif(gM==64)thencall ExecuteFunc("hi")call ExecuteFunc("hI")call ExecuteFunc("hj")elseif(gM==55)thencall ExecuteFunc("RP")elseif(gM==61)thencall ExecuteFunc("hJ")elseif(gM==76)thencall ExecuteFunc("hk")call ExecuteFunc("hK")call ExecuteFunc("hl")elseif(gM==80)thencall ExecuteFunc("hL")call ExecuteFunc("hm")call ExecuteFunc("hM")call ExecuteFunc("hn")call ExecuteFunc("NL")elseif(gM==62)thencall ExecuteFunc("hN")call ExecuteFunc("ho")elseif(gM==60)thencall ExecuteFunc("hO")elseif(gM==77)thencall ExecuteFunc("hp")call ExecuteFunc("hP")call ExecuteFunc("hq")elseif(gM==73)thencall ExecuteFunc("NW")elseif(gM==81)thencall ExecuteFunc("hQ")call ExecuteFunc("hr")call ExecuteFunc("hR")call ExecuteFunc("hs")elseif(gM==66)thencall ExecuteFunc("hS")elseif(gM==78)thencall ExecuteFunc("ht")call ExecuteFunc("hT")call ExecuteFunc("hu")call ExecuteFunc("hU")elseif(gM==49)thencall ExecuteFunc("hv")call ExecuteFunc("hV")elseif(gM==74)thencall ExecuteFunc("hw")call ExecuteFunc("hW")call ExecuteFunc("hx")elseif(gM==54)thencall ExecuteFunc("hX")elseif(gM==70)thencall ExecuteFunc("hy")elseif(gM==56)thencall ExecuteFunc("hY")call ExecuteFunc("hz")call ExecuteFunc("hZ")call ExecuteFunc("h0")elseif(gM==79)thencall ExecuteFunc("h1")call ExecuteFunc("h2")call ExecuteFunc("h3")elseif(gM==68)thencall ExecuteFunc("h4")elseif(gM==84)thencall ExecuteFunc("h5")call ExecuteFunc("h6")call ExecuteFunc("h7")call ExecuteFunc("h8")elseif(gM==85)thencall ExecuteFunc("h9")call ExecuteFunc("Ha")call ExecuteFunc("HA")call ExecuteFunc("Hb")call ExecuteFunc("HB")elseif(gM==86)thencall ExecuteFunc("Hc")call ExecuteFunc("HC")call ExecuteFunc("VR")elseif(gM==87)thencall ExecuteFunc("Hd")call ExecuteFunc("HD")call ExecuteFunc("He")call ExecuteFunc("HE")elseif(gM==33)thencall ExecuteFunc("Hf")elseif(gM==39)thencall ExecuteFunc("HF")call ExecuteFunc("Hg")call ExecuteFunc("HG")elseif(gM==88)thencall ExecuteFunc("Hh")call ExecuteFunc("HH")call ExecuteFunc("Hi")elseif(gM==40)thencall ExecuteFunc("HI")call ExecuteFunc("Hj")call ExecuteFunc("HJ")call ExecuteFunc("Hk")elseif gM==89 thencall ExecuteFunc("HK")call ExecuteFunc("Hl")call ExecuteFunc("HL")elseif gM==90 thencall ExecuteFunc("Hm")call ExecuteFunc("HM")call ExecuteFunc("Hn")call ExecuteFunc("HN")elseif gM==71 thencall ExecuteFunc("Ho")endifendfunctionfunction HO takes player Eu,string FH returns nothingif IsPlayerInForce(GetLocalPlayer(),GetPlayersEnemies(Eu))thencall DisplayTimedTextToPlayer(GetLocalPlayer(),0,A6,40,I[GetPlayerId(Eu)]+GetPlayerName(Eu)+"|r "+FH)endifendfunctionfunction Hp takes nothing returns booleanreturn GetUnitTypeId(GetTriggerUnit())!='E01L' and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO) and IsUnitIllusion(GetTriggerUnit())==false and HaveStoredBoolean(AG,e4(GetTriggerUnit()),"EnteredAlready")==false and GetUnitTypeId(GetTriggerUnit())!='H00J'endfunctionfunction HP takes nothing returns booleanreturn GetUnitTypeId(GetFilterUnit())=='n00C'endfunctionfunction Hq takes nothing returns nothingcall RemoveUnit(GetEnumUnit())endfunctionfunction HQ takes player EL returns nothinglocal group EX=CreateGroup()local boolexpr Ey=Condition(function HP)call GroupEnumUnitsOfPlayer(EX,EL,Ey)call ForGroup(EX,function Hq)call DestroyBoolExpr(Ey)call DestroyGroup(EX)endfunctionfunction Hr takes nothing returns nothinglocal unit fP=GetTriggerUnit()local player EL=GetOwningPlayer(fP)local real xlocal real ylocal region r=CreateRegion()local player HR=ELcall RegionAddRect(r,bs)call RegionAddRect(r,bR)if bA and bd==false thenset bc[GetPlayerId(EL)]=trueset EL=Ed("Global|ReverseMode",GetPlayerName(EL))call SetUnitOwner(fP,EL,true)call SetPlayerState(HR,PLAYER_STATE_RESOURCE_FOOD_CAP,6)endifif EJ(GetOwningPlayer(fP))thenif IsUnitInRegion(r,fP)thenset x=GetRandomReal(GetRectMinX(bp),GetRectMaxX(bp))set y=GetRandomReal(GetRectMinY(bp),GetRectMaxY(bp))elseset x=GetUnitX(fP)set y=GetUnitY(fP)endifelseif IsUnitInRegion(r,fP)thenset x=GetRandomReal(GetRectMinX(bL),GetRectMaxX(bL))set y=GetRandomReal(GetRectMinY(bL),GetRectMaxY(bL))elseset x=GetUnitX(fP)set y=GetUnitY(fP)endifendifset bb[GetPlayerId(EL)]=trueif not bA or bd thencall PanCameraToTimedForPlayer(EL,x,y,0)call ClearSelectionForPlayer(EL)call SelectUnitAddForPlayer(fP,EL)endifcall SetUnitX(fP,x)call SetUnitY(fP,y)set ay[GetPlayerId(EL)]=fPif bA and bd==false thencall Er(HR)elsecall Er(EL)endifcall StoreBoolean(AG,e4(fP),"EnteredAlready",true)if not At thenset B[GetUnitPointValue(fP)]=truecall Eq(GetUnitTypeId(fP))endifif R thenif EJ(EL)thenset a3[0]=a3[0]+1elseset a3[1]=a3[1]+1endifset Aa[GetPlayerId(EL)]=Aa[GetPlayerId(EL)]+1if Aa[GetPlayerId(GetOwningPlayer(fP))]>1 and fP!=a9[GetPlayerId(GetOwningPlayer(fP))]thencall SetHeroXP(fP,GetHeroXP(a9[GetPlayerId(GetOwningPlayer(fP))]),false)call UnitAddItem(fP,UnitItemInSlot(a9[GetPlayerId(GetOwningPlayer(fP))],0))call UnitAddItem(fP,UnitItemInSlot(a9[GetPlayerId(GetOwningPlayer(fP))],1))call UnitAddItem(fP,UnitItemInSlot(a9[GetPlayerId(GetOwningPlayer(fP))],2))call UnitAddItem(fP,UnitItemInSlot(a9[GetPlayerId(GetOwningPlayer(fP))],3))call UnitAddItem(fP,UnitItemInSlot(a9[GetPlayerId(GetOwningPlayer(fP))],4))call UnitAddItem(fP,UnitItemInSlot(a9[GetPlayerId(GetOwningPlayer(fP))],5))if gg(a9[GetPlayerId(GetOwningPlayer(fP))])thencall gh(a9[GetPlayerId(GetOwningPlayer(fP))])elsecall fV(a9[GetPlayerId(GetOwningPlayer(fP))])endifendifendifif bA thenif TimerGetElapsed(n)>60 thencall HO(EL,"has been automatically assigned "+GetUnitName(fP))elseif ab[GetPlayerId(HR)] thencall HO(EL,"has been randomly given "+GetUnitName(fP)+" by "+GetPlayerName(HR))elsecall SetPlayerState(HR,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(HR,PLAYER_STATE_RESOURCE_GOLD)+250)call HO(EL,"has been given "+GetUnitName(fP)+" by "+GetPlayerName(HR))endifelseif Aw==false or EL==AH thenif(j[GetPlayerId(GetOwningPlayer(fP))] and Aw==false)thencall HO(EL,"has repicked into "+GetUnitName(fP)+".")elseif((ab[GetPlayerId(EL)] and R==false)or S or T or A0)thencall HO(EL,"has randomed "+GetUnitName(fP)+".")elsecall HO(EL,"has chosen "+GetUnitName(fP)+".")endifendifif U thenif bA thencall HQ(HR)elsecall HQ(EL)endifendifif bH thencall HQ(EL)endifif(GetUnitTypeId(fP)=='E005')thencall DisplayTimedTextToPlayer(EL,0,A6,60.," ")call DisplayTimedTextToPlayer(EL,0,A6,60.,"|c00ff0303"+"Do not purchase items with Orb Effects (Sange, Stygian Desolator, etc) as they will cause Luna's attack to completely malfunction."+"|r")endifif(GetUnitTypeId(fP)=='E01B')thencall DisplayTimedTextToPlayer(EL,0,A6,30.," ")call DisplayTimedTextToPlayer(EL,0,A6,30.,"|c00ff0303"+"Droppable Items do not drop while phased. Activated items on death (like aegis) will not trigger while phased on unpathable terrain."+"|r")endifif(ab[GetPlayerId(EL)]==false)thenif(AW)thencall SetPlayerState(EL,PLAYER_STATE_RESOURCE_GOLD,175+GetPlayerState(EL,PLAYER_STATE_RESOURCE_GOLD))endifendifif HaveStoredBoolean(AG,"HeroInit:"+I2S(GetUnitPointValue(fP)),"Initialized")==false thencall StoreBoolean(AG,"HeroInit:"+I2S(GetUnitPointValue(fP)),"Initialized",true)call gm(fP)endifcall RemoveRegion(r)endfunctionfunction Hs takes nothing returns nothingcall SetPlayerState(Ac[1],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(Ac[1],PLAYER_STATE_RESOURCE_GOLD)+8)call SetPlayerState(Ac[2],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(Ac[2],PLAYER_STATE_RESOURCE_GOLD)+8)call SetPlayerState(Ac[3],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(Ac[3],PLAYER_STATE_RESOURCE_GOLD)+8)call SetPlayerState(Ac[4],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(Ac[4],PLAYER_STATE_RESOURCE_GOLD)+8)call SetPlayerState(Ac[5],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(Ac[5],PLAYER_STATE_RESOURCE_GOLD)+8)call SetPlayerState(AC[1],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(AC[1],PLAYER_STATE_RESOURCE_GOLD)+8)call SetPlayerState(AC[2],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(AC[2],PLAYER_STATE_RESOURCE_GOLD)+8)call SetPlayerState(AC[3],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(AC[3],PLAYER_STATE_RESOURCE_GOLD)+8)call SetPlayerState(AC[4],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(AC[4],PLAYER_STATE_RESOURCE_GOLD)+8)call SetPlayerState(AC[5],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(AC[5],PLAYER_STATE_RESOURCE_GOLD)+8)endfunctionfunction HS takes nothing returns nothingif(GetUnitTypeId(GetTriggerUnit())=='ugho')thenif(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))thenset a8[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=a8[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1elseset a7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=a7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1endifendifif(GetUnitTypeId(GetTriggerUnit())=='u001')thenif(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))thenset a8[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=a8[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1elseset a7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=a7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1endifendifif(GetUnitTypeId(GetTriggerUnit())=='unec')thenif(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))thenset a8[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=a8[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1elseset a7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=a7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1endifendifif(GetUnitTypeId(GetTriggerUnit())=='u002')thenif(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))thenset a8[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=a8[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1elseset a7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=a7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1endifendifif(GetUnitTypeId(GetTriggerUnit())=='esen')thenif(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))thenset a8[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=a8[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1elseset a7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=a7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1endifendifif(GetUnitTypeId(GetTriggerUnit())=='e00V')thenif(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))thenset a8[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=a8[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1elseset a7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=a7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1endifendifif(GetUnitTypeId(GetTriggerUnit())=='edry')thenif(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))thenset a8[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=a8[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1elseset a7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=a7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1endifendifif(GetUnitTypeId(GetTriggerUnit())=='e00W')thenif(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))thenset a8[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=a8[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1elseset a7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=a7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1endifendifcall LeaderboardSetLabelBJ(AE[GetPlayerId(GetOwningPlayer(GetKillingUnit()))],"Creep Kills: "+I2S(a7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))])+"  Denies: "+I2S(a8[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]))endfunctionfunction Ht takes unit gG returns booleanreturn GetUnitTypeId(gG)=='H00I'or GetUnitTypeId(gG)=='H00J'endfunctionfunction HT takes unit gG returns booleanlocal string f8=e4(GetOwningPlayer(gG))local unit gi=EC(f8,"Kobold0")local unit gI=EC(f8,"Kobold1")local unit gj=EC(f8,"Kobold2")local unit gJ=EC(f8,"Kobold3")if GetUnitAbilityLevel(gi,'A0OV')!=0 or GetUnitAbilityLevel(gI,'A0OV')!=0 or GetUnitAbilityLevel(gj,'A0OV')!=0 or GetUnitAbilityLevel(gJ,'A0OV')!=0 thenreturn trueendifreturn falseendfunctionfunction Hu takes unit gG returns booleanlocal integer i=0local string f8=e4(GetOwningPlayer(gG))local unit gH=EC(f8,"Kobold0")loopexitwhen i>5if GetItemTypeId(UnitItemInSlot(gH,i))=='olig'and GetItemCharges(UnitItemInSlot(gH,i))>0 thenreturn trueendifset i=i+1endloopreturn falseendfunctionfunction HU takes unit gG,location Hv returns nothinglocal string f8=e4(GetOwningPlayer(gG))local unit gi=EC(f8,"Kobold0")local unit gI=EC(f8,"Kobold1")local unit gj=EC(f8,"Kobold2")local unit gJ=EC(f8,"Kobold3")if gi!=null thencall ReviveHeroLoc(gi,Hv,true)call gF(gi)endifif gI!=null thencall ReviveHeroLoc(gI,Hv,true)call gF(gI)endifif gj!=null thencall ReviveHeroLoc(gj,Hv,true)call gF(gj)endifif gJ!=null thencall ReviveHeroLoc(gJ,Hv,true)call gF(gJ)endifendfunctionfunction HV takes player Hw,integer HW,unit gG returns nothinglocal texttag t=CreateTextTag()local string scall SetPlayerState(Hw,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(Hw,PLAYER_STATE_RESOURCE_GOLD)+HW)call SetTextTagText(t,"+"+I2S(HW),.025)call SetTextTagPosUnit(t,gG,0)call SetTextTagColor(t,255,220,0,255)call SetTextTagVelocity(t,0,.03)if GetLocalPlayer()==Hw thencall SetTextTagVisibility(t,true)set s="UI\\Feedback\\GoldCredit\\GoldCredit.mdl"elsecall SetTextTagVisibility(t,false)set s=""endifif GetUnitState(gG,UNIT_STATE_LIFE)>.5 thencall DestroyEffect(AddSpecialEffectTarget(s,gG,"overhead"))endifcall SetTextTagFadepoint(t,2)call SetTextTagLifespan(t,3)call SetTextTagPermanent(t,false)endfunctionfunction Hx takes player Hw,integer HW returns nothinglocal integer ER=1local integer gDif EJ(Hw)thenset gD=EN(Ab)elseset gD=EN(AB)endifif EJ(Hw)thenloopexitwhen ER>5if El(Ac[ER])thencall HV(Ac[ER],HW/gD,ay[GetPlayerId(Ac[ER])])endifset ER=ER+1endloopelseloopexitwhen ER>5if El(AC[ER])thencall HV(AC[ER],HW/gD,ay[GetPlayerId(AC[ER])])endifset ER=ER+1endloopendifendfunctionfunction HX takes unit gG,integer Hy returns nothinglocal player HY=GetOwningPlayer(gG)call SetPlayerState(HY,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(HY,PLAYER_STATE_RESOURCE_GOLD)-Hy)endfunctionfunction Hz takes nothing returns booleanif GetUnitTypeId(GetFilterUnit())=='o003'thencall KillUnit(GetFilterUnit())return trueendifreturn falseendfunctionfunction HZ takes nothing returns nothinglocal boolexpr Ey=Condition(function Hz)local group EX=GetUnitsInRectMatching(bj_mapInitialPlayableArea,Ey)call DestroyBoolExpr(Ey)call DestroyGroup(EX)endfunctionfunction H0 takes unit fw returns nothinglocal string f8=e4(GetOwningPlayer(fw))local unit H1=EC(f8,"BearItemHolder")local location Hvif EJ(GetOwningPlayer(fw))thenset Hv=GetRectCenter(bp)elseset Hv=GetRectCenter(bL)endifif H1!=null thencall SetItemPositionLoc(UnitRemoveItemFromSlot(H1,0),Hv)call SetItemPositionLoc(UnitRemoveItemFromSlot(H1,1),Hv)call SetItemPositionLoc(UnitRemoveItemFromSlot(H1,2),Hv)call SetItemPositionLoc(UnitRemoveItemFromSlot(H1,3),Hv)call SetItemPositionLoc(UnitRemoveItemFromSlot(H1,4),Hv)call SetItemPositionLoc(UnitRemoveItemFromSlot(H1,5),Hv)endifendfunctionfunction H3 takes nothing returns nothingendfunctionfunction H4 takes nothing returns booleanif IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO) thenif GetUnitTypeId(GetTriggerUnit())=='H00J'and Hu(GetTriggerUnit())thenreturn falseendifreturn trueendifreturn falseendfunctionfunction H5 takes nothing returns nothinglocal boolean H6=falselocal unit gG=GetDyingUnit()local unit H7=GetKillingUnit()local player Hw=GetOwningPlayer(H7)local player HY=GetOwningPlayer(gG)local location Hvlocal integer HW=0local integer Hy=0local boolean H8=falselocal string H9=""local string ia=""local string MidTextlocal integer xlocal string iAlocal string iblocal string iBlocal string iclocal boolean iC=falseif GetUnitAbilityLevel(gG,'A0OV')!=0 or(Ht(gG)and HT(gG))thenset iC=truecall UnitRemoveAbility(gG,'A0OV')set Ai=gGset Ap=H7if IsUnitType(H7,UNIT_TYPE_STRUCTURE)==false thencall ExecuteFunc("iD")endifendifif Hw==null thenset Hw=HYendifif v and GetUnitTypeId(gG)!='H00J'thenset AY=UnitRemoveItemFromSlot(gG,GetRandomInt(0,5))if GetItemTypeId(AY)=='I00K'thencall CreateItem('I00G',GetItemX(AY),GetItemY(AY))call RemoveItem(AY)endifendifif EJ(HY)thenif EJ(Hw)thenset H6=trueif(Hw==HY)thencall FG(A4,10.,(I[GetPlayerId(HY)]+GetPlayerName(HY)+"|r has killed himself!"))elsecall FG(A4,10.,(I[GetPlayerId(HY)]+GetPlayerName(HY)+"|r has been killed by his teammate"))endifelseif EK(Hw)thenset H8=trueset M[GetPlayerId(Ac[0])]=M[GetPlayerId(Ac[0])]+1set K[GetPlayerId(AC[0])]=K[GetPlayerId(AC[0])]+1set E[2]=E[2]+1set E[1]=0if Hw!=AC[0]thenset K[GetPlayerId(Hw)]=K[GetPlayerId(Hw)]+1set C[GetPlayerId(Hw)]=C[GetPlayerId(Hw)]+1endifendifendifif EK(HY)thenif EK(Hw)thenset H6=trueif(Hw==HY)thencall FG(A4,10.,(I[GetPlayerId(HY)]+GetPlayerName(HY)+"|r has killed himself!"))elsecall FG(A4,10.,(I[GetPlayerId(HY)]+GetPlayerName(HY)+"|r has been killed by his teammate"))endifelseif EJ(Hw)thenset H8=trueset M[GetPlayerId(AC[0])]=M[GetPlayerId(AC[0])]+1set K[GetPlayerId(Ac[0])]=K[GetPlayerId(Ac[0])]+1set E[1]=E[1]+1set E[2]=0if Hw!=Ac[0]thenset K[GetPlayerId(Hw)]=K[GetPlayerId(Hw)]+1set C[GetPlayerId(Hw)]=C[GetPlayerId(Hw)]+1endifendifendifif Hw==Ad thenset H8=falseif GetUnitTypeId(H7)=='n00L'thencall FG(A4,10.,(I[GetPlayerId(HY)]+GetPlayerName(HY)+"|r has been killed by Roshan"))elsecall FG(A4,10.,(I[GetPlayerId(HY)]+GetPlayerName(HY)+"|r has been killed by Neutral Creeps"))endifset H6=trueendifif GetUnitTypeId(GetKillingUnit())=='e01H'thencall ExecuteFunc("H3")endifset x=C[GetPlayerId(HY)]if x>2 and H6==false thenif x==3 thenset HW=50set H9="|c0000ff40killing spree|r"elseif x==4 thenset HW='d'set H9="|c00400080dominating|r"elseif x==5 thenset HW=150set H9="|c00ff0080mega kill|r"elseif x==6 thenset HW=200set H9="|c00ff8000unstoppable|r"elseif x==7 thenset HW=250set H9="|c00808000wicked sick|r"elseif x==8 thenset HW=300set H9="|c00ff80ffmonster kill|r"elseif x==9 thenset HW=350set H9="|c00ff0000GODLIKE|r"elseset HW=400set H9="|c00ff8000beyond GODLIKE|r"endifendifset x=C[GetPlayerId(Hw)]if x>er[GetPlayerId(Hw)]thenset er[GetPlayerId(Hw)]=xendifif x>2 and H6==false thenif x==3 thencall PlaySoundBJ(BJ)set ia=" is on a |c0000ff40killing spree|r!"elseif x==4 thencall PlaySoundBJ(BH)set ia=" is |c00400080dominating|r!"elseif x==5 thencall PlaySoundBJ(Bk)set ia=" has a |c00ff0080mega kill|r!"elseif x==6 thencall PlaySoundBJ(BL)set ia=" is |c00ff8000unstoppable|r!!"elseif x==7 thencall PlaySoundBJ(Bm)set ia=" is |c00808000wicked Sick|r!!"elseif x==8 thencall PlaySoundBJ(BM)set ia=" has a |c00ff80ffmonster kill|r!!"elseif x==9 thencall PlaySoundBJ(Bj)set ia=" is |c00ff0000GODLIKE|r!!!"elsecall PlaySoundBJ(Bn)set ia=" is |c00ff8000beyond GODLIKE|r. Someone KILL HIM!!!"endifendifif H6==false thenset HW=HW+'d'+GetHeroLevel(gG)*5+'d'set iA=I[GetPlayerId(HY)]+GetPlayerName(HY)+"|r"set ib=I[GetPlayerId(Hw)]+GetPlayerName(Hw)+"|r"set ic="|c00FFDC00"+I2S(HW)+"|r"if Hw==Ac[0]thenset iB=ib+" pawned "+iA+"'s head! "+ic+" gold is split."call Hx(Hw,HW)elseif Hw==AC[0]thenset iB=ib+" pawned "+iA+"'s head! "+ic+" gold is split."call Hx(Hw,HW)elseif H9==""and ia==""thenset iB=ib+" pawned "+iA+"'s head for "+ic+" gold!"elseif H9==""and ia!=""thenset iB=ib+" pawned "+iA+"'s head for "+ic+" gold!"elseif H9!=""and ia==""thenset iB=ib+" has just ended "+iA+"'s "+H9+" streak for "+ic+" gold!"elseif H9!=""and ia!=""thenset iB=ib+" has just ended "+iA+"'s "+H9+" streak for "+ic+" gold! "endifcall FG(A4,10,iB)if ia!=""thencall FG(A4,10,ib+ia)endifcall HV(Hw,HW,gG)set et[GetPlayerId(Hw)]=et[GetPlayerId(Hw)]+HWif E[1]>4 thencall PolledWait(1.5)call FG(A4,10.,I[GetPlayerId(Ac[0])]+"The Sentinel|r are "+I[GetPlayerId(Ac[0])]+"OWNING!!!|r")call PlaySoundBJ(BK)endifif E[2]>4 thencall PolledWait(1.5)call FG(A4,10.,I[GetPlayerId(AC[0])]+"The Scourge|r are "+I[GetPlayerId(AC[0])]+"OWNING!!!|r")call PlaySoundBJ(BK)endifendifset Hy=GetHeroLevel(gG)*30if iC==false thenset eQ[GetPlayerId(HY)]=eQ[GetPlayerId(HY)]+Hycall HX(gG,Hy)endifcall Ea("Stats"+I2S(GetPlayerId(Hw)),"Killed "+I2S(GetPlayerId(HY)),EH("Stats"+I2S(GetPlayerId(Hw)),"Killed "+I2S(GetPlayerId(HY)))+1)call Ea("Stats"+I2S(GetPlayerId(HY)),"Died To "+I2S(GetPlayerId(Hw)),EH("Stats"+I2S(GetPlayerId(HY)),"Died To "+I2S(GetPlayerId(Hw)))+1)call StartTimerBJ(J[GetPlayerId(Hw)],false,11.5)if H6==false thenif Hw!=Ac[0]thenif Hw!=AC[0]thenif Hw!=Ad thencall PolledWait(1.5)set D[GetPlayerId(Hw)]=D[GetPlayerId(Hw)]+1if D[GetPlayerId(Hw)]==2 thencall PlaySoundBJ(Bi)set eR[GetPlayerId(Hw)]=eR[GetPlayerId(Hw)]+1call FG(A4,10.,I[GetPlayerId(Hw)]+GetPlayerName(Hw)+"|r just got a |c000000ffDouble Kill|r!")endifif D[GetPlayerId(Hw)]>2 thencall PlaySoundBJ(Bl)set es[GetPlayerId(Hw)]=es[GetPlayerId(Hw)]+1call FG(A4,10.,I[GetPlayerId(Hw)]+GetPlayerName(Hw)+"|r just got a |c0000ff40Triple Kill|r!!!")endifendifendifendifendifif(H6==false)thenset C[GetPlayerId(HY)]=0endifset C[0]=0set C[6]=0set M[GetPlayerId(HY)]=M[GetPlayerId(HY)]+1if iC thenset eS[GetPlayerId(HY)]=eS[GetPlayerId(HY)]+GetHeroLevel(gG)*1call TimerStart(L[GetPlayerId(HY)],GetHeroLevel(gG)*1,false,null)elseset eS[GetPlayerId(HY)]=eS[GetPlayerId(HY)]+GetHeroLevel(gG)*4call TimerStart(L[GetPlayerId(HY)],GetHeroLevel(gG)*4,false,null)endifcall TriggerExecute(B0)if R==false thenif iC thenset A[GetPlayerId(HY)]=GetHeroLevel(gG)*1elseset A[GetPlayerId(HY)]=GetHeroLevel(gG)*4endifloopcall PolledWait(1.85)set A[GetPlayerId(HY)]=A[GetPlayerId(HY)]-2exitwhen A[GetPlayerId(HY)]<1endloopif(EK(HY))thenset Hv=GetRectCenter(bL)elseset Hv=GetRectCenter(bp)endifif GetUnitState(gG,UNIT_STATE_LIFE)<1 and A5==false thencall PanCameraToTimedLocForPlayer(HY,Hv,1.)endifif A5==false thenif Ht(gG)==false or GetUnitAbilityLevel(gG,'A0MW')==0 thencall ReviveHeroLoc(gG,Hv,true)elsecall HU(gG,Hv)endifif iC thencall SetUnitState(gG,UNIT_STATE_MANA,GetUnitState(gG,UNIT_STATE_MAX_MANA))endifendifcall RemoveLocation(Hv)elseif(EJ(HY))thenset Q[0]=Q[0]+1endifif EK(HY)thenset Q[1]=Q[1]+1endifset a9[GetPlayerId(HY)]=gGif GetUnitTypeId(gG)=='H00J'thenset a9[GetPlayerId(HY)]=EC(e4(GetOwningPlayer(gG)),"Kobold0")endifcall SetPlayerStateBJ(GetOwningPlayer(GetTriggerUnit()),PLAYER_STATE_RESOURCE_FOOD_CAP,5)if Q[0]==f1(eH,eI-ei+1)thencall TriggerExecute(B6)endifif Q[1]==f1(eH,eI-ei+1)thencall TriggerExecute(B5)endifcall PolledWait((GetHeroLevel(gG)*4)-1)if(GetUnitTypeId(gG)=='U006')thencall ExecuteFunc("HZ")endifif(GetUnitTypeId(gG)=='N01O')or(GetUnitTypeId(gG)=='N015')or(GetUnitTypeId(gG)=='N014')or(GetUnitTypeId(gG)=='N013')thencall H0(gG)endifendifendfunctionfunction ie takes nothing returns booleanif(IsUnitType(GetDyingUnit(),UNIT_TYPE_HERO)==false)thenreturn falseendifif(GetPlayerController(GetOwningPlayer(GetKillingUnit()))!=MAP_CONTROL_USER)thenreturn falseendifif(GetDyingUnit()==GetKillingUnit())thenreturn falseendifif(GetOwningPlayer(GetKillingUnit())==null)thenreturn falseendifif(EJ(GetOwningPlayer(GetKillingUnit())))thenif(EJ(GetOwningPlayer(GetDyingUnit())))thenreturn falseendifendifif(EK(GetOwningPlayer(GetKillingUnit())))thenif(EK(GetOwningPlayer(GetDyingUnit())))thenreturn falseendifendifreturn trueendfunctionfunction iE takes nothing returns nothingcall DisableTrigger(BQ)call FG(A4,10.,(I[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+(GetPlayerName(GetOwningPlayer(GetKillingUnit()))+("|r just drew "+(I[0]+"first blood!|r (+200 gold)")))))call AdjustPlayerStateBJ(200,GetOwningPlayer(GetKillingUnit()),PLAYER_STATE_RESOURCE_GOLD)call PlaySoundBJ(BI)endfunctionfunction iF takes nothing returns booleanreturn GetUnitTypeId(GetDyingUnit())=='n00L'endfunctionfunction IsHero takes nothing returns booleanreturn(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)!=null)endfunctionfunction Roshan_Secret_Lightning takes nothing returns nothingcall DestroyEffect(AddSpecialEffect("Doodads\\Cinematic\\Lightningbolt\\Lightningbolt.mdl",2407,-496))endfunctionfunction ig takes nothing returns nothingendfunctionfunction Roshan_Secret takes nothing returns nothinglocal location iG=GetRectCenter(b0)local weathereffect ih=AddWeatherEffect(Be,'SNbs')local unit iHlocal trigger t=CreateTrigger()call EnableWeatherEffect(ih,true)call PolledWait(10)set iH=CreateUnitAtLoc(Player(12),'n01X',iG,330)call UnitAddItem(iH,CreateItem('I017',0,0))call TriggerRegisterUnitEvent(t,iH,EVENT_UNIT_DEATH)call TriggerAddAction(t,function ig)endfunctionfunction ii takes nothing returns nothingif(EJ(GetOwningPlayer(GetKillingUnit())))thencall FG(bj_FORCE_ALL_PLAYERS,10.,"Roshan has been slain by the |c00ff0000Sentinel|r!  Each Sentinel player receives 800 bonus gold.")call AdjustPlayerStateBJ(800,Ac[1],PLAYER_STATE_RESOURCE_GOLD)call AdjustPlayerStateBJ(800,Ac[2],PLAYER_STATE_RESOURCE_GOLD)call AdjustPlayerStateBJ(800,Ac[3],PLAYER_STATE_RESOURCE_GOLD)call AdjustPlayerStateBJ(800,Ac[4],PLAYER_STATE_RESOURCE_GOLD)call AdjustPlayerStateBJ(800,Ac[5],PLAYER_STATE_RESOURCE_GOLD)endifif(EK(GetOwningPlayer(GetKillingUnit())))thencall FG(bj_FORCE_ALL_PLAYERS,10.,"Roshan has been slain by the |c00004000Scourge|r!  Each Scourge player receives 800 bonus gold.")call AdjustPlayerStateBJ(800,AC[1],PLAYER_STATE_RESOURCE_GOLD)call AdjustPlayerStateBJ(800,AC[2],PLAYER_STATE_RESOURCE_GOLD)call AdjustPlayerStateBJ(800,AC[3],PLAYER_STATE_RESOURCE_GOLD)call AdjustPlayerStateBJ(800,AC[4],PLAYER_STATE_RESOURCE_GOLD)call AdjustPlayerStateBJ(800,AC[5],PLAYER_STATE_RESOURCE_GOLD)endifcall DisableTrigger(Br)endfunctionfunction iI takes nothing returns booleanreturn IsUnitAlly(GetKillingUnit(),GetOwningPlayer(GetDyingUnit()))endfunctionfunction ij takes unit iJ,player ik returns nothinglocal texttag tt=CreateTextTagUnitBJ("!",iJ,64,13,eE[GetPlayerId(ik)],ef[GetPlayerId(ik)],eF[GetPlayerId(ik)],15)call SetTextTagVelocityBJ(tt,64,90)call SetTextTagVisibility(tt,false)if e0[GetPlayerId(GetLocalPlayer())] thencall SetTextTagVisibility(tt,true)endifcall PolledWait(1.)call DestroyTextTag(tt)endfunctionfunction iK takes nothing returns booleanreturn IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) and IsUnitIllusion(GetFilterUnit())==false and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetDyingUnit()))endfunctionfunction il takes nothing returns nothinglocal boolexpr Ey=Condition(function iK)local group EX=CreateGroup()local integer XPlocal integer iLlocal integer ER=1local unit gnlocal integer im=18local integer iM=im*2call GroupEnumUnitsInRange(EX,GetUnitX(GetDyingUnit()),GetUnitY(GetDyingUnit()),1000,Ey)set iL=CountUnitsInGroup(EX)loopexitwhen ER>iLset gn=FirstOfGroup(EX)if IsUnitType(gn,UNIT_TYPE_MELEE_ATTACKER) thencall AddHeroXP(gn,iM/iL,true)elsecall AddHeroXP(gn,im/iL,true)endifcall GroupRemoveUnit(EX,gn)set ER=ER+1endloopcall DestroyGroup(EX)call DestroyBoolExpr(Ey)call ij(GetDyingUnit(),GetOwningPlayer(GetKillingUnit()))endfunctionfunction in takes nothing returns nothingset D[1]=0endfunctionfunction iN takes nothing returns nothingset D[2]=0endfunctionfunction io takes nothing returns nothingset D[3]=0endfunctionfunction iO takes nothing returns nothingset D[4]=0endfunctionfunction ip takes nothing returns nothingset D[5]=0endfunctionfunction iP takes nothing returns nothingset D[7]=0endfunctionfunction iq takes nothing returns nothingset D[8]=0endfunctionfunction iQ takes nothing returns nothingset D[9]=0endfunctionfunction ir takes nothing returns nothingset D[10]=0endfunctionfunction iR takes nothing returns nothingset D[11]=0endfunctionfunction is takes nothing returns nothingset H=truecall PolledWait(2)if AW thencall FG(bj_FORCE_ALL_PLAYERS,20.,I[GetPlayerId(AH)]+GetPlayerName(AH)+"|r"+" has defaulted to "+"|c006699CC"+"Normal Mode"+"|r"+". You will get 175 gold refunded when you pick a hero.")call FG(bj_FORCE_ALL_PLAYERS,20.," ")endifendfunctionfunction iS takes nothing returns nothingset F=trueendfunctionfunction it takes nothing returns nothingset AN=trueendfunctionfunction iT takes nothing returns nothingset bD=trueendfunctionfunction iu takes nothing returns nothinglocal integer ERlocal integer Eslocal integer iUlocal integer ivset az=EN(Ab)set ER=1set Es=5set iU=1loopexitwhen ER>Esif(El(Ac[ER]))thenset a0[iU]=Ac[ER]set iU=iU+1endifset ER=ER+1endloopset aZ=EN(AB)set ER=1set Es=5set iU=1loopexitwhen ER>Esif(El(AC[ER]))thenset a1[iU]=AC[ER]set iU=iU+1endifset ER=ER+1endloopset aa=CreateMultiboardBJ(4,6+aZ+az,bB)call MultiboardSetItemValueBJ(aa,1,1,"Player")call MultiboardSetItemValueBJ(aa,2,1,"Dead?")call MultiboardSetItemValueBJ(aa,3,1," Kills")call MultiboardSetItemValueBJ(aa,4,1,"Deaths")call MultiboardSetItemValueBJ(aa,1,2,"The Sentinel")call MultiboardSetItemValueBJ(aa,1,3+az,"The Scourge")call MultiboardSetItemValueBJ(aa,3,3+az,"   0")call MultiboardSetItemValueBJ(aa,4,3+az,"    0")call MultiboardSetItemValueBJ(aa,3,2,"   0")call MultiboardSetItemValueBJ(aa,4,2,"    0")call MultiboardSetItemColorBJ(aa,1,2,E7(Ac[0])/255.*'d',E8(Ac[0])/255.*'d',E9(Ac[0])/255.*'d',0)call MultiboardSetItemColorBJ(aa,1,3+az,E7(AC[0])/255.*'d',E8(AC[0])/255.*'d',E9(AC[0])/255.*'d',0)set ER=1set Es=6+aZ+azloopexitwhen ER>Escall MultiboardSetItemWidthBJ(aa,1,ER,9.8)call MultiboardSetItemWidthBJ(aa,2,ER,4.2)call MultiboardSetItemWidthBJ(aa,3,ER,4.)call MultiboardSetItemWidthBJ(aa,4,ER,4.6)call MultiboardSetItemColorBJ(aa,2,ER,86.2,86.2,.0,0)call MultiboardSetItemColorBJ(aa,3,ER,100.,.0,.0,0)call MultiboardSetItemColorBJ(aa,4,ER,.0,5.,100.,0)set ER=ER+1endloopset ER=1set Es=4loopexitwhen ER>Esset iU=1set iv=6+aZ+azloopexitwhen iU>ivcall MultiboardSetItemStyleBJ(aa,ER,iU,true,false)set iU=iU+1endloopset ER=ER+1endloopset ER=1set Es=azloopexitwhen ER>Escall MultiboardSetItemStyleBJ(aa,1,ER+2,true,true)call MultiboardSetItemValueBJ(aa,1,ER+2,GetPlayerName(a0[ER]))call MultiboardSetItemColorBJ(aa,1,ER+2,E7(a0[ER])/255.*'d',E8(a0[ER])/255.*'d',E9(a0[ER])/255.*'d',0)call MultiboardSetItemValueBJ(aa,2,(ER+2),"     ")call MultiboardSetItemValueBJ(aa,3,(ER+2),"   0")call MultiboardSetItemValueBJ(aa,4,(ER+2),"    0")set ER=ER+1endloopset ER=1set Es=aZloopexitwhen ER>Escall MultiboardSetItemStyleBJ(aa,1,ER+3+az,true,true)call MultiboardSetItemValueBJ(aa,1,ER+3+az,GetPlayerName(a1[ER]))call MultiboardSetItemColorBJ(aa,1,ER+3+az,E7(a1[ER])/255.*'d',E8(a1[ER])/255.*'d',E9(a1[ER])/255.*'d',0)call MultiboardSetItemValueBJ(aa,2,(ER+3+az),"     ")call MultiboardSetItemValueBJ(aa,3,(ER+3+az),"   0")call MultiboardSetItemValueBJ(aa,4,(ER+3+az),"    0")set ER=ER+1endloopcall MultiboardSetItemValueBJ(aa,1,6+aZ+az-2,"Time Elapsed")call MultiboardSetItemColorBJ(aa,3,6+aZ+az-2,100.,100.,100.,0)call MultiboardSetItemValueBJ(aa,1,6+aZ+az-1,(I[GetPlayerId(Ac[0])]+("Towers Lost"+"|r")))call MultiboardSetItemValueBJ(aa,1,6+aZ+az,(I[GetPlayerId(AC[0])]+("Towers Lost"+"|r")))call MultiboardSetItemValueBJ(aa,3,6+aZ+az-1,"    0")call MultiboardSetItemValueBJ(aa,3,6+aZ+az,"    0")call MultiboardDisplay(aa,true)if AQ and(GetLocalPlayer()==eD or GetLocalPlayer()==ee)thencall MultiboardDisplay(aa,false)endifendfunctionfunction iV takes nothing returns nothinglocal integer ERlocal integer Escall MultiboardSetItemValueBJ(aa,3,2,("   "+I2S(K[GetPlayerId(Ac[0])])))call MultiboardSetItemValueBJ(aa,4,2,("    "+I2S(M[GetPlayerId(Ac[0])])))call MultiboardSetItemValueBJ(aa,3,3+az,("   "+I2S(K[GetPlayerId(AC[0])])))call MultiboardSetItemValueBJ(aa,4,3+az,("    "+I2S(M[GetPlayerId(AC[0])])))set ER=1set Es=azloopexitwhen ER>Escall MultiboardSetItemValueBJ(aa,3,(ER+2),("   "+I2S(K[GetPlayerId(a0[ER])])))call MultiboardSetItemValueBJ(aa,4,(ER+2),("    "+I2S(M[GetPlayerId(a0[ER])])))set ER=ER+1endloopset ER=1set Es=aZloopexitwhen ER>Escall MultiboardSetItemValueBJ(aa,3,(ER+3+az),("   "+I2S(K[GetPlayerId(a1[ER])])))call MultiboardSetItemValueBJ(aa,4,(ER+3+az),("    "+I2S(M[GetPlayerId(a1[ER])])))set ER=ER+1endloopendfunctionfunction iw takes nothing returns booleanif(GetUnitTypeId(GetTriggerUnit())=='e00R')thenreturn trueendifif(GetUnitTypeId(GetTriggerUnit())=='e011')thenreturn trueendifif(GetUnitTypeId(GetTriggerUnit())=='e00S')thenreturn trueendifif(GetUnitTypeId(GetTriggerUnit())=='e019')thenreturn trueendifreturn falseendfunctionfunction iW takes nothing returns nothingset N[1]=(N[1]+1)endfunctionfunction ix takes nothing returns booleanif(GetUnitTypeId(GetTriggerUnit())=='u00M')thenreturn trueendifif(GetUnitTypeId(GetTriggerUnit())=='u00D')thenreturn trueendifif(GetUnitTypeId(GetTriggerUnit())=='u00N')thenreturn trueendifif(GetUnitTypeId(GetTriggerUnit())=='u00T')thenreturn trueendifreturn falseendfunctionfunction iX takes nothing returns nothingset N[2]=(N[2]+1)endfunctionfunction iy takes nothing returns nothinglocal integer ERlocal integer Eslocal string gfif AQ and(GetLocalPlayer()==eD or GetLocalPlayer()==ee)thenelsecall MultiboardDisplay(aa,true)endifcall SetWaterBaseColor(0,0,255,255)set ER=1set Es=azloopexitwhen ER>Esif ay[GetPlayerId(a0[ER])]!=null thencall MultiboardSetItemIconBJ(aa,1,ER+2,em[GetUnitPointValue(ay[GetPlayerId(a0[ER])])])endifif((GetPlayerState(Player(GetPlayerId(a0[ER])),PLAYER_STATE_RESOURCE_FOOD_USED)==0)and ay[GetPlayerId(a0[ER])]!=null and TimerGetRemaining(L[GetPlayerId(a0[ER])])>0)thencall MultiboardSetItemValueBJ(aa,2,(ER+2),("    "+I2S(R2I(TimerGetRemaining(L[GetPlayerId(a0[ER])])))))elsecall MultiboardSetItemValueBJ(aa,2,(ER+2),"     ")endifset ER=ER+1endloopset ER=1set Es=aZloopexitwhen ER>Esif ay[GetPlayerId(a1[ER])]!=null thencall MultiboardSetItemIconBJ(aa,1,ER+3+az,em[GetUnitPointValue(ay[GetPlayerId(a1[ER])])])endifif((GetPlayerState(Player(GetPlayerId(a1[ER])),PLAYER_STATE_RESOURCE_FOOD_USED)==0)and ay[GetPlayerId(a1[ER])]!=null and TimerGetRemaining(L[GetPlayerId(a1[ER])])>0)thencall MultiboardSetItemValueBJ(aa,2,(ER+3+az),("    "+I2S(R2I(TimerGetRemaining(L[GetPlayerId(a1[ER])])))))elsecall MultiboardSetItemValueBJ(aa,2,(ER+3+az),"     ")endifset ER=ER+1endloopset o=((R2I(TimerGetElapsed(n))/60)-(1/2))set O=ModuloInteger(R2I(TimerGetElapsed(n)),60)if(O<10)thenset gf=I2S(o)+":0"+I2S(O)elseset gf=I2S(o)+":"+I2S(O)endifcall MultiboardSetItemValueBJ(aa,3,6+aZ+az-2," "+gf)call MultiboardSetItemValueBJ(aa,3,6+aZ+az-1,I[GetPlayerId(Ac[0])]+"    "+I2S(N[1]))call MultiboardSetItemValueBJ(aa,3,6+aZ+az,I[GetPlayerId(AC[0])]+"    "+I2S(N[2])+"|r")endfunctionfunction iY takes nothing returns nothingset AE[GetPlayerId(Ac[1])]=CreateLeaderboard()set AE[GetPlayerId(Ac[2])]=CreateLeaderboard()set AE[GetPlayerId(Ac[3])]=CreateLeaderboard()set AE[GetPlayerId(Ac[4])]=CreateLeaderboard()set AE[GetPlayerId(Ac[5])]=CreateLeaderboard()set AE[GetPlayerId(AC[1])]=CreateLeaderboard()set AE[GetPlayerId(AC[2])]=CreateLeaderboard()set AE[GetPlayerId(AC[3])]=CreateLeaderboard()set AE[GetPlayerId(AC[4])]=CreateLeaderboard()set AE[GetPlayerId(AC[5])]=CreateLeaderboard()call PlayerSetLeaderboard(Ac[1],AE[GetPlayerId(Ac[1])])call PlayerSetLeaderboard(Ac[2],AE[GetPlayerId(Ac[2])])call PlayerSetLeaderboard(Ac[3],AE[GetPlayerId(Ac[3])])call PlayerSetLeaderboard(Ac[4],AE[GetPlayerId(Ac[4])])call PlayerSetLeaderboard(Ac[5],AE[GetPlayerId(Ac[5])])call PlayerSetLeaderboard(AC[1],AE[GetPlayerId(AC[1])])call PlayerSetLeaderboard(AC[2],AE[GetPlayerId(AC[2])])call PlayerSetLeaderboard(AC[3],AE[GetPlayerId(AC[3])])call PlayerSetLeaderboard(AC[4],AE[GetPlayerId(AC[4])])call PlayerSetLeaderboard(AC[5],AE[GetPlayerId(AC[5])])call LeaderboardDisplay(AE[GetPlayerId(Ac[1])],false)call LeaderboardDisplay(AE[GetPlayerId(Ac[2])],false)call LeaderboardDisplay(AE[GetPlayerId(Ac[3])],false)call LeaderboardDisplay(AE[GetPlayerId(Ac[4])],false)call LeaderboardDisplay(AE[GetPlayerId(Ac[5])],false)call LeaderboardDisplay(AE[GetPlayerId(AC[1])],false)call LeaderboardDisplay(AE[GetPlayerId(AC[2])],false)call LeaderboardDisplay(AE[GetPlayerId(AC[3])],false)call LeaderboardDisplay(AE[GetPlayerId(AC[4])],false)call LeaderboardDisplay(AE[GetPlayerId(AC[5])],false)call LeaderboardSetLabelBJ(AE[GetPlayerId(Ac[1])],"Creep Kills: 0 Denies: 0")call LeaderboardSetLabelBJ(AE[GetPlayerId(Ac[2])],"Creep Kills: 0 Denies: 0")call LeaderboardSetLabelBJ(AE[GetPlayerId(Ac[3])],"Creep Kills: 0 Denies: 0")call LeaderboardSetLabelBJ(AE[GetPlayerId(Ac[4])],"Creep Kills: 0 Denies: 0")call LeaderboardSetLabelBJ(AE[GetPlayerId(Ac[5])],"Creep Kills: 0 Denies: 0")call LeaderboardSetLabelBJ(AE[GetPlayerId(AC[1])],"Creep Kills: 0 Denies: 0")call LeaderboardSetLabelBJ(AE[GetPlayerId(AC[2])],"Creep Kills: 0 Denies: 0")call LeaderboardSetLabelBJ(AE[GetPlayerId(AC[3])],"Creep Kills: 0 Denies: 0")call LeaderboardSetLabelBJ(AE[GetPlayerId(AC[4])],"Creep Kills: 0 Denies: 0")call LeaderboardSetLabelBJ(AE[GetPlayerId(AC[5])],"Creep Kills: 0 Denies: 0")endfunctionfunction iz takes nothing returns nothingset bj=f2(bj-1,0)call MultiboardSetItemValue(eT,I2S(bj))call MultiboardSetItemValue(eu,I2S(bj))endfunctionfunction iZ takes nothing returns stringlocal string gfif(O<10)thenset gf=I2S(o)+":0"+I2S(O)elseset gf=I2S(o)+":"+I2S(O)endifreturn gfendfunctionfunction i0 takes nothing returns stringreturn eWendfunctionfunction i1 takes nothing returns stringreturn bIendfunctionfunction i2 takes player EL returns stringreturn bJ[GetPlayerId(EL)]endfunctionfunction i3 takes player EL returns stringreturn em[GetUnitPointValue(ay[GetPlayerId(EL)])]endfunctionfunction i4 takes player EL,integer i5 returns stringreturn F3(UnitItemInSlot(ay[GetPlayerId(EL)],i5-1))endfunctionfunction i6 takes player EL returns stringreturn I[GetPlayerId(EL)]+GetPlayerName(EL)+"|r"endfunctionfunction i7 takes player EL returns stringreturn fG(ay[GetPlayerId(EL)])endfunctionfunction i8 takes player EL returns stringreturn I2S(GetPlayerState(EL,PLAYER_STATE_RESOURCE_GOLD))endfunctionfunction i9 takes player p returns stringreturn I2S(EH("Stats"+I2S(GetPlayerId(p)),"NumOfConsumables"))endfunctionfunction Ia takes player p returns stringreturn I2S(EH("Stats"+I2S(GetPlayerId(p)),"NumOfVeggies"))endfunctionfunction IA takes player p returns stringreturn I2S(GetUnitLevel(ay[GetPlayerId(p)]))endfunctionfunction Ib takes player p returns stringreturn I2S(EH("Stats"+I2S(GetPlayerId(p)),"NumOfWards"))endfunctionfunction IB takes player EL returns stringreturn I2S(et[GetPlayerId(EL)])endfunctionfunction Ic takes player EL returns stringreturn I2S(eQ[GetPlayerId(EL)])endfunctionfunction IC takes player EL returns stringreturn I2S(K[GetPlayerId(EL)])endfunctionfunction Id takes player EL returns stringreturn I2S(M[GetPlayerId(EL)])endfunctionfunction Ie takes player EL returns stringreturn I2S(a7[GetPlayerId(EL)])endfunctionfunction IE takes player EL returns stringreturn I2S(a8[GetPlayerId(EL)])endfunctionfunction If takes player p returns stringreturn I2S(EH("Stats"+I2S(GetPlayerId(p)),"NumOfNeutrals"))endfunctionfunction IF takes player EL returns stringreturn I2S(eR[GetPlayerId(EL)])endfunctionfunction Ig takes player EL returns stringreturn I2S(es[GetPlayerId(EL)])endfunctionfunction IG takes player EL returns stringreturn I2S(er[GetPlayerId(EL)])endfunctionfunction Ih takes player EL returns stringreturn I2S(eV[GetPlayerId(EL)])endfunctionfunction IH takes player EL returns stringlocal integer Ii=eS[GetPlayerId(EL)]local string gflocal integer Ijlocal integer IJset Ij=(Ii/60)-(1/2)set IJ=ModuloInteger(Ii,60)if(IJ<10)thenset gf=I2S(Ij)+":0"+I2S(IJ)elseset gf=I2S(Ij)+":"+I2S(IJ)endifreturn gfendfunctionfunction Ik takes player FC,player Fd returns stringlocal integer k=EH("Stats"+I2S(GetPlayerId(FC)),"Killed "+I2S(GetPlayerId(Fd)))local integer d=EH("Stats"+I2S(GetPlayerId(FC)),"Died To "+I2S(GetPlayerId(Fd)))if k<1 thenset k=0endifif d<1 thenset d=0endifreturn I2S(k)+"/"+I2S(d)endfunctionfunction IK takes player EL returns booleanreturn EJ(EL)endfunctionfunction Il takes player EL returns booleanreturn EK(EL)endfunctionfunction IL takes nothing returns stringreturn"|c00ff0303"+I2S(K[GetPlayerId(Ac[0])])+"|r"+"/"+"|c0020c000"+I2S(M[GetPlayerId(Ac[0])])+"|r"endfunctionfunction Im takes nothing returns nothinglocal integer IM=azlocal integer In=aZlocal player array INlocal player array Iolocal integer IOlocal integer Iplocal integer IP=25+IM+In+4local integer Iq=1+IM+Inlocal multiboarditem IQlocal multiboard Irlocal multiboard IRlocal integer ilocal integer xlocal integer Islocal integer ISlocal string e="|r"local string c0="|cff99ccff"local timer t=CreateTimer()call DisableTrigger(B3)call DestroyMultiboard(aa)set Ir=CreateMultiboard()set IR=CreateMultiboard()call MultiboardSetItemsWidth(Ir,.07)call MultiboardSetItemsWidth(IR,.07)call MultiboardSetRowCount(Ir,IP-IM)call MultiboardSetRowCount(IR,IP-In)call MultiboardSetColumnCount(Ir,Iq)call MultiboardSetColumnCount(IR,Iq)call MultiboardSetTitleText(Ir,"DotA Allstars Scores - "+iZ()+" - "+i0()+" - "+IL())call MultiboardSetTitleText(IR,"DotA Allstars Scores - "+iZ()+" - "+i0()+" - "+IL())call MultiboardMinimize(Ir,false)call MultiboardMinimize(IR,false)set x=1set i=1loopexitwhen i>5if El(Ac[i])or GetPlayerSlotState(Ac[i])==PLAYER_SLOT_STATE_LEFT thenset IN[x]=Ac[i]set x=x+1endifset i=i+1endloopset x=1set i=1loopexitwhen i>5if El(AC[i])or GetPlayerSlotState(AC[i])==PLAYER_SLOT_STATE_LEFT thenset Io[x]=AC[i]set x=x+1endifset i=i+1endloopif IK(GetLocalPlayer())thencall MultiboardDisplay(Ir,true)elseif Il(GetLocalPlayer())thencall MultiboardDisplay(IR,true)endifset i=0set Ip=0loopexitwhen i>IPset IQ=MultiboardGetItem(Ir,i,Ip)call MultiboardSetItemWidth(IQ,.075)call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,i,Ip)call MultiboardSetItemWidth(IQ,.075)call MultiboardReleaseItem(IQ)set i=i+1endloopset IO=0set Ip=0set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,false,false)call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,false,false)call MultiboardReleaseItem(IQ)set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,i6(IN[i]))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,i6(IN[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,i6(Io[i]))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,i6(Io[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset Ip=0set IO=0set IO=IO+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Hero"+e)call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Hero"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,i7(IN[i]))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,i7(IN[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,i7(Io[i]))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,i7(Io[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset Ip=0set IO=IO+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Item 1"+e)call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Item 1"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,false,true)call MultiboardSetItemIcon(IQ,i4(IN[i],1))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,false,true)call MultiboardSetItemIcon(IQ,i4(IN[i],1))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,false,true)call MultiboardSetItemIcon(IQ,i4(Io[i],1))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,false,true)call MultiboardSetItemIcon(IQ,i4(Io[i],1))call MultiboardReleaseItem(IQ)set i=i+1endloopset Ip=0set IO=IO+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Item 2"+e)call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Item 2"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,false,true)call MultiboardSetItemIcon(IQ,i4(IN[i],2))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,false,true)call MultiboardSetItemIcon(IQ,i4(IN[i],2))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,false,true)call MultiboardSetItemIcon(IQ,i4(Io[i],2))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,false,true)call MultiboardSetItemIcon(IQ,i4(Io[i],2))call MultiboardReleaseItem(IQ)set i=i+1endloopset Ip=0set IO=IO+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Item 3"+e)call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Item 3"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,false,true)call MultiboardSetItemIcon(IQ,i4(IN[i],3))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,false,true)call MultiboardSetItemIcon(IQ,i4(IN[i],3))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,false,true)call MultiboardSetItemIcon(IQ,i4(Io[i],3))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,false,true)call MultiboardSetItemIcon(IQ,i4(Io[i],3))call MultiboardReleaseItem(IQ)set i=i+1endloopset Ip=0set IO=IO+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Item 4"+e)call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Item 4"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,false,true)call MultiboardSetItemIcon(IQ,i4(IN[i],4))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,false,true)call MultiboardSetItemIcon(IQ,i4(IN[i],4))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,false,true)call MultiboardSetItemIcon(IQ,i4(Io[i],4))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,false,true)call MultiboardSetItemIcon(IQ,i4(Io[i],4))call MultiboardReleaseItem(IQ)set i=i+1endloopset Ip=0set IO=IO+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Item 5"+e)call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Item 5"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,false,true)call MultiboardSetItemIcon(IQ,i4(IN[i],5))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,false,true)call MultiboardSetItemIcon(IQ,i4(IN[i],5))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,false,true)call MultiboardSetItemIcon(IQ,i4(Io[i],5))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,false,true)call MultiboardSetItemIcon(IQ,i4(Io[i],5))call MultiboardReleaseItem(IQ)set i=i+1endloopset Ip=0set IO=IO+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Item 6"+e)call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Item 6"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,false,true)call MultiboardSetItemIcon(IQ,i4(IN[i],6))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,false,true)call MultiboardSetItemIcon(IQ,i4(IN[i],6))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,false,true)call MultiboardSetItemIcon(IQ,i4(Io[i],6))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,false,true)call MultiboardSetItemIcon(IQ,i4(Io[i],6))call MultiboardReleaseItem(IQ)set i=i+1endloopset Ip=0set IO=IO+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Hero Level"+e)call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Hero Level"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,IA(IN[i]))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,IA(IN[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,IA(Io[i]))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,IA(Io[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset Ip=0set IO=IO+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Current Gold"+e)call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Current Gold"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,i8(IN[i]))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,i8(IN[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,i8(Io[i]))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,i8(Io[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset Ip=0set IO=IO+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Hero Kill Gold"+e)call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Hero Kill Gold"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,IB(IN[i]))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,IB(IN[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,IB(Io[i]))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,IB(Io[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset Ip=0set IO=IO+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Gold Lost"+e)call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Gold Lost"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,Ic(IN[i]))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,Ic(IN[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,Ic(Io[i]))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,Ic(Io[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset Ip=0set IO=IO+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Wards"+e)call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Wards"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,Ib(IN[i]))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,Ib(IN[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,Ib(Io[i]))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,Ib(Io[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset Ip=0set IO=IO+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Total Kills"+e)call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Total Kills"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,IC(IN[i]))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,IC(IN[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,IC(Io[i]))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,IC(Io[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset Ip=0set IO=IO+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Total Deaths"+e)call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Total Deaths"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,Id(IN[i]))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,Id(IN[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,Id(Io[i]))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,Id(Io[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset Ip=0set IO=IO+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Time Dead"+e)call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Time Dead"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,IH(IN[i]))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,IH(IN[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,IH(Io[i]))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,IH(Io[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset Ip=0set IO=IO+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Consumables"+e)call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Consumables"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,i9(IN[i]))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,i9(IN[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,i9(Io[i]))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,i9(Io[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset Ip=0set IO=IO+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Veggies"+e)call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Veggies"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,Ia(IN[i]))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,Ia(IN[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,Ia(Io[i]))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,Ia(Io[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset Ip=0set IO=IO+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Towers Killed"+e)call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Towers Killed"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,Ih(IN[i]))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,Ih(IN[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,Ih(Io[i]))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,Ih(Io[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset Ip=0set IO=IO+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Creep Kills"+e)call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Creep Kills"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,Ie(IN[i]))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,Ie(IN[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,Ie(Io[i]))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,Ie(Io[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset Ip=0set IO=IO+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Creep Denies"+e)call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Creep Denies"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,IE(IN[i]))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,IE(IN[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,IE(Io[i]))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,IE(Io[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset Ip=0set IO=IO+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Neutral Kills"+e)call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Neutral Kills"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,If(IN[i]))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,If(IN[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,If(Io[i]))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,If(Io[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset Ip=0set IO=IO+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Double Kills"+e)call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Double Kills"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,IF(IN[i]))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,IF(IN[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,IF(Io[i]))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,IF(Io[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset Ip=0set IO=IO+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Triple Kills"+e)call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Triple Kills"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,Ig(IN[i]))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,Ig(IN[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,Ig(Io[i]))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,Ig(Io[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset Ip=0set IO=IO+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Longest Spree"+e)call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Longest Spree"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,IG(IN[i]))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,IG(IN[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,IG(Io[i]))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,IG(Io[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset Is=IOset IS=IOset IO=Isset x=1loopexitwhen x>Inset Ip=0set IO=IO+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,true)call MultiboardSetItemIcon(IQ,i3(Io[x]))call MultiboardSetItemValue(IQ,c0+" K/D"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,Ik(IN[i],Io[x]))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(Ir,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ," ")call MultiboardReleaseItem(IQ)set i=i+1endloopset x=x+1endloopset Is=IOset IO=ISset x=1loopexitwhen x>IMset Ip=0set IO=IO+1set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,true)call MultiboardSetItemIcon(IQ,i3(IN[x]))call MultiboardSetItemValue(IQ,c0+" K/D"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ," ")call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(IR,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,Ik(Io[i],IN[x]))call MultiboardReleaseItem(IQ)set i=i+1endloopset x=x+1endloopset IS=IOset Ip=0set Is=Is+1set IS=IS+1set IQ=MultiboardGetItem(Ir,Is,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+" "+e)call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IS,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+" "+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(Ir,Is,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ," ")call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IS,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ," ")call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(Ir,Is,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ," ")call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IS,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ," ")call MultiboardReleaseItem(IQ)set i=i+1endloopset Ip=0set Is=Is+1set IS=IS+1set IQ=MultiboardGetItem(Ir,Is,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Left At"+e)call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IS,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Left At"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(Ir,Is,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,i2(IN[i]))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IS,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,i2(IN[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(Ir,Is,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,i2(Io[i]))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IS,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,i2(Io[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset Ip=0set Is=Is+1set IS=IS+1set IQ=MultiboardGetItem(Ir,Is,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Winner"+e)call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IS,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Winner"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(Ir,Is,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ," ")call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IS,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ," ")call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(Ir,Is,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ," ")call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IS,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ," ")call MultiboardReleaseItem(IQ)set i=i+1endloopset IQ=MultiboardGetItem(Ir,Is,1)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,i1())call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IS,1)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,i1())call MultiboardReleaseItem(IQ)set Ip=0set Is=Is+1set IS=IS+1set IQ=MultiboardGetItem(Ir,Is,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"End Game"+e)call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IS,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"End Game"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(Ir,Is,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ," ")call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IS,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ," ")call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(Ir,Is,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ," ")call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IS,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ," ")call MultiboardReleaseItem(IQ)set i=i+1endloopset bj='x'set IQ=MultiboardGetItem(Ir,Is,1)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,I2S(bj))call MultiboardReleaseItem(IQ)set IQ=MultiboardGetItem(IR,IS,1)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,I2S(bj))call MultiboardReleaseItem(IQ)set eT=MultiboardGetItem(Ir,Is,1)set eu=MultiboardGetItem(IR,IS,1)call TimerStart(t,1,true,function iz)endfunctionfunction It takes nothing returns stringlocal string gfif(O<10)thenset gf=I2S(o)+":0"+I2S(O)elseset gf=I2S(o)+":"+I2S(O)endifreturn gfendfunctionfunction IT takes nothing returns stringreturn eWendfunctionfunction Iu takes nothing returns stringreturn bIendfunctionfunction IU takes player EL returns stringreturn bJ[GetPlayerId(EL)]endfunctionfunction Iv takes player EL returns stringreturn em[GetUnitPointValue(ay[GetPlayerId(EL)])]endfunctionfunction IV takes player EL,integer i5 returns stringreturn F3(UnitItemInSlot(ay[GetPlayerId(EL)],i5-1))endfunctionfunction Iw takes player EL returns stringreturn I[GetPlayerId(EL)]+GetPlayerName(EL)+"|r"endfunctionfunction IW takes player EL returns stringreturn fG(ay[GetPlayerId(EL)])endfunctionfunction Ix takes player EL returns stringreturn I2S(GetPlayerState(EL,PLAYER_STATE_RESOURCE_GOLD))endfunctionfunction IX takes player p returns stringreturn I2S(EH("Stats"+I2S(GetPlayerId(p)),"NumOfConsumables"))endfunctionfunction Iy takes player p returns stringreturn I2S(EH("Stats"+I2S(GetPlayerId(p)),"NumOfVeggies"))endfunctionfunction IY takes player p returns stringreturn I2S(GetUnitLevel(ay[GetPlayerId(p)]))endfunctionfunction Iz takes player p returns stringreturn I2S(EH("Stats"+I2S(GetPlayerId(p)),"NumOfWards"))endfunctionfunction IZ takes player EL returns stringreturn I2S(et[GetPlayerId(EL)])endfunctionfunction I0 takes player EL returns stringreturn I2S(eQ[GetPlayerId(EL)])endfunctionfunction I1 takes player EL returns stringreturn I2S(K[GetPlayerId(EL)])endfunctionfunction I2 takes player EL returns stringreturn I2S(M[GetPlayerId(EL)])endfunctionfunction I3 takes player EL returns stringreturn I2S(a7[GetPlayerId(EL)])endfunctionfunction I4 takes player EL returns stringreturn I2S(a8[GetPlayerId(EL)])endfunctionfunction I5 takes player p returns stringreturn I2S(EH("Stats"+I2S(GetPlayerId(p)),"NumOfNeutrals"))endfunctionfunction I6 takes player EL returns stringreturn I2S(eR[GetPlayerId(EL)])endfunctionfunction I7 takes player EL returns stringreturn I2S(es[GetPlayerId(EL)])endfunctionfunction I8 takes player EL returns stringreturn I2S(er[GetPlayerId(EL)])endfunctionfunction I9 takes player EL returns stringreturn I2S(eV[GetPlayerId(EL)])endfunctionfunction ja takes player EL returns stringlocal integer Ii=eS[GetPlayerId(EL)]local string gflocal integer Ijlocal integer IJset Ij=(Ii/60)-(1/2)set IJ=ModuloInteger(Ii,60)if(IJ<10)thenset gf=I2S(Ij)+":0"+I2S(IJ)elseset gf=I2S(Ij)+":"+I2S(IJ)endifreturn gfendfunctionfunction jA takes player FC,player Fd returns stringlocal integer k=EH("Stats"+I2S(GetPlayerId(FC)),"Killed "+I2S(GetPlayerId(Fd)))local integer d=EH("Stats"+I2S(GetPlayerId(FC)),"Died To "+I2S(GetPlayerId(Fd)))if k<1 thenset k=0endifif d<1 thenset d=0endifreturn I2S(k)+"/"+I2S(d)endfunctionfunction jb takes nothing returns nothinglocal integer IM=azlocal integer In=aZlocal integer IP=25+IM+In+4local integer Iq=1+IM+Inset eU=CreateMultiboard()call MultiboardSetItemsWidth(eU,.07)call MultiboardSetRowCount(eU,IP)call MultiboardSetColumnCount(eU,Iq)call MultiboardSetTitleText(eU,"DotA Allstars Scores "+" - "+IT())call MultiboardMinimize(eU,false)if GetLocalPlayer()==eD or GetLocalPlayer()==ee thencall MultiboardDisplay(eU,true)endifendfunctionfunction jB takes nothing returns stringreturn"|c00ff0303"+I2S(K[GetPlayerId(Ac[0])])+"|r"+"/"+"|c0020c000"+I2S(M[GetPlayerId(Ac[0])])+"|r"endfunctionfunction jc takes nothing returns nothinglocal integer IM=azlocal integer In=aZlocal player array INlocal player array Iolocal integer IOlocal integer Iplocal integer IP=25+IM+In+4local integer Iq=1+IM+Inlocal multiboarditem IQlocal integer ilocal integer xlocal integer Islocal integer ISlocal string e="|r"local string c0="|cff99ccff"if GetTriggerExecCount(GetTriggeringTrigger())==1 thencall jb()endifcall MultiboardSetTitleText(eU,"DotA Allstars Scores "+" - "+IT()+" - "+jB())set x=1set i=1loopexitwhen i>5if El(Ac[i])or GetPlayerSlotState(Ac[i])==PLAYER_SLOT_STATE_LEFT thenset IN[x]=Ac[i]set x=x+1endifset i=i+1endloopset x=1set i=1loopexitwhen i>5if El(AC[i])or GetPlayerSlotState(AC[i])==PLAYER_SLOT_STATE_LEFT thenset Io[x]=AC[i]set x=x+1endifset i=i+1endloopset i=0set Ip=0loopexitwhen i>IPset IQ=MultiboardGetItem(eU,i,Ip)call MultiboardSetItemWidth(IQ,.075)call MultiboardReleaseItem(IQ)set i=i+1endloopset IO=0set Ip=0set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,false,false)call MultiboardReleaseItem(IQ)set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,Iw(IN[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,Iw(Io[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset Ip=0set IO=0set IO=IO+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Hero"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,IW(IN[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,IW(Io[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset Ip=0set IO=IO+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Item 1"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,false,true)call MultiboardSetItemIcon(IQ,IV(IN[i],1))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,false,true)call MultiboardSetItemIcon(IQ,IV(Io[i],1))call MultiboardReleaseItem(IQ)set i=i+1endloopset Ip=0set IO=IO+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Item 2"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,false,true)call MultiboardSetItemIcon(IQ,IV(IN[i],2))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,false,true)call MultiboardSetItemIcon(IQ,IV(Io[i],2))call MultiboardReleaseItem(IQ)set i=i+1endloopset Ip=0set IO=IO+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Item 3"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,false,true)call MultiboardSetItemIcon(IQ,IV(IN[i],3))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,false,true)call MultiboardSetItemIcon(IQ,IV(Io[i],3))call MultiboardReleaseItem(IQ)set i=i+1endloopset Ip=0set IO=IO+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Item 4"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,false,true)call MultiboardSetItemIcon(IQ,IV(IN[i],4))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,false,true)call MultiboardSetItemIcon(IQ,IV(Io[i],4))call MultiboardReleaseItem(IQ)set i=i+1endloopset Ip=0set IO=IO+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Item 5"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,false,true)call MultiboardSetItemIcon(IQ,IV(IN[i],5))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,false,true)call MultiboardSetItemIcon(IQ,IV(Io[i],5))call MultiboardReleaseItem(IQ)set i=i+1endloopset Ip=0set IO=IO+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Item 6"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,false,true)call MultiboardSetItemIcon(IQ,IV(IN[i],6))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,false,true)call MultiboardSetItemIcon(IQ,IV(Io[i],6))call MultiboardReleaseItem(IQ)set i=i+1endloopset Ip=0set IO=IO+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Hero Level"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,IY(IN[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,IY(Io[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset Ip=0set IO=IO+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Current Gold"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,Ix(IN[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,Ix(Io[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset Ip=0set IO=IO+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Hero Kill Gold"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,IZ(IN[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,IZ(Io[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset Ip=0set IO=IO+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Gold Lost"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,I0(IN[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,I0(Io[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset Ip=0set IO=IO+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Wards"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,Iz(IN[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,Iz(Io[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset Ip=0set IO=IO+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Total Kills"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,I1(IN[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,I1(Io[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset Ip=0set IO=IO+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Total Deaths"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,I2(IN[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,I2(Io[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset Ip=0set IO=IO+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Time Dead"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,ja(IN[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,ja(Io[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset Ip=0set IO=IO+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Consumables"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,IX(IN[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,IX(Io[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset Ip=0set IO=IO+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Veggies"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,Iy(IN[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,Iy(Io[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset Ip=0set IO=IO+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Towers Killed"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,I9(IN[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,I9(Io[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset Ip=0set IO=IO+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Creep Kills"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,I3(IN[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,I3(Io[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset Ip=0set IO=IO+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Creep Denies"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,I4(IN[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,I4(Io[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset Ip=0set IO=IO+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Neutral Kills"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,I5(IN[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,I5(Io[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset Ip=0set IO=IO+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Double Kills"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,I6(IN[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,I6(Io[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset Ip=0set IO=IO+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Triple Kills"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,I7(IN[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,I7(Io[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset Ip=0set IO=IO+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Longest Spree"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,I8(IN[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,I8(Io[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset x=1loopexitwhen x>IMset Ip=0set IO=IO+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,true)call MultiboardSetItemIcon(IQ,Iv(IN[x]))call MultiboardSetItemValue(IQ,c0+" K/D"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,jA(IN[i],IN[x]))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,jA(Io[i],IN[x]))call MultiboardReleaseItem(IQ)set i=i+1endloopset x=x+1endloopset x=1loopexitwhen x>Inset Ip=0set IO=IO+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,true)call MultiboardSetItemIcon(IQ,Iv(Io[x]))call MultiboardSetItemValue(IQ,c0+" K/D"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,jA(IN[i],Io[x]))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,jA(Io[i],Io[x]))call MultiboardReleaseItem(IQ)set i=i+1endloopset x=x+1endloopset Ip=0set IO=IO+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+" "+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ," ")call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ," ")call MultiboardReleaseItem(IQ)set i=i+1endloopset Ip=0set IO=IO+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Left At"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,IU(IN[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,IU(Io[i]))call MultiboardReleaseItem(IQ)set i=i+1endloopset Ip=0set IO=IO+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Winner"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ," ")call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ," ")call MultiboardReleaseItem(IQ)set i=i+1endloopset IQ=MultiboardGetItem(eU,IO,1)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,Iu())call MultiboardReleaseItem(IQ)set Ip=0set IO=IO+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,c0+"Game Time"+e)call MultiboardReleaseItem(IQ)set Ip=0set i=1loopexitwhen i>IMset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ," ")call MultiboardReleaseItem(IQ)set i=i+1endloopset i=1loopexitwhen i>Inset Ip=Ip+1set IQ=MultiboardGetItem(eU,IO,Ip)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ," ")call MultiboardReleaseItem(IQ)set i=i+1endloopset IQ=MultiboardGetItem(eU,IO,1)call MultiboardSetItemStyle(IQ,true,false)call MultiboardSetItemValue(IQ,It())call MultiboardReleaseItem(IQ)endfunctionfunction jC takes player p returns integerreturn K[GetPlayerId(p)]endfunctionfunction jd takes player p returns integerreturn M[GetPlayerId(p)]endfunctionfunction jD takes player p returns integerreturn a7[GetPlayerId(p)]endfunctionfunction je takes player p returns integerreturn a8[GetPlayerId(p)]endfunctionfunction jE takes nothing returns nothinglocal gamecache jflocal integer ilocal player plocal string idcall Fu()call FlushGameCache(InitGameCache("dr.x"))set jf=InitGameCache("dr.x")set i=1loopexitwhen i>5set p=Ac[i]set id=I2S(GetPlayerId(p))call StoreInteger(jf,id,"1",jC(p))call StoreInteger(jf,id,"2",jd(p))call StoreInteger(jf,id,"3",jD(p))call StoreInteger(jf,id,"4",je(p))set p=AC[i]set id=I2S(GetPlayerId(p))call StoreInteger(jf,id,"1",jC(p))call StoreInteger(jf,id,"2",jd(p))call StoreInteger(jf,id,"3",jD(p))call StoreInteger(jf,id,"4",je(p))if GetLocalPlayer()==AH thencall SyncStoredInteger(jf,I2S(GetPlayerId(Ac[i])),"1")call SyncStoredInteger(jf,I2S(GetPlayerId(Ac[i])),"2")call SyncStoredInteger(jf,I2S(GetPlayerId(Ac[i])),"3")call SyncStoredInteger(jf,I2S(GetPlayerId(Ac[i])),"4")call SyncStoredInteger(jf,I2S(GetPlayerId(AC[i])),"1")call SyncStoredInteger(jf,I2S(GetPlayerId(AC[i])),"2")call SyncStoredInteger(jf,I2S(GetPlayerId(AC[i])),"3")call SyncStoredInteger(jf,I2S(GetPlayerId(AC[i])),"4")endifset i=i+1endloopendfunctionfunction jF takes nothing returns nothingcall ET(AC[1])call ET(AC[2])call ET(AC[3])call ET(AC[4])call ET(AC[5])call EU(Ac[1])call EU(Ac[2])call EU(Ac[3])call EU(Ac[4])call EU(Ac[5])call FlushGameCache(AG)endfunctionfunction jg takes nothing returns nothinglocal timer t=CreateTimer()set bI="|c00ff0303The Sentinel|r"call ExecuteFunc("Im")if AQ thencall TriggerExecute(ev)call DisableTrigger(ev)endifcall ClearTextMessages()call FG(bj_FORCE_ALL_PLAYERS,45,"The Sentinel has won!  Get the latest version from www.getdota.com.")set A5=truecall TimerStart(t,'x',false,function jF)call DisableTrigger(B5)call DisableTrigger(B6)call Fk()call DisableTrigger(Ee("Global","Trig|Leave"))call DisableTrigger(cG)call DisableTrigger(B3)call DisableTrigger(Bp)if ac thencall DisableTrigger(eZ)endifcall jE()endfunctionfunction jG takes nothing returns nothingcall ET(Ac[1])call ET(Ac[2])call ET(Ac[3])call ET(Ac[4])call ET(Ac[5])call EU(AC[1])call EU(AC[2])call EU(AC[3])call EU(AC[4])call EU(AC[5])call FlushGameCache(AG)endfunctionfunction jh takes nothing returns nothinglocal timer t=CreateTimer()set bI="|c0020c000The Scourge|r"call ExecuteFunc("Im")if AQ thencall TriggerExecute(ev)call DisableTrigger(ev)endifcall ClearTextMessages()call FG(bj_FORCE_ALL_PLAYERS,45,"The Scourge has won!  Get the latest version from www.getdota.com.")set A5=truecall TimerStart(t,'x',false,function jG)call DisableTrigger(B5)call DisableTrigger(B6)call Fk()call DisableTrigger(Ee("Global","Trig|Leave"))call DisableTrigger(cG)call DisableTrigger(B3)call DisableTrigger(Bp)if ac thencall DisableTrigger(eZ)endifcall jE()endfunctionfunction jH takes nothing returns booleanreturn IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetAttacker()))endfunctionfunction ji takes nothing returns booleanif(GetUnitTypeId(GetTriggerUnit())=='etol')thenreturn trueendifif(GetUnitTypeId(GetTriggerUnit())=='unpl')thenreturn trueendifreturn falseendfunctionfunction jI takes nothing returns booleanif(IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==false)thenreturn falseendifif(UnitHasBuffBJ(GetTriggerUnit(),'BNdo'))thenreturn falseendifif(UnitHasBuffBJ(GetTriggerUnit(),'BEsh'))thenreturn falseendifreturn trueendfunctionfunction jj takes nothing returns booleanif(IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO))thenreturn falseendifif(IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE))thenreturn falseendifif(GetUnitLifePercent(GetTriggerUnit())<50.)thenreturn falseendifreturn trueendfunctionfunction jJ takes nothing returns booleanif(IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false)thenreturn falseendifif(GetUnitLifePercent(GetTriggerUnit())<10)thenreturn falseendifreturn trueendfunctionfunction IsSiege takes nothing returns booleanreturn GetUnitTypeId(GetTriggerUnit())=='ebal'or GetUnitTypeId(GetTriggerUnit())=='umtw'endfunctionfunction jk takes nothing returns nothingif(ji()or jI()or jj()or jJ())thencall IssueImmediateOrderById(GetAttacker(),851972)endifendfunctionfunction jK takes nothing returns nothingcall DestructableRestoreLife(GetEnumDestructable(),GetDestructableMaxLife(GetEnumDestructable()),false)endfunctionfunction jl takes nothing returns nothingcall EnumDestructablesInRectAll(bj_mapInitialPlayableArea,function jK)endfunctionfunction jL takes nothing returns booleanif(GetTriggerUnit()!=aA)thenreturn falseendifif(IsUnitIllusion(GetAttacker()))thencall KillUnit(GetAttacker())return falseendifreturn trueendfunctionfunction jm takes nothing returns nothingif(UnitHasBuffBJ(GetTriggerUnit(),'BPSE'))thencall UnitRemoveAbility(GetTriggerUnit(),'BPSE')endifendfunctionfunction jM takes nothing returns booleanif(GetUnitTypeId(GetAttacker())!='n00L')thenreturn falseendifif(IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE))thenreturn trueendifreturn falseendfunctionfunction jn takes nothing returns nothinglocal location jN=GetRectCenter(b0)call SetUnitPositionLoc(GetAttacker(),jN)call RemoveLocation(jN)endfunctionfunction jo takes nothing returns booleanreturn GetUnitTypeId(GetEnteringUnit())=='e00E'endfunctionfunction jO takes nothing returns nothingcall ShowUnitHide(GetEnteringUnit())call SetUnitPathing(GetEnteringUnit(),false)call SetUnitInvulnerable(GetEnteringUnit(),true)call UnitApplyTimedLifeBJ(20.,'BTLF',GetEnteringUnit())endfunctionfunction jp takes nothing returns booleanif(GetUnitTypeId(GetDyingUnit())=='e00R')thenreturn trueendifif(GetUnitTypeId(GetDyingUnit())=='e011')thenreturn trueendifif(GetUnitTypeId(GetDyingUnit())=='e00S')thenreturn trueendifif(GetUnitTypeId(GetDyingUnit())=='e019')thenreturn trueendifreturn falseendfunctionfunction jP takes nothing returns booleanif(not(GetDyingUnit()==d6))thenreturn falseendifif(not(IsUnitDeadBJ(d7)))thenreturn falseendifreturn trueendfunctionfunction jq takes nothing returns booleanif(not(GetDyingUnit()==d7))thenreturn falseendifif(not(IsUnitDeadBJ(d6)))thenreturn falseendifreturn trueendfunctionfunction jQ takes nothing returns nothingif IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit()))thenset eV[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=eV[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1endifif(GetDyingUnit()==dY)thencall SetUnitInvulnerable(d0,false)call fC(GetKillingUnit())endifif(GetDyingUnit()==dz)thencall SetUnitInvulnerable(d1,false)call fC(GetKillingUnit())endifif(GetDyingUnit()==dZ)thencall SetUnitInvulnerable(d2,false)call fC(GetKillingUnit())endifif(GetDyingUnit()==d0)thencall SetUnitInvulnerable(d3,false)call fC(GetKillingUnit())endifif(GetDyingUnit()==d1)thencall SetUnitInvulnerable(d4,false)call fC(GetKillingUnit())endifif(GetDyingUnit()==d2)thencall SetUnitInvulnerable(d5,false)call fC(GetKillingUnit())endifif(GetDyingUnit()==d3)thencall fC(GetKillingUnit())call SetUnitInvulnerable(d8,false)call SetUnitInvulnerable(DA,false)call SetUnitInvulnerable(d6,false)call SetUnitInvulnerable(d7,false)call SetUnitInvulnerable(Dh,false)call SetUnitInvulnerable(DH,false)call SetUnitInvulnerable(Dc,false)call SetUnitInvulnerable(DC,false)call SetUnitInvulnerable(Dd,false)call SetUnitInvulnerable(DD,false)call SetUnitInvulnerable(De,false)call SetUnitInvulnerable(DE,false)call SetUnitInvulnerable(Df,false)call SetUnitInvulnerable(DF,false)call SetUnitInvulnerable(Dg,false)call SetUnitInvulnerable(DG,false)endifif(GetDyingUnit()==d4)thencall fC(GetKillingUnit())call SetUnitInvulnerable(d9,false)call SetUnitInvulnerable(Db,false)call SetUnitInvulnerable(d6,false)call SetUnitInvulnerable(d7,false)call SetUnitInvulnerable(Dh,false)call SetUnitInvulnerable(DH,false)call SetUnitInvulnerable(Dc,false)call SetUnitInvulnerable(DC,false)call SetUnitInvulnerable(Dd,false)call SetUnitInvulnerable(DD,false)call SetUnitInvulnerable(De,false)call SetUnitInvulnerable(DE,false)call SetUnitInvulnerable(Df,false)call SetUnitInvulnerable(DF,false)call SetUnitInvulnerable(Dg,false)call SetUnitInvulnerable(DG,false)endifif(GetDyingUnit()==d5)thencall fC(GetKillingUnit())call SetUnitInvulnerable(Da,false)call SetUnitInvulnerable(DB,false)call SetUnitInvulnerable(d6,false)call SetUnitInvulnerable(d7,false)call SetUnitInvulnerable(Dh,false)call SetUnitInvulnerable(DH,false)call SetUnitInvulnerable(Dc,false)call SetUnitInvulnerable(DC,false)call SetUnitInvulnerable(Dd,false)call SetUnitInvulnerable(DD,false)call SetUnitInvulnerable(De,false)call SetUnitInvulnerable(DE,false)call SetUnitInvulnerable(Df,false)call SetUnitInvulnerable(DF,false)call SetUnitInvulnerable(Dg,false)call SetUnitInvulnerable(DG,false)endifif(jP())thencall fC(GetKillingUnit())call SetUnitInvulnerable(dy,false)endifif(jq())thencall fC(GetKillingUnit())call SetUnitInvulnerable(dy,false)endifendfunctionfunction jr takes nothing returns booleanif(GetUnitTypeId(GetDyingUnit())=='u00M')thenreturn trueendifif(GetUnitTypeId(GetDyingUnit())=='u00D')thenreturn trueendifif(GetUnitTypeId(GetDyingUnit())=='u00N')thenreturn trueendifif(GetUnitTypeId(GetDyingUnit())=='u00T')thenreturn trueendifreturn falseendfunctionfunction jR takes nothing returns booleanif(not(GetDyingUnit()==DS))thenreturn falseendifif(not(IsUnitDeadBJ(Dt)))thenreturn falseendifreturn trueendfunctionfunction js takes nothing returns booleanif(not(GetDyingUnit()==Dt))thenreturn falseendifif(not(IsUnitDeadBJ(DS)))thenreturn falseendifreturn trueendfunctionfunction jS takes nothing returns nothingif IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit()))thenset eV[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=eV[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1endifif(GetDyingUnit()==Do)thencall SetUnitInvulnerable(DP,false)call fC(GetKillingUnit())endifif(GetDyingUnit()==DO)thencall SetUnitInvulnerable(Dq,false)call fC(GetKillingUnit())endifif(GetDyingUnit()==Dp)thencall SetUnitInvulnerable(DQ,false)call fC(GetKillingUnit())endifif(GetDyingUnit()==DP)thencall SetUnitInvulnerable(Dr,false)call fC(GetKillingUnit())endifif(GetDyingUnit()==Dq)thencall SetUnitInvulnerable(DR,false)call fC(GetKillingUnit())endifif(GetDyingUnit()==DQ)thencall SetUnitInvulnerable(Ds,false)call fC(GetKillingUnit())endifif(GetDyingUnit()==Dr)thencall fC(GetKillingUnit())call SetUnitInvulnerable(DT,false)call SetUnitInvulnerable(DV,false)call SetUnitInvulnerable(DS,false)call SetUnitInvulnerable(Dt,false)call SetUnitInvulnerable(D5,false)call SetUnitInvulnerable(D6,false)call SetUnitInvulnerable(DX,false)call SetUnitInvulnerable(Dy,false)call SetUnitInvulnerable(DY,false)call SetUnitInvulnerable(Dz,false)call SetUnitInvulnerable(DZ,false)call SetUnitInvulnerable(D0,false)call SetUnitInvulnerable(D1,false)call SetUnitInvulnerable(D2,false)call SetUnitInvulnerable(D3,false)call SetUnitInvulnerable(D4,false)endifif(GetDyingUnit()==DR)thencall fC(GetKillingUnit())call SetUnitInvulnerable(Du,false)call SetUnitInvulnerable(Dw,false)call SetUnitInvulnerable(DS,false)call SetUnitInvulnerable(Dt,false)call SetUnitInvulnerable(D5,false)call SetUnitInvulnerable(D6,false)call SetUnitInvulnerable(DX,false)call SetUnitInvulnerable(Dy,false)call SetUnitInvulnerable(DY,false)call SetUnitInvulnerable(Dz,false)call SetUnitInvulnerable(DZ,false)call SetUnitInvulnerable(D0,false)call SetUnitInvulnerable(D1,false)call SetUnitInvulnerable(D2,false)call SetUnitInvulnerable(D3,false)call SetUnitInvulnerable(D4,false)endifif(GetDyingUnit()==Ds)thencall fC(GetKillingUnit())call SetUnitInvulnerable(Dv,false)call SetUnitInvulnerable(Dx,false)call SetUnitInvulnerable(DS,false)call SetUnitInvulnerable(Dt,false)call SetUnitInvulnerable(D5,false)call SetUnitInvulnerable(D6,false)call SetUnitInvulnerable(DX,false)call SetUnitInvulnerable(Dy,false)call SetUnitInvulnerable(DY,false)call SetUnitInvulnerable(Dz,false)call SetUnitInvulnerable(DZ,false)call SetUnitInvulnerable(D0,false)call SetUnitInvulnerable(D1,false)call SetUnitInvulnerable(D2,false)call SetUnitInvulnerable(D3,false)call SetUnitInvulnerable(D4,false)endifif(jR())thencall fC(GetKillingUnit())call SetUnitInvulnerable(DN,false)endifif(js())thencall fC(GetKillingUnit())call SetUnitInvulnerable(DN,false)endifendfunctionfunction jt takes nothing returns booleanlocal integer x=0if GetPlayerSlotState(Ac[1])==PLAYER_SLOT_STATE_EMPTY thenset x=x+1endifif GetPlayerSlotState(Ac[2])==PLAYER_SLOT_STATE_EMPTY thenset x=x+1endifif GetPlayerSlotState(Ac[3])==PLAYER_SLOT_STATE_EMPTY thenset x=x+1endifif GetPlayerSlotState(Ac[4])==PLAYER_SLOT_STATE_EMPTY thenset x=x+1endifif GetPlayerSlotState(Ac[5])==PLAYER_SLOT_STATE_EMPTY thenset x=x+1endifif GetPlayerSlotState(AC[1])==PLAYER_SLOT_STATE_EMPTY thenset x=x+1endifif GetPlayerSlotState(AC[2])==PLAYER_SLOT_STATE_EMPTY thenset x=x+1endifif GetPlayerSlotState(AC[3])==PLAYER_SLOT_STATE_EMPTY thenset x=x+1endifif GetPlayerSlotState(AC[4])==PLAYER_SLOT_STATE_EMPTY thenset x=x+1endifif GetPlayerSlotState(AC[5])==PLAYER_SLOT_STATE_EMPTY thenset x=x+1endifreturn x==9endfunctionfunction jT takes nothing returns booleanreturn bj_isSinglePlayer and jt()endfunctionfunction ju takes nothing returns nothingcall SetHeroLevel(ay[GetPlayerId(AH)],GetHeroLevel(ay[GetPlayerId(AH)])+1,true)set bg=trueendfunctionfunction jU takes nothing returns nothingcall TriggerExecute(cG)set bg=trueendfunctionfunction jv takes nothing returns nothinglocal unit fw=ay[GetPlayerId(AH)]call UnitResetCooldown(fw)call SetUnitState(fw,UNIT_STATE_LIFE,GetUnitState(fw,UNIT_STATE_MAX_LIFE))call SetUnitState(fw,UNIT_STATE_MANA,GetUnitState(fw,UNIT_STATE_MAX_MANA))set bg=trueendfunctionfunction jV takes nothing returns nothingcall KillUnit(ay[GetPlayerId(AH)])set bg=trueendfunctionfunction jw takes nothing returns nothinglocal string jW=SubString(GetEventPlayerChatString(),5,StringLength(GetEventPlayerChatString()))local integer fB=S2I(jW)call SetPlayerState(AH,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(AH,PLAYER_STATE_RESOURCE_GOLD)+fB)set bg=trueendfunctionfunction jx takes nothing returns nothinglocal player OnlyPlayer=AHlocal trigger tcall DisplayTimedTextToPlayer(AH,0,0,60,"Single Player Mode detected. You may use commands like -lvlup, -refresh, -spawncreeps, -kill and -gold xxxx")set t=CreateTrigger()call TriggerRegisterPlayerChatEvent(t,AH,"-lvlup",true)call TriggerAddAction(t,function ju)set t=CreateTrigger()call TriggerRegisterPlayerChatEvent(t,AH,"-spawncreeps",true)call TriggerAddAction(t,function jU)set t=CreateTrigger()call TriggerRegisterPlayerChatEvent(t,AH,"-refresh",true)call TriggerAddAction(t,function jv)set t=CreateTrigger()call TriggerRegisterPlayerChatEvent(t,AH,"-kill",true)call TriggerAddAction(t,function jV)set t=CreateTrigger()call TriggerRegisterPlayerChatEvent(t,AH,"-gold",false)call TriggerAddAction(t,function jw)endfunctionfunction jX takes nothing returns booleanreturn not Hendfunctionfunction jy takes nothing returns nothingcall TriggerSleepAction(0)call UnitResetCooldown(GetTriggerUnit())call SetUnitManaPercentBJ(GetTriggerUnit(),'d')endfunctionfunction jY takes nothing returns nothinglocal trigger t=GetTriggeringTrigger()local integer jz=EN(Ab)+EN(AB)local integer NumRequired=f1(jz,jz/2+1)local string f8=e4(t)local integer jZ=EH(f8,"ExecCount")call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,60.," ")call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,90.,"WTF mode activated. In this mode spells have no cooldown or manacost.")call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,90.,"This is a FOR FUN ONLY mode.")set t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddAction(t,function jy)endfunctionfunction j0 takes nothing returns booleanreturn GetOwningPlayer(GetTriggerUnit())==Adendfunctionfunction j1 takes nothing returns nothingcall Ea("Stats"+I2S(GetPlayerId(GetOwningPlayer(GetKillingUnit()))),"NumOfNeutrals",EH("Stats"+I2S(GetPlayerId(GetOwningPlayer(GetKillingUnit()))),"NumOfNeutrals")+1)endfunctionfunction j2 takes nothing returns nothinglocal location iG=GetRectCenter(b0)set aA=CreateUnitAtLoc(Player(12),'n00L',iG,bj_UNIT_FACING)call RemoveLocation(iG)call UnitAddItem(aA,CreateItem('shea',0,0))set iG=GetRectCenter(bt)call RemoveUnit(CreateUnitAtLoc(Ad,'u001',iG,0))call RemoveLocation(iG)set iG=GetRectCenter(bT)call RemoveUnit(CreateUnitAtLoc(Ad,'u001',iG,0))call RemoveLocation(iG)set iG=GetRectCenter(bu)call RemoveUnit(CreateUnitAtLoc(Ad,'u001',iG,0))call RemoveLocation(iG)set iG=GetRectCenter(bU)call RemoveUnit(CreateUnitAtLoc(Ad,'u001',iG,0))call RemoveLocation(iG)set iG=GetRectCenter(bv)call RemoveUnit(CreateUnitAtLoc(Ad,'u001',iG,0))call RemoveLocation(iG)set iG=GetRectCenter(bV)call RemoveUnit(CreateUnitAtLoc(Ad,'u001',iG,0))call RemoveLocation(iG)set iG=GetRectCenter(bw)call RemoveUnit(CreateUnitAtLoc(Ad,'u001',iG,0))call RemoveLocation(iG)set iG=GetRectCenter(bW)call RemoveUnit(CreateUnitAtLoc(Ad,'u001',iG,0))call RemoveLocation(iG)set iG=GetRectCenter(bx)call RemoveUnit(CreateUnitAtLoc(Ad,'u001',iG,0))call RemoveLocation(iG)set iG=GetRectCenter(bX)call RemoveUnit(CreateUnitAtLoc(Ad,'u001',iG,0))call RemoveLocation(iG)set iG=GetRectCenter(Bc)call RemoveUnit(CreateUnitAtLoc(Ad,'u001',iG,0))call RemoveLocation(iG)set iG=GetRectCenter(Bd)call RemoveUnit(CreateUnitAtLoc(Ad,'u001',iG,0))call RemoveLocation(iG)endfunctionfunction j3 takes nothing returns booleanif((GetOwningPlayer(GetTriggerUnit())==Ac[0]))thenreturn trueendifif((GetOwningPlayer(GetTriggerUnit())==AC[0]))thenreturn trueendifreturn falseendfunctionfunction j4 takes nothing returns nothingif(GetOwningPlayer(GetTriggerUnit())==Ac[0])thencall IssuePointOrderByIdLoc(GetTriggerUnit(),851983,aD)elsecall IssuePointOrderByIdLoc(GetTriggerUnit(),851983,ae)endifendfunctionfunction j5 takes nothing returns nothingset aM=aM+1endfunctionfunction j6 takes nothing returns nothingset am=am+1endfunctionfunction j7 takes nothing returns booleanif(not(GetOwningPlayer(GetTriggerUnit())==Ac[0]))thenreturn falseendifreturn trueendfunctionfunction j8 takes nothing returns nothingcall IssuePointOrderByIdLoc(GetTriggerUnit(),851983,aE)endfunctionfunction j9 takes nothing returns booleanif(not(GetOwningPlayer(GetTriggerUnit())==AC[0]))thenreturn falseendifreturn trueendfunctionfunction Ja takes nothing returns nothingcall IssuePointOrderByIdLoc(GetTriggerUnit(),851983,aE)endfunctionfunction JA takes nothing returns booleanif(not(GetOwningPlayer(GetTriggerUnit())==Ac[0]))thenreturn falseendifreturn trueendfunctionfunction Jb takes nothing returns nothingcall IssuePointOrderByIdLoc(GetTriggerUnit(),851983,af)endfunctionfunction JB takes nothing returns booleanif(not(GetOwningPlayer(GetTriggerUnit())==AC[0]))thenreturn falseendifreturn trueendfunctionfunction Jc takes nothing returns nothingcall IssuePointOrderByIdLoc(GetTriggerUnit(),851983,af)endfunctionfunction JC takes nothing returns booleanif(not(GetOwningPlayer(GetTriggerUnit())==AC[0]))thenreturn falseendifreturn trueendfunctionfunction Jd takes nothing returns nothingcall IssuePointOrderByIdLoc(GetTriggerUnit(),851983,aF)endfunctionfunction JD takes nothing returns booleanif(not(GetOwningPlayer(GetTriggerUnit())==Ac[0]))thenreturn falseendifreturn trueendfunctionfunction Je takes nothing returns nothingcall IssuePointOrderByIdLoc(GetTriggerUnit(),851983,aF)endfunctionfunction JE takes nothing returns booleanif(aY)thenreturn a2endifif(As)thenreturn Arendifif bH thenreturn biendifif(A0)thenreturn A7endifreturn Fendfunctionfunction Jf takes group JF,integer Jg returns nothinglocal unit uloopset u=FirstOfGroup(JF)exitwhen(u==null)call GroupRemoveUnit(JF,u)call SetUnitAbilityLevel(u,Ao,Jg)endloopendfunctionfunction JG takes nothing returns nothinglocal boolean Jh=ModuloInteger(GetTriggerExecCount(cG),7)==0if GetTriggerExecCount(cG)==1 thencall SetUnitInvulnerable(dY,false)call SetUnitInvulnerable(dz,false)call SetUnitInvulnerable(dZ,false)call SetUnitInvulnerable(Do,false)call SetUnitInvulnerable(DO,false)call SetUnitInvulnerable(Dp,false)endifif(aH)thencall CreateNUnitsAtLoc(am,'ugho',AC[0],aN,bj_UNIT_FACING)elsecall CreateNUnitsAtLoc(am,'u001',AC[0],aN,bj_UNIT_FACING)endifcall Jf(bj_lastCreatedGroup,2)if(ai)thencall CreateNUnitsAtLoc(am,'ugho',AC[0],an,bj_UNIT_FACING)elsecall CreateNUnitsAtLoc(am,'u001',AC[0],an,bj_UNIT_FACING)endifcall Jf(bj_lastCreatedGroup,3)if(aI)thencall CreateNUnitsAtLoc(am,'ugho',AC[0],ao,bj_UNIT_FACING)elsecall CreateNUnitsAtLoc(am,'u001',AC[0],ao,bj_UNIT_FACING)endifcall Jf(bj_lastCreatedGroup,4)if(ag)thencall CreateNUnitsAtLoc(aM,'unec',AC[0],aP,bj_UNIT_FACING)elsecall CreateNUnitsAtLoc(aM,'u002',AC[0],aP,bj_UNIT_FACING)endifcall Jf(bj_lastCreatedGroup,2)if(aG)thencall CreateNUnitsAtLoc(aM,'unec',AC[0],aO,bj_UNIT_FACING)elsecall CreateNUnitsAtLoc(aM,'u002',AC[0],aO,bj_UNIT_FACING)endifcall Jf(bj_lastCreatedGroup,3)if(ah)thencall CreateNUnitsAtLoc(aM,'unec',AC[0],ap,bj_UNIT_FACING)elsecall CreateNUnitsAtLoc(aM,'u002',AC[0],ap,bj_UNIT_FACING)endifcall Jf(bj_lastCreatedGroup,4)if Jh thencall CreateNUnitsAtLoc(1,'umtw',AC[0],aP,bj_UNIT_FACING)call Jf(bj_lastCreatedGroup,2)call CreateNUnitsAtLoc(1,'umtw',AC[0],aO,bj_UNIT_FACING)call Jf(bj_lastCreatedGroup,3)call CreateNUnitsAtLoc(1,'umtw',AC[0],ap,bj_UNIT_FACING)call Jf(bj_lastCreatedGroup,4)endifif(aK)thencall CreateNUnitsAtLoc(am,'esen',Ac[0],ar,bj_UNIT_FACING)elsecall CreateNUnitsAtLoc(am,'e00V',Ac[0],ar,bj_UNIT_FACING)endifcall Jf(bj_lastCreatedGroup,2)if(al)thencall CreateNUnitsAtLoc(am,'esen',Ac[0],aq,bj_UNIT_FACING)elsecall CreateNUnitsAtLoc(am,'e00V',Ac[0],aq,bj_UNIT_FACING)endifcall Jf(bj_lastCreatedGroup,3)if(aL)thencall CreateNUnitsAtLoc(am,'esen',Ac[0],aQ,bj_UNIT_FACING)elsecall CreateNUnitsAtLoc(am,'e00V',Ac[0],aQ,bj_UNIT_FACING)endifcall Jf(bj_lastCreatedGroup,4)if(aj)thencall CreateNUnitsAtLoc(aM,'edry',Ac[0],aS,bj_UNIT_FACING)elsecall CreateNUnitsAtLoc(aM,'e00W',Ac[0],aS,bj_UNIT_FACING)endifcall Jf(bj_lastCreatedGroup,2)if(aJ)thencall CreateNUnitsAtLoc(aM,'edry',Ac[0],aR,bj_UNIT_FACING)elsecall CreateNUnitsAtLoc(aM,'e00W',Ac[0],aR,bj_UNIT_FACING)endifcall Jf(bj_lastCreatedGroup,3)if(ak)thencall CreateNUnitsAtLoc(aM,'edry',Ac[0],as,bj_UNIT_FACING)elsecall CreateNUnitsAtLoc(aM,'e00W',Ac[0],as,bj_UNIT_FACING)endifcall Jf(bj_lastCreatedGroup,4)if Jh thencall CreateNUnitsAtLoc(1,'ebal',Ac[0],aS,bj_UNIT_FACING)call Jf(bj_lastCreatedGroup,2)call CreateNUnitsAtLoc(1,'ebal',Ac[0],aR,bj_UNIT_FACING)call Jf(bj_lastCreatedGroup,3)call CreateNUnitsAtLoc(1,'ebal',Ac[0],as,bj_UNIT_FACING)call Jf(bj_lastCreatedGroup,4)endifendfunctionfunction JH takes nothing returns nothingset ag=falsecall DisableTrigger(ch)endfunctionfunction Ji takes nothing returns nothingset aG=falsecall DisableTrigger(cH)endfunctionfunction JI takes nothing returns nothingset ah=falsecall DisableTrigger(ci)endfunctionfunction Jj takes nothing returns nothingset aH=falsecall DisableTrigger(cI)endfunctionfunction JJ takes nothing returns nothingset ai=falsecall DisableTrigger(cj)endfunctionfunction Jk takes nothing returns nothingset aI=falsecall DisableTrigger(cJ)endfunctionfunction JK takes nothing returns nothingset aj=falsecall DisableTrigger(ck)endfunctionfunction Jl takes nothing returns nothingset aJ=falsecall DisableTrigger(cK)endfunctionfunction JL takes nothing returns nothingset ak=falsecall DisableTrigger(cl)endfunctionfunction Jm takes nothing returns nothingset aK=falsecall DisableTrigger(cL)endfunctionfunction JM takes nothing returns nothingset al=falsecall DisableTrigger(cm)endfunctionfunction Jn takes nothing returns nothingset aL=falsecall DisableTrigger(cM)endfunctionfunction JN takes nothing returns booleanif(aK or al or aL or aj or aJ or ak)thenreturn falseendifreturn trueendfunctionfunction Jo takes nothing returns nothingcall FG(bj_FORCE_ALL_PLAYERS,20.,"The Sentinel has destroyed all of the Scourge's unit producing structures. The Sentinel now has Mega Creeps.")call SetPlayerTechResearchedSwap('R00D',(GetPlayerTechCountSimple('R00D',Ac[0])+30),Ac[0])call SetPlayerTechResearchedSwap('R00C',(GetPlayerTechCountSimple('R00C',Ac[0])+30),Ac[0])call DisableTrigger(cn)endfunctionfunction JO takes nothing returns booleanif(aH or ai or aI or ag or aG or ah)thenreturn falseendifreturn trueendfunctionfunction Jp takes nothing returns nothingcall FG(bj_FORCE_ALL_PLAYERS,20.,"The Scourge has destroyed all of the Sentinel's unit producing structures. The Scourge now has Mega Creeps.")call SetPlayerTechResearchedSwap('R009',(GetPlayerTechCountSimple('R009',AC[0])+30),AC[0])call SetPlayerTechResearchedSwap('R00B',(GetPlayerTechCountSimple('R00B',AC[0])+30),AC[0])call DisableTrigger(cN)endfunctionfunction JP takes nothing returns nothingcall SetPlayerTechResearchedSwap('R007',(GetPlayerTechCountSimple('R007',Ac[0])+1),Ac[0])call SetPlayerTechResearchedSwap('R00C',(GetPlayerTechCountSimple('R00C',Ac[0])+1),Ac[0])call SetPlayerTechResearchedSwap('R008',(GetPlayerTechCountSimple('R008',Ac[0])+1),Ac[0])call SetPlayerTechResearchedSwap('R00D',(GetPlayerTechCountSimple('R00D',Ac[0])+1),Ac[0])call SetPlayerTechResearchedSwap('R009',(GetPlayerTechCountSimple('R009',AC[0])+1),AC[0])call SetPlayerTechResearchedSwap('R003',(GetPlayerTechCountSimple('R003',AC[0])+1),AC[0])call SetPlayerTechResearchedSwap('R00A',(GetPlayerTechCountSimple('R00A',AC[0])+1),AC[0])call SetPlayerTechResearchedSwap('R00B',(GetPlayerTechCountSimple('R00B',AC[0])+1),AC[0])endfunctionfunction Jq takes nothing returns nothinglocal location iG=GetRectCenter(BD)call RemoveUnit(CreateUnitAtLoc(Ad,'nbdo',iG,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(Ad,'nbds',iG,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(Ad,'ngst',iG,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(Ad,'nggr',iG,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(Ad,'nbdk',iG,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(Ad,'nbwm',iG,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(Ad,'nogm',iG,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(Ad,'nomg',iG,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(Ad,'nfpc',iG,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(Ad,'nfpu',iG,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(Ad,'nsth',iG,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(Ad,'nstl',iG,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(Ad,'nsat',iG,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(Ad,'nwlg',iG,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(Ad,'nkol',iG,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(Ad,'nkob',iG,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(Ad,'nkot',iG,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(Ad,'ncnk',iG,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(Ad,'ncen',iG,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(Ad,'ngns',iG,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(Ad,'nftb',iG,bj_UNIT_FACING))call RemoveLocation(iG)endfunctionfunction JQ takes nothing returns nothingif(aY or A0 or As)thencall PolledWait('d')endifif bH thencall PolledWait(200)endifcall EnableTrigger(cP)call DisableTrigger(cp)endfunctionfunction Jr takes nothing returns nothingif GetUnitAbilityLevel(GetEnumUnit(),'A0P4')!=0 thencall GroupRemoveUnit(Aq,GetEnumUnit())endifif GetUnitTypeId(GetEnumUnit())=='o003'thencall GroupRemoveUnit(Aq,GetEnumUnit())endifendfunctionfunction JR takes group EX returns booleanset Aq=EXcall ForGroup(EX,function Jr)return FirstOfGroup(EX)==nullendfunctionfunction Js takes nothing returns nothinglocal integer JSlocal group EXlocal location iGset EX=GetUnitsInRectAll(b1)set iG=GetRectCenter(bt)if JR(EX)thenset JS=GetRandomInt(1,3)if(JS==1)thencall CreateNUnitsAtLoc(2,'nbdo',Ad,iG,bj_UNIT_FACING)call CreateNUnitsAtLoc(1,'nbds',Ad,iG,bj_UNIT_FACING)endifif(JS==2)thencall CreateNUnitsAtLoc(2,'ngst',Ad,iG,bj_UNIT_FACING)call CreateNUnitsAtLoc(1,'nggr',Ad,iG,bj_UNIT_FACING)endifif(JS==3)thencall CreateNUnitsAtLoc(2,'nbdk',Ad,iG,bj_UNIT_FACING)call CreateNUnitsAtLoc(1,'nbwm',Ad,iG,bj_UNIT_FACING)endifendifcall DestroyGroup(EX)call RemoveLocation(iG)set EX=GetUnitsInRectAll(b2)set iG=GetRectCenter(bT)if JR(EX)thenset JS=GetRandomInt(1,3)if(JS==1)thencall CreateNUnitsAtLoc(2,'nbdo',Ad,iG,bj_UNIT_FACING)call CreateNUnitsAtLoc(1,'nbds',Ad,iG,bj_UNIT_FACING)endifif(JS==2)thencall CreateNUnitsAtLoc(2,'ngst',Ad,iG,bj_UNIT_FACING)call CreateNUnitsAtLoc(1,'nggr',Ad,iG,bj_UNIT_FACING)endifif(JS==3)thencall CreateNUnitsAtLoc(2,'nbdk',Ad,iG,bj_UNIT_FACING)call CreateNUnitsAtLoc(1,'nbwm',Ad,iG,bj_UNIT_FACING)endifendifcall DestroyGroup(EX)call RemoveLocation(iG)set EX=GetUnitsInRectAll(b3)set iG=GetRectCenter(bu)if JR(EX)thenset JS=GetRandomInt(1,3)if(JS==1)thencall CreateNUnitsAtLoc(2,'nogm',Ad,iG,bj_UNIT_FACING)call CreateNUnitsAtLoc(1,'nomg',Ad,iG,bj_UNIT_FACING)endifif(JS==2)thencall CreateNUnitsAtLoc(1,'nfpc',Ad,iG,bj_UNIT_FACING)call CreateNUnitsAtLoc(1,'nfpu',Ad,iG,bj_UNIT_FACING)endifif(JS==3)thencall CreateNUnitsAtLoc(1,'nsth',Ad,iG,bj_UNIT_FACING)call CreateNUnitsAtLoc(1,'nstl',Ad,iG,bj_UNIT_FACING)call CreateNUnitsAtLoc(1,'nsat',Ad,iG,bj_UNIT_FACING)endifendifcall DestroyGroup(EX)call RemoveLocation(iG)set EX=GetUnitsInRectAll(b4)set iG=GetRectCenter(bU)if JR(EX)thenset JS=GetRandomInt(1,3)if(JS==1)thencall CreateNUnitsAtLoc(2,'nogm',Ad,iG,bj_UNIT_FACING)call CreateNUnitsAtLoc(1,'nomg',Ad,iG,bj_UNIT_FACING)endifif(JS==2)thencall CreateNUnitsAtLoc(1,'nfpc',Ad,iG,bj_UNIT_FACING)call CreateNUnitsAtLoc(1,'nfpu',Ad,iG,bj_UNIT_FACING)endifif(JS==3)thencall CreateNUnitsAtLoc(1,'nsth',Ad,iG,bj_UNIT_FACING)call CreateNUnitsAtLoc(1,'nstl',Ad,iG,bj_UNIT_FACING)call CreateNUnitsAtLoc(1,'nsat',Ad,iG,bj_UNIT_FACING)endifendifcall DestroyGroup(EX)call RemoveLocation(iG)set EX=GetUnitsInRectAll(b5)set iG=GetRectCenter(bv)if JR(EX)thenset JS=GetRandomInt(1,6)if(JS==1)thencall CreateNUnitsAtLoc(3,'nwlg',Ad,iG,bj_UNIT_FACING)endifif(JS==2)thencall CreateNUnitsAtLoc(2,'nstl',Ad,iG,bj_UNIT_FACING)call CreateNUnitsAtLoc(2,'nsat',Ad,iG,bj_UNIT_FACING)endifif(JS==3)thencall CreateNUnitsAtLoc(2,'ngst',Ad,iG,bj_UNIT_FACING)endifif(JS==4)thencall CreateNUnitsAtLoc(1,'nkol',Ad,iG,bj_UNIT_FACING)call CreateNUnitsAtLoc(3,'nkob',Ad,iG,bj_UNIT_FACING)call CreateNUnitsAtLoc(1,'nkot',Ad,iG,bj_UNIT_FACING)endifif(JS==5)thencall CreateNUnitsAtLoc(2,'nftb',Ad,iG,bj_UNIT_FACING)call CreateNUnitsAtLoc(1,'nfsh',Ad,iG,bj_UNIT_FACING)endifif(JS==6)thencall CreateNUnitsAtLoc(1,'ncnk',Ad,iG,bj_UNIT_FACING)call CreateNUnitsAtLoc(1,'ncen',Ad,iG,bj_UNIT_FACING)endifendifcall DestroyGroup(EX)call RemoveLocation(iG)set EX=GetUnitsInRectAll(b6)set iG=GetRectCenter(bV)if JR(EX)thenset JS=GetRandomInt(1,6)if(JS==1)thencall CreateNUnitsAtLoc(3,'nwlg',Ad,iG,bj_UNIT_FACING)endifif(JS==2)thencall CreateNUnitsAtLoc(2,'nstl',Ad,iG,bj_UNIT_FACING)call CreateNUnitsAtLoc(2,'nsat',Ad,iG,bj_UNIT_FACING)endifif(JS==3)thencall CreateNUnitsAtLoc(2,'ngst',Ad,iG,bj_UNIT_FACING)endifif(JS==4)thencall CreateNUnitsAtLoc(1,'nkol',Ad,iG,bj_UNIT_FACING)call CreateNUnitsAtLoc(3,'nkob',Ad,iG,bj_UNIT_FACING)call CreateNUnitsAtLoc(1,'nkot',Ad,iG,bj_UNIT_FACING)endifif(JS==5)thencall CreateNUnitsAtLoc(2,'nftb',Ad,iG,bj_UNIT_FACING)call CreateNUnitsAtLoc(1,'nfsh',Ad,iG,bj_UNIT_FACING)endifif(JS==6)thencall CreateNUnitsAtLoc(1,'ncnk',Ad,iG,bj_UNIT_FACING)call CreateNUnitsAtLoc(1,'ncen',Ad,iG,bj_UNIT_FACING)endifendifcall DestroyGroup(EX)call RemoveLocation(iG)set EX=GetUnitsInRectAll(b7)set iG=GetRectCenter(bw)if JR(EX)thenset JS=GetRandomInt(1,6)if(JS==1)thencall CreateNUnitsAtLoc(3,'nwlg',Ad,iG,bj_UNIT_FACING)endifif(JS==2)thencall CreateNUnitsAtLoc(2,'nstl',Ad,iG,bj_UNIT_FACING)call CreateNUnitsAtLoc(2,'nsat',Ad,iG,bj_UNIT_FACING)endifif(JS==3)thencall CreateNUnitsAtLoc(2,'ngst',Ad,iG,bj_UNIT_FACING)endifif(JS==4)thencall CreateNUnitsAtLoc(1,'nkol',Ad,iG,bj_UNIT_FACING)call CreateNUnitsAtLoc(3,'nkob',Ad,iG,bj_UNIT_FACING)call CreateNUnitsAtLoc(1,'nkot',Ad,iG,bj_UNIT_FACING)endifif(JS==5)thencall CreateNUnitsAtLoc(2,'nftb',Ad,iG,bj_UNIT_FACING)call CreateNUnitsAtLoc(1,'nfsh',Ad,iG,bj_UNIT_FACING)endifif(JS==6)thencall CreateNUnitsAtLoc(1,'ncnk',Ad,iG,bj_UNIT_FACING)call CreateNUnitsAtLoc(1,'ncen',Ad,iG,bj_UNIT_FACING)endifendifcall DestroyGroup(EX)call RemoveLocation(iG)set EX=GetUnitsInRectAll(b9)set iG=GetRectCenter(bW)if JR(EX)thenset JS=GetRandomInt(1,6)if(JS==1)thencall CreateNUnitsAtLoc(3,'nwlg',Ad,iG,bj_UNIT_FACING)endifif(JS==2)thencall CreateNUnitsAtLoc(2,'nstl',Ad,iG,bj_UNIT_FACING)call CreateNUnitsAtLoc(2,'nsat',Ad,iG,bj_UNIT_FACING)endifif(JS==3)thencall CreateNUnitsAtLoc(2,'ngst',Ad,iG,bj_UNIT_FACING)endifif(JS==4)thencall CreateNUnitsAtLoc(1,'nkol',Ad,iG,bj_UNIT_FACING)call CreateNUnitsAtLoc(3,'nkob',Ad,iG,bj_UNIT_FACING)call CreateNUnitsAtLoc(1,'nkot',Ad,iG,bj_UNIT_FACING)endifif(JS==5)thencall CreateNUnitsAtLoc(2,'nftb',Ad,iG,bj_UNIT_FACING)call CreateNUnitsAtLoc(1,'nfsh',Ad,iG,bj_UNIT_FACING)endifif(JS==6)thencall CreateNUnitsAtLoc(1,'ncnk',Ad,iG,bj_UNIT_FACING)call CreateNUnitsAtLoc(1,'ncen',Ad,iG,bj_UNIT_FACING)endifendifcall DestroyGroup(EX)call RemoveLocation(iG)set EX=GetUnitsInRectAll(b8)set iG=GetRectCenter(bx)if JR(EX)thencall CreateNUnitsAtLoc(3,'ngns',Ad,iG,bj_UNIT_FACING)endifcall DestroyGroup(EX)call RemoveLocation(iG)set EX=GetUnitsInRectAll(Ba)set iG=GetRectCenter(bX)if JR(EX)thencall CreateNUnitsAtLoc(2,'nftb',Ad,iG,bj_UNIT_FACING)call CreateNUnitsAtLoc(1,'nkol',Ad,iG,bj_UNIT_FACING)endifcall DestroyGroup(EX)call RemoveLocation(iG)set EX=GetUnitsInRectAll(BB)set iG=GetRectCenter(Bc)if JR(EX)thenset JS=GetRandomInt(1,6)if(JS==1)thencall CreateNUnitsAtLoc(3,'nwlg',Ad,iG,bj_UNIT_FACING)endifif(JS==2)thencall CreateNUnitsAtLoc(2,'nstl',Ad,iG,bj_UNIT_FACING)call CreateNUnitsAtLoc(2,'nsat',Ad,iG,bj_UNIT_FACING)endifif(JS==3)thencall CreateNUnitsAtLoc(2,'ngst',Ad,iG,bj_UNIT_FACING)endifif(JS==4)thencall CreateNUnitsAtLoc(1,'nkol',Ad,iG,bj_UNIT_FACING)call CreateNUnitsAtLoc(3,'nkob',Ad,iG,bj_UNIT_FACING)call CreateNUnitsAtLoc(1,'nkot',Ad,iG,bj_UNIT_FACING)endifif(JS==5)thencall CreateNUnitsAtLoc(2,'nftb',Ad,iG,bj_UNIT_FACING)call CreateNUnitsAtLoc(1,'nfsh',Ad,iG,bj_UNIT_FACING)endifif(JS==6)thencall CreateNUnitsAtLoc(1,'ncnk',Ad,iG,bj_UNIT_FACING)call CreateNUnitsAtLoc(1,'ncen',Ad,iG,bj_UNIT_FACING)endifendifcall DestroyGroup(EX)call RemoveLocation(iG)set EX=GetUnitsInRectAll(BC)set iG=GetRectCenter(Bd)if JR(EX)thenset JS=GetRandomInt(1,6)if(JS==1)thencall CreateNUnitsAtLoc(3,'nwlg',Ad,iG,bj_UNIT_FACING)endifif(JS==2)thencall CreateNUnitsAtLoc(2,'nstl',Ad,iG,bj_UNIT_FACING)call CreateNUnitsAtLoc(2,'nsat',Ad,iG,bj_UNIT_FACING)endifif(JS==3)thencall CreateNUnitsAtLoc(2,'ngst',Ad,iG,bj_UNIT_FACING)endifif(JS==4)thencall CreateNUnitsAtLoc(1,'nkol',Ad,iG,bj_UNIT_FACING)call CreateNUnitsAtLoc(3,'nkob',Ad,iG,bj_UNIT_FACING)call CreateNUnitsAtLoc(1,'nkot',Ad,iG,bj_UNIT_FACING)endifif(JS==5)thencall CreateNUnitsAtLoc(2,'nftb',Ad,iG,bj_UNIT_FACING)call CreateNUnitsAtLoc(1,'nfsh',Ad,iG,bj_UNIT_FACING)endifif(JS==6)thencall CreateNUnitsAtLoc(1,'ncnk',Ad,iG,bj_UNIT_FACING)call CreateNUnitsAtLoc(1,'ncen',Ad,iG,bj_UNIT_FACING)endifendifcall DestroyGroup(EX)call RemoveLocation(iG)endfunctionfunction Jt takes nothing returns nothinglocal integer E0=GetRandomInt(1,9)if(E0==1)thencall CreateNUnitsAtLoc(1,'n00F',Ac[0],as,bj_UNIT_FACING)call FG(bj_FORCE_ALL_PLAYERS,10.,"A |c000000ffSiege Golem|r has spawned for the |c00ff0000Sentinel|r and is taking the east path!")call Jf(bj_lastCreatedGroup,4)endifif(E0==2)thencall CreateNUnitsAtLoc(1,'n00F',Ac[0],aS,bj_UNIT_FACING)call FG(bj_FORCE_ALL_PLAYERS,10.,"A |c000000ffSiege Golem|r has spawned for the |c00ff0000Sentinel|r and is taking the west path!")call Jf(bj_lastCreatedGroup,2)endifif(E0==3)thencall CreateNUnitsAtLoc(1,'n00F',Ac[0],aR,bj_UNIT_FACING)call FG(bj_FORCE_ALL_PLAYERS,10.,"A |c000000ffSiege Golem|r has spawned for the |c00ff0000Sentinel|r and is taking the middle path!")call Jf(bj_lastCreatedGroup,3)endifif(E0==4)thencall CreateNUnitsAtLoc(1,'n00E',Ac[0],as,bj_UNIT_FACING)call FG(bj_FORCE_ALL_PLAYERS,10.,"A |c000000ffScary Fish|r has spawned for the |c00ff0000Sentinel|r and is taking the east path!")call Jf(bj_lastCreatedGroup,4)endifif(E0==5)thencall CreateNUnitsAtLoc(1,'n00E',Ac[0],aS,bj_UNIT_FACING)call FG(bj_FORCE_ALL_PLAYERS,10.,"A |c000000ffScary Fish|r has spawned for the |c00ff0000Sentinel|r and is taking the west path!")call Jf(bj_lastCreatedGroup,2)endifif(E0==6)thencall CreateNUnitsAtLoc(1,'n00E',Ac[0],aR,bj_UNIT_FACING)call FG(bj_FORCE_ALL_PLAYERS,10.,"A |c000000ffScary Fish|r has spawned for the |c00ff0000Sentinel|r and is taking the middle path!")call Jf(bj_lastCreatedGroup,3)endifif(E0==7)thencall CreateNUnitsAtLoc(1,'n00D',Ac[0],as,bj_UNIT_FACING)call FG(bj_FORCE_ALL_PLAYERS,10.,"An |c000000ffAncient Hydra|r has spawned for the |c00ff0000Sentinel|r and is taking the east path!")call Jf(bj_lastCreatedGroup,4)endifif(E0==8)thencall CreateNUnitsAtLoc(1,'n00D',Ac[0],aS,bj_UNIT_FACING)call FG(bj_FORCE_ALL_PLAYERS,10.,"An |c000000ffAncient Hydra|r has spawned for the |c00ff0000Sentinel|r and is taking the west path!")call Jf(bj_lastCreatedGroup,2)endifif(E0==9)thencall CreateNUnitsAtLoc(1,'n00D',Ac[0],aR,bj_UNIT_FACING)call FG(bj_FORCE_ALL_PLAYERS,10.,"An |c000000ffAncient Hydra|r has spawned for the |c00ff0000Sentinel|r and is taking the middle path!")call Jf(bj_lastCreatedGroup,3)endifset E0=GetRandomInt(1,9)if(E0==1)thencall CreateNUnitsAtLoc(1,'n00F',AC[0],ap,bj_UNIT_FACING)call FG(bj_FORCE_ALL_PLAYERS,10.,"A |c000000ffSiege Golem|r has spawned for the |c00004000Scourge|r and is taking the east path!")call Jf(bj_lastCreatedGroup,4)endifif(E0==2)thencall CreateNUnitsAtLoc(1,'n00F',AC[0],aP,bj_UNIT_FACING)call FG(bj_FORCE_ALL_PLAYERS,10.,"A |c000000ffSiege Golem|r has spawned for the |c00004000Scourge|r and is taking the west path!")call Jf(bj_lastCreatedGroup,2)endifif(E0==3)thencall CreateNUnitsAtLoc(1,'n00F',AC[0],aO,bj_UNIT_FACING)call FG(bj_FORCE_ALL_PLAYERS,10.,"A |c000000ffSiege Golem|r has spawned for the |c00004000Scourge|r and is taking the middle path!")call Jf(bj_lastCreatedGroup,3)endifif(E0==4)thencall CreateNUnitsAtLoc(1,'n00E',AC[0],ap,bj_UNIT_FACING)call FG(bj_FORCE_ALL_PLAYERS,10.,"A |c000000ffScary Fish|r has spawned for the |c00004000Scourge|r and is taking the east path!")call Jf(bj_lastCreatedGroup,4)endifif(E0==5)thencall CreateNUnitsAtLoc(1,'n00E',AC[0],aP,bj_UNIT_FACING)call FG(bj_FORCE_ALL_PLAYERS,10.,"A |c000000ffScary Fish|r has spawned for the |c00004000Scourge|r and is taking the west path!")call Jf(bj_lastCreatedGroup,2)endifif(E0==6)thencall CreateNUnitsAtLoc(1,'n00E',AC[0],aO,bj_UNIT_FACING)call FG(bj_FORCE_ALL_PLAYERS,10.,"A |c000000ffScary Fish|r has spawned for the |c00004000Scourge|r and is taking the middle path!")call Jf(bj_lastCreatedGroup,3)endifif(E0==7)thencall CreateNUnitsAtLoc(1,'n00D',AC[0],ap,bj_UNIT_FACING)call FG(bj_FORCE_ALL_PLAYERS,10.,"An |c000000ffAncient Hydra|r has spawned for the |c00004000Scourge|r and is taking the east path!")call Jf(bj_lastCreatedGroup,4)endifif(E0==8)thencall CreateNUnitsAtLoc(1,'n00D',AC[0],aP,bj_UNIT_FACING)call FG(bj_FORCE_ALL_PLAYERS,10.,"An |c000000ffAncient Hydra|r has spawned for the |c00004000Scourge|r and is taking the west path!")call Jf(bj_lastCreatedGroup,2)endifif(E0==9)thencall CreateNUnitsAtLoc(1,'n00D',AC[0],aO,bj_UNIT_FACING)call FG(bj_FORCE_ALL_PLAYERS,10.,"An |c000000ffAncient Hydra|r has spawned for the |c00004000Scourge|r and is taking the middle path!")call Jf(bj_lastCreatedGroup,3)endifendfunctionfunction JT takes nothing returns nothinglocal player p=GetOwningPlayer(GetBuyingUnit())local integer fz=GetItemTypeId(GetSoldItem())local integer Ju=EH("Stats"+I2S(GetPlayerId(p)),"NumOfConsumables")local integer JU=EH("Stats"+I2S(GetPlayerId(p)),"NumOfVeggies")local integer Jv=EH("Stats"+I2S(GetPlayerId(p)),"NumOfWards")if fz=='sor7'or fz=='tgrh'thenset Jv=Jv+3set Ju=Ju+3endifif fz=='silk'thenset JU=JU+2set Ju=Ju+2endifif fz=='sman'or fz=='plcl'or fz=='stwp'or fz=='sor8'thenset Ju=Ju+1endifcall Ea("Stats"+I2S(GetPlayerId(p)),"NumOfConsumables",Ju)call Ea("Stats"+I2S(GetPlayerId(p)),"NumOfVeggies",JU)call Ea("Stats"+I2S(GetPlayerId(p)),"NumOfWards",Jv)endfunctionfunction JV takes nothing returns booleanreturn GetSpellAbilityId()=='A0K5'endfunctionfunction Jw takes nothing returns nothinglocal unit JW=GetTriggerUnit()local item Jx=UnitItemInSlot(JW,0)if GetItemTypeId(Jx)=='I00Q'thencall RemoveItem(Jx)call CreateItem('srbd',GetUnitX(JW),GetUnitY(JW))call CreateItem('rnec',GetUnitX(JW),GetUnitY(JW))endifif GetItemTypeId(Jx)=='grsl'thencall RemoveItem(Jx)call CreateItem('shhn',GetUnitX(JW),GetUnitY(JW))call CreateItem('modt',GetUnitX(JW),GetUnitY(JW))endifendfunctionfunction JX takes nothing returns booleanreturn GetSpellAbilityId()=='A0JL'endfunctionfunction Jy takes nothing returns booleanreturn GetUnitAbilityLevel(GetTriggerUnit(),'B049')==1 and GetRandomInt(1,'d')<21 and IsUnitIllusion(GetTriggerUnit())==falseendfunctionfunction JY takes nothing returns nothinglocal unit FC=GetTriggerUnit()local unit Fd=GetAttacker()local unit Jz=CreateUnit(GetOwningPlayer(FC),'e00E',GetUnitX(FC),GetUnitY(FC),0)local trigger t=GetTriggeringTrigger()call UnitAddAbility(Jz,'A0K6')call IssueTargetOrderById(Jz,852587,Fd)call DisableTrigger(t)call PolledWait(1)if EI(e4(t),"End")==false thencall EnableTrigger(t)endifendfunctionfunction JZ takes nothing returns nothinglocal unit FC=GetTriggerUnit()local unit Fd=GetSpellTargetUnit()local unit Jz=CreateUnit(GetOwningPlayer(Fd),'e01R',0,0,0)local trigger t=CreateTrigger()local string f8=e4(t)local effect FX=AddSpecialEffectTarget("Abilities\\Spells\\Orc\\LightningShield\\LightningShieldTarget.mdl",Fd,"origin")call UnitAddAbility(Fd,'A0P1')call TriggerRegisterUnitEvent(t,Fd,EVENT_UNIT_ATTACKED)call TriggerAddCondition(t,Condition(function Jy))call TriggerAddAction(t,function JY)call Ec(f8,"End",false)call PolledWait(18)call DisableTrigger(t)call Ec(f8,"End",true)call UnitRemoveAbility(Fd,'A0P1')call DestroyEffect(FX)call PolledWait(5)call e5(f8)call Fj(t)endfunctionfunction J0 takes nothing returns integerreturn'A0GD'endfunctionfunction J1 takes nothing returns integerreturn'e01H'endfunctionfunction J2 takes nothing returns booleanreturn GetSpellAbilityId()==J0()endfunctionfunction J3 takes nothing returns nothinglocal unit J4=GetTriggerUnit()local real x=GetUnitX(J4)local real y=GetUnitY(J4)local real f=GetUnitFacing(J4)local player EL=GetOwningPlayer(J4)local unit J5if FM(J4,'tgxp')!=null and FM(J4,'I00Y')!=null thencall RemoveItem(FM(J4,'tgxp'))call RemoveItem(FM(J4,'I00Y'))set J5=CreateUnit(EL,J1(),x,y,f)call UnitAddItem(J5,UnitItemInSlot(J4,0))call UnitAddItem(J5,UnitItemInSlot(J4,1))call UnitAddItem(J5,UnitItemInSlot(J4,2))call UnitAddItem(J5,UnitItemInSlot(J4,3))call UnitAddItem(J5,UnitItemInSlot(J4,4))call UnitAddItem(J5,UnitItemInSlot(J4,5))call RemoveUnit(J4)call DestroyEffect(AddSpecialEffectTargetUnitBJ("origin",J5,"Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl"))elsecall fI(GetOwningPlayer(J4),"Recipe requirements not complete!")endifendfunctionfunction J6 takes nothing returns booleanreturn GetItemTypeId(GetManipulatedItem())=='ratf'and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)endfunctionfunction J7 takes nothing returns booleanlocal integer x=0loopexitwhen x>5if UnitItemInSlot(GetTriggerUnit(),x)==null thenreturn trueendifset x=x+1endloopreturn falseendfunctionfunction J8 takes nothing returns nothingif J7()==false thencall fI(GetOwningPlayer(GetTriggerUnit()),"You must have an empty item slot to break up Perseverance")returnendifcall DisableTrigger(cV)call RemoveItem(GetManipulatedItem())call UnitAddItem(GetTriggerUnit(),CreateItem('shcw',0,0))call UnitAddItem(GetTriggerUnit(),CreateItem('rej6',0,0))call EnableTrigger(cV)endfunctionfunction J9 takes nothing returns booleanreturn GetSpellAbilityId()=='A0CX'and GetSpellTargetUnit()!=nullendfunctionfunction ka takes nothing returns nothinglocal location iG=GetUnitLoc(GetTriggerUnit())local unit Jzlocal unit Fd=GetSpellTargetUnit()set Jz=CreateUnitAtLoc(GetOwningPlayer(GetTriggerUnit()),'e00C',iG,bj_UNIT_FACING)call UnitAddAbility(Jz,'A0KZ')call UnitApplyTimedLifeBJ(5.,'BTLF',Jz)call IssueTargetOrderById(Jz,852066,Fd)call SetUnitPathing(Jz,false)call SetUnitInvulnerable(Jz,true)call UnitAddAbility(Jz,'Aloc')call RemoveLocation(iG)endfunctionfunction kA takes nothing returns booleanreturn GetSpellAbilityId()=='A0CK'endfunctionfunction kb takes nothing returns booleanreturn IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and GetUnitAbilityLevel(GetTriggerUnit(),'B06B')==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==falseendfunctionfunction kB takes nothing returns nothingcall SetUnitState(GetEnumUnit(),UNIT_STATE_LIFE,GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+250)endfunctionfunction kc takes nothing returns nothinglocal unit fw=GetTriggerUnit()local group EX=CreateGroup()local boolexpr Ey=Condition(function kb)call GroupEnumUnitsInRange(EX,GetUnitX(fw),GetUnitY(fw),450,Ey)call ForGroup(EX,function kB)call DestroyBoolExpr(Ey)call DestroyGroup(EX)endfunctionfunction kC takes integer kd returns booleanreturn kd=='pres'or kd=='pomn'or kd=='pnvu'or kd=='fgrd'or kd=='I007'or kd=='I00D'endfunctionfunction kD takes nothing returns nothinglocal timer t=GetExpiredTimer()local string f8=e4(t)local item Jx=Eh(f8,"Item")local unit ke=EC(f8,"Unit")if(GetItemTypeId(Jx)=='I00K'or GetItemTypeId(Jx)=='I00Z')and GetUnitState(ke,UNIT_STATE_LIFE)>1 thencall e5(f8)call RemoveItem(Jx)set Jx=CreateItem('I00J',0,0)call UnitAddItem(ke,Jx)call Fn(t)endifendfunctionfunction kE takes item kf,unit fP returns nothinglocal timer t=CreateTimer()call e7(e4(t),"Item",kf)call e7(e4(t),"Unit",fP)if GetItemTypeId(kf)=='I00Z'thencall TimerStart(t,180,true,function kD)elsecall TimerStart(t,'x',true,function kD)endifendfunctionfunction kF takes nothing returns nothinglocal timer t=GetExpiredTimer()local string f8=e4(t)local unit Fd=EC(f8,"Target")local effect FX=Ef(f8,"FX")local real Fe=Ei(f8,"SourceX")local real FE=Ei(f8,"SourceY")if GetUnitState(Fd,UNIT_STATE_LIFE)>1 thencall DestroyEffect(AddSpecialEffect("Abilities\\Spells\\NightElf\\Blink\\BlinkCaster.mdl",GetUnitX(Fd),GetUnitY(Fd)))call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\NightElf\\Blink\\BlinkTarget.mdl",Fe,FE))call SetUnitPosition(Fd,Fe,FE)endifcall DestroyEffect(FX)call Fn(t)endfunctionfunction Bottle_Recall takes nothing returns nothinglocal unit Fd=GetSpellTargetUnit()local real Fe=GetUnitX(Fd)local real FE=GetUnitY(Fd)local effect FX=AddSpecialEffect("Abilities\\Weapons\\SpiritOfVengeanceMissile\\SpiritOfVengeanceMissile.mdl",Fe,FE)local timer t=CreateTimer()local string f8=e4(t)call Fl("Abilities\\Weapons\\SpiritOfVengeanceMissile\\SpiritOfVengeanceMissile.mdl",Fd,"overhead",15)call e7(f8,"FX",FX)call e7(f8,"Target",Fd)call Eb(f8,"SourceX",Fe)call Eb(f8,"SourceY",FE)call TimerStart(t,15,false,function kF)endfunctionfunction kg takes nothing returns nothingif GetSpellAbilityId()=='A0H6'thencall e7(e4(GetTriggerUnit()),"BottleTargetUnit",null)call Ea(e4(GetTriggerUnit()),"BottleTargetItemId",0)if GetUnitTypeId(GetSpellTargetUnit())=='nfoh'or GetUnitTypeId(GetSpellTargetUnit())=='ndfl'thencall e7(e4(GetTriggerUnit()),"BottleTargetUnit",GetSpellTargetUnit())elseif kC(GetItemTypeId(GetSpellTargetItem()))thencall Ea(e4(GetTriggerUnit()),"BottleTargetItemId",GetItemTypeId(GetSpellTargetItem()))call RemoveItem(GetSpellTargetItem())endifendifendfunctionfunction kG takes nothing returns booleanreturn GetItemTypeId(GetManipulatedItem())=='I00J'or GetItemTypeId(GetManipulatedItem())=='I00H'or GetItemTypeId(GetManipulatedItem())=='I00I'or GetItemTypeId(GetManipulatedItem())=='I00G'or GetItemTypeId(GetManipulatedItem())=='I00K'or GetItemTypeId(GetManipulatedItem())=='I00Z'endfunctionfunction kh takes nothing returns nothinglocal unit fP=GetTriggerUnit()local unit kHlocal integer kilocal item Jx=GetManipulatedItem()local item kflocal item kIlocal integer kd=GetItemTypeId(Jx)local item RuneTempItem1local item RuneTempItem2if kd=='I00G'thenset kH=EC(e4(fP),"BottleTargetUnit")set ki=EH(e4(fP),"BottleTargetItemId")if GetUnitTypeId(kH)=='nfoh'or GetUnitTypeId(kH)=='ndfl'thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishMana\\SpiritTouchTarget.mdl",fP,"overhead"))call fh(GetOwningPlayer(fP),"Abilities\\Spells\\Human\\Heal\\HealTarget.wav")call RemoveItem(Jx)set kf=CreateItem('I00J',0,0)call UnitAddItem(fP,kf)elseif kC(ki)thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishMana\\SpiritTouchTarget.mdl",fP,"overhead"))call RemoveItem(Jx)set kf=CreateItem('I00K',GetUnitX(fP),GetUnitY(fP))call DisableTrigger(cw)call UnitAddItem(fP,kf)call EnableTrigger(cw)call Ea(e4(kf),e4(fP),ki)call kE(kf,fP)endifelseif kd=='I00J'thencall RemoveItem(Jx)set kf=CreateItem('I00H',0,0)call UnitAddItem(fP,kf)elseif kd=='I00H'thencall RemoveItem(Jx)set kf=CreateItem('I00I',0,0)call UnitAddItem(fP,kf)elseif kd=='I00I'thencall RemoveItem(Jx)set kf=CreateItem('I00G',0,0)call UnitAddItem(fP,kf)elseif kd=='I00K'thenset kf=CreateItem(EH(e4(Jx),e4(fP)),GetUnitX(fP),GetUnitY(fP))call e5(e4(Jx))call RemoveItem(Jx)call UnitAddItem(fP,kf)set kf=CreateItem('I00J',0,0)call UnitAddItem(fP,kf)endifendfunctionfunction kj takes nothing returns booleanif(GetItemTypeId(GetManipulatedItem())!='olig')thenreturn falseendifreturn trueendfunctionfunction kJ takes unit gH returns nothinglocal location Hvif(EK(GetOwningPlayer(gH)))thenset Hv=GetRectCenter(bL)elseset Hv=GetRectCenter(bp)endifcall HU(gH,Hv)call RemoveLocation(Hv)endfunctionfunction kk takes unit Ew returns nothingif GetUnitTypeId(Ew)=='H00I'thencall kJ(Ew)endifendfunctionfunction kK takes nothing returns nothinglocal unit fP=GetTriggerUnit()local location fEif(EJ(GetOwningPlayer(fP)))thenset fE=GetRectCenter(bp)elseset fE=GetRectCenter(bL)endifcall PolledWait(3.)call PanCameraToTimedLocForPlayer(GetOwningPlayer(fP),fE,1.)call SetUnitPositionLoc(fP,fE)call kk(GetTriggerUnit())call RemoveLocation(fE)if A5 thencall PauseUnit(fP,true)call PolledWait(6)call PauseUnit(fP,true)endifcall gF(fP)endfunctionfunction kl takes nothing returns booleanreturn GetItemType(GetManipulatedItem())==ITEM_TYPE_PURCHASABLEendfunctionfunction kL takes nothing returns nothinglocal item F7=GetManipulatedItem()local item F8local unit fw=GetTriggerUnit()call DisableTrigger(GetTriggeringTrigger())call UnitRemoveItem(fw,F7)set F8=fY(fw,GetItemTypeId(F7))call UnitRemoveItem(fw,F8)call SetItemCharges(F7,GetItemCharges(F7)+GetItemCharges(F8))call RemoveItem(F8)call UnitAddItem(fw,F7)call EnableTrigger(GetTriggeringTrigger())endfunctionfunction km takes nothing returns nothingif GetUnitTypeId(GetTriggerUnit())=='n00I'or GetUnitTypeId(GetTriggerUnit())=='e01H'thenif GetItemTypeId(GetManipulatedItem())=='olig'or GetItemTypeId(GetManipulatedItem())=='sor3'or GetItemTypeId(GetManipulatedItem())=='sor6'or GetItemTypeId(GetManipulatedItem())=='sor5'or GetItemTypeId(GetManipulatedItem())=='sor4'or GetItemTypeId(GetManipulatedItem())=='pspd'thencall SetItemDroppable(GetManipulatedItem(),true)endifendifendfunctionfunction kM takes nothing returns nothingif GetUnitTypeId(GetTriggerUnit())=='n00I'or GetUnitTypeId(GetTriggerUnit())=='e01H'thenif GetItemTypeId(GetManipulatedItem())=='olig'or GetItemTypeId(GetManipulatedItem())=='sor3'or GetItemTypeId(GetManipulatedItem())=='sor6'or GetItemTypeId(GetManipulatedItem())=='sor5'or GetItemTypeId(GetManipulatedItem())=='sor4'or GetItemTypeId(GetManipulatedItem())=='pspd'thencall SetItemDroppable(GetManipulatedItem(),false)endifendifendfunctionfunction kn takes nothing returns booleanreturn GetSpellAbilityId()=='ACch'endfunctionfunction kN takes nothing returns nothingcall UnitApplyTimedLifeBJ(1200.,'BTLF',GetSpellTargetUnit())call UnitAddAbility(GetSpellTargetUnit(),'Aeth')call Fg(GetSpellTargetUnit())endfunctionfunction ko takes nothing returns booleanreturn GetSpellAbilityId()=='A02W'endfunctionfunction kO takes nothing returns nothingcall UnitResetCooldown(GetTriggerUnit())endfunctionfunction kp takes nothing returns booleanif(not(GetUnitTypeId(GetTriggerUnit())=='n00J'))thenreturn falseendifif(IsUnitType(GetKillingUnit(),UNIT_TYPE_STRUCTURE))thenreturn falseendifreturn trueendfunctionfunction kP takes nothing returns nothingif IsUnitAlly(GetDyingUnit(),GetOwningPlayer(GetKillingUnit()))==false thencall UnitDamageTargetBJ(GetDyingUnit(),GetKillingUnit(),200.,ATTACK_TYPE_HERO,DAMAGE_TYPE_MAGIC)endifendfunctionfunction kq takes nothing returns booleanif(not(GetUnitTypeId(GetTriggerUnit())=='n00A'))thenreturn falseendifif(IsUnitType(GetKillingUnit(),UNIT_TYPE_STRUCTURE))thenreturn falseendifreturn trueendfunctionfunction kQ takes nothing returns nothingif IsUnitAlly(GetDyingUnit(),GetOwningPlayer(GetKillingUnit()))==false thencall UnitDamageTargetBJ(GetDyingUnit(),GetKillingUnit(),400.,ATTACK_TYPE_HERO,DAMAGE_TYPE_MAGIC)endifendfunctionfunction kr takes nothing returns booleanif(not(GetUnitTypeId(GetTriggerUnit())=='n006'))thenreturn falseendifif(IsUnitType(GetKillingUnit(),UNIT_TYPE_STRUCTURE))thenreturn falseendifreturn trueendfunctionfunction kR takes nothing returns nothingif IsUnitAlly(GetDyingUnit(),GetOwningPlayer(GetKillingUnit()))==false thencall UnitDamageTargetBJ(GetDyingUnit(),GetKillingUnit(),600.,ATTACK_TYPE_HERO,DAMAGE_TYPE_MAGIC)endifendfunctionfunction ks takes nothing returns booleanif(GetSpellAbilityId()=='A0HB')thenreturn trueendifif(GetSpellAbilityId()=='A0D3')thenreturn trueendifif(GetSpellAbilityId()=='A0DF')thenreturn trueendifreturn falseendfunctionfunction Trig_MultipleNecro_Func001002001 takes nothing returns booleanreturn(GetUnitTypeId(GetEnumUnit())=='n00H')endfunctionfunction kS takes nothing returns nothingif((GetUnitTypeId(GetEnumUnit())=='n00H')or(GetUnitTypeId(GetEnumUnit())=='n00G')or(GetUnitTypeId(GetEnumUnit())=='n00K')or(GetUnitTypeId(GetEnumUnit())=='n00J')or(GetUnitTypeId(GetEnumUnit())=='n00A')or(GetUnitTypeId(GetEnumUnit())=='n006'))thencall RemoveUnit(GetEnumUnit())endifendfunctionfunction kt takes nothing returns nothinglocal group EX=GetUnitsOfPlayerAll(GetOwningPlayer(GetTriggerUnit()))call ForGroupBJ(EX,function kS)call DestroyGroup(EX)endfunctionfunction kT takes nothing returns booleanif(GetItemTypeId(GetManipulatedItem())!='I007')thenreturn falseendifreturn trueendfunctionfunction ku takes nothing returns nothinglocal unit fP=GetTriggerUnit()local location iG=GetUnitLoc(fP)local unit Jzset Jz=CreateUnitAtLoc(GetOwningPlayer(fP),'e00C',iG,bj_UNIT_FACING)call UnitAddAbility(Jz,'A0GR')call UnitApplyTimedLifeBJ(2.,'BTLF',Jz)call IssueTargetOrderById(Jz,852274,fP)call SetUnitPathing(Jz,false)call SetUnitInvulnerable(Jz,true)call UnitAddAbility(Jz,'Aloc')call RemoveLocation(iG)endfunctionfunction kU takes nothing returns nothingset P=GetEnumItem()endfunctionfunction kv takes nothing returns nothinglocal integer E0=GetRandomInt(1,10)set P=nullcall EnumItemsInRectBJ(bS,function kU)if(P==null)thenset G[1]=trueelseset G[1]=falseendifset P=nullcall EnumItemsInRectBJ(br,function kU)if(P==null)thenset G[2]=trueelseset G[2]=falseendifif(G[1]and G[2])thenif(E0==1)thencall CreateItemLoc('fgrd',at)endifif(E0==2)thencall CreateItemLoc('pres',at)endifif(E0==3)thencall CreateItemLoc('pomn',at)endifif(E0==4)thencall CreateItemLoc('pnvu',at)endifif(E0==5)thencall CreateItemLoc('fgrd',aT)endifif(E0==6)thencall CreateItemLoc('pres',aT)endifif(E0==7)thencall CreateItemLoc('pomn',aT)endifif(E0==8)thencall CreateItemLoc('pnvu',aT)endifif(E0==9)thencall CreateItemLoc('I007',at)endifif(E0==10)thencall CreateItemLoc('I007',aT)endifset G[1]=falseset G[2]=falseendifendfunctionfunction kV takes nothing returns booleanreturn GetItemType(GetManipulatedItem())==ITEM_TYPE_POWERUPendfunctionfunction kw takes unit Ew,item kW,integer kx returns nothingcall RemoveItem(kW)call UnitAddItemById(Ew,kx)endfunctionfunction kX takes nothing returns nothinglocal item ky=GetManipulatedItem()local unit fP=GetTriggerUnit()local integer kY=GetItemTypeId(ky)call DisableTrigger(GetTriggeringTrigger())if(kY=='tsct')thencall kw(fP,ky,'mcri')elseif(kY=='tst2')thencall kw(fP,ky,'vddl')elseif(kY=='tpow')thencall kw(fP,ky,'tstr')elseif(kY=='tint')thencall kw(fP,ky,'tin2')elseif(kY=='tdx2')thencall kw(fP,ky,'texp')elseif(kY=='rwat')thencall kw(fP,ky,'tdex')elseif(kY=='rspd')thencall kw(fP,ky,'rspl')elseif(kY=='rres')thencall kw(fP,ky,'rsps')elseif(kY=='rman')thencall kw(fP,ky,'rreb')elseif(kY=='rhe1')thencall kw(fP,ky,'rre1')elseif(kY=='rre2')thencall kw(fP,ky,'rhe2')elseif(kY=='rhe3')thencall kw(fP,ky,'rma2')elseif(kY=='manh')thencall kw(fP,ky,'rdis')elseif(kY=='guvi')thencall kw(fP,ky,'gold')elseif(kY=='gfor')thencall kw(fP,ky,'gomn')elseif(kY=='lmbr')thencall kw(fP,ky,'ward')elseif(kY=='evtl')thencall kw(fP,ky,'lhst')elseif(kY=='ssil')thencall kw(fP,ky,'stel')elseif(kY=='rag1')thencall kw(fP,ky,'rwiz')elseif(kY=='brac')thencall kw(fP,ky,'sbch')elseif(kY=='rde3')thencall kw(fP,ky,'rlif')elseif(kY=='rde1')thencall kw(fP,ky,'rde2')elseif(kY=='pmna')thencall kw(fP,ky,'prvt')elseif(kY=='odef')thencall kw(fP,ky,'penr')elseif(kY=='rin1')thencall kw(fP,ky,'mcou')elseif(kY=='kpin')thencall kw(fP,ky,'lgdh')elseif(kY=='hcun')thencall kw(fP,ky,'rhth')elseif(kY=='gcel')thencall kw(fP,ky,'hval')elseif(kY=='dsum')thencall kw(fP,ky,'rst1')elseif(kY=='clsd')thencall kw(fP,ky,'crys')elseif(kY=='rat9')thencall kw(fP,ky,'clfm')elseif(kY=='cnob')thencall kw(fP,ky,'ratc')elseif(kY=='ajen')thencall kw(fP,ky,'bspd')elseif(kY=='afac')thencall kw(fP,ky,'spsh')elseif(kY=='wlsd')thencall kw(fP,ky,'wcyc')elseif(kY=='woms')thencall kw(fP,ky,'wshs')elseif(kY=='totw')thencall kw(fP,ky,'will')elseif(kY=='fgfh')thencall kw(fP,ky,'fgrg')elseif(kY=='sres')thencall kw(fP,ky,'srrc')elseif(kY=='I003')thencall kw(fP,ky,'sand')elseif(kY=='pghe')thencall kw(fP,ky,'pgma')elseif(kY=='shar')thencall kw(fP,ky,'infs')elseif(kY=='hslv')thencall kw(fP,ky,'pclr')elseif(kY=='moon')thencall kw(fP,ky,'pinv')elseif(kY=='I00A')thencall kw(fP,ky,'I00B')elseif(kY=='I00R')thencall kw(fP,ky,'I00V')elseif(kY=='I00X')thencall kw(fP,ky,'I00Y')elseif(kY=='I013')thencall kw(fP,ky,'I014')endifcall EnableTrigger(GetTriggeringTrigger())endfunctionfunction kz takes unit fP,integer F7,integer F8,integer F9,integer ga,integer kf,integer kZ returns booleanlocal effect k0if(kZ==1)thenif(UnitHasItemOfTypeBJ(fP,F7))thencall RemoveItem(GetItemOfTypeFromUnitBJ(fP,F7))set k0=AddSpecialEffectTargetUnitBJ("origin",fP,"Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl")call UnitAddItemById(fP,kf)call DestroyEffect(k0)return trueendifendifif(kZ==2)thenif(UnitHasItemOfTypeBJ(fP,F7))thenif(UnitHasItemOfTypeBJ(fP,F8))thencall RemoveItem(GetItemOfTypeFromUnitBJ(fP,F7))call RemoveItem(GetItemOfTypeFromUnitBJ(fP,F8))set k0=AddSpecialEffectTargetUnitBJ("origin",fP,"Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl")call UnitAddItemById(fP,kf)call DestroyEffect(k0)return trueendifendifendifif(kZ==3)thenif(UnitHasItemOfTypeBJ(fP,F7))thenif(UnitHasItemOfTypeBJ(fP,F8))thenif(UnitHasItemOfTypeBJ(fP,F9))thencall RemoveItem(GetItemOfTypeFromUnitBJ(fP,F7))call RemoveItem(GetItemOfTypeFromUnitBJ(fP,F8))call RemoveItem(GetItemOfTypeFromUnitBJ(fP,F9))set k0=AddSpecialEffectTargetUnitBJ("origin",fP,"Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl")call UnitAddItemById(fP,kf)call DestroyEffect(k0)return trueendifendifendifendifif(kZ==4)thenif(UnitHasItemOfTypeBJ(fP,F7))thenif(UnitHasItemOfTypeBJ(fP,F8))thenif(UnitHasItemOfTypeBJ(fP,F9))thenif(UnitHasItemOfTypeBJ(fP,ga))thencall RemoveItem(GetItemOfTypeFromUnitBJ(fP,F7))call RemoveItem(GetItemOfTypeFromUnitBJ(fP,F8))call RemoveItem(GetItemOfTypeFromUnitBJ(fP,F9))call RemoveItem(GetItemOfTypeFromUnitBJ(fP,ga))set k0=AddSpecialEffectTargetUnitBJ("origin",fP,"Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl")call UnitAddItemById(fP,kf)call DestroyEffect(k0)return trueendifendifendifendifendifreturn falseendfunctionfunction k1 takes nothing returns nothinglocal unit fP=GetTriggerUnit()local integer ER=1local integer Es=awloopexitwhen ER>Esif(kz(fP,au[ER],aU[ER],av[ER],aV[ER],aW[ER],aX[ER]))thenset ER=Es+1endifset ER=ER+1endloopendfunctionfunction k2 takes nothing returns booleanreturn GetItemType(GetManipulatedItem())==ITEM_TYPE_PERMANENT or GetItemType(GetManipulatedItem())==ITEM_TYPE_CHARGEDendfunctionfunction k3 takes nothing returns nothinglocal unit fP=GetTriggerUnit()local item ky=GetManipulatedItem()local integer k4=GetUnitTypeId(fP)local integer k5=GetItemTypeId(ky)call DisableTrigger(GetTriggeringTrigger())if(IsUnitType(fP,UNIT_TYPE_MELEE_ATTACKER))thenif(k5=='thdm')thencall RemoveItem(ky)call UnitAddItemById(fP,'tbak')endifif(k5=='ocor')thencall RemoveItem(ky)call UnitAddItemById(fP,'nspi')endifelseif(k5=='tbak')thencall RemoveItem(ky)call UnitAddItemById(fP,'thdm')endifif(k5=='nspi')thencall RemoveItem(ky)call UnitAddItemById(fP,'ocor')endifendifif k5=='desc'and(k4=='Hvwd'or k4=='U00F')thencall DisplayTimedTextToPlayer(GetOwningPlayer(fP),0,A6,10,"|c00ff0303Your hero is not allowed to wield this item|r")call UnitRemoveItem(fP,ky)endifif k5=='ofro'and(k4=='n00I'or k4=='e01H')thencall DisplayTimedTextToPlayer(GetOwningPlayer(fP),0,A6,10,"|c00ff0303Your chicken is not allowed to wield this item due to a wc3 bug.|r")call UnitRemoveItem(fP,ky)endifif k5=='oflg'and(k4=='e01H')thencall DisplayTimedTextToPlayer(GetOwningPlayer(fP),0,A6,10,"|c00ff0303Your crow is not allowed to wield this item.|r")call UnitRemoveItem(fP,ky)endifif k5=='ofro'and k4=='U007'thencall DisplayTimedTextToPlayer(GetOwningPlayer(fP),0,A6,10,"|c00ff0303Do not use two avatars in right after each other, there is a warcraft engine bug with this.|r")endifcall EnableTrigger(GetTriggeringTrigger())endfunctionfunction k6 takes nothing returns booleanreturn fY(GetTriggerUnit(),'ram2')!=null and fY(GetTriggerUnit(),'oslo')!=null and(GetUnitTypeId(GetTriggerUnit())!='n00I'and GetUnitTypeId(GetTriggerUnit())!='e01H')endfunctionfunction k7 takes nothing returns nothinglocal unit fP=GetTriggerUnit()local integer k4=GetUnitTypeId(fP)call DisableTrigger(GetTriggeringTrigger())call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",fP,"origin"))call RemoveItem(fY(fP,'ram2'))call RemoveItem(fY(fP,'oslo'))if k4=='Hblm'thencall UnitAddAbility(fP,'A0PD')endifif k4=='H004'thencall UnitAddAbility(fP,'A0PC')endifif k4=='UC18'thencall UnitAddAbility(fP,'A0PA')endifif k4=='Hmkg'thencall UnitAddAbility(fP,'A0P9')endifif k4=='H00H'thencall UnitAddAbility(fP,'A0PB')endifif k4=='UC01'thencall UnitAddAbility(fP,'A0P7')endifif k4=='Orkn'thencall UnitAddAbility(fP,'A0P8')endifif k4=='Hmbr'thencall UnitAddAbility(fP,'A0PF')endifif(k4=='Ulic'or k4=='Ekee'or k4=='UC18')thencall UnitAddItemById(fP,'sor3')elseif(k4=='H00H'or k4=='Emns'or k4=='H004'or k4=='Hmbr')thencall UnitAddItemById(fP,'sor4')elseif(k4=='Hjai'or k4=='Orkn'or k4=='UC01'or k4=='EC57')thencall UnitAddItemById(fP,'sor5')elseif(k4=='U00E'or k4=='E005'or k4=='E01A')thencall UnitAddItemById(fP,'sor6')elseif(k4=='Hmkg')thencall UnitAddItemById(fP,'sor6')call Ea(e4(fP),"MulticastLevel",EH(e4(fP),"MulticastLevel")+1)elseif k4=='UC42'or k4=='Hblm'thencall UnitAddItemById(fP,'I016')elsecall UnitAddItemById(fP,'I006')endifcall EnableTrigger(GetTriggeringTrigger())endfunctionfunction k8 takes nothing returns nothinglocal unit fP=GetTriggerUnit()local integer ER=0local integer k9=0local item RuneTempItem1local item RuneTempItem2local item RuneTempItem3local item kIcall DisableTrigger(GetTriggeringTrigger())loopexitwhen ER>5if(GetItemTypeId(UnitItemInSlot(fP,ER))=='flag')thenset k9=k9+1endifset ER=ER+1endloopif k9>1 and fY(fP,'will')!=null thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",fP,"origin"))call RemoveItem(fY(fP,'will'))call RemoveItem(fY(fP,'flag'))call RemoveItem(fY(fP,'flag'))call UnitAddItemById(fP,'tels')endifif FM(fP,'tgxp')!=null and FM(fP,'sman')!=null and FM(fP,'I00Y')!=null thencall RemoveItem(FM(fP,'tgxp'))call RemoveItem(FM(fP,'I00Y'))set kI=FM(fP,'sman')if GetItemCharges(kI)==1 thencall RemoveItem(kI)elsecall SetItemCharges(kI,GetItemCharges(kI)-1)endifcall UnitAddItemById(fP,'I00W')call DestroyEffect(AddSpecialEffectTargetUnitBJ("origin",fP,"Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl"))endifset k9=0set ER=0loopexitwhen ER>5if(GetItemTypeId(UnitItemInSlot(fP,ER))=='gvsm')thenset k9=k9+1endifset ER=ER+1endloopif k9>1 and fY(fP,'hbth')!=null and fY(fP,'ward')!=null thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",fP,"origin"))call RemoveItem(fY(fP,'hbth'))call RemoveItem(fY(fP,'ward'))call RemoveItem(fY(fP,'gvsm'))call RemoveItem(fY(fP,'gvsm'))call UnitAddItemById(fP,'thdm')endifcall EnableTrigger(GetTriggeringTrigger())endfunctionfunction Ka takes nothing returns booleanif(GetItemTypeId(GetManipulatedItem())=='horl')thenset V=30.return trueendifif(GetItemTypeId(GetManipulatedItem())=='oven')thenset V=210return trueendifif(GetItemTypeId(GetManipulatedItem())=='mnst')thenset V=45.return trueendifif(GetItemTypeId(GetManipulatedItem())=='I002')thenset V=60.return trueendifif(GetItemTypeId(GetManipulatedItem())=='ches')thenset V=60.return trueendifif(GetItemTypeId(GetManipulatedItem())=='pdiv')thenset V=100.return trueendifif(GetItemTypeId(GetManipulatedItem())=='I001')thenset V=60.return trueendifif(GetItemTypeId(GetManipulatedItem())=='bfhr')thenset V=20.return trueendifif(GetItemTypeId(GetManipulatedItem())=='wswd')thenset V=12.return trueendifif(GetItemTypeId(GetManipulatedItem())=='rej2')thenset V=3return trueendifif(GetItemTypeId(GetManipulatedItem())=='lnrn')thenset V=40.return trueendifif(GetItemTypeId(GetManipulatedItem())=='spre')thenset V=13.return trueendifif(GetItemTypeId(GetManipulatedItem())=='rots')thenset V=300.return trueendifif(GetItemTypeId(GetManipulatedItem())=='tlum')thenset V=60.return trueendifif(GetItemTypeId(GetManipulatedItem())=='sfog')thenset V=15.return trueendifif(GetItemTypeId(GetManipulatedItem())=='mnsf')thenset V=40.return trueendifif(GetItemTypeId(GetManipulatedItem())=='stwp')thenset V=65.return trueendifif(GetItemTypeId(GetManipulatedItem())=='schl')thenset V=70.return trueendifif(GetItemTypeId(GetManipulatedItem())=='rej1')thenset V=40.return trueendifif(GetItemTypeId(GetManipulatedItem())=='kybl')thenset V=120.return trueendifif(GetItemTypeId(GetManipulatedItem())=='rej5')thenset V=40.return trueendifif(GetItemTypeId(GetManipulatedItem())=='ccmd')thenset V=26.return trueendifif(GetItemTypeId(GetManipulatedItem())=='mlst')thenset V=40.return trueendifif(GetItemTypeId(GetManipulatedItem())=='desc')thenset V=25.return trueendifif(GetItemTypeId(GetManipulatedItem())=='I00C')thenset V=60.return trueendifif(GetItemTypeId(GetManipulatedItem())=='I00Q')thenset V=45.return trueendifif(GetItemTypeId(GetManipulatedItem())=='I00T')thenset V=30.return trueendifreturn falseendfunctionfunction KA takes nothing returns nothinglocal integer ER=1local integer Es=6local integer Kb=GetItemTypeId(GetManipulatedItem())local unit KB=GetManipulatingUnit()loopexitwhen ER>Esset W=UnitItemInSlotBJ(KB,ER)if(GetItemTypeId(W)==Kb)thenset X=(X+1)set Y[X]=Vset Z[X]=Wcall SetItemDroppable(W,false)endifset ER=ER+1endloopendfunctionfunction Kc takes nothing returns nothinglocal integer ER=2local integer Es=Xif(X>0 and Y[1]<1.)thenloopexitwhen ER>Esset Y[ER-1]=Y[ER]set Z[ER-1]=Z[ER]set ER=ER+1endloopset X=X-1endifset ER=1set Es=Xloopexitwhen ER>Esif(Y[ER]>=1.)thenset Y[ER]=Y[ER]-1if(Y[ER]<1.)thencall SetItemDroppable(Z[ER],true)endifendifset ER=ER+1endloopendfunctionfunction KC takes unit Ew returns locationreturn AO[GetUnitAbilityLevel(Ew,Ao)]endfunctionfunction Kd takes unit Ew returns booleanreturn(GetOwningPlayer(Ew)==Ac[0])or(GetOwningPlayer(Ew)==AC[0])endfunctionfunction KD takes unit Ew returns booleanif(GetOwningPlayer(Ew)==Ac[0])thenreturn trueendifreturn falseendfunctionfunction Ke takes unit Ew returns unitreturn GetUnitUserData(Ew)return nullendfunctionfunction KE takes unit Ew returns nothingcall SetUnitUserData(Ew,0)call IssuePointOrderByIdLoc(Ew,851983,KC(Ew))endfunctionfunction Kf takes nothing returns nothingcall KE(GetEnumUnit())endfunctionfunction KF takes group JF returns nothingcall ForGroup(JF,function Kf)call GroupClear(JF)endfunctionfunction Kg takes nothing returns nothingcall IssueTargetOrderById(GetEnumUnit(),851983,Ai)call GroupAddUnit(Aq,GetEnumUnit())call SetUnitUserData(GetEnumUnit(),e2(Ai))endfunctionfunction KG takes nothing returns nothinglocal unit u=GetEnumUnit()if GetUnitCurrentOrder(u)==0 or not IsUnitInRange(u,Ai,GetUnitAcquireRange(u))thencall GroupRemoveUnit(Aq,u)call SetUnitUserData(u,0)call IssuePointOrderByIdLoc(u,851983,KC(u))endifendfunctionfunction Kh takes unit Ew,unit KH returns booleanif GetUnitTypeId(Ew)=='ebal'or GetUnitTypeId(Ew)=='umtw'thenreturn falseendifif IsUnitEnemy(Ew,GetOwningPlayer(KH))thenif GetOwningPlayer(Ew)==Ac[0]or GetOwningPlayer(Ew)==AC[0]thenif(GetUnitUserData(Ew)==0)thenreturn trueendifendifendifreturn falseendfunctionfunction Ki takes nothing returns booleanreturn Kh(GetFilterUnit(),Ai)endfunctionfunction KI takes nothing returns nothinglocal unit fw=EC(e4(GetExpiredTimer()),"Hero")local string f8=e4(fw)call e7(f8,"Attacker",null)call KF(EE(f8,"Defenders"))endfunctionfunction Kj takes unit fw,unit KJ returns booleanlocal unit Kkif IsUnitEnemy(KJ,GetOwningPlayer(fw))thenset Kk=EC(e4(fw),"Attacker")if Kk==null or Kk==KJ or not IsUnitAliveBJ(Kk)thenreturn trueendifendifreturn falseendfunctionfunction KK takes unit fw,unit KJ returns nothinglocal string f8=e4(fw)local group Kl=EE(f8,"Defenders")local unit Kk=EC(f8,"Attacker")local boolexpr blocal group gif(Kk!=KJ)and(Kk!=null)thencall KF(Kl)endifcall e7(f8,"Attacker",KJ)set Aq=Klset Ai=KJcall ForGroup(Kl,function KG)set b=Filter(function Ki)set g=CreateGroup()call GroupEnumUnitsInRange(g,GetUnitX(KJ),GetUnitY(KJ),500,b)call ForGroup(g,function Kg)call DestroyGroup(g)call DestroyBoolExpr(b)call TimerStart(ED(f8,"DefendTimer"),2,false,function KI)endfunctionfunction KL takes nothing returns booleanreturn Kj(GetTriggerUnit(),GetAttacker())endfunctionfunction Km takes nothing returns nothingcall KK(GetTriggerUnit(),GetAttacker())endfunctionfunction KM takes nothing returns booleanif IsUnitType(GetOrderTargetUnit(),UNIT_TYPE_HERO)and not IsUnitIllusion(GetOrderTargetUnit())thenif GetIssuedOrderId()==851983 or GetIssuedOrderId()==851971 thenif IsUnitVisible(GetTriggerUnit(),GetOwningPlayer(GetOrderTargetUnit()))thenreturn Kj(GetOrderTargetUnit(),GetTriggerUnit())endifendifendifreturn falseendfunctionfunction Kn takes nothing returns nothingcall KK(GetOrderTargetUnit(),GetTriggerUnit())endfunctionfunction KN takes unit fw returns booleanreturn EI(e4(fw),"HeroAIManager")endfunctionfunction Ko takes unit fw returns nothinglocal group glocal trigger tlocal timer tmlocal string f8=e4(fw)call Ec(f8,"HeroAIManager",true)set g=CreateGroup()call e7(f8,"Defenders",g)set t=CreateTrigger()call e7(f8,"OnAttackOrder",t)call TriggerRegisterUnitEvent(t,fw,EVENT_UNIT_ISSUED_TARGET_ORDER)call TriggerAddCondition(t,Condition(function KM))call TriggerAddAction(t,function Kn)set t=CreateTrigger()call e7(f8,"OnAttacked",t)call TriggerRegisterUnitEvent(t,fw,EVENT_UNIT_ATTACKED)call TriggerAddCondition(t,Condition(function KL))call TriggerAddAction(t,function Km)set tm=CreateTimer()call e7(e4(fw),"DefendTimer",tm)call e7(e4(tm),"Hero",fw)endfunctionfunction KO takes nothing returns booleanreturn IsUnitFogged(GetAttacker(),Ac[1])or IsUnitFogged(GetAttacker(),AC[1])endfunctionfunction Kp takes nothing returns nothinglocal unit KP=GetAttacker()local fogmodifier Kqlocal boolean b=falseif GetOwningPlayer(GetTriggerUnit())==Ac[0]thenset Kq=CreateFogModifierRadius(Ac[1],FOG_OF_WAR_VISIBLE,GetUnitX(KP),GetUnitY(KP),128,true,false)elseif GetOwningPlayer(GetTriggerUnit())==AC[0]thenset Kq=CreateFogModifierRadius(AC[1],FOG_OF_WAR_VISIBLE,GetUnitX(KP),GetUnitY(KP),128,true,false)endifcall FogModifierStart(Kq)call PolledWait(1)call FogModifierStop(Kq)call DestroyFogModifier(Kq)endfunctionfunction KQ takes nothing returns booleanreturn GetIssuedOrderId()==851986endfunctionfunction Kr takes nothing returns nothinglocal unit KR=GetTriggerUnit()local unit Fd=Ke(KR)call SetUnitPosition(KR,GetUnitX(KR),GetUnitY(KR))if Fd==null or not IsUnitVisible(Fd,GetOwningPlayer(Fd))thencall DisableTrigger(GetTriggeringTrigger())call IssuePointOrderByIdLoc(KR,851983,KC(KR))call EnableTrigger(GetTriggeringTrigger())elsecall IssueTargetOrderById(KR,851983,Ke(KR))endifendfunctionfunction Ks takes nothing returns booleanreturn Kd(GetTriggerUnit())endfunctionfunction KS takes nothing returns nothinglocal unit KR=GetTriggerUnit()local unit Fd=Ke(KR)call SetUnitPosition(KR,GetUnitX(KR),GetUnitY(KR))if Fd==null or not IsUnitVisible(Fd,GetOwningPlayer(Fd))thencall DisableTrigger(GetTriggeringTrigger())call IssuePointOrderByIdLoc(KR,851983,KC(KR))call EnableTrigger(GetTriggeringTrigger())elsecall IssueTargetOrderById(KR,851983,Ke(KR))endifendfunctionfunction Kt takes nothing returns nothinglocal trigger tlocal group glocal unit ucall PolledWait(.01)if AQ thenset t=CreateTrigger()call TriggerRegisterPlayerUnitEvent(t,Ac[0],EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER,null)call TriggerRegisterPlayerUnitEvent(t,AC[0],EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER,null)call TriggerAddCondition(t,Condition(function KQ))call TriggerAddAction(t,function Kr)set t=CreateTrigger()set g=CreateGroup()call GroupEnumUnitsOfPlayer(g,Ac[0],null)loopset u=FirstOfGroup(g)exitwhen u==nullcall GroupRemoveUnit(g,u)if GetUnitAcquireRange(u)!=0 thencall TriggerRegisterUnitInRange(t,u,600,null)endifendloopcall DestroyGroup(g)set g=CreateGroup()call GroupEnumUnitsOfPlayer(g,AC[0],null)loopset u=FirstOfGroup(g)exitwhen u==nullcall GroupRemoveUnit(g,u)if GetUnitAcquireRange(u)!=0 and IsUnitType(u,UNIT_TYPE_STRUCTURE)thencall TriggerRegisterUnitInRange(t,u,600,null)endifendloopcall DestroyGroup(g)call TriggerAddCondition(t,Condition(function Ks))call TriggerAddAction(t,function KS)set t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(t,Condition(function KO))call TriggerAddAction(t,function Kp)endifendfunctionfunction KT takes nothing returns booleanif IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)and not IsUnitIllusion(GetTriggerUnit())thenif not KN(GetTriggerUnit())thenreturn trueendifendifreturn falseendfunctionfunction Ku takes nothing returns nothingcall Ko(GetTriggerUnit())endfunctionfunction KU takes nothing returns booleanreturn Kd(GetTriggerUnit())endfunctionfunction Kv takes nothing returns nothingif KD(GetTriggerUnit())thencall SetUnitAbilityLevel(GetTriggerUnit(),Ao,5)elsecall SetUnitAbilityLevel(GetTriggerUnit(),Ao,1)endifif(Ke(GetTriggerUnit())==null)thencall KE(GetTriggerUnit())endifendfunctionfunction KV takes unit Ew returns nothinglocal integer i=0loopexitwhen(i==16)if IsUnitAlly(Ew,Player(i))thencall UnitShareVision(Ew,Player(i),true)endifset i=i+1endloopendfunctionfunction Kw takes nothing returns nothingcall KV(GetEnumUnit())endfunctionfunction KW takes nothing returns nothinglocal integer xlocal group gset x=1loopexitwhen x>5call SetPlayerAlliance(Ac[0],Ac[x],ConvertAllianceType(5),false)call SetPlayerAlliance(AC[0],AC[x],ConvertAllianceType(5),false)set x=x+1endloopset g=CreateGroup()call GroupEnumUnitsOfPlayer(g,Ac[0],null)call ForGroup(g,function Kw)call DestroyGroup(g)set g=CreateGroup()call GroupEnumUnitsOfPlayer(g,AC[0],null)call ForGroup(g,function Kw)call DestroyGroup(g)endfunctionfunction Kx takes nothing returns nothinglocal integer xset x=0loopexitwhen x>5call SetPlayerAlliance(Ac[x],Ad,ConvertAllianceType(0),false)call SetPlayerAlliance(Ac[x],Ad,ConvertAllianceType(1),false)call SetPlayerAlliance(Ac[x],Ad,ConvertAllianceType(2),false)call SetPlayerAlliance(Ac[x],Ad,ConvertAllianceType(3),false)call SetPlayerAlliance(Ac[x],Ad,ConvertAllianceType(4),false)call SetPlayerAlliance(Ac[x],Ad,ConvertAllianceType(5),false)call SetPlayerAlliance(Ac[x],Ad,ConvertAllianceType(6),false)call SetPlayerAlliance(Ac[x],Ad,ConvertAllianceType(7),false)call SetPlayerAlliance(AC[x],Ad,ConvertAllianceType(0),false)call SetPlayerAlliance(AC[x],Ad,ConvertAllianceType(1),false)call SetPlayerAlliance(AC[x],Ad,ConvertAllianceType(2),false)call SetPlayerAlliance(AC[x],Ad,ConvertAllianceType(3),false)call SetPlayerAlliance(AC[x],Ad,ConvertAllianceType(4),false)call SetPlayerAlliance(AC[x],Ad,ConvertAllianceType(5),false)call SetPlayerAlliance(AC[x],Ad,ConvertAllianceType(6),false)call SetPlayerAlliance(AC[x],Ad,ConvertAllianceType(7),false)call SetPlayerAlliance(Ad,Ac[x],ConvertAllianceType(0),false)call SetPlayerAlliance(Ad,Ac[x],ConvertAllianceType(1),false)call SetPlayerAlliance(Ad,Ac[x],ConvertAllianceType(2),false)call SetPlayerAlliance(Ad,Ac[x],ConvertAllianceType(3),false)call SetPlayerAlliance(Ad,Ac[x],ConvertAllianceType(4),false)call SetPlayerAlliance(Ad,Ac[x],ConvertAllianceType(5),false)call SetPlayerAlliance(Ad,Ac[x],ConvertAllianceType(6),false)call SetPlayerAlliance(Ad,Ac[x],ConvertAllianceType(7),false)call SetPlayerAlliance(Ad,AC[x],ConvertAllianceType(0),false)call SetPlayerAlliance(Ad,AC[x],ConvertAllianceType(1),false)call SetPlayerAlliance(Ad,AC[x],ConvertAllianceType(2),false)call SetPlayerAlliance(Ad,AC[x],ConvertAllianceType(3),false)call SetPlayerAlliance(Ad,AC[x],ConvertAllianceType(4),false)call SetPlayerAlliance(Ad,AC[x],ConvertAllianceType(5),false)call SetPlayerAlliance(Ad,AC[x],ConvertAllianceType(6),false)call SetPlayerAlliance(Ad,AC[x],ConvertAllianceType(7),false)set x=x+1endloopendfunctionfunction KX takes nothing returns booleanreturn Kd(GetTriggerUnit())endfunctionfunction Ky takes nothing returns nothingcall KV(GetTriggerUnit())endfunctionfunction KY takes nothing returns nothinglocal trigger tif not AQ thenreturnendifcall KW()call Kx()set t=CreateTrigger()call TriggerRegisterEnterRectSimple(t,GetWorldBounds())call TriggerAddCondition(t,Condition(function KX))call TriggerAddAction(t,function Ky)endfunctionfunction Kz takes nothing returns nothinglocal unit KZ=GetTriggerUnit()local unit K0=EC(e4(KZ),"Locust")call RemoveUnit(K0)endfunctionfunction K1 takes nothing returns nothinglocal group glocal unit KZlocal unit K0local trigger tlocal integer iset t=CreateTrigger()call TriggerAddAction(t,function Kz)set g=CreateGroup()call GroupEnumUnitsOfPlayer(g,Ac[0],null)loopset KZ=FirstOfGroup(g)exitwhen KZ==nullcall GroupRemoveUnit(g,KZ)if GetUnitAbilityLevel(KZ,'Adts')>0 or GetUnitAbilityLevel(KZ,'Atru')>0 thencall TriggerRegisterUnitEvent(t,KZ,EVENT_UNIT_DEATH)set K0=CreateUnit(Ac[1],'u00B',-5000,-5100,0)call SetUnitScale(K0,0,0,0)call SetUnitPathing(K0,false)call SetUnitInvulnerable(K0,true)call SetUnitX(K0,GetUnitX(KZ))call SetUnitY(K0,GetUnitY(KZ))call e7(e4(KZ),"Locust",K0)endifendloopcall DestroyGroup(g)set g=CreateGroup()call GroupEnumUnitsOfPlayer(g,AC[0],null)loopset KZ=FirstOfGroup(g)exitwhen KZ==nullcall GroupRemoveUnit(g,KZ)if GetUnitAbilityLevel(KZ,'Adts')>0 or GetUnitAbilityLevel(KZ,'Atru')>0 thencall TriggerRegisterUnitEvent(t,KZ,EVENT_UNIT_DEATH)set K0=CreateUnit(AC[1],'u00B',3400,4400,0)call SetUnitScale(K0,0,0,0)call SetUnitPathing(K0,false)call SetUnitInvulnerable(K0,true)call SetUnitX(K0,GetUnitX(KZ))call SetUnitY(K0,GetUnitY(KZ))call e7(e4(KZ),"Locust",K0)endifendloopcall DestroyGroup(g)endfunctionfunction K2 takes unit KZ returns unitlocal string f8=e4(KZ)return EC(f8,"TowerAI|TowerTarget")endfunctionfunction K3 takes unit KZ,unit Fd returns nothinglocal string f8=e4(KZ)call e7(f8,"TowerAI|TowerTarget",Fd)endfunctionfunction K4 takes unit KZ returns booleanif IsUnitType(KZ,UNIT_TYPE_STRUCTURE) and GetUnitAbilityLevel(KZ,'Adts')>0 thenreturn trueendifreturn falseendfunctionfunction K5 takes nothing returns booleanlocal unit KZ=GetAttacker()local unit K6if not(K4(KZ))thenreturn falseendifif(Ke(KZ)!=null)thenreturn falseendifset K6=K2(KZ)if(K6==null)thenreturn trueendifif(GetUnitState(K6,UNIT_STATE_LIFE)<1)thenreturn trueendifif(IsUnitInRange(KZ,K6,GetUnitAcquireRange(KZ)))thenreturn falseendifreturn trueendfunctionfunction K7 takes nothing returns nothinglocal unit KZ=GetAttacker()local group g=CreateGroup()local unit ulocal real K8local real K9=151.local unit la=nullcall GroupEnumUnitsInRange(g,GetUnitX(KZ),GetUnitY(KZ),GetUnitAcquireRange(KZ),null)loopset u=FirstOfGroup(g)exitwhen u==nullcall GroupRemoveUnit(g,u)if IsUnitEnemy(u,GetOwningPlayer(KZ))thenset K8=GetUnitState(u,UNIT_STATE_LIFE)if K8<K9 and K8>1 and GetUnitTypeId(u)!='o00C'thenset K9=K8set la=uendifendifendloopcall K3(KZ,la)if la!=null thencall DisableTrigger(GetTriggeringTrigger())call IssueTargetOrderById(KZ,851983,la)if GetOwningPlayer(KZ)==Ac[0]thencall SetUnitAnimation(KZ,"attack alternate")endifcall EnableTrigger(GetTriggeringTrigger())endifcall DestroyGroup(g)endfunctionfunction lA takes nothing returns booleanreturn(GetUnitTypeId(GetAttacker())=='ebal'or GetUnitTypeId(GetAttacker())=='umtw')and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==falseendfunctionfunction lb takes nothing returns booleanreturn IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetAttacker()))and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetAttacker()))and GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0 and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>1 and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==false and GetOwningPlayer(GetFilterUnit())!=Adendfunctionfunction lB takes nothing returns nothingif IsUnitType(GetEnumUnit(),UNIT_TYPE_STRUCTURE) thenset Ai=GetEnumUnit()endifif IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)==false thenset Ap=GetEnumUnit()endifendfunctionfunction lc takes nothing returns nothinglocal unit Jh=GetAttacker()local unit Fd=GetTriggerUnit()local group EX=CreateGroup()local boolexpr Ey=Condition(function lb)local trigger t=GetTriggeringTrigger()call DisableTrigger(t)set Ai=nullset Ap=nullcall GroupEnumUnitsInRange(EX,GetUnitX(Jh),GetUnitY(Jh),1200,Ey)call ForGroup(EX,function lB)call DestroyGroup(EX)call DestroyBoolExpr(Ey)if Ai!=null thencall IssueTargetOrderById(Jh,851983,Ai)call GroupAddUnit(ew,Jh)elseif IsUnitType(Fd,UNIT_TYPE_HERO) and Ap!=null thencall IssueTargetOrderById(Jh,851983,Ap)call GroupAddUnit(ew,Jh)endifcall EnableTrigger(t)endfunctionfunction lC takes nothing returns nothingif GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)<1 thencall GroupRemoveUnit(ew,GetEnumUnit())endifif GetUnitCurrentOrder(GetEnumUnit())!=851983thencall GroupRemoveUnit(ew,GetEnumUnit())call IssuePointOrderByIdLoc(GetEnumUnit(),851983,KC(GetEnumUnit()))endifendfunctionfunction ld takes nothing returns nothingcall ForGroup(ew,function lC)endfunctionfunction lD takes nothing returns booleanreturn not Hendfunctionfunction le takes string lE returns nothingif AV==""thenset AV="|c006699CC"+lE+"|r"elseset AV=AV+"/"+"|c006699CC"+lE+"|r"endifendfunctionfunction lf takes string lF,integer lg,integer lG returns stringreturn SubString(lF,0,lg)+SubString(lF,lG,StringLength(lF))endfunctionfunction lh takes string lF returns stringlocal integer lH=StringLength(lF)local string lilocal string lI=""local integer i=0loopexitwhen(i==lH)set li=StringCase(SubString(lF,i,i+1),false)if not(li==StringCase(li,true))thenset lI=lI+liendifset i=i+1endloopreturn lIendfunctionfunction lj takes nothing returns nothinglocal string lJ=lh(GetEventPlayerChatString())local string array lklocal string array lKlocal boolean array lllocal integer lLlocal integer lH=StringLength(lJ)local integer x=0local integer y=0local integer z=0local boolean APlocal boolean ARlocal boolean LMlocal boolean MMlocal boolean TRlocal boolean DMlocal boolean MRlocal boolean SPlocal boolean AAlocal boolean AIlocal boolean ASlocal boolean IDlocal boolean NPlocal boolean SClocal boolean EMlocal boolean DUlocal boolean SHlocal boolean VRlocal boolean RVlocal boolean RDset lk[1]="allpick"set lK[1]="ap"set lk[2]="allrandom"set lK[2]="ar"set lk[3]="leaguemode"set lK[3]="lm"set lk[4]="mirrormatch"set lK[4]="mm"set lk[5]="teamrandom"set lK[5]="tr"set lk[6]="deathmatch"set lK[6]="dm"set lk[7]="moderandom"set lK[7]="mr"set lk[8]="shuffleplayers"set lK[8]="sp"set lk[9]="allagility"set lK[9]="aa"set lk[10]="allintelligence"set lK[10]="ai"set lk[11]="allstrength"set lK[11]="as"set lk[12]="itemdrop"set lK[12]="id"set lk[13]="nopowerups"set lK[13]="np"set lk[14]="supercreeps"set lK[14]="sc"set lk[15]="easymode"set lK[15]="em"set lk[16]="duplicatemode"set lK[16]="du"set lk[17]="samehero"set lK[17]="sh"set lk[18]="voterandom"set lK[18]="vr"set lk[19]="reverse"set lK[19]="rv"set lk[20]="randomdraft"set lK[20]="rd"set lL=20set x=-1loopexitwhen x==lH-1set x=x+1set y=xloopexitwhen y==lHset y=y+1set z=1loopexitwhen z>lLif lk[z]==SubString(lJ,x,y)thenset ll[z]=trueset z=lL+1set lJ=lf(lJ,x,y)set x=-1set lH=StringLength(lJ)set y=lHelseset z=z+1endifendloopendloopendloopset x=-1loopexitwhen x==lH-1set x=x+1set y=xloopexitwhen y==lHset y=y+1set z=1loopexitwhen z>lLif lK[z]==SubString(lJ,x,y)thenset ll[z]=trueset z=lL+1set lJ=lf(lJ,x,y)set x=-1set lH=StringLength(lJ)set y=lHelseset z=z+1endifendloopendloopendloopset AP=ll[1]set AR=ll[2]set LM=ll[3]set MM=ll[4]set TR=ll[5]set DM=ll[6]set MR=ll[7]set SP=ll[8]set AA=ll[9]set AI=ll[10]set AS=ll[11]set ID=ll[12]set NP=ll[13]set SC=ll[14]set EM=ll[15]set DU=ll[16]set SH=ll[17]set VR=ll[18]set RV=ll[19]set RD=ll[20]if lJ!=""thenif lJ!="wtf"thencall fI(AH,"Invalid Game Mode!")endifreturnendifif(AR and(AP or TR or LM or MR or RV or RD))or(AP and(TR or MR))or(TR and(LM or MR))or(LM and MR)or(MM and SH)thencall fI(AH,"Invalid Game Mode Combination!")returnendifif(AA and(AI or AS or DM))or(AS and(AI or DM))or(AI and DM)thencall fI(AH,"Invalid Game Mode Combination!")returnendifif RV and(AR or TR or MR or LM or DM or SH)thencall fI(AH,"Invalid Game Mode Combination!")returnendifif(DM and(TR or LM or MR or SH or RV or RD))or(MM and DM)or(SH and DM)thencall fI(AH,"Deathmatch is not compatible with these modes!")returnendifif LM and(AP or RD or AR or MM or TR or DM or MR or AA or AI or AS or ID or NP or SC or EM or DU or SH or RV)thencall fI(AH,"League Mode is not compatible with these modes!")returnendifif RD and(AP or LM or AR or MM or TR or DM or MR or AA or AI or AS or SH or RV)thencall fI(AH,"League Mode is not compatible with these modes!")returnendifif VR and(LM or RD or AR or MM or TR or DM or MR or AA or AI or AS or SH or RV)thencall fI(AH,"VoteRandom is not compatible with these modes!")returnendifif MM and EN(Ab)!=EN(AB)thencall fI(AH,"The game must have an even number of players to activate Mirror Mode")returnendifif VR and EN(Ab)!=EN(AB)thencall fI(AH,"The game must have an even number of players to activate Vote Random Mode")returnendifif RV and EN(Ab)!=EN(AB)thencall fI(AH,"The game must have an even number of players to activate Reverse Mode")returnendifif LM and not(El(Ac[1])and El(Ac[2])and El(Ac[3])and El(Ac[4])and El(Ac[5])and El(AC[1])and El(AC[2])and El(AC[3])and El(AC[4])and El(AC[5]))thencall fI(AH,"The game must have 10 players in order to use league mode")returnendifif AP or AR or LM or MM or TR or DM or MR or SP or AA or AI or AS or ID or NP or SC or DU or EM or SH or VR or RV or RD thencall DisableTrigger(GetTriggeringTrigger())elsecall fI(AH,"Invalid Game Mode!")returnendifset eW=lh(GetEventPlayerChatString())set AW=falsecall fQ("lm",SP)call fQ("lM",DM)call fQ("ln",MM)call fQ("lN",SH)call fQ("lo",AA)call fQ("lO",AI)call fQ("lp",AS)call fQ("lP",DU)call fQ("lq",AR)call fQ("lQ",VR)call fQ("lr",AP)call fQ("lR",TR)call fQ("ls",RV)call fQ("lS",LM)call fQ("lt",RD)call fQ("lT",MR)call fQ("lu",ID)call fQ("lU",NP)call fQ("lv",SC)call fQ("lV",EM)if LM thenset bB="Leaguemode"elseif RD thenset bB="RandomDraft"elseif MM thenset bB="Mirrormatch"elseif DM thenset bB="Deathmatch"elseif RV thenset bB="Reverse"elseif AP thenset bB="Allpick"elseif AR thenset bB="Allrandom"elseif TR thenset bB="Teamrandom"elseif MR thenset bB="Moderandom"elseif VR thenset bB="Voterandom"endifcall MultiboardSetTitleText(aa,bB)if aY thencall le("League Mode")endifif bH thencall le("Random Draft")endifif R thencall le("Death Match")endifif As thencall le("Mirror Match")endifif U thencall le("All Pick")endifif S thencall le("All Random")endifif A0 thencall le("Vote Random")endifif T thencall le("Team Random")endifif Ae thencall le("Shuffle Players")endifif Au thencall le("All Agility")endifif Av thencall le("All Strength")endifif AU thencall le("All Intelligence")endifif At thencall le("Duplicate Mode")endifif v thencall le("Item Drop")endifif aC thencall le("No Powerups")endifif ad thencall le("Super Creeps")endifif ac thencall le("Easy Mode")endifif Aw thencall le("Same Hero")endifif bA thencall le("Reverse")endifcall FG(bj_FORCE_ALL_PLAYERS,20.,I[GetPlayerId(AH)]+GetPlayerName(AH)+"|r"+" has selected "+AV)call FG(bj_FORCE_ALL_PLAYERS,20.,"For more information about the game modes use -gameinfo.")call FG(bj_FORCE_ALL_PLAYERS,20.," ")endfunctionfunction lr takes nothing returns nothinglocal location lw=GetRectCenter(by)local location lW=GetRectCenter(bY)local integer x=1set U=trueloopexitwhen x>5if El(Ac[x])thencall CreateUnitAtLoc(Ac[x],'n00C',lW,bj_UNIT_FACING)endifif El(AC[x])thencall CreateUnitAtLoc(AC[x],'n00C',lw,bj_UNIT_FACING)endifset x=x+1endloopcall RemoveLocation(lw)call RemoveLocation(lW)endfunctionfunction lx takes player p returns unitlocal integer i=1local location fEloopexitwhen B[ez[i]]==falseset i=i+1endloopset ab[GetPlayerId(p)]=trueif EJ(p) thenset fE=GetRectCenter(bs)elseset fE=GetRectCenter(bR)endifset ay[GetPlayerId(p)]=CreateUnitAtLoc(p,eg[ez[i]],fE,0)set B[ez[i]]=truecall RemoveLocation(fE)return ay[GetPlayerId(p)]endfunctionfunction lX takes player p returns nothinglocal unit lycall PolledWait(3)if El(p)and ay[GetPlayerId(p)]==null and GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)<250 thencall FG(bj_FORCE_ALL_PLAYERS,15.,I[GetPlayerId(p)]+GetPlayerName(p)+"|r"+" does not have enough gold to be randomly assigned a hero.")endifif El(p)and ay[GetPlayerId(p)]==null and GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)>249 thenset ly=lx(p)call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-250)endifcall PolledWait(3)endfunctionfunction lY takes integer E0 returns booleanreturn E0!=88 and E0!=89 and E0!=90 and E0!=23endfunctionfunction lz takes nothing returns nothinglocal integer x=1local boolean array lZlocal integer E0local integer MaxHeroes=eH-eh+eI-ei+4local unit Store1=eMlocal unit Store2=enset x=1loopexitwhen x==23set E0=ff(true,true)if lZ[E0]==false and lY(E0)thenset lZ[E0]=trueset ez[x]=E0if x<=11 thencall AddUnitToStock(ex,eg[E0],1,1)call AddUnitToStock(ey,eg[E0],1,1)elsecall AddUnitToStock(eX,eg[E0],1,1)call AddUnitToStock(eY,eg[E0],1,1)endifset x=x+1endifendloopendfunctionfunction lt takes nothing returns nothinglocal integer array l0local player l1local player l2local boolean l3=falselocal location lw=GetRectCenter(bs)local location lW=GetRectCenter(bR)local player EL=Player(15)call RemoveUnit(eM)call RemoveUnit(en)call RemoveUnit(eN)call RemoveUnit(eo)call RemoveUnit(eO)call RemoveUnit(ep)call RemoveUnit(eP)call RemoveUnit(eq)set ex=CreateUnit(EL,'n01Y',-6464,-6592,270)set eX=CreateUnit(EL,'n01Z',-6080,-6592,270)set ey=CreateUnit(EL,'n01Y',5888,6208,270)set eY=CreateUnit(EL,'n01Z',6272,6208,270)call SetUnitColor(ex,ConvertPlayerColor(0))call SetUnitColor(eX,ConvertPlayerColor(0))call SetUnitColor(ey,ConvertPlayerColor(0))call SetUnitColor(eY,ConvertPlayerColor(0))call PanCameraToTimedLocForPlayer(Ac[1],lw,0)call PanCameraToTimedLocForPlayer(Ac[2],lw,0)call PanCameraToTimedLocForPlayer(Ac[3],lw,0)call PanCameraToTimedLocForPlayer(Ac[4],lw,0)call PanCameraToTimedLocForPlayer(Ac[5],lw,0)call PanCameraToTimedLocForPlayer(AC[1],lW,0)call PanCameraToTimedLocForPlayer(AC[2],lW,0)call PanCameraToTimedLocForPlayer(AC[3],lW,0)call PanCameraToTimedLocForPlayer(AC[4],lW,0)call PanCameraToTimedLocForPlayer(AC[5],lW,0)call ClearSelectionForPlayer(Ac[1])call ClearSelectionForPlayer(Ac[2])call ClearSelectionForPlayer(Ac[3])call ClearSelectionForPlayer(Ac[4])call ClearSelectionForPlayer(Ac[5])call ClearSelectionForPlayer(AC[1])call ClearSelectionForPlayer(AC[2])call ClearSelectionForPlayer(AC[3])call ClearSelectionForPlayer(AC[4])call ClearSelectionForPlayer(AC[5])call SelectUnitAddForPlayer(ex,Ac[1])call SelectUnitAddForPlayer(ex,Ac[2])call SelectUnitAddForPlayer(ex,Ac[3])call SelectUnitAddForPlayer(ex,Ac[4])call SelectUnitAddForPlayer(ex,Ac[5])call SelectUnitAddForPlayer(ey,AC[1])call SelectUnitAddForPlayer(ey,AC[2])call SelectUnitAddForPlayer(ey,AC[3])call SelectUnitAddForPlayer(ey,AC[4])call SelectUnitAddForPlayer(ey,AC[5])call RemoveLocation(lw)call RemoveLocation(lW)set bH=trueset A9=falseset A8=falsecall DisableTrigger(Bp)if ac thencall DisableTrigger(eZ)endifcall lz()set l0[GetPlayerId(Ac[1])]=GetPlayerState(Ac[1],PLAYER_STATE_RESOURCE_GOLD)set l0[GetPlayerId(Ac[2])]=GetPlayerState(Ac[2],PLAYER_STATE_RESOURCE_GOLD)set l0[GetPlayerId(Ac[3])]=GetPlayerState(Ac[3],PLAYER_STATE_RESOURCE_GOLD)set l0[GetPlayerId(Ac[4])]=GetPlayerState(Ac[4],PLAYER_STATE_RESOURCE_GOLD)set l0[GetPlayerId(Ac[5])]=GetPlayerState(Ac[5],PLAYER_STATE_RESOURCE_GOLD)set l0[GetPlayerId(AC[1])]=GetPlayerState(AC[1],PLAYER_STATE_RESOURCE_GOLD)set l0[GetPlayerId(AC[2])]=GetPlayerState(AC[2],PLAYER_STATE_RESOURCE_GOLD)set l0[GetPlayerId(AC[3])]=GetPlayerState(AC[3],PLAYER_STATE_RESOURCE_GOLD)set l0[GetPlayerId(AC[4])]=GetPlayerState(AC[4],PLAYER_STATE_RESOURCE_GOLD)set l0[GetPlayerId(AC[5])]=GetPlayerState(AC[5],PLAYER_STATE_RESOURCE_GOLD)call SetPlayerState(Ac[1],PLAYER_STATE_RESOURCE_GOLD,0)call SetPlayerState(Ac[2],PLAYER_STATE_RESOURCE_GOLD,0)call SetPlayerState(Ac[3],PLAYER_STATE_RESOURCE_GOLD,0)call SetPlayerState(Ac[4],PLAYER_STATE_RESOURCE_GOLD,0)call SetPlayerState(Ac[5],PLAYER_STATE_RESOURCE_GOLD,0)call SetPlayerState(AC[1],PLAYER_STATE_RESOURCE_GOLD,0)call SetPlayerState(AC[2],PLAYER_STATE_RESOURCE_GOLD,0)call SetPlayerState(AC[3],PLAYER_STATE_RESOURCE_GOLD,0)call SetPlayerState(AC[4],PLAYER_STATE_RESOURCE_GOLD,0)call SetPlayerState(AC[5],PLAYER_STATE_RESOURCE_GOLD,0)call PolledWait(15.-TimerGetElapsed(n))call SuspendTimeOfDay(true)if GetRandomInt(1,2)==1 thenset l3=trueendifcall FG(bj_FORCE_ALL_PLAYERS,40.,"22 heroes have been added to the available pool")if l3 thencall FG(bj_FORCE_ALL_PLAYERS,40.,"The "+I[GetPlayerId(Ac[0])]+"Sentinel"+"|r"+" will begin the 1-2-2-2-2-1 draft in 10 seconds.")elsecall FG(bj_FORCE_ALL_PLAYERS,40.,"The "+I[GetPlayerId(AC[0])]+"Scourge"+"|r"+" will begin the 1-2-2-2-2-1 draft in 10 seconds.")endifcall PolledWait(10)if l3 thenset l1=Ac[1]elseset l1=AC[1]endifcall FG(bj_FORCE_ALL_PLAYERS,15.,I[GetPlayerId(l1)]+GetPlayerName(l1)+"|r"+" has 20 seconds to pick a hero.")call SetPlayerState(l1,PLAYER_STATE_RESOURCE_GOLD,l0[GetPlayerId(l1)])call PolledWait(20.)call Er(l1)call lX(l1)if l3 thenset l1=AC[1]set l2=AC[2]elseset l1=Ac[1]set l2=Ac[2]endifcall FG(bj_FORCE_ALL_PLAYERS,15.,I[GetPlayerId(l1)]+GetPlayerName(l1)+"|r"+" has 20 seconds to pick a hero.")call FG(bj_FORCE_ALL_PLAYERS,15.,I[GetPlayerId(l2)]+GetPlayerName(l2)+"|r"+" has 20 seconds to pick a hero.")call SetPlayerState(l1,PLAYER_STATE_RESOURCE_GOLD,l0[GetPlayerId(l1)])call SetPlayerState(l2,PLAYER_STATE_RESOURCE_GOLD,l0[GetPlayerId(l2)])call PolledWait(20.)call Er(l1)call Er(l2)call lX(l1)call lX(l2)if l3 thenset l1=Ac[2]set l2=Ac[3]elseset l1=AC[2]set l2=AC[3]endifcall FG(bj_FORCE_ALL_PLAYERS,15.,I[GetPlayerId(l1)]+GetPlayerName(l1)+"|r"+" has 20 seconds to pick a hero.")call FG(bj_FORCE_ALL_PLAYERS,15.,I[GetPlayerId(l2)]+GetPlayerName(l2)+"|r"+" has 20 seconds to pick a hero.")call SetPlayerState(l1,PLAYER_STATE_RESOURCE_GOLD,l0[GetPlayerId(l1)])call SetPlayerState(l2,PLAYER_STATE_RESOURCE_GOLD,l0[GetPlayerId(l2)])call PolledWait(20.)call Er(l1)call Er(l2)call lX(l1)call lX(l2)if l3 thenset l1=AC[3]set l2=AC[4]elseset l1=Ac[3]set l2=Ac[4]endifcall FG(bj_FORCE_ALL_PLAYERS,15.,I[GetPlayerId(l1)]+GetPlayerName(l1)+"|r"+" has 20 seconds to pick a hero.")call FG(bj_FORCE_ALL_PLAYERS,15.,I[GetPlayerId(l2)]+GetPlayerName(l2)+"|r"+" has 20 seconds to pick a hero.")call SetPlayerState(l1,PLAYER_STATE_RESOURCE_GOLD,l0[GetPlayerId(l1)])call SetPlayerState(l2,PLAYER_STATE_RESOURCE_GOLD,l0[GetPlayerId(l2)])call PolledWait(20.)call Er(l1)call Er(l2)call lX(l1)call lX(l2)if l3 thenset l1=Ac[4]set l2=Ac[5]elseset l1=AC[4]set l2=AC[5]endifcall FG(bj_FORCE_ALL_PLAYERS,15.,I[GetPlayerId(l1)]+GetPlayerName(l1)+"|r"+" has 20 seconds to pick a hero.")call FG(bj_FORCE_ALL_PLAYERS,15.,I[GetPlayerId(l2)]+GetPlayerName(l2)+"|r"+" has 20 seconds to pick a hero.")call SetPlayerState(l1,PLAYER_STATE_RESOURCE_GOLD,l0[GetPlayerId(l1)])call SetPlayerState(l2,PLAYER_STATE_RESOURCE_GOLD,l0[GetPlayerId(l2)])call PolledWait(20.)call Er(l1)call Er(l2)call lX(l1)call lX(l2)if l3 thenset l1=AC[5]elseset l1=Ac[5]endifcall FG(bj_FORCE_ALL_PLAYERS,15.,I[GetPlayerId(l1)]+GetPlayerName(l1)+"|r"+" has 20 seconds to pick a hero.")call SetPlayerState(l1,PLAYER_STATE_RESOURCE_GOLD,l0[GetPlayerId(l1)])call PolledWait(20.)call Er(l1)call lX(l1)call EnableTrigger(Bp)if ac thencall EnableTrigger(eZ)endifcall SuspendTimeOfDay(false)call PolledWait(15.)set bi=trueendfunctionfunction lq takes nothing returns nothinglocal location lw=GetRectCenter(bs)local location lW=GetRectCenter(bR)local location l4=GetRectCenter(bp)local location l5=GetRectCenter(bL)local integer ER=1local integer Es=5local integer E0set S=trueset A8=falsecall Et()if not At thencall ES()endifset aB=400call PanCameraToTimedLocForPlayer(Ac[1],l4,0)call PanCameraToTimedLocForPlayer(Ac[2],l4,0)call PanCameraToTimedLocForPlayer(Ac[3],l4,0)call PanCameraToTimedLocForPlayer(Ac[4],l4,0)call PanCameraToTimedLocForPlayer(Ac[5],l4,0)call PanCameraToTimedLocForPlayer(AC[1],l5,0)call PanCameraToTimedLocForPlayer(AC[2],l5,0)call PanCameraToTimedLocForPlayer(AC[3],l5,0)call PanCameraToTimedLocForPlayer(AC[4],l5,0)call PanCameraToTimedLocForPlayer(AC[5],l5,0)if Aw thencall SetPlayerStateBJ(AH,PLAYER_STATE_RESOURCE_FOOD_CAP,6)loopset E0=EZ()exitwhen B[E0]==falseendloopif EJ(AH)thenset ay[GetPlayerId(AH)]=CreateUnit(AH,eg[E0],GetLocationX(lw),GetLocationY(lw),270)elseset ay[GetPlayerId(AH)]=CreateUnit(AH,eg[E0],GetLocationX(lW),GetLocationY(lW),270)endifcall RemoveLocation(lw)call RemoveLocation(lW)call RemoveLocation(l4)call RemoveLocation(l5)returnendifset A9=falseloopexitwhen ER>Esset ay[GetPlayerId(Ac[ER])]=nullif(El(Ac[ER]))thenloopset E0=EZ()if(B[E0]==false)thenif not At thenset B[E0]=trueendifcall SetPlayerStateBJ(Ac[ER],PLAYER_STATE_RESOURCE_FOOD_CAP,6)call PolledWait(.01)set ay[GetPlayerId(Ac[ER])]=CreateUnitAtLoc(Ac[ER],eg[E0],lw,bj_UNIT_FACING)endifexitwhen(ay[GetPlayerId(Ac[ER])]!=null)endloopendifset ER=ER+1endloopset ER=1set Es=5loopexitwhen ER>Esset ay[GetPlayerId(AC[ER])]=nullif(El(AC[ER]))thenloopset E0=EZ()if(B[E0]==false)thenif not At thenset B[E0]=trueendifcall SetPlayerStateBJ(AC[ER],PLAYER_STATE_RESOURCE_FOOD_CAP,6)call PolledWait(.01)set ay[GetPlayerId(AC[ER])]=CreateUnitAtLoc(AC[ER],eg[E0],lW,bj_UNIT_FACING)endifexitwhen(ay[GetPlayerId(AC[ER])]!=null)endloopendifset ER=ER+1endloopif(R==false)thenset A9=trueendifcall RemoveLocation(lw)call RemoveLocation(lW)call RemoveLocation(l4)call RemoveLocation(l5)endfunctionfunction l6 takes nothing returns integerlocal integer fDlocal integer felocal integer l7if(GetRandomInt(1,2)==1)thenset fD=ehset fe=eHelseset fD=eiset fe=eIendifset l7=GetRandomInt(fD,fe)if At thenreturn l7endifloopexitwhen A1[l7]==falseset l7=GetRandomInt(fD,fe)endloopset A1[l7]=truereturn l7endfunctionfunction l8 takes nothing returns nothinglocal integer i=ehloopexitwhen i>eIset A1[i]=falseset i=i+1endloopendfunctionfunction l9 takes nothing returns nothinglocal string e8=I2S(GetPlayerId(GetTriggerPlayer()))local string La=SubString(GetEventPlayerChatString(),8,9)local integer LA=0if La=="1"thenset LA=1elseif La=="2"thenset LA=2elseif La=="3"thenset LA=3endifif LA==0 thencall fK(GetTriggerPlayer(),"Invalid Option. Select from -option 1/2/3")returnendifif EI("lQ",e8)thencall fK(GetTriggerPlayer(),"You have already voted.")returnendifcall Ec("lQ",e8,true)call Ea("lQ","Option"+I2S(LA)+"Count",1+EH("lQ","Option"+I2S(LA)+"Count"))call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,A6,20,"You have chosen Option "+I2S(LA)+".")endfunctionfunction lQ takes nothing returns nothinglocal integer array Lblocal integer array LBlocal integer array Lclocal integer array LClocal integer array Ldlocal integer array LDlocal integer array Lelocal integer LE=EN(Ab)local integer Lf=EN(AB)local integer ilocal integer xlocal string LF="|c008A2BE2Option 1: |r"local string Lg="|c008A2BE2Option 2: |r"local string LG="|c008A2BE2Option 3: |r"local integer Lhlocal integer LHlocal integer Lilocal trigger t=CreateTrigger()local location lw=GetRectCenter(bs)local location lW=GetRectCenter(bR)local location l4=GetRectCenter(bp)local location l5=GetRectCenter(bL)local integer E0set A0=trueset A8=falseset A9=falsecall Et()call ES()call PanCameraToTimedLocForPlayer(Ac[1],l4,0)call PanCameraToTimedLocForPlayer(Ac[2],l4,0)call PanCameraToTimedLocForPlayer(Ac[3],l4,0)call PanCameraToTimedLocForPlayer(Ac[4],l4,0)call PanCameraToTimedLocForPlayer(Ac[5],l4,0)call PanCameraToTimedLocForPlayer(AC[1],l5,0)call PanCameraToTimedLocForPlayer(AC[2],l5,0)call PanCameraToTimedLocForPlayer(AC[3],l5,0)call PanCameraToTimedLocForPlayer(AC[4],l5,0)call PanCameraToTimedLocForPlayer(AC[5],l5,0)call TriggerRegisterPlayerChatEvent(t,Ac[1],"-option",false)call TriggerRegisterPlayerChatEvent(t,Ac[2],"-option",false)call TriggerRegisterPlayerChatEvent(t,Ac[3],"-option",false)call TriggerRegisterPlayerChatEvent(t,Ac[4],"-option",false)call TriggerRegisterPlayerChatEvent(t,Ac[5],"-option",false)call TriggerRegisterPlayerChatEvent(t,AC[1],"-option",false)call TriggerRegisterPlayerChatEvent(t,AC[2],"-option",false)call TriggerRegisterPlayerChatEvent(t,AC[3],"-option",false)call TriggerRegisterPlayerChatEvent(t,AC[4],"-option",false)call TriggerRegisterPlayerChatEvent(t,AC[5],"-option",false)call TriggerAddAction(t,function l9)call l8()set i=1loopexitwhen i>LEset Lb[i]=eg[l6()]set LF=LF+GetObjectName(Lb[i])set i=i+1if i<=LE thenset LF=LF+"|c005BFEEA-|r"endifendloopset LF=LF+" |c00FF0000vs |r"set i=1loopexitwhen i>Lfset LB[i]=eg[l6()]set LF=LF+GetObjectName(LB[i])set i=i+1if i<=Lf thenset LF=LF+"|c005BFEEA-|r"endifendloopcall l8()set i=1loopexitwhen i>LEset Lc[i]=eg[l6()]set Lg=Lg+GetObjectName(Lc[i])+" "set i=i+1if i<=LE thenset Lg=Lg+"|c005BFEEA-|r"endifendloopset Lg=Lg+" |c00FF0000vs |r"set i=1loopexitwhen i>Lfset LC[i]=eg[l6()]set Lg=Lg+GetObjectName(LC[i])+" "set i=i+1if i<=Lf thenset Lg=Lg+"|c005BFEEA-|r"endifendloopcall l8()set i=1loopexitwhen i>LEset Ld[i]=eg[l6()]set LG=LG+GetObjectName(Ld[i])+" "set i=i+1if i<=LE thenset LG=LG+"|c005BFEEA-|r"endifendloopset LG=LG+" |c00FF0000vs |r"set i=1loopexitwhen i>Lfset LD[i]=eg[l6()]set LG=LG+GetObjectName(LD[i])+" "set i=i+1if i<=Lf thenset LG=LG+"|c005BFEEA-|r"endifendloopcall TriggerSleepAction(0)call FG(bj_FORCE_ALL_PLAYERS,45," ")call FG(bj_FORCE_ALL_PLAYERS,45,"You have 30 seconds to vote from the options below using -option 1/2/3.")call FG(bj_FORCE_ALL_PLAYERS,45,"Please note that the groups listed in the options do not imply that Sentinel will have the first hero set, it is random.")call FG(bj_FORCE_ALL_PLAYERS,45," ")call FG(bj_FORCE_ALL_PLAYERS,45,LF)call FG(bj_FORCE_ALL_PLAYERS,45," ")call FG(bj_FORCE_ALL_PLAYERS,45,Lg)call FG(bj_FORCE_ALL_PLAYERS,45," ")call FG(bj_FORCE_ALL_PLAYERS,45,LG)call PolledWait(30)call DisableTrigger(t)call Fj(t)set Lh=EH("lQ","Option1Count")set LH=EH("lQ","Option2Count")set Li=EH("lQ","Option3Count")set i=1loopexitwhen i>LEset Le[i]=Lb[i]set i=i+1endloopset x=GetRandomInt(1,3)if x==1 thenif LE==1 thenset Le[1]=Lb[1]elseif LE==2 thenset Le[1]=Lb[2]set Le[2]=Lb[1]elseif LE==3 thenset Le[1]=Lb[3]set Le[2]=Lb[1]set Le[3]=Lb[2]elseif LE==4 thenset Le[1]=Lb[4]set Le[2]=Lb[3]set Le[3]=Lb[2]set Le[4]=Lb[1]elseif LE==5 thenset Le[1]=Lb[5]set Le[2]=Lb[4]set Le[3]=Lb[1]set Le[4]=Lb[2]set Le[5]=Lb[3]endifelseif x==2 thenif LE==1 thenset Le[1]=Lb[1]elseif LE==2 thenset Le[1]=Lb[2]set Le[2]=Lb[1]elseif LE==3 thenset Le[1]=Lb[2]set Le[2]=Lb[3]set Le[3]=Lb[1]elseif LE==4 thenset Le[1]=Lb[3]set Le[2]=Lb[1]set Le[3]=Lb[4]set Le[4]=Lb[2]elseif LE==5 thenset Le[1]=Lb[4]set Le[2]=Lb[3]set Le[3]=Lb[2]set Le[4]=Lb[5]set Le[5]=Lb[1]endifelseif LE==1 thenset Le[1]=Lb[1]elseif LE==2 thenset Le[1]=Lb[1]set Le[2]=Lb[2]elseif LE==3 thenset Le[1]=Lb[3]set Le[2]=Lb[2]set Le[3]=Lb[1]elseif LE==4 thenset Le[1]=Lb[2]set Le[2]=Lb[4]set Le[3]=Lb[3]set Le[4]=Lb[1]elseif LE==5 thenset Le[1]=Lb[5]set Le[2]=Lb[1]set Le[3]=Lb[3]set Le[4]=Lb[4]set Le[5]=Lb[2]endifendifset i=1loopexitwhen i>LEset Lb[i]=Le[i]set i=i+1endloopset i=1loopexitwhen i>LEset Le[i]=LB[i]set i=i+1endloopset x=GetRandomInt(1,3)if x==1 thenif LE==1 thenset Le[1]=LB[1]elseif LE==2 thenset Le[1]=LB[2]set Le[2]=LB[1]elseif LE==3 thenset Le[1]=LB[3]set Le[2]=LB[1]set Le[3]=LB[2]elseif LE==4 thenset Le[1]=LB[4]set Le[2]=LB[3]set Le[3]=LB[2]set Le[4]=LB[1]elseif LE==5 thenset Le[1]=LB[5]set Le[2]=LB[4]set Le[3]=LB[1]set Le[4]=LB[2]set Le[5]=LB[3]endifelseif x==2 thenif LE==1 thenset Le[1]=LB[1]elseif LE==2 thenset Le[1]=LB[2]set Le[2]=LB[1]elseif LE==3 thenset Le[1]=LB[2]set Le[2]=LB[3]set Le[3]=LB[1]elseif LE==4 thenset Le[1]=LB[3]set Le[2]=LB[1]set Le[3]=LB[4]set Le[4]=LB[2]elseif LE==5 thenset Le[1]=LB[4]set Le[2]=LB[3]set Le[3]=LB[2]set Le[4]=LB[5]set Le[5]=LB[1]endifelseif LE==1 thenset Le[1]=LB[1]elseif LE==2 thenset Le[1]=LB[1]set Le[2]=LB[2]elseif LE==3 thenset Le[1]=LB[3]set Le[2]=LB[2]set Le[3]=LB[1]elseif LE==4 thenset Le[1]=LB[2]set Le[2]=LB[4]set Le[3]=LB[3]set Le[4]=LB[1]elseif LE==5 thenset Le[1]=LB[5]set Le[2]=LB[1]set Le[3]=LB[3]set Le[4]=LB[4]set Le[5]=LB[2]endifendifset i=1loopexitwhen i>LEset LB[i]=Le[i]set i=i+1endloopset i=1loopexitwhen i>LEset Le[i]=Lc[i]set i=i+1endloopset x=GetRandomInt(1,3)if x==1 thenif LE==1 thenset Le[1]=Lc[1]elseif LE==2 thenset Le[1]=Lc[2]set Le[2]=Lc[1]elseif LE==3 thenset Le[1]=Lc[3]set Le[2]=Lc[1]set Le[3]=Lc[2]elseif LE==4 thenset Le[1]=Lc[4]set Le[2]=Lc[3]set Le[3]=Lc[2]set Le[4]=Lc[1]elseif LE==5 thenset Le[1]=Lc[5]set Le[2]=Lc[4]set Le[3]=Lc[1]set Le[4]=Lc[2]set Le[5]=Lc[3]endifelseif x==2 thenif LE==1 thenset Le[1]=Lc[1]elseif LE==2 thenset Le[1]=Lc[2]set Le[2]=Lc[1]elseif LE==3 thenset Le[1]=Lc[2]set Le[2]=Lc[3]set Le[3]=Lc[1]elseif LE==4 thenset Le[1]=Lc[3]set Le[2]=Lc[1]set Le[3]=Lc[4]set Le[4]=Lc[2]elseif LE==5 thenset Le[1]=Lc[4]set Le[2]=Lc[3]set Le[3]=Lc[2]set Le[4]=Lc[5]set Le[5]=Lc[1]endifelseif LE==1 thenset Le[1]=Lc[1]elseif LE==2 thenset Le[1]=Lc[1]set Le[2]=Lc[2]elseif LE==3 thenset Le[1]=Lc[3]set Le[2]=Lc[2]set Le[3]=Lc[1]elseif LE==4 thenset Le[1]=Lc[2]set Le[2]=Lc[4]set Le[3]=Lc[3]set Le[4]=Lc[1]elseif LE==5 thenset Le[1]=Lc[5]set Le[2]=Lc[1]set Le[3]=Lc[3]set Le[4]=Lc[4]set Le[5]=Lc[2]endifendifset i=1loopexitwhen i>LEset Lc[i]=Le[i]set i=i+1endloopset i=1loopexitwhen i>LEset Le[i]=LC[i]set i=i+1endloopset x=GetRandomInt(1,3)if x==1 thenif LE==1 thenset Le[1]=LC[1]elseif LE==2 thenset Le[1]=LC[2]set Le[2]=LC[1]elseif LE==3 thenset Le[1]=LC[3]set Le[2]=LC[1]set Le[3]=LC[2]elseif LE==4 thenset Le[1]=LC[4]set Le[2]=LC[3]set Le[3]=LC[2]set Le[4]=LC[1]elseif LE==5 thenset Le[1]=LC[5]set Le[2]=LC[4]set Le[3]=LC[1]set Le[4]=LC[2]set Le[5]=LC[3]endifelseif x==2 thenif LE==1 thenset Le[1]=LC[1]elseif LE==2 thenset Le[1]=LC[2]set Le[2]=LC[1]elseif LE==3 thenset Le[1]=LC[2]set Le[2]=LC[3]set Le[3]=LC[1]elseif LE==4 thenset Le[1]=LC[3]set Le[2]=LC[1]set Le[3]=LC[4]set Le[4]=LC[2]elseif LE==5 thenset Le[1]=LC[4]set Le[2]=LC[3]set Le[3]=LC[2]set Le[4]=LC[5]set Le[5]=LC[1]endifelseif LE==1 thenset Le[1]=LC[1]elseif LE==2 thenset Le[1]=LC[1]set Le[2]=LC[2]elseif LE==3 thenset Le[1]=LC[3]set Le[2]=LC[2]set Le[3]=LC[1]elseif LE==4 thenset Le[1]=LC[2]set Le[2]=LC[4]set Le[3]=LC[3]set Le[4]=LC[1]elseif LE==5 thenset Le[1]=LC[5]set Le[2]=LC[1]set Le[3]=LC[3]set Le[4]=LC[4]set Le[5]=LC[2]endifendifset i=1loopexitwhen i>LEset LC[i]=Le[i]set i=i+1endloopset i=1loopexitwhen i>LEset Le[i]=Ld[i]set i=i+1endloopset x=GetRandomInt(1,3)if x==1 thenif LE==1 thenset Le[1]=Ld[1]elseif LE==2 thenset Le[1]=Ld[2]set Le[2]=Ld[1]elseif LE==3 thenset Le[1]=Ld[3]set Le[2]=Ld[1]set Le[3]=Ld[2]elseif LE==4 thenset Le[1]=Ld[4]set Le[2]=Ld[3]set Le[3]=Ld[2]set Le[4]=Ld[1]elseif LE==5 thenset Le[1]=Ld[5]set Le[2]=Ld[4]set Le[3]=Ld[1]set Le[4]=Ld[2]set Le[5]=Ld[3]endifelseif x==2 thenif LE==1 thenset Le[1]=Ld[1]elseif LE==2 thenset Le[1]=Ld[2]set Le[2]=Ld[1]elseif LE==3 thenset Le[1]=Ld[2]set Le[2]=Ld[3]set Le[3]=Ld[1]elseif LE==4 thenset Le[1]=Ld[3]set Le[2]=Ld[1]set Le[3]=Ld[4]set Le[4]=Ld[2]elseif LE==5 thenset Le[1]=Ld[4]set Le[2]=Ld[3]set Le[3]=Ld[2]set Le[4]=Ld[5]set Le[5]=Ld[1]endifelseif LE==1 thenset Le[1]=Ld[1]elseif LE==2 thenset Le[1]=Ld[1]set Le[2]=Ld[2]elseif LE==3 thenset Le[1]=Ld[3]set Le[2]=Ld[2]set Le[3]=Ld[1]elseif LE==4 thenset Le[1]=Ld[2]set Le[2]=Ld[4]set Le[3]=Ld[3]set Le[4]=Ld[1]elseif LE==5 thenset Le[1]=Ld[5]set Le[2]=Ld[1]set Le[3]=Ld[3]set Le[4]=Ld[4]set Le[5]=Ld[2]endifendifset i=1loopexitwhen i>LEset Ld[i]=Le[i]set i=i+1endloopset i=1loopexitwhen i>LEset Le[i]=LD[i]set i=i+1endloopset x=GetRandomInt(1,3)if x==1 thenif LE==1 thenset Le[1]=LD[1]elseif LE==2 thenset Le[1]=LD[2]set Le[2]=LD[1]elseif LE==3 thenset Le[1]=LD[3]set Le[2]=LD[1]set Le[3]=LD[2]elseif LE==4 thenset Le[1]=LD[4]set Le[2]=LD[3]set Le[3]=LD[2]set Le[4]=LD[1]elseif LE==5 thenset Le[1]=LD[5]set Le[2]=LD[4]set Le[3]=LD[1]set Le[4]=LD[2]set Le[5]=LD[3]endifelseif x==2 thenif LE==1 thenset Le[1]=LD[1]elseif LE==2 thenset Le[1]=LD[2]set Le[2]=LD[1]elseif LE==3 thenset Le[1]=LD[2]set Le[2]=LD[3]set Le[3]=LD[1]elseif LE==4 thenset Le[1]=LD[3]set Le[2]=LD[1]set Le[3]=LD[4]set Le[4]=LD[2]elseif LE==5 thenset Le[1]=LD[4]set Le[2]=LD[3]set Le[3]=LD[2]set Le[4]=LD[5]set Le[5]=LD[1]endifelseif LE==1 thenset Le[1]=LD[1]elseif LE==2 thenset Le[1]=LD[1]set Le[2]=LD[2]elseif LE==3 thenset Le[1]=LD[3]set Le[2]=LD[2]set Le[3]=LD[1]elseif LE==4 thenset Le[1]=LD[2]set Le[2]=LD[4]set Le[3]=LD[3]set Le[4]=LD[1]elseif LE==5 thenset Le[1]=LD[5]set Le[2]=LD[1]set Le[3]=LD[3]set Le[4]=LD[4]set Le[5]=LD[2]endifendifset i=1loopexitwhen i>LEset LD[i]=Le[i]set i=i+1endloopset E0=GetRandomInt(1,2)if Lh>=LH and Lh>=Li thencall ClearTextMessages()call FG(bj_FORCE_ALL_PLAYERS,45,"Voted: "+LF)call FG(bj_FORCE_ALL_PLAYERS,45," ")set i=1set x=1loopexitwhen i>5if El(Ac[i])thenif E0==1 thenset ay[GetPlayerId(Ac[i])]=CreateUnitAtLoc(Ac[i],Lb[x],lw,bj_UNIT_FACING)elseset ay[GetPlayerId(Ac[i])]=CreateUnitAtLoc(Ac[i],LB[x],lw,bj_UNIT_FACING)endifcall SetPlayerState(Ac[i],PLAYER_STATE_RESOURCE_FOOD_CAP,6)call TriggerSleepAction(0)set x=x+1endifset i=i+1endloopset i=1set x=1loopexitwhen i>5if El(AC[i])thenif E0==1 thenset ay[GetPlayerId(AC[i])]=CreateUnitAtLoc(AC[i],LB[x],lW,bj_UNIT_FACING)elseset ay[GetPlayerId(AC[i])]=CreateUnitAtLoc(AC[i],Lb[x],lW,bj_UNIT_FACING)endifcall SetPlayerState(Ac[i],PLAYER_STATE_RESOURCE_FOOD_CAP,6)call TriggerSleepAction(0)set x=x+1endifset i=i+1endloopelseif LH>=Lh and LH>=Li thencall ClearTextMessages()call FG(bj_FORCE_ALL_PLAYERS,45,"Voted: "+Lg)call FG(bj_FORCE_ALL_PLAYERS,45," ")set i=1set x=1loopexitwhen i>5if El(Ac[i])thenif E0==1 thenset ay[GetPlayerId(Ac[i])]=CreateUnitAtLoc(Ac[i],Lc[x],lw,bj_UNIT_FACING)elseset ay[GetPlayerId(Ac[i])]=CreateUnitAtLoc(Ac[i],LC[x],lw,bj_UNIT_FACING)endifcall SetPlayerState(Ac[i],PLAYER_STATE_RESOURCE_FOOD_CAP,6)call TriggerSleepAction(0)set x=x+1endifset i=i+1endloopset i=1set x=1loopexitwhen i>5if El(AC[i])thenif E0==1 thenset ay[GetPlayerId(AC[i])]=CreateUnitAtLoc(AC[i],LC[x],lW,bj_UNIT_FACING)elseset ay[GetPlayerId(AC[i])]=CreateUnitAtLoc(AC[i],Lc[x],lW,bj_UNIT_FACING)endifcall SetPlayerState(Ac[i],PLAYER_STATE_RESOURCE_FOOD_CAP,6)call TriggerSleepAction(0)set x=x+1endifset i=i+1endloopelseif Li>=Lh and Li>=LH thencall ClearTextMessages()call FG(bj_FORCE_ALL_PLAYERS,45,"Voted: "+LG)call FG(bj_FORCE_ALL_PLAYERS,45," ")set i=1set x=1loopexitwhen i>5if El(Ac[i])thenif E0==1 thenset ay[GetPlayerId(Ac[i])]=CreateUnitAtLoc(Ac[i],Ld[x],lw,bj_UNIT_FACING)elseset ay[GetPlayerId(Ac[i])]=CreateUnitAtLoc(Ac[i],LD[x],lw,bj_UNIT_FACING)endifcall SetPlayerState(Ac[i],PLAYER_STATE_RESOURCE_FOOD_CAP,6)call TriggerSleepAction(0)set x=x+1endifset i=i+1endloopset i=1set x=1loopexitwhen i>5if El(AC[i])thenif E0==1 thenset ay[GetPlayerId(AC[i])]=CreateUnitAtLoc(AC[i],LD[x],lW,bj_UNIT_FACING)elseset ay[GetPlayerId(AC[i])]=CreateUnitAtLoc(AC[i],Ld[x],lW,bj_UNIT_FACING)endifcall SetPlayerState(Ac[i],PLAYER_STATE_RESOURCE_FOOD_CAP,6)call TriggerSleepAction(0)set x=x+1endifset i=i+1endloopendifcall PolledWait(50)set A7=truecall RemoveLocation(lw)call RemoveLocation(lW)call RemoveLocation(l4)call RemoveLocation(l5)endfunctionfunction lS takes nothing returns nothinglocal integer array LIlocal player l1local player l2local boolean l3=falseset aY=trueset A9=falseset A8=falsecall Et()call Eq('N01I')call Eq('E01C')call Eq('N01V')call Eq('H00I')call Eq('N01W')call DisableTrigger(Bp)set LI[GetPlayerId(Ac[1])]=GetPlayerState(Ac[1],PLAYER_STATE_RESOURCE_GOLD)set LI[GetPlayerId(Ac[2])]=GetPlayerState(Ac[2],PLAYER_STATE_RESOURCE_GOLD)set LI[GetPlayerId(Ac[3])]=GetPlayerState(Ac[3],PLAYER_STATE_RESOURCE_GOLD)set LI[GetPlayerId(Ac[4])]=GetPlayerState(Ac[4],PLAYER_STATE_RESOURCE_GOLD)set LI[GetPlayerId(Ac[5])]=GetPlayerState(Ac[5],PLAYER_STATE_RESOURCE_GOLD)set LI[GetPlayerId(AC[1])]=GetPlayerState(AC[1],PLAYER_STATE_RESOURCE_GOLD)set LI[GetPlayerId(AC[2])]=GetPlayerState(AC[2],PLAYER_STATE_RESOURCE_GOLD)set LI[GetPlayerId(AC[3])]=GetPlayerState(AC[3],PLAYER_STATE_RESOURCE_GOLD)set LI[GetPlayerId(AC[4])]=GetPlayerState(AC[4],PLAYER_STATE_RESOURCE_GOLD)set LI[GetPlayerId(AC[5])]=GetPlayerState(AC[5],PLAYER_STATE_RESOURCE_GOLD)call SetPlayerState(Ac[1],PLAYER_STATE_RESOURCE_GOLD,0)call SetPlayerState(Ac[2],PLAYER_STATE_RESOURCE_GOLD,0)call SetPlayerState(Ac[3],PLAYER_STATE_RESOURCE_GOLD,0)call SetPlayerState(Ac[4],PLAYER_STATE_RESOURCE_GOLD,0)call SetPlayerState(Ac[5],PLAYER_STATE_RESOURCE_GOLD,0)call SetPlayerState(AC[1],PLAYER_STATE_RESOURCE_GOLD,0)call SetPlayerState(AC[2],PLAYER_STATE_RESOURCE_GOLD,0)call SetPlayerState(AC[3],PLAYER_STATE_RESOURCE_GOLD,0)call SetPlayerState(AC[4],PLAYER_STATE_RESOURCE_GOLD,0)call SetPlayerState(AC[5],PLAYER_STATE_RESOURCE_GOLD,0)call PolledWait(15.-TimerGetElapsed(n))call SuspendTimeOfDay(true)if GetRandomInt(1,2)==1 thenset l3=trueendifif l3 thenset l1=Ac[1]elseset l1=AC[1]endifcall FG(bj_FORCE_ALL_PLAYERS,15.,I[GetPlayerId(l1)]+GetPlayerName(l1)+"|r"+" has 20 seconds to pick a hero.")call SetPlayerState(l1,PLAYER_STATE_RESOURCE_GOLD,LI[GetPlayerId(l1)])call PolledWait(20.)call Er(l1)if l3 thenset l1=AC[1]set l2=AC[2]elseset l1=Ac[1]set l2=Ac[2]endifcall FG(bj_FORCE_ALL_PLAYERS,15.,I[GetPlayerId(l1)]+GetPlayerName(l1)+"|r"+" has 20 seconds to pick a hero.")call FG(bj_FORCE_ALL_PLAYERS,15.,I[GetPlayerId(l2)]+GetPlayerName(l2)+"|r"+" has 20 seconds to pick a hero.")call SetPlayerState(l1,PLAYER_STATE_RESOURCE_GOLD,LI[GetPlayerId(l1)])call SetPlayerState(l2,PLAYER_STATE_RESOURCE_GOLD,LI[GetPlayerId(l2)])call PolledWait(20.)call Er(l1)call Er(l2)if l3 thenset l1=Ac[2]set l2=Ac[3]elseset l1=AC[2]set l2=AC[3]endifcall FG(bj_FORCE_ALL_PLAYERS,15.,I[GetPlayerId(l1)]+GetPlayerName(l1)+"|r"+" has 20 seconds to pick a hero.")call FG(bj_FORCE_ALL_PLAYERS,15.,I[GetPlayerId(l2)]+GetPlayerName(l2)+"|r"+" has 20 seconds to pick a hero.")call SetPlayerState(l1,PLAYER_STATE_RESOURCE_GOLD,LI[GetPlayerId(l1)])call SetPlayerState(l2,PLAYER_STATE_RESOURCE_GOLD,LI[GetPlayerId(l2)])call PolledWait(20.)call Er(l1)call Er(l2)if l3 thenset l1=AC[3]set l2=AC[4]elseset l1=Ac[3]set l2=Ac[4]endifcall FG(bj_FORCE_ALL_PLAYERS,15.,I[GetPlayerId(l1)]+GetPlayerName(l1)+"|r"+" has 20 seconds to pick a hero.")call FG(bj_FORCE_ALL_PLAYERS,15.,I[GetPlayerId(l2)]+GetPlayerName(l2)+"|r"+" has 20 seconds to pick a hero.")call SetPlayerState(l1,PLAYER_STATE_RESOURCE_GOLD,LI[GetPlayerId(l1)])call SetPlayerState(l2,PLAYER_STATE_RESOURCE_GOLD,LI[GetPlayerId(l2)])call PolledWait(20.)call Er(l1)call Er(l2)if l3 thenset l1=Ac[4]set l2=Ac[5]elseset l1=AC[4]set l2=AC[5]endifcall FG(bj_FORCE_ALL_PLAYERS,15.,I[GetPlayerId(l1)]+GetPlayerName(l1)+"|r"+" has 20 seconds to pick a hero.")call FG(bj_FORCE_ALL_PLAYERS,15.,I[GetPlayerId(l2)]+GetPlayerName(l2)+"|r"+" has 20 seconds to pick a hero.")call SetPlayerState(l1,PLAYER_STATE_RESOURCE_GOLD,LI[GetPlayerId(l1)])call SetPlayerState(l2,PLAYER_STATE_RESOURCE_GOLD,LI[GetPlayerId(l2)])call PolledWait(20.)call Er(l1)call Er(l2)if l3 thenset l1=AC[5]elseset l1=Ac[5]endifcall FG(bj_FORCE_ALL_PLAYERS,15.,I[GetPlayerId(l1)]+GetPlayerName(l1)+"|r"+" has 20 seconds to pick a hero.")call SetPlayerState(l1,PLAYER_STATE_RESOURCE_GOLD,LI[GetPlayerId(l1)])call PolledWait(20.)call Er(l1)call EnableTrigger(Bp)call SuspendTimeOfDay(false)call PolledWait(30.)set a2=trueendfunctionfunction Lj takes nothing returns nothinglocal player ELset A8=falseset A9=falsecall ES()call Et()call PolledWait(3)set bd=trueset EL=Ac[1]if Em(EL)==false and bb[GetPlayerId(EL)]==false thencall fd(EL)endifset EL=Ac[2]if Em(EL)==false and bb[GetPlayerId(EL)]==false thencall fd(EL)endifset EL=Ac[3]if Em(EL)==false and bb[GetPlayerId(EL)]==false thencall fd(EL)endifset EL=Ac[4]if Em(EL)==false and bb[GetPlayerId(EL)]==false thencall fd(EL)endifset EL=Ac[5]if Em(EL)==false and bb[GetPlayerId(EL)]==false thencall fd(EL)endifset EL=AC[1]if Em(EL)==false and bb[GetPlayerId(EL)]==false thencall fd(EL)endifset EL=AC[2]if Em(EL)==false and bb[GetPlayerId(EL)]==false thencall fd(EL)endifset EL=AC[3]if Em(EL)==false and bb[GetPlayerId(EL)]==false thencall fd(EL)endifset EL=AC[4]if Em(EL)==false and bb[GetPlayerId(EL)]==false thencall fd(EL)endifset EL=AC[5]if Em(EL)==false and bb[GetPlayerId(EL)]==false thencall fd(EL)endifendfunctionfunction ls takes nothing returns nothinglocal string f8="Global|ReverseMode"local player array LElocal player array Lflocal integer x=0local integer y=0local integer i=0local trigger t=CreateTrigger()set bA=truecall TriggerAddAction(t,function Lj)call TriggerRegisterTimerEvent(t,60-TimerGetElapsed(n),false)if El(Ac[1])thenset x=x+1set LE[x]=Ac[1]call SetPlayerState(LE[x],PLAYER_STATE_RESOURCE_FOOD_CAP,11)endifif El(Ac[2])thenset x=x+1set LE[x]=Ac[2]call SetPlayerState(LE[x],PLAYER_STATE_RESOURCE_FOOD_CAP,11)endifif El(Ac[3])thenset x=x+1set LE[x]=Ac[3]call SetPlayerState(LE[x],PLAYER_STATE_RESOURCE_FOOD_CAP,11)endifif El(Ac[4])thenset x=x+1set LE[x]=Ac[4]call SetPlayerState(LE[x],PLAYER_STATE_RESOURCE_FOOD_CAP,11)endifif El(Ac[5])thenset x=x+1set LE[x]=Ac[5]call SetPlayerState(LE[x],PLAYER_STATE_RESOURCE_FOOD_CAP,11)endifif El(AC[1])thenset y=y+1set Lf[y]=AC[1]call SetPlayerState(Lf[y],PLAYER_STATE_RESOURCE_FOOD_CAP,11)endifif El(AC[2])thenset y=y+1set Lf[y]=AC[2]call SetPlayerState(Lf[y],PLAYER_STATE_RESOURCE_FOOD_CAP,11)endifif El(AC[3])thenset y=y+1set Lf[y]=AC[3]call SetPlayerState(Lf[y],PLAYER_STATE_RESOURCE_FOOD_CAP,11)endifif El(AC[4])thenset y=y+1set Lf[y]=AC[4]call SetPlayerState(Lf[y],PLAYER_STATE_RESOURCE_FOOD_CAP,11)endifif El(AC[5])thenset y=y+1set Lf[y]=AC[5]call SetPlayerState(Lf[y],PLAYER_STATE_RESOURCE_FOOD_CAP,11)endifset i=1loopexitwhen i>xcall e7(f8,GetPlayerName(LE[i]),Lf[i])call e7(f8,GetPlayerName(Lf[i]),LE[i])set i=i+1endloopendfunctionfunction LJ takes nothing returns nothingcall fV(GetEnumUnit())endfunctionfunction Lk takes unit fw returns nothinglocal integer LK=GetPlayerId(GetOwningPlayer(fw))set Ak[LK]=UnitItemInSlot(fw,0)set AK[LK]=UnitItemInSlot(fw,1)set Al[LK]=UnitItemInSlot(fw,2)set AL[LK]=UnitItemInSlot(fw,3)set Am[LK]=UnitItemInSlot(fw,4)set AM[LK]=UnitItemInSlot(fw,5)endfunctionfunction Ll takes player fF,player fg returns integerlocal unit LL=ay[GetPlayerId(fF)]local unit Lm=ay[GetPlayerId(fg)]call UnitRemoveBuffs(LL,true,true)call UnitRemoveBuffs(Lm,true,true)if LL==null and Lm==null thencall FG(bj_FORCE_ALL_PLAYERS,15,I[GetPlayerId(Ac[0])]+GetPlayerName(fF)+" and "+GetPlayerName(fg)+" did not pick a hero so they have no hero to be assigned.|r")elseif GetRandomInt(1,2)==1 thenif(LL!=null)thenreturn GetUnitTypeId(LL)elsereturn GetUnitTypeId(Lm)endifelseif(Lm!=null)thenreturn GetUnitTypeId(Lm)elsereturn GetUnitTypeId(LL)endifendifcall FG(bj_FORCE_ALL_PLAYERS,15,I[GetPlayerId(Ac[0])]+GetPlayerName(fF)+" and "+GetPlayerName(fg)+" have not picked a hero. They will be given a random hero!")return EZ()endfunctionfunction Ln takes nothing returns nothingif(GetUnitTypeId(GetEnumUnit())=='n004')thencall RemoveUnit(GetEnumUnit())endifif(GetUnitTypeId(GetEnumUnit())=='o003')thencall RemoveUnit(GetEnumUnit())endifendfunctionfunction LN takes nothing returns nothinglocal integer ERlocal group Lo=CreateGroup()local unit RandUnitlocal location l4=GetRectCenter(bp)local location l5=GetRectCenter(bL)local integer LO=EN(Ab)local player array Lplocal player array LPlocal integer xlocal integer ylocal real Lqlocal real LQlocal real Lrlocal integer LRlocal group EX=GetUnitsInRectMatching(GetWorldBounds(),null)set A9=falseset A8=falsecall Et()call ES()call PolledWait(3)call ForGroup(EX,function Ln)call DestroyGroup(EX)set ER=1set x=1set y=1loopexitwhen ER>5if(El(Ac[ER]))thencall Lk(ay[GetPlayerId(Ac[ER])])call GroupAddUnit(Lo,ay[GetPlayerId(Ac[ER])])set Lp[x]=Ac[ER]set x=x+1endifif(El(AC[ER]))thencall Lk(ay[GetPlayerId(AC[ER])])call GroupAddUnit(Lo,ay[GetPlayerId(AC[ER])])set LP[y]=AC[ER]set y=y+1endifset ER=ER+1endloopset x=1loopexitwhen x>LOset LR=Ll(Lp[x],LP[x])if(ay[GetPlayerId(Lp[x])]==null)thenset Lq=GetLocationX(l4)+GetRandomReal(1,40)set LQ=GetLocationY(l4)+GetRandomReal(1,40)set Lr=270elseset Lq=GetUnitX(ay[GetPlayerId(Lp[x])])set LQ=GetUnitY(ay[GetPlayerId(Lp[x])])set Lr=GetUnitFacing(ay[GetPlayerId(Lp[x])])call SetUnitPathing(ay[GetPlayerId(Lp[x])],false)endifset ay[GetPlayerId(Lp[x])]=CreateUnit(Lp[x],LR,Lq,LQ,Lr)call SetUnitPathing(ay[GetPlayerId(Lp[x])],false)call SetUnitPosition(ay[GetPlayerId(Lp[x])],Lq,LQ)call UnitAddItem(ay[GetPlayerId(Lp[x])],Ak[GetPlayerId(Lp[x])])call UnitAddItem(ay[GetPlayerId(Lp[x])],AK[GetPlayerId(Lp[x])])call UnitAddItem(ay[GetPlayerId(Lp[x])],Al[GetPlayerId(Lp[x])])call UnitAddItem(ay[GetPlayerId(Lp[x])],AL[GetPlayerId(Lp[x])])call UnitAddItem(ay[GetPlayerId(Lp[x])],Am[GetPlayerId(Lp[x])])call UnitAddItem(ay[GetPlayerId(Lp[x])],AM[GetPlayerId(Lp[x])])call ClearSelectionForPlayer(Lp[x])call SelectUnitAddForPlayer(ay[GetPlayerId(Lp[x])],Lp[x])call PanCameraToTimedForPlayer(Lp[x],Lq,LQ,0)call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Awaken\\Awaken.mdl",Lq,LQ))if(ay[GetPlayerId(LP[x])]==null)thenset Lq=GetLocationX(l5)set LQ=GetLocationY(l5)set Lr=270elseset Lq=GetUnitX(ay[GetPlayerId(LP[x])])set LQ=GetUnitY(ay[GetPlayerId(LP[x])])set Lr=GetUnitFacing(ay[GetPlayerId(LP[x])])call SetUnitPathing(ay[GetPlayerId(LP[x])],false)endifset ay[GetPlayerId(LP[x])]=CreateUnit(LP[x],LR,Lq,LQ,Lr)call SetUnitPathing(ay[GetPlayerId(LP[x])],false)call SetUnitPosition(ay[GetPlayerId(LP[x])],Lq,LQ)call UnitAddItem(ay[GetPlayerId(LP[x])],Ak[GetPlayerId(LP[x])])call UnitAddItem(ay[GetPlayerId(LP[x])],AK[GetPlayerId(LP[x])])call UnitAddItem(ay[GetPlayerId(LP[x])],Al[GetPlayerId(LP[x])])call UnitAddItem(ay[GetPlayerId(LP[x])],AL[GetPlayerId(LP[x])])call UnitAddItem(ay[GetPlayerId(LP[x])],Am[GetPlayerId(LP[x])])call UnitAddItem(ay[GetPlayerId(LP[x])],AM[GetPlayerId(LP[x])])call ClearSelectionForPlayer(LP[x])call SelectUnitAddForPlayer(ay[GetPlayerId(LP[x])],LP[x])call PanCameraToTimedForPlayer(LP[x],Lq,LQ,0)call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Awaken\\Awaken.mdl",Lq,LQ))set x=x+1endloopcall ForGroup(Lo,function LJ)call DestroyGroup(Lo)set x=1loopexitwhen x>LOcall SetUnitPathing(ay[GetPlayerId(Lp[x])],true)call SetUnitPathing(ay[GetPlayerId(LP[x])],true)set x=x+1endloopcall PolledWait(55)set Ar=truecall RemoveLocation(l4)call RemoveLocation(l5)endfunctionfunction ln takes nothing returns nothinglocal trigger t=CreateTrigger()set As=truecall Eq('H00I')call TriggerRegisterTimerEvent(t,57,false)call TriggerAddAction(t,function LN)endfunctionfunction lR takes nothing returns nothinglocal location lw=GetRectCenter(bs)local location lW=GetRectCenter(bR)local location l4=GetRectCenter(bp)local location l5=GetRectCenter(bL)local integer ERlocal integer Eslocal integer E0if not At thencall ES()endifset T=trueset aB=400set A8=falsecall Et()call PanCameraToTimedLocForPlayer(Ac[1],l4,0)call PanCameraToTimedLocForPlayer(Ac[2],l4,0)call PanCameraToTimedLocForPlayer(Ac[3],l4,0)call PanCameraToTimedLocForPlayer(Ac[4],l4,0)call PanCameraToTimedLocForPlayer(Ac[5],l4,0)call PanCameraToTimedLocForPlayer(AC[1],l5,0)call PanCameraToTimedLocForPlayer(AC[2],l5,0)call PanCameraToTimedLocForPlayer(AC[3],l5,0)call PanCameraToTimedLocForPlayer(AC[4],l5,0)call PanCameraToTimedLocForPlayer(AC[5],l5,0)if Aw thencall SetPlayerStateBJ(AH,PLAYER_STATE_RESOURCE_FOOD_CAP,6)if EJ(AH)thenloopset E0=GetRandomInt(eh,eH)exitwhen B[E0]==falseendloopset ay[GetPlayerId(AH)]=CreateUnit(AH,eg[E0],GetLocationX(lw),GetLocationY(lw),270)elseloopset E0=GetRandomInt(ei,eI)exitwhen B[E0]==falseendloopset ay[GetPlayerId(AH)]=CreateUnit(AH,eg[E0],GetLocationX(lW),GetLocationY(lW),270)endifcall RemoveLocation(lw)call RemoveLocation(lW)call RemoveLocation(l4)call RemoveLocation(l5)returnendifset A9=falseset ER=1set Es=5loopexitwhen ER>Esset ay[GetPlayerId(Ac[ER])]=nullif(El(Ac[ER]))thenloopset E0=GetRandomInt(eh,eH)if(B[E0]==false)thenif not At thenset B[E0]=trueendifcall SetPlayerStateBJ(Ac[ER],PLAYER_STATE_RESOURCE_FOOD_CAP,6)call PolledWait(.01)set ay[GetPlayerId(Ac[ER])]=CreateUnitAtLoc(Ac[ER],eg[E0],lw,bj_UNIT_FACING)endifexitwhen(ay[GetPlayerId(Ac[ER])]!=null)endloopendifset ER=ER+1endloopset ER=1set Es=5loopexitwhen ER>Esset ay[GetPlayerId(AC[ER])]=nullif(El(AC[ER]))thenloopset E0=GetRandomInt(ei,eI)if(B[E0]==false)thenif not At thenset B[E0]=trueendifcall SetPlayerStateBJ(AC[ER],PLAYER_STATE_RESOURCE_FOOD_CAP,6)call PolledWait(.01)set ay[GetPlayerId(AC[ER])]=CreateUnitAtLoc(AC[ER],eg[E0],lW,bj_UNIT_FACING)endifexitwhen(ay[GetPlayerId(AC[ER])]!=null)endloopendifset ER=ER+1endloopset A9=truecall RemoveLocation(lw)call RemoveLocation(lW)call RemoveLocation(l4)call RemoveLocation(l5)endfunctionfunction Ls takes nothing returns nothinglocal integer LS=EH(e4(GetTriggeringTrigger()),"PlayerId")local integer ERlocal integer Eslocal integer E0local integer Ltlocal location lw=GetRectCenter(bs)local location lW=GetRectCenter(bR)if A5 thenreturnendifif EJ(Player(LS))thenset ER=ehset Es=eHset Lt=0elseset ER=eiset Es=eIset Lt=1endifif U thenset ER=ehset Es=eIif EJ(Player(LS))thencall CreateUnitAtLoc(Player(LS),'n00C',lW,bj_UNIT_FACING)elsecall CreateUnitAtLoc(Player(LS),'n00C',lw,bj_UNIT_FACING)endifendifif not S thenloopexitwhen ER>Esif B[ER]==false thencall SetPlayerTechMaxAllowed(Player(LS),eg[ER],1)endifset ER=ER+1endloopif(GetPlayerState(Player(LS),PLAYER_STATE_RESOURCE_GOLD)<250)thencall SetPlayerState(Player(LS),PLAYER_STATE_RESOURCE_GOLD,250)endifelseif(a3[Lt]<f1(eH,eI-ei+1))thenset ay[LS]=nullif El(Player(LS))thenloopset E0=EZ()if B[E0]==false thenset B[E0]=truecall SetPlayerState(Player(LS),PLAYER_STATE_RESOURCE_FOOD_CAP,6)call PolledWait(.01)if EJ(Player(LS))thenset ay[LS]=CreateUnitAtLoc(Player(LS),eg[E0],lw,bj_UNIT_FACING)elseset ay[LS]=CreateUnitAtLoc(Player(LS),eg[E0],lW,bj_UNIT_FACING)endifendifexitwhen ay[LS]!=nullendloopendifendifcall RemoveLocation(lw)call RemoveLocation(lW)if not S thenendifendfunctionfunction lM takes nothing returns nothinglocal location iGlocal real LTlocal trigger tlocal integer Lulocal integer xset R=trueset x=1loopexitwhen x>5set Lu=GetPlayerId(Ac[x])set t=CreateTrigger()call TriggerRegisterTimerExpireEvent(t,L[Lu])call TriggerAddAction(t,function Ls)call Ea(e4(t),"PlayerId",Lu)set Lu=GetPlayerId(AC[x])set t=CreateTrigger()call TriggerRegisterTimerExpireEvent(t,L[Lu])call TriggerAddAction(t,function Ls)call Ea(e4(t),"PlayerId",Lu)set x=x+1endloopset iG=GetUnitLoc(dw)set LT=GetUnitFacing(dw)call RemoveUnit(dw)set dw=CreateUnit(Ac[0],'n001',GetLocationX(iG),GetLocationY(iG),LT)call SetUnitColor(dw,ConvertPlayerColor(15))call RemoveLocation(iG)set iG=GetUnitLoc(DL)set LT=GetUnitFacing(DL)call RemoveUnit(DL)set DL=CreateUnit(AC[0],'n001',GetLocationX(iG),GetLocationY(iG),LT)call SetUnitColor(DL,ConvertPlayerColor(15))call RemoveLocation(iG)call UnitRemoveAbility(eM,'Aawa')call UnitRemoveAbility(en,'Aawa')call UnitRemoveAbility(eN,'Aawa')call UnitRemoveAbility(eo,'Aawa')call UnitRemoveAbility(eO,'Aawa')call UnitRemoveAbility(ep,'Aawa')call UnitRemoveAbility(eP,'Aawa')call UnitRemoveAbility(eq,'Aawa')endfunctionfunction lT takes nothing returns nothinglocal integer LU=GetRandomInt(1,4)set AT=trueif(LU==1)thencall FG(bj_FORCE_ALL_PLAYERS,20.,"AP has been randomly selected as your mode!")call FG(bj_FORCE_ALL_PLAYERS,20.," ")call ExecuteFunc("lr")endifif(LU==2)thencall FG(bj_FORCE_ALL_PLAYERS,20.,"AR has been randomly selected as your mode!")call FG(bj_FORCE_ALL_PLAYERS,20.," ")call ExecuteFunc("lq")endifif(LU==3)thencall FG(bj_FORCE_ALL_PLAYERS,20.,"TR has been randomly selected as your mode!")call FG(bj_FORCE_ALL_PLAYERS,20.," ")call ExecuteFunc("lR")endifif(LU==4)thencall FG(bj_FORCE_ALL_PLAYERS,20.,"Normal has been randomly selected as your mode!")call FG(bj_FORCE_ALL_PLAYERS,20.," ")endifendfunctionfunction lP takes nothing returns nothingset At=truecall Eq('H00I')endfunctionfunction lm takes nothing returns nothinglocal integer FY=EN(Ab)local integer Fy=EN(AB)local integer Fb=FY+Fylocal integer ERlocal integer Lvlocal integer xlocal integer ylocal integer zlocal player array LVlocal player array Lwlocal integer wlocal integer LWlocal integer Lxlocal location l4=GetRectCenter(bp)local location l5=GetRectCenter(bL)set Ae=trueset LW=GetPlayerState(Ac[1],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(Ac[2],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(Ac[3],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(Ac[4],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(Ac[5],PLAYER_STATE_RESOURCE_GOLD)set Lx=GetPlayerState(AC[1],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(AC[2],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(AC[3],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(AC[4],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(AC[5],PLAYER_STATE_RESOURCE_GOLD)set LV[1]=nullset LV[2]=nullset LV[3]=nullset LV[4]=nullset LV[5]=nullset LV[6]=nullset LV[7]=nullset LV[8]=nullset LV[9]=nullset LV[10]=nullset z=1set w=1set ER=1loopexitwhen ER>5if(El(Ac[ER]))thenset LV[w]=Ac[ER]set w=w+1elseset Lw[z]=Ac[ER]set z=z+1endifset ER=ER+1endloopset ER=1loopexitwhen ER>5if(El(AC[ER]))thenset LV[w]=AC[ER]set w=w+1elseset Lw[z]=AC[ER]set z=z+1endifset ER=ER+1endloopset Ac[1]=nullset Ac[2]=nullset Ac[3]=nullset Ac[4]=nullset Ac[5]=nullset AC[1]=nullset AC[2]=nullset AC[3]=nullset AC[4]=nullset AC[5]=nullset ER=1loopexitwhen ER>(Fb/2)set Lv=GetRandomInt(1,Fb)if(LV[Lv]!=null)thenset Ac[ER]=LV[Lv]set LV[Lv]=nullset ER=ER+1endifendloopset x=ERset ER=1loopexitwhen ER>Fb-x+1set Lv=GetRandomInt(1,Fb)if(LV[Lv]!=null)thenset AC[ER]=LV[Lv]set LV[Lv]=nullset ER=ER+1endifendloopset z=ERset ER=xset y=1loopexitwhen ER>5set Ac[ER]=Lw[y]set y=y+1set ER=ER+1endloopset ER=zloopexitwhen ER>5set AC[ER]=Lw[y]set y=y+1set ER=ER+1endloopset ER=0loopexitwhen ER>5set ER=ER+1endloopcall SetPlayerTeam(Ac[0],0)call SetPlayerTeam(Ac[1],0)call SetPlayerTeam(Ac[2],0)call SetPlayerTeam(Ac[3],0)call SetPlayerTeam(Ac[4],0)call SetPlayerTeam(Ac[5],0)call SetPlayerTeam(AC[0],1)call SetPlayerTeam(AC[1],1)call SetPlayerTeam(AC[2],1)call SetPlayerTeam(AC[3],1)call SetPlayerTeam(AC[4],1)call SetPlayerTeam(AC[5],1)call FU()set x=0set y=0loopexitwhen x>5loopexitwhen y>5call SetPlayerAllianceStateBJ(Ac[x],Ac[y],3)call SetPlayerAllianceStateBJ(AC[x],AC[y],3)call SetPlayerAllianceStateBJ(Ac[x],AC[y],0)call SetPlayerAllianceStateBJ(AC[x],Ac[y],0)set y=y+1endloopset y=0set x=x+1endloopcall ForceClear(Ab)call ForceClear(AB)call ForceAddPlayer(Ab,Ac[0])call ForceAddPlayer(Ab,Ac[1])call ForceAddPlayer(Ab,Ac[2])call ForceAddPlayer(Ab,Ac[3])call ForceAddPlayer(Ab,Ac[4])call ForceAddPlayer(Ab,Ac[5])call ForceAddPlayer(AB,AC[0])call ForceAddPlayer(AB,AC[1])call ForceAddPlayer(AB,AC[2])call ForceAddPlayer(AB,AC[3])call ForceAddPlayer(AB,AC[4])call ForceAddPlayer(AB,AC[5])call ExecuteFunc("Fv")call MultiboardClear(aa)call TriggerExecute(BZ)set FY=EN(Ab)set Fy=EN(AB)set ER=1loopexitwhen ER>5if(El(Ac[ER]))thencall SetPlayerStateBJ(Ac[ER],PLAYER_STATE_RESOURCE_GOLD,(3500/FY))call SetPlayerStateBJ(Ac[ER],PLAYER_STATE_RESOURCE_LUMBER,0)call SetPlayerStateBJ(Ac[ER],PLAYER_STATE_RESOURCE_FOOD_CAP,5)endifif(El(AC[ER]))thencall SetPlayerStateBJ(AC[ER],PLAYER_STATE_RESOURCE_GOLD,(3500/Fy))call SetPlayerStateBJ(AC[ER],PLAYER_STATE_RESOURCE_LUMBER,0)call SetPlayerStateBJ(AC[ER],PLAYER_STATE_RESOURCE_FOOD_CAP,5)endifset ER=ER+1endloopcall PanCameraToTimedLocForPlayer(Ac[1],l4,0)call PanCameraToTimedLocForPlayer(Ac[2],l4,0)call PanCameraToTimedLocForPlayer(Ac[3],l4,0)call PanCameraToTimedLocForPlayer(Ac[4],l4,0)call PanCameraToTimedLocForPlayer(Ac[5],l4,0)call PanCameraToTimedLocForPlayer(AC[1],l5,0)call PanCameraToTimedLocForPlayer(AC[2],l5,0)call PanCameraToTimedLocForPlayer(AC[3],l5,0)call PanCameraToTimedLocForPlayer(AC[4],l5,0)call PanCameraToTimedLocForPlayer(AC[5],l5,0)call DestroyFogModifier(CreateFogModifierRectBJ(true,Ac[1],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))call DestroyFogModifier(CreateFogModifierRectBJ(true,Ac[2],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))call DestroyFogModifier(CreateFogModifierRectBJ(true,Ac[3],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))call DestroyFogModifier(CreateFogModifierRectBJ(true,Ac[4],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))call DestroyFogModifier(CreateFogModifierRectBJ(true,Ac[5],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))call DestroyFogModifier(CreateFogModifierRectBJ(true,AC[1],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))call DestroyFogModifier(CreateFogModifierRectBJ(true,AC[2],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))call DestroyFogModifier(CreateFogModifierRectBJ(true,AC[3],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))call DestroyFogModifier(CreateFogModifierRectBJ(true,AC[4],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))call DestroyFogModifier(CreateFogModifierRectBJ(true,AC[5],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))if AQ thenset x=0loopexitwhen x>5call SetPlayerAlliance(Player(0),Ac[x],ConvertAllianceType(0),true)call SetPlayerAlliance(Player(0),Ac[x],ConvertAllianceType(4),true)call SetPlayerAlliance(Player(0),AC[x],ConvertAllianceType(0),false)call SetPlayerAlliance(Player(0),AC[x],ConvertAllianceType(4),false)set x=x+1endloopendifcall FT()endfunctionfunction LX takes nothing returns nothinglocal integer x=1local player ELlocal unit fw=GetTriggerUnit()local integer Ly=GetUnitTypeId(fw)if(GetOwningPlayer(fw)==AH and IsUnitType(fw,UNIT_TYPE_HERO))thencall DisableTrigger(GetTriggeringTrigger())if ab[GetPlayerId(AH)]==false and S==false and T==false thencall SetPlayerState(AH,PLAYER_STATE_RESOURCE_GOLD,250+GetPlayerState(AH,PLAYER_STATE_RESOURCE_GOLD))endifset j[GetPlayerId(AH)]=truecall TriggerSleepAction(0)loopexitwhen x>5set EL=Ac[x]if El(EL)and EL!=AH thenset ay[GetPlayerId(EL)]=CreateUnit(EL,Ly,GetRectCenterX(bp),GetRectCenterY(bp),270)endifset EL=AC[x]if El(EL)and EL!=AH thenset ay[GetPlayerId(EL)]=CreateUnit(EL,Ly,GetRectCenterX(bL),GetRectCenterY(bL),270)endifset x=x+1endloopendifendfunctionfunction lN takes nothing returns nothinglocal integer x=1local trigger t=CreateTrigger()local region r=CreateRegion()set Aw=truecall Eq('H00I')loopexitwhen x>5if(Ac[x]!=AH)thencall Er(Ac[x])set ab[GetPlayerId(Ac[x])]=trueset j[GetPlayerId(Ac[x])]=trueendifif(AC[x]!=AH)thencall Er(AC[x])set ab[GetPlayerId(AC[x])]=trueset j[GetPlayerId(AC[x])]=trueendifset x=x+1endloopcall RegionAddRect(r,bj_mapInitialPlayableArea)call TriggerRegisterEnterRegion(t,r,null)call TriggerAddAction(t,function LX)endfunctionfunction lo takes nothing returns nothinglocal integer ERlocal integer Esset Au=trueset ER=1set Es=eLloopexitwhen ER>Escall Eq(el[ER])set ER=ER+1endloopset ER=1set Es=eKloopexitwhen ER>Escall Eq(ek[ER])set ER=ER+1endloopendfunctionfunction lp takes nothing returns nothinglocal integer ERlocal integer Esset Av=trueset ER=1set Es=eLloopexitwhen ER>Escall Eq(el[ER])set ER=ER+1endloopset ER=1set Es=eJloopexitwhen ER>Escall Eq(ej[ER])set ER=ER+1endloopendfunctionfunction lO takes nothing returns nothinglocal integer ERlocal integer Esset AU=trueset ER=1set Es=eJloopexitwhen ER>Escall Eq(ej[ER])set ER=ER+1endloopset ER=1set Es=eKloopexitwhen ER>Escall Eq(ek[ER])set ER=ER+1endloopendfunctionfunction lu takes nothing returns nothingset v=trueendfunctionfunction LY takes nothing returns nothingcall SetPlayerState(Ac[1],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(Ac[1],PLAYER_STATE_RESOURCE_GOLD)+8)call SetPlayerState(Ac[2],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(Ac[2],PLAYER_STATE_RESOURCE_GOLD)+8)call SetPlayerState(Ac[3],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(Ac[3],PLAYER_STATE_RESOURCE_GOLD)+8)call SetPlayerState(Ac[4],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(Ac[4],PLAYER_STATE_RESOURCE_GOLD)+8)call SetPlayerState(Ac[5],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(Ac[5],PLAYER_STATE_RESOURCE_GOLD)+8)call SetPlayerState(AC[1],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(AC[1],PLAYER_STATE_RESOURCE_GOLD)+8)call SetPlayerState(AC[2],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(AC[2],PLAYER_STATE_RESOURCE_GOLD)+8)call SetPlayerState(AC[3],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(AC[3],PLAYER_STATE_RESOURCE_GOLD)+8)call SetPlayerState(AC[4],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(AC[4],PLAYER_STATE_RESOURCE_GOLD)+8)call SetPlayerState(AC[5],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(AC[5],PLAYER_STATE_RESOURCE_GOLD)+8)endfunctionfunction lV takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterTimerEvent(t,7,true)call TriggerAddAction(t,function LY)set ac=trueset eZ=tcall SetPlayerTechResearched(Ac[0],'R004',1)call SetPlayerTechResearched(AC[0],'R004',1)call SetPlayerHandicapXP(Ac[1],1.5)call SetPlayerHandicapXP(Ac[2],1.5)call SetPlayerHandicapXP(Ac[3],1.5)call SetPlayerHandicapXP(Ac[4],1.5)call SetPlayerHandicapXP(Ac[5],1.5)call SetPlayerHandicapXP(AC[1],1.5)call SetPlayerHandicapXP(AC[2],1.5)call SetPlayerHandicapXP(AC[3],1.5)call SetPlayerHandicapXP(AC[4],1.5)call SetPlayerHandicapXP(AC[5],1.5)endfunctionfunction lU takes nothing returns nothingset aC=truecall DisableTrigger(cv)endfunctionfunction lv takes nothing returns nothingset ad=truecall EnableTrigger(cq)endfunctionfunction Lz takes nothing returns nothinglocal string lJ=StringCase(GetEventPlayerChatString(),false)local boolean l7=lJ=="-random"local boolean LZ=lJ=="-repick"local boolean L0=lJ=="-gameinfo"local boolean L1=lJ=="-swaphero"local boolean L2=lJ=="-recreate"local boolean L3=lJ=="-unstuck"local boolean L4=lJ=="-matchup"or lJ=="-ma"local boolean L5=lJ=="-movespeed"or lJ=="-ms"local boolean Attackspeed=lJ=="-attackspeed"or lJ=="-as"local boolean L6=lJ=="-disablehelp"local boolean L7=lJ=="-enablehelp"local boolean L8=lJ=="-creepstats"or lJ=="-cs"local boolean L9=lJ=="-cson"or lJ=="-csoff"local boolean ma=lJ=="-hidemsg"local boolean mA=lJ=="-showmsg"local boolean mb=lJ=="-weather snow"or lJ=="-weather rain"or lJ=="-weather off"local boolean mB=lJ=="-showdeny"or lJ=="-hidedeny"local boolean mc=lJ=="-denyinfo"or lJ=="-di"call fQ("l7",l7)call fQ("LZ",LZ)call fQ("L0",L0)call fQ("L1",L1)call fQ("L2",L2)call fQ("L3",L3)call fQ("L4",L4)call fQ("L5",L5)call fQ("L6",L6)call fQ("L7",L7)call fQ("L8",L8)call fQ("L9",L9)call fQ("ma",ma)call fQ("mA",mA)call fQ("mb",mb)call fQ("mB",mB)call fQ("mc",mc)endfunctionfunction mC takes nothing returns booleanif A8==false thenreturn falseendifif ab[GetPlayerId(Az)] thenreturn falseendifif H==false thenreturn falseendifif ay[GetPlayerId(Az)]!=null and bA==false thenreturn falseendifif j[GetPlayerId(Az)] thenreturn falseendifif bb[GetPlayerId(Az)]and bA==false thenreturn falseendifif bA and bc[GetPlayerId(Az)]thenreturn falseendifreturn trueendfunctionfunction l7 takes nothing returns nothinglocal player EL=GetTriggerPlayer()set Az=ELif mC()and bC[GetPlayerId(EL)]==false thenset bC[GetPlayerId(EL)]=truecall Er(EL)call DisplayTimedTextToPlayer(EL,0,A6,10,"You will be given a random hero soon.")call PolledWait(6)set Az=ELif mC()thenset ab[GetPlayerId(EL)]=truecall fd(EL)elsecall DisplayTimedTextToPlayer(EL,0,A6,10,"You cannot be assigned a random hero.")endifendifendfunctionfunction md takes nothing returns nothinglocal unit fP=GetTriggerUnit()local player EL=GetOwningPlayer(fP)set Az=ELcall RemoveUnit(fP)if mC()and bC[GetPlayerId(EL)]==false thenset bC[GetPlayerId(EL)]=truecall Er(EL)call DisplayTimedTextToPlayer(EL,0,A6,10,"You will be given a random hero soon.")call PolledWait(6)set Az=ELif mC()thenset ab[GetPlayerId(EL)]=truecall fd(EL)elsecall DisplayTimedTextToPlayer(EL,0,A6,10,"You cannot be assigned a random hero.")endifendifendfunctionfunction Random_RandomIcon takes nothing returns nothingif GetUnitTypeId(GetTriggerUnit())=='E01L' thencall md()endifendfunctionfunction mD takes nothing returns booleanlocal unit fw=ay[GetPlayerId(GetTriggerPlayer())]if A9==false thenreturn falseendifif(j[GetPlayerId(GetTriggerPlayer())])thenreturn falseendifif(ay[GetPlayerId(GetTriggerPlayer())]==null)thenreturn falseendifif R or A0 or bA thenreturn falseendifif(bD)thencall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,A6,10,"Too late to repick.")return falseendifif(GetPlayerState(GetTriggerPlayer(),PLAYER_STATE_RESOURCE_GOLD)<aB)thencall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,A6,10,"Not enough gold to repick.")return falseendifif GetPlayerState(GetTriggerPlayer(),PLAYER_STATE_RESOURCE_GOLD)<350 and U or AW thencall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,A6,10,"Not enough gold to repick and buy a new hero.")return falseendifif GetUnitState(fw,UNIT_STATE_MANA)!=GetUnitState(fw,UNIT_STATE_MAX_MANA)or GetUnitState(fw,UNIT_STATE_LIFE)!=GetUnitState(fw,UNIT_STATE_MAX_LIFE)thencall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,A6,10,"You cannot repick without full hp and mana.")return falseendifreturn trueendfunctionfunction me takes nothing returns nothingif(IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO))thenif(GetUnitTypeId(GetEnumUnit())=='U006')thencall ExecuteFunc("HZ")endifcall FG(GetPlayersEnemies(GetTriggerPlayer()),10.,"An enemy player has repicked "+fG(GetEnumUnit())+".")endifif(GetUnitTypeId(GetEnumUnit())=='n004')thencall RemoveUnit(GetEnumUnit())endifif(GetUnitTypeId(GetEnumUnit())=='n018')thencall RemoveUnit(GetEnumUnit())endifif(GetUnitTypeId(GetEnumUnit())=='n01C')thencall RemoveUnit(GetEnumUnit())endifif(GetUnitTypeId(GetEnumUnit())=='n01G')thencall RemoveUnit(GetEnumUnit())endifendfunctionfunction mE takes nothing returns nothinglocal player EL=GetTriggerPlayer()local group EX=GetUnitsInRectOfPlayer(GetWorldBounds(),EL)local integer fDlocal integer felocal location fElocal unit RepickedUnitlocal integer E0local integer ERlocal integer Eslocal unit mflocal location lw=GetRectCenter(bs)local location lW=GetRectCenter(bR)if(EJ(EL))thenset fD=ehset fe=eHset fE=GetRectCenter(bs)elseset fD=eiset fe=eIset fE=GetRectCenter(bR)endifif S thenif(GetRandomInt(1,2)==1)thenset fD=ehset fe=eHelseset fD=eiset fe=eIendifendifif U or AW thenset aB='d'endifset mf=EC(e4(GetTriggerPlayer()),"ChargeUnit")if mf!=null and GetUnitTypeId(mf)=='e00C'thencall RemoveUnit(mf)endifcall AdjustPlayerStateBJ(-1*aB,EL,PLAYER_STATE_RESOURCE_GOLD)set j[GetPlayerId(EL)]=truecall ForGroup(EX,function me)call fV(ay[GetPlayerId(EL)])set ay[GetPlayerId(GetTriggerPlayer())]=nullif U or AW thencall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,60,"You can now pick a new hero.")if U thenset ER=ehset Es=eIendifif EJ(EL)thenif AW thenset ER=ehset Es=eHelsecall CreateUnitAtLoc(EL,'n00C',lW,bj_UNIT_FACING)endifcall PanCameraToTimedLocForPlayer(EL,lw,0)elseif AW thenset ER=eiset Es=eIelsecall CreateUnitAtLoc(EL,'n00C',lw,bj_UNIT_FACING)endifcall PanCameraToTimedLocForPlayer(EL,lW,0)endifloopexitwhen ER>Esif B[ER]==false thencall SetPlayerTechMaxAllowed(EL,eg[ER],1)endifset ER=ER+1endloopcall RemoveLocation(lw)call RemoveLocation(lW)returnendifloopcall PolledWait(.01)set E0=GetRandomInt(fD,fe)if(B[E0]==false)thenset B[E0]=trueset ay[GetPlayerId(EL)]=CreateUnitAtLoc(EL,eg[E0],fE,bj_UNIT_FACING)call Eq(eg[E0])endifexitwhen ay[GetPlayerId(GetTriggerPlayer())]!=nullendloopcall DestroyGroup(EX)call RemoveLocation(fE)call RemoveLocation(lw)call RemoveLocation(lW)endfunctionfunction LZ takes nothing returns nothingif mD()thencall mE()endifendfunctionfunction L0 takes nothing returns nothinglocal player EL=GetTriggerPlayer()local string mF="|c006699CC"if aY thencall DisplayTimedTextToPlayer(EL,0,A6,20,mF+"League Mode"+"|r:      Both Sides will take turns picking heroes.")endifif R thencall DisplayTimedTextToPlayer(EL,0,A6,20,mF+"Death Match"+"|r:        When you die, you must pick a new hero.")call DisplayTimedTextToPlayer(EL,0,A6,20,"                              You will lose when your team uses up all "+I2S(f1(eH,eI-ei+1))+" heroes.")endifif As thencall DisplayTimedTextToPlayer(EL,0,A6,20,mF+"Mirror Match"+"|r:       After one minute, each team will have the same heroes.")endifif U thencall DisplayTimedTextToPlayer(EL,0,A6,20,mF+"All Pick"+"|r:                 You may pick a hero from any tavern.")endifif bH thencall DisplayTimedTextToPlayer(EL,0,A6,20,mF+"Random Draft"+"|r:                 You may pick a hero draft style from the heroes available.")endifif S thencall DisplayTimedTextToPlayer(EL,0,A6,20,mF+"All Random"+"|r:          You will be given a random hero from any tavern.")endifif A0 thencall DisplayTimedTextToPlayer(EL,0,A6,20,mF+"Vote Random"+"|r:         You will be given a random hero from the voted groupset.")endifif T thencall DisplayTimedTextToPlayer(EL,0,A6,20,mF+"Team Random"+"|r:     You will be given a random hero from your taverns.")endifif bA thencall DisplayTimedTextToPlayer(EL,0,A6,20,mF+"Reverse"+"|r:                 You pick a hero for your opponent.")endifif Ae thencall DisplayTimedTextToPlayer(EL,0,A6,20,mF+"Shuffle Players"+"|r:     All players will be shuffled across both sides.")endifif Au thencall DisplayTimedTextToPlayer(EL,0,A6,20,mF+"All Agility"+"|r:             Only Agility heroes will be allowed.")endifif Av thencall DisplayTimedTextToPlayer(EL,0,A6,20,mF+"All Strength"+"|r:         Only Strength heroes will be allowed.")endifif AU thencall DisplayTimedTextToPlayer(EL,0,A6,20,mF+"All Intelligence"+"|r:    Only Intellgence heroes will be allowed.")endifif At thencall DisplayTimedTextToPlayer(EL,0,A6,20,mF+"Duplicate Mode"+"|r:   The same heroes may be picked or randomed multiple times.")endifif v thencall DisplayTimedTextToPlayer(EL,0,A6,20,mF+"Item Drop"+"|r:             When you die, a random inventory slot will drop an item.")endifif aC thencall DisplayTimedTextToPlayer(EL,0,A6,20,mF+"No Powerups"+"|r:        Powerups are disabled.")endifif ad thencall DisplayTimedTextToPlayer(EL,0,A6,20,mF+"Super Creeps"+"|r:        Siege Golems, Scary Fish, and Ancient Hydras")call DisplayTimedTextToPlayer(EL,0,A6,20,"                             can spawn randomly with creep spawns.")endifif ac thencall DisplayTimedTextToPlayer(EL,0,A6,20,mF+"Easy Mode"+"|r:           Towers are weaker. Heroes gain more xp and gold.")endifif Aw thencall DisplayTimedTextToPlayer(EL,0,A6,20,mF+"Same Hero"+"|r:           All players will be given the same hero that "+GetPlayerName(AH)+"|r"+" has.")endifendfunctionfunction mg takes nothing returns nothingif(GetUnitTypeId(GetEnumUnit())=='n004')thencall RemoveUnit(GetEnumUnit())endifif(GetUnitTypeId(GetEnumUnit())=='o003')thencall RemoveUnit(GetEnumUnit())endifendfunctionfunction mG takes nothing returns nothinglocal player Me=GetTriggerPlayer()local player mh=Ed(e4(GetTriggeringTrigger()),"ToSwapTo")call DisplayTimedTextToPlayer(mh,0,0,20,GetPlayerName(Me)+" has declined your request to swap heroes.")endfunctionfunction mH takes nothing returns nothinglocal player Me=GetTriggerPlayer()local player mh=Ed(e4(GetTriggeringTrigger()),"ToSwapTo")local unit mi=ay[GetPlayerId(Me)]local unit mI=ay[GetPlayerId(mh)]local unit mj=CreateUnit(Me,'e01F',0,0,0)local group EX=GetUnitsInRectOfPlayer(GetWorldBounds(),Me)if mi==null or mI==null thencall PolledWait(2)set mi=ay[GetPlayerId(Me)]set mI=ay[GetPlayerId(mh)]endifcall ForGroup(EX,function mg)call DestroyGroup(EX)set EX=GetUnitsInRectOfPlayer(GetWorldBounds(),mh)call ForGroup(EX,function mg)call DestroyGroup(EX)call UnitAddItem(mj,UnitItemInSlot(mI,0))call UnitAddItem(mj,UnitItemInSlot(mI,1))call UnitAddItem(mj,UnitItemInSlot(mI,2))call UnitAddItem(mj,UnitItemInSlot(mI,3))call UnitAddItem(mj,UnitItemInSlot(mI,4))call UnitAddItem(mj,UnitItemInSlot(mI,5))call UnitAddItem(mI,UnitItemInSlot(mi,0))call UnitAddItem(mI,UnitItemInSlot(mi,1))call UnitAddItem(mI,UnitItemInSlot(mi,2))call UnitAddItem(mI,UnitItemInSlot(mi,3))call UnitAddItem(mI,UnitItemInSlot(mi,4))call UnitAddItem(mI,UnitItemInSlot(mi,5))call UnitAddItem(mi,UnitItemInSlot(mj,0))call UnitAddItem(mi,UnitItemInSlot(mj,1))call UnitAddItem(mi,UnitItemInSlot(mj,2))call UnitAddItem(mi,UnitItemInSlot(mj,3))call UnitAddItem(mi,UnitItemInSlot(mj,4))call UnitAddItem(mi,UnitItemInSlot(mj,5))call RemoveUnit(mj)call SetUnitOwner(mI,Me,true)call SetUnitOwner(mi,mh,true)set ay[GetPlayerId(Me)]=mIset ay[GetPlayerId(mh)]=micall ClearSelectionForPlayer(Me)call SelectUnitAddForPlayer(mI,Me)call ClearSelectionForPlayer(mh)call SelectUnitAddForPlayer(mi,mh)endfunctionfunction mJ takes nothing returns nothinglocal player EL=GetTriggerPlayer()local string f8=e4(EL)local player mk=Ed(f8,"SwapHeroWithPlayer")local dialog mK=DialogCreate()local button mllocal unit fw=ay[GetPlayerId(EL)]local trigger mLlocal button mmlocal trigger mMcall DialogSetMessage(mK,"Swap with "+GetPlayerName(EL)+" ("+fG(fw)+")")set mm=DialogAddButton(mK,"No",0)set mM=CreateTrigger()call TriggerRegisterDialogButtonEvent(mM,mm)call TriggerAddAction(mM,function mG)call e7(e4(mM),"ToSwapTo",EL)set ml=DialogAddButton(mK,"Yes",1)set mL=CreateTrigger()call TriggerRegisterDialogButtonEvent(mL,ml)call TriggerAddAction(mL,function mH)call e7(e4(mL),"ToSwapTo",EL)call DialogDisplay(mk,mK,true)call PolledWait(20)call DialogDisplay(mk,mK,false)call PolledWait(1)call DialogDestroy(mK)endfunctionfunction mn takes nothing returns nothingcall e7(e4(GetTriggerPlayer()),"SwapHeroWithPlayer",Ac[1])call mJ()endfunctionfunction mN takes nothing returns nothingcall e7(e4(GetTriggerPlayer()),"SwapHeroWithPlayer",Ac[2])call mJ()endfunctionfunction mo takes nothing returns nothingcall e7(e4(GetTriggerPlayer()),"SwapHeroWithPlayer",Ac[3])call mJ()endfunctionfunction mO takes nothing returns nothingcall e7(e4(GetTriggerPlayer()),"SwapHeroWithPlayer",Ac[4])call mJ()endfunctionfunction mp takes nothing returns nothingcall e7(e4(GetTriggerPlayer()),"SwapHeroWithPlayer",Ac[5])call mJ()endfunctionfunction mP takes nothing returns nothingcall e7(e4(GetTriggerPlayer()),"SwapHeroWithPlayer",AC[1])call mJ()endfunctionfunction mq takes nothing returns nothingcall e7(e4(GetTriggerPlayer()),"SwapHeroWithPlayer",AC[2])call mJ()endfunctionfunction mQ takes nothing returns nothingcall e7(e4(GetTriggerPlayer()),"SwapHeroWithPlayer",AC[3])call mJ()endfunctionfunction mr takes nothing returns nothingcall e7(e4(GetTriggerPlayer()),"SwapHeroWithPlayer",AC[4])call mJ()endfunctionfunction mR takes nothing returns nothingcall e7(e4(GetTriggerPlayer()),"SwapHeroWithPlayer",AC[5])call mJ()endfunctionfunction ms takes nothing returns nothingcall Ec(e4(GetTriggerPlayer()),"AlreadySwapped",false)endfunctionfunction mS takes nothing returns nothinglocal player EL=GetTriggerPlayer()local player mklocal dialog mK=DialogCreate()local button mllocal integer ER=1local trigger array mtcall Ec(e4(GetTriggerPlayer()),"AlreadySwapped",true)set mt[1]=CreateTrigger()call TriggerAddAction(mt[1],function mn)set mt[2]=CreateTrigger()call TriggerAddAction(mt[2],function mN)set mt[3]=CreateTrigger()call TriggerAddAction(mt[3],function mo)set mt[4]=CreateTrigger()call TriggerAddAction(mt[4],function mO)set mt[5]=CreateTrigger()call TriggerAddAction(mt[5],function mp)set mt[6]=CreateTrigger()call TriggerAddAction(mt[6],function mP)set mt[7]=CreateTrigger()call TriggerAddAction(mt[7],function mq)set mt[8]=CreateTrigger()call TriggerAddAction(mt[8],function mQ)set mt[9]=CreateTrigger()call TriggerAddAction(mt[9],function mr)set mt[10]=CreateTrigger()call TriggerAddAction(mt[10],function mR)set ml=DialogAddButton(mK,"Cancel",0)set mt[0]=CreateTrigger()call TriggerRegisterDialogButtonEvent(mt[0],ml)call TriggerAddAction(mt[0],function ms)if EJ(EL)thenloopexitwhen ER>5if(EL!=Ac[ER]and El(Ac[ER])and ay[GetPlayerId(Ac[ER])]!=null)thenset ml=DialogAddButton(mK,I[GetPlayerId(Ac[ER])]+GetPlayerName(Ac[ER])+"|r - "+fG(ay[GetPlayerId(Ac[ER])]),0)call TriggerRegisterDialogButtonEvent(mt[ER],ml)endifset ER=ER+1endloopelseloopexitwhen ER>5if(EL!=AC[ER]and El(AC[ER])and ay[GetPlayerId(AC[ER])]!=null)thenset ml=DialogAddButton(mK,I[GetPlayerId(AC[ER])]+GetPlayerName(AC[ER])+"|r - "+fG(ay[GetPlayerId(AC[ER])]),0)call TriggerRegisterDialogButtonEvent(mt[5+ER],ml)endifset ER=ER+1endloopendifcall DialogSetMessage(mK,"Pick the player to swap with")call DialogDisplay(EL,mK,true)call PolledWait(10)call DialogDisplay(EL,mK,false)call PolledWait(1)call DialogDestroy(mK)endfunctionfunction mT takes player Eu returns booleanlocal integer ER=1local integer mu=0loopexitwhen ER>5if EJ(Eu)thenif ay[GetPlayerId(Ac[ER])]!=null and Ac[ER]!=Eu thenset mu=mu+1endifelseif ay[GetPlayerId(AC[ER])]!=null and AC[ER]!=Eu thenset mu=mu+1endifendifset ER=ER+1endloopif mu>0 thenreturn trueelsereturn falseendifendfunctionfunction mU takes nothing returns booleanif AN and aY==false and bH==false thencall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,A6,10,"You cannot use -swaphero after 90 seconds have elapsed.")return falseendifif GetUnitState(ay[GetPlayerId(GetTriggerPlayer())],UNIT_STATE_LIFE)<1 thencall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,A6,10,"You must have a living hero in order to swap with someone.")return falseendifif EI(e4(GetTriggerPlayer()),"AlreadySwapped")thencall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,A6,10,"You can only initiate a swap request once.")return falseendifif(aY and a2)or(bH and bi)thencall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,A6,10,"Too late to use -swaphero.")return falseendifif mT(GetTriggerPlayer())==false thencall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,A6,10,"No hero available to swap with.")return falseendifreturn trueendfunctionfunction L1 takes nothing returns nothingif mU()thencall mS()endifendfunctionfunction mv takes nothing returns booleanreturn GetSpellAbilityId()=='A0FI'endfunctionfunction mV takes integer mw,unit mW,unit mx returns nothinglocal integer ER=1local integer Es=GetUnitAbilityLevel(mW,mw)loopexitwhen ER>Escall SelectHeroSkill(mx,mw)set ER=ER+1endloopendfunctionfunction mX takes nothing returns nothinglocal integer ERlocal integer Eslocal unit mylocal location iG=GetUnitLoc(GetTriggerUnit())set my=CreateUnitAtLoc(GetOwningPlayer(GetTriggerUnit()),GetUnitTypeId(GetTriggerUnit()),iG,bj_UNIT_FACING)call SetHeroXP(my,GetHeroXP(GetTriggerUnit()),false)set ER=1set Es=GetUnitAbilityLevel(GetTriggerUnit(),'Aamk')loopexitwhen ER>Escall SelectHeroSkill(bj_lastCreatedUnit,'Aamk')set ER=ER+1endloopset ER=0set Es=5loopexitwhen ER>Escall UnitAddItem(my,UnitItemInSlot(GetTriggerUnit(),ER))set ER=ER+1endloopif(GetUnitTypeId(GetTriggerUnit())=='Eevi')thencall mV('A04L',GetTriggerUnit(),my)call mV('A0H4',GetTriggerUnit(),my)call mV('AEvi',GetTriggerUnit(),my)call mV('A07Q',GetTriggerUnit(),my)endifif(GetUnitTypeId(GetTriggerUnit())=='U008')thencall mV('A03D',GetTriggerUnit(),my)call mV('A02G',GetTriggerUnit(),my)call mV('A03E',GetTriggerUnit(),my)call mV('A093',GetTriggerUnit(),my)endifif(GetUnitTypeId(GetTriggerUnit())=='U007')thencall mV('A0F9',GetTriggerUnit(),my)call mV('A06Y',GetTriggerUnit(),my)call mV('A01E',GetTriggerUnit(),my)call mV('A028',GetTriggerUnit(),my)endifif(GetUnitTypeId(GetTriggerUnit())=='Hlgr')thencall mV('A03G',GetTriggerUnit(),my)call mV('A03F',GetTriggerUnit(),my)call mV('A0O3',GetTriggerUnit(),my)call mV('AEim',GetTriggerUnit(),my)endifif(GetUnitTypeId(GetTriggerUnit())=='Ekee')thencall mV('A035',GetTriggerUnit(),my)call mV('A06W',GetTriggerUnit(),my)call mV('A06V',GetTriggerUnit(),my)call mV('A06X',GetTriggerUnit(),my)endifcall fV(GetTriggerUnit())call RemoveLocation(iG)set ay[GetPlayerId(GetOwningPlayer(my))]=myendfunctionfunction mY takes nothing returns booleanlocal integer Ly=GetUnitTypeId(ay[GetPlayerId(GetTriggerPlayer())])return(Ly=='U008'or Ly=='U007'or Ly=='Hlgr'or Ly=='Eevi'or Ly=='Ekee')and(RectContainsUnit(BA,ay[GetPlayerId(GetTriggerPlayer())])or RectContainsUnit(Bb,ay[GetPlayerId(GetTriggerPlayer())]))endfunctionfunction mz takes nothing returns nothinglocal unit fw=ay[GetPlayerId(GetTriggerPlayer())]call UnitAddAbility(fw,'A0FI')call IssueImmediateOrderById(fw,852663)call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,A6,120.,"|c00ff0303"+"Recreate is being performed on "+fG(GetEnumUnit())+". Please wait about 2 minutes"+"|r")endfunctionfunction L2 takes nothing returns nothingif mY()thencall mz()endifendfunctionfunction mZ takes nothing returns booleanreturn GetSpellAbilityId()=='A0AT'endfunctionfunction m0 takes nothing returns nothinglocal location iGif(EJ(GetOwningPlayer(GetTriggerUnit())))thenset iG=GetRectCenter(bp)elseset iG=GetRectCenter(bL)endifcall SetUnitPositionLoc(GetTriggerUnit(),iG)call RemoveLocation(iG)endfunctionfunction L3 takes nothing returns nothinglocal unit fw=ay[GetPlayerId(GetTriggerPlayer())]call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,A6,30.,"You are using unstuck. You will be sent to your base in 60 seconds.")call UnitAddAbility(fw,'A0AT')call IssueImmediateOrderById(fw,852072)endfunctionfunction L4 takes nothing returns nothinglocal integer ER=1local integer Es=5local integer fZif(EK(GetTriggerPlayer()))thenloopexitwhen ER>Esset fZ=GetPlayerId(Ac[ER])if(ay[fZ]!=null)thencall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,A6,20,I[fZ]+GetPlayerName(Ac[ER])+"|r controls "+GetUnitName(ay[fZ])+" (Level "+I2S(GetUnitLevel(ay[fZ]))+")")endifset ER=ER+1endloopelseloopexitwhen ER>Esset fZ=GetPlayerId(AC[ER])if(ay[fZ]!=null)thencall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,A6,20,I[fZ]+GetPlayerName(AC[ER])+"|r controls "+GetUnitName(ay[fZ])+" (Level "+I2S(GetUnitLevel(ay[fZ]))+")")endifset ER=ER+1endloopendifendfunctionfunction L5 takes nothing returns nothingif(ay[GetPlayerId(GetTriggerPlayer())]==null)thencall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,A6,10.,"No Hero is selected")elsecall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,A6,10.,GetUnitName(ay[GetPlayerId(GetTriggerPlayer())])+" movespeed is "+I2S(R2I(GetUnitMoveSpeed(ay[GetPlayerId(GetTriggerPlayer())]))))endifendfunctionfunction m1 takes unit fw returns realreturn .0endfunctionfunction m2 takes integer ID returns realif ID=='Edem'thenreturn 1.45endifif ID=='Hvwd'thenreturn 1.77endifif ID=='Eevi'thenreturn 1.5endifif ID=='Eevm'thenreturn 1.6endifif ID=='N01H'thenreturn 1.45endifif ID=='N01T'thenreturn 1.35endifif ID=='N01J'thenreturn 1.25endifif ID=='N014'or ID=='N013'or ID=='N015'thenreturn 1.6endifif ID=='N017'thenreturn 1.55endifreturn 1.7endfunctionfunction Attackspeed takes nothing returns nothinglocal real m3local real m4local real ASlocal unit fw=ay[GetPlayerId(GetTriggerPlayer())]if fw==null thencall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,A6,10.,"No Hero is selected")returnendifset m4=m2(GetUnitTypeId(fw))set m3=GetHeroAgi(fw,true)+m1(fw)set AS=(1+m3)/m4call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,A6,10.,fG(fw)+" attackspeed is "+R2S(AS)+" attacks per second ("+R2S(1/AS)+" seconds per attack)")endfunctionfunction L6 takes nothing returns nothingcall Ec(e4(GetTriggerPlayer()),"L6",true)call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,A6,10,"Disallowing help from certain abilities.")endfunctionfunction L7 takes nothing returns nothingcall Ec(e4(GetTriggerPlayer()),"L6",false)call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,A6,10,"Allowing help from certain abilities.")endfunctionfunction L8 takes nothing returns nothingcall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,A6,10.,"   Creeps Killed: "+I2S(a7[GetPlayerId(GetTriggerPlayer())])+" Creeps Denied: "+I2S(a8[GetPlayerId(GetTriggerPlayer())]))endfunctionfunction L9 takes nothing returns nothingif(GetEventPlayerChatString()=="-cson")thencall LeaderboardDisplay(AE[GetPlayerId(GetTriggerPlayer())],true)elsecall LeaderboardDisplay(AE[GetPlayerId(GetTriggerPlayer())],false)endifendfunctionfunction mB takes nothing returns nothingif(GetEventPlayerChatString()=="-showdeny")thenset e0[GetPlayerId(GetTriggerPlayer())]=trueelseset e0[GetPlayerId(GetTriggerPlayer())]=falseendifendfunctionfunction mc takes nothing returns nothingset e0[GetPlayerId(GetTriggerPlayer())]=truecall LeaderboardDisplay(AE[GetPlayerId(GetTriggerPlayer())],true)endfunctionfunction ma takes nothing returns nothingcall ForceRemovePlayer(A4,GetTriggerPlayer())call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,A6,10,"You are now hiding messages.")endfunctionfunction mA takes nothing returns nothingcall ForceAddPlayer(A4,GetTriggerPlayer())call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,A6,10,"You are now showing messages.")endfunctionfunction mb takes nothing returns nothinglocal string lJ=StringCase(GetEventPlayerChatString(),false)if bE thenreturnendifif GetTriggerPlayer()==AH and lJ=="-weather snow"thencall EnableWeatherEffect(bf,true)call EnableWeatherEffect(bF,false)endifif GetTriggerPlayer()==AH and lJ=="-weather rain"thencall EnableWeatherEffect(bf,false)call EnableWeatherEffect(bF,true)endifif lJ=="-weather off"thencall EnableWeatherEffect(bf,false)call EnableWeatherEffect(bF,false)set bE=trueendifendfunctionfunction m5 takes nothing returns booleanreturn GetUnitAbilityLevel(GetKillingUnit(),'A0O3')>0 and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit()))and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitIllusion(GetTriggerUnit())==falseendfunctionfunction m6 takes nothing returns nothinglocal unit fP=GetKillingUnit()local unit iJ=GetTriggerUnit()local string f8=e4(fP)local integer m7=EH(f8,"PreviousKills")local integer m8=GetUnitAbilityLevel(fP,'A0O3')local texttag m9=CreateTextTag()local integer Ma=m7*2local integer MA=f1(Ma+m8*2,20)call Ea(f8,"PreviousKills",m7+1)call SetTextTagText(m9,"+"+I2S(MA),.023)call SetTextTagPosUnit(m9,iJ,0)call SetTextTagColor(m9,230,214,0,0)call SetTextTagVelocityBJ(m9,64,90)call SetPlayerState(GetOwningPlayer(fP),PLAYER_STATE_RESOURCE_GOLD,MA+GetPlayerState(GetOwningPlayer(fP),PLAYER_STATE_RESOURCE_GOLD))if(GetLocalPlayer()!=GetOwningPlayer(fP))thencall SetTextTagVisibility(m9,false)endifcall PolledWait(1)call DestroyTextTag(m9)call PolledWait(18)call Ea(f8,"PreviousKills",EH(f8,"PreviousKills")-1)endfunctionfunction HF takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(t,Condition(function m5))call TriggerAddAction(t,function m6)endfunctionfunction Mb takes nothing returns booleanreturn GetSpellAbilityId()=='A0J6'endfunctionfunction MB takes nothing returns nothinglocal trigger t=GetTriggeringTrigger()local string f8local unit fwlocal unit Fdlocal unit Jzlocal integer m8=f2(GetTriggerExecCount(t)-1,1)if GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST thenset f8=e4(t)set fw=EC(f8,"Hero")set Fd=EC(f8,"Target")call e5(f8)set Jz=CreateUnit(GetOwningPlayer(fw),'e00C',GetUnitX(fw),GetUnitY(fw),0)call UnitAddAbility(Jz,'A0JD')call SetUnitAbilityLevel(Jz,'A0JD',m8)call IssueTargetOrderById(Jz,852095,Fd)call UnitAddAbility(Jz,'Aloc')call UnitApplyTimedLife(Jz,'BTLF',2)call Fj(t)endifendfunctionfunction Mc takes nothing returns nothinglocal unit fw=GetTriggerUnit()local unit Fd=GetSpellTargetUnit()local trigger t=CreateTrigger()local string f8=e4(t)call TriggerRegisterUnitEvent(t,fw,EVENT_UNIT_SPELL_ENDCAST)call TriggerRegisterTimerEvent(t,.5,true)call TriggerAddAction(t,function MB)call e7(f8,"Hero",fw)call e7(f8,"Target",Fd)endfunctionfunction Hg takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddAction(t,function Mc)call TriggerAddCondition(t,Condition(function Mb))call fT('A0JD')endfunctionfunction MC takes nothing returns booleanreturn GetSpellAbilityId()=='A0IL'endfunctionfunction Md takes nothing returns booleanreturn IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(Ai))and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0endfunctionfunction MD takes nothing returns nothingcall UnitDamageTarget(Ai,GetEnumUnit(),AJ,true,true,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)endfunctionfunction ME takes nothing returns nothinglocal timer t=GetExpiredTimer()local string f8=e4(t)local unit fw=EC(f8,"Hero")local unit Jz=EC(f8,"Caster")local integer Mf=EH(f8,"Counter")local real x=GetUnitX(Jz)local real y=GetUnitY(Jz)local boolexpr Eylocal group EXif Mf>12 thencall KillUnit(Jz)call PauseTimer(t)call e5(f8)call DestroyTimer(t)elseset Ai=fwset AJ=GetUnitAbilityLevel(fw,'A0IL')*8set Ey=Condition(function Md)set EX=CreateGroup()call GroupEnumUnitsInRange(EX,x,y,700,Ey)call ForGroup(EX,function MD)call DestroyGroup(EX)call DestroyBoolExpr(Ey)set Mf=Mf+1call Ea(f8,"Counter",Mf)endifendfunctionfunction MF takes nothing returns nothinglocal unit fw=GetTriggerUnit()local location iG=GetSpellTargetLoc()local real x=GetLocationX(iG)local real y=GetLocationY(iG)local unit Jz=CreateUnit(GetOwningPlayer(fw),'e01E',x,y,0)local timer t=CreateTimer()local string f8=e4(t)call RemoveLocation(iG)call UnitAddAbility(Jz,'A0J4')call SetUnitAbilityLevel(Jz,'A0J4',GetUnitAbilityLevel(fw,'A0IL'))call UnitAddAbility(Jz,'Aloc')call e7(f8,"Hero",fw)call e7(f8,"Caster",Jz)call Ea(f8,"Counter",0)call TimerStart(t,1,true,function ME)endfunctionfunction HG takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddAction(t,function MF)call TriggerAddCondition(t,Condition(function MC))call fT('A0J4')endfunctionfunction Mg takes nothing returns booleanreturn GetSpellAbilityId()=='A0E3'endfunctionfunction MG takes nothing returns nothinglocal unit fP=GetTriggerUnit()local unit Fd=GetSpellTargetUnit()local integer m8=GetUnitAbilityLevel(fP,'A0E3')local real Fa=(m8*.25+.35)*(GetUnitState(Fd,UNIT_STATE_MAX_MANA)-GetUnitState(Fd,UNIT_STATE_MANA))call UnitDamageTargetBJ(fP,Fd,Fa,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)endfunctionfunction gN takes nothing returns nothingset cX=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(cX,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(cX,Condition(function Mg))call TriggerAddAction(cX,function MG)endfunctionfunction Mh takes nothing returns booleanreturn GetUnitAbilityLevel(GetAttacker(),'A0O0')>0 and EI(e4(GetAttacker()),"BeastRage|Wait")==false and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==falseendfunctionfunction MH takes nothing returns nothinglocal unit KJ=GetAttacker()local unit Fd=GetTriggerUnit()local string f8=e4(KJ)local unit Mi=EC(f8,"BeastRage|PreviousTarget")local integer Mf=f2(EH(f8,"BeastRage|Counter"),0)local integer m8=GetUnitAbilityLevel(KJ,'A0O0')if Mi!=Fd thenset Mf=Mf/2elseset Mf=f1(Mf+1,21)endifcall fW(KJ,'A0NZ',Mf*m8)call Ea(f8,"BeastRage|Counter",Mf)call e7(f8,"BeastRage|PreviousTarget",Fd)call Ec(f8,"BeastRage|Wait",true)call PolledWait(.4)call Ec(f8,"BeastRage|Wait",false)endfunctionfunction go takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(t,Condition(function Mh))call TriggerAddAction(t,function MH)call fT('A0NZ')endfunctionfunction MI takes nothing returns booleanreturn GetSpellAbilityId()=='A0OO'endfunctionfunction Mj takes nothing returns nothingif(GetUnitTypeId(GetEnumUnit())=='n01Q'or GetUnitTypeId(GetEnumUnit())=='n01M'or GetUnitTypeId(GetEnumUnit())=='n01R'or GetUnitTypeId(GetEnumUnit())=='n01S')thencall KillUnit(GetEnumUnit())endifendfunctionfunction MJ takes nothing returns nothinglocal unit fP=GetTriggerUnit()local player EL=GetOwningPlayer(fP)local integer m8=GetUnitAbilityLevel(fP,'A0OO')local real x=GetUnitX(fP)local real y=GetUnitY(fP)local group EX=CreateGroup()call GroupEnumUnitsOfPlayer(EX,EL,null)call ForGroup(EX,function Mj)call DestroyGroup(EX)call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl",x,y))if(m8==1)thencall UnitApplyTimedLife(CreateUnit(EL,'n01Q',x,y,270),'BTLF',60)elseif(m8==2)thencall UnitApplyTimedLife(CreateUnit(EL,'n01Q',x,y,270),'BTLF',70)call UnitApplyTimedLife(CreateUnit(EL,'n01M',x,y,270),'BTLF',70)elseif(m8==3)thencall UnitApplyTimedLife(CreateUnit(EL,'n01R',x,y,270),'BTLF',80)call UnitApplyTimedLife(CreateUnit(EL,'n01M',x,y,270),'BTLF',80)elseif(m8==4)thencall UnitApplyTimedLife(CreateUnit(EL,'n01R',x,y,270),'BTLF',90)call UnitApplyTimedLife(CreateUnit(EL,'n01S',x,y,270),'BTLF',90)endifendfunctionfunction gP takes nothing returns nothingset cy=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(cy,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(cy,Condition(function MI))call TriggerAddAction(cy,function MJ)endfunctionfunction Mk takes nothing returns integerreturn'A0O2'endfunctionfunction MK takes nothing returns integerreturn'o00Y'endfunctionfunction Ml takes nothing returns integerreturn'A0NY'endfunctionfunction ML takes nothing returns stringreturn"thunderclap"endfunctionfunction Mm takes nothing returns realreturn 250.endfunctionfunction Mn takes nothing returns booleanreturn(GetSpellAbilityId()==Mk())endfunctionfunction MN takes nothing returns booleanlocal unit Mo=GetFilterUnit()if((IsUnitType(Mo,UNIT_TYPE_STRUCTURE)==false)and(IsUnitType(Mo,UNIT_TYPE_DEAD)==false)and(IsUnitType(Mo,UNIT_TYPE_FLYING)==false)and(Mo!=GetSpellTargetUnit())and(Mo!=GetTriggerUnit())and GetUnitAbilityLevel(Mo,'A04R')==0)thenif(IsUnitEnemy(Mo,GetOwningPlayer(GetTriggerUnit())))thenset Mo=nullreturn trueendifif(IsUnitType(Mo,UNIT_TYPE_HERO)==false)thenset Mo=nullreturn trueendifendifreturn falseendfunctionfunction MO takes nothing returns nothinglocal string f8=e4(GetExpiredTimer())local group Mp=EE(f8,"pbgroup")local group g=CreateGroup()local location MP=Eg(f8,"castloc")local real Mq=Ei(f8,"castangle")local unit MQlocal location Mrlocal real Mslocal location MSlocal effect ecall GroupAddGroup(Mp,g)set MQ=FirstOfGroup(g)loopexitwhen MQ==nullset Mr=GetUnitLoc(MQ)set Ms=AngleBetweenPoints(MP,Mr)if(SinBJ(Ms-Mq)<0)thenset MS=PolarProjectionBJ(Mr,20,Mq-90)call SetUnitPositionLoc(MQ,MS)call SetUnitFacingTimed(MQ,Mq+90,.3)elseset MS=PolarProjectionBJ(Mr,20,Mq+90)call SetUnitPositionLoc(MQ,MS)call SetUnitFacingTimed(MQ,Mq-90,.3)endifset e=AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",MQ,"origin")call DestroyEffect(e)call RemoveLocation(Mr)call RemoveLocation(MS)call GroupRemoveUnit(g,MQ)set MQ=FirstOfGroup(g)endloopcall DestroyGroup(g)endfunctionfunction Mt takes nothing returns nothingif IsUnitEnemy(GetEnumUnit(),GetOwningPlayer(Ai))thencall UnitDamageTarget(Ai,GetEnumUnit(),AJ,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)endifendfunctionfunction MT takes nothing returns nothinglocal unit Mu=GetTriggerUnit()local integer MU=GetUnitAbilityLevel(Mu,Mk())local location MP=GetUnitLoc(Mu)local unit fm=GetSpellTargetUnit()local location Mv=GetUnitLoc(fm)local real MV=AngleBetweenPoints(MP,Mv)local location Mw=PolarProjectionBJ(MP,50,MV)local unit MW=CreateUnitAtLoc(GetOwningPlayer(Mu),MK(),Mw,MV)local location Mx=PolarProjectionBJ(MP,250,MV)local unit MX=CreateUnitAtLoc(GetOwningPlayer(Mu),MK(),Mx,MV)local location My=PolarProjectionBJ(MP,450,MV)local unit MY=CreateUnitAtLoc(GetOwningPlayer(Mu),MK(),My,MV)local group g=GetUnitsInRangeOfLocMatching(Mm(),Mw,Condition(function MN))local group Mz=GetUnitsInRangeOfLocMatching(Mm(),Mx,Condition(function MN))local group DamagedGroup=CreateGroup()local timer t=CreateTimer()local string f8=e4(t)call GroupAddGroup(Mz,g)call GroupClear(Mz)set Mz=GetUnitsInRangeOfLocMatching(Mm(),My,Condition(function MN))call GroupAddGroup(Mz,g)call e7(f8,"pbgroup",g)call Eb(f8,"castangle",MV)call e7(f8,"castloc",MP)set AJ='d'*MUset Ai=Mucall ForGroup(g,function Mt)call TimerStart(t,.05,true,function MO)call SetUnitAbilityLevel(MW,Ml(),MU)call SetUnitAbilityLevel(MX,Ml(),MU)call SetUnitAbilityLevel(MY,Ml(),MU)call IssueImmediateOrder(MW,ML())call IssueImmediateOrder(MX,ML())call IssueImmediateOrder(MY,ML())call TriggerSleepAction(.375)call PauseTimer(t)call e5(f8)call TriggerSleepAction(.625)call DestroyTimer(t)call KillUnit(MW)call KillUnit(MX)call KillUnit(MY)call DestroyGroup(g)call DestroyGroup(Mz)call RemoveLocation(MP)call RemoveLocation(Mv)call RemoveLocation(Mw)call RemoveLocation(Mx)call RemoveLocation(My)endfunctionfunction gO takes nothing returns nothingset cY=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(cY,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(cY,Condition(function Mn))call TriggerAddAction(cY,function MT)endfunctionfunction MZ takes nothing returns booleanreturn GetSpellAbilityId()=='A0O1'endfunctionfunction M0 takes nothing returns nothingcall KillDestructable(GetEnumDestructable())endfunctionfunction M1 takes unit fP,real x,real y,group M2 returns nothinglocal group EX=CreateGroup()local unit gnlocal rect M3=Rect(x-150,y-150,x+150,y+150)call GroupEnumUnitsInRange(EX,x,y,150,null)loopset gn=FirstOfGroup(EX)exitwhen gn==nullif(IsUnitInGroup(gn,M2)==false and IsUnitEnemy(gn,GetOwningPlayer(fP))and IsUnitVisible(gn,GetOwningPlayer(fP)))thenif(GetUnitAbilityLevel(gn,'A04R')!=1 and GetUnitState(gn,UNIT_STATE_LIFE)>0 and IsUnitType(gn,UNIT_TYPE_STRUCTURE)==false)thencall GroupAddUnit(M2,gn)call UnitDamageTarget(fP,gn,60+GetUnitAbilityLevel(fP,'A0O1')*30,true,true,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_METAL_HEAVY_SLICE)call AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl",gn,"overhead")endifendifcall GroupRemoveUnit(EX,gn)endloopcall EnumDestructablesInRect(M3,null,function M0)call RemoveRect(M3)call DestroyGroup(EX)endfunctionfunction M4 takes nothing returns nothinglocal string f8=e4(GetExpiredTimer())local unit M5=EC(f8,"Axe")local unit fw=EC(f8,"Hero")local real Ax=Ei(f8,"Ax")local real Ay=Ei(f8,"Ay")local real Cx=Ei(f8,"Cx")local real Cy=Ei(f8,"Cy")local real Bx=Ei(f8,"Bx")local real By=Ei(f8,"By")local real a=Ei(f8,"a")local real b=1-alocal boolean M6=EI(f8,"FirstPass")local group M2=EE(f8,"AlreadyDamaged")call SetUnitX(M5,fs(Ax*a*a+Bx*2*a*b+Cx*b*b))call SetUnitY(M5,ft(Ay*a*a+By*2*a*b+Cy*b*b))call M1(fw,GetUnitX(M5),GetUnitY(M5),M2)if(M6)thencall Eb(f8,"a",a-.02)elsecall Eb(f8,"a",a+.02)call Eb(f8,"Ax",GetUnitX(fw))call Eb(f8,"Ay",GetUnitY(fw))endifif(a<0 and M6)thencall Ec(f8,"FirstPass",false)call Eb(f8,"Bx",Ax+300*Cos(Atan2(Cy-Ay,Cx-Ax)+Ei(f8,"AngleOffset")))call Eb(f8,"By",Ay+300*Sin(Atan2(Cy-Ay,Cx-Ax)+Ei(f8,"AngleOffset")))endifif(a>1 and M6==false)thencall PauseTimer(GetExpiredTimer())call DestroyGroup(M2)call e5(f8)call RemoveUnit(M5)call DestroyTimer(GetExpiredTimer())endifendfunctionfunction M7 takes nothing returns nothinglocal unit fP=GetTriggerUnit()local real Ax=GetUnitX(fP)local real Ay=GetUnitY(fP)local real Cx=GetLocationX(GetSpellTargetLoc())local real Cy=GetLocationY(GetSpellTargetLoc())local unit M8=CreateUnit(GetOwningPlayer(fP),'e01T',Ax,Ay,270.)local unit M9=CreateUnit(GetOwningPlayer(fP),'e01T',Ax,Ay,270.)local string nalocal string nAlocal timer nb=CreateTimer()local timer nB=CreateTimer()if GetSpellTargetUnit()!=null thenset Cx=GetUnitX(GetSpellTargetUnit())set Cy=GetUnitY(GetSpellTargetUnit())endifcall UnitAddAbility(M8,'Amrf')call UnitRemoveAbility(M8,'Amrf')call SetUnitFlyHeight(M8,150,0)call UnitAddAbility(M9,'Amrf')call UnitRemoveAbility(M9,'Amrf')call SetUnitFlyHeight(M9,150,0)set na=e4(nb)call e7(na,"Hero",fP)call e7(na,"Axe",M8)call e7(na,"AlreadyDamaged",CreateGroup())call Eb(na,"Ax",Ax)call Eb(na,"Ay",Ay)call Eb(na,"Cx",Cx)call Eb(na,"Cy",Cy)call Eb(na,"Bx",Ax+300*Cos(Atan2(Cy-Ay,Cx-Ax)+45))call Eb(na,"By",Ay+300*Sin(Atan2(Cy-Ay,Cx-Ax)+45))call Eb(na,"a",1)call Eb(na,"AngleOffset",-45)call Ec(na,"FirstPass",true)set nA=e4(nB)call e7(nA,"Hero",fP)call e7(nA,"Axe",M9)call e7(nA,"AlreadyDamaged",CreateGroup())call Eb(nA,"Ax",Ax)call Eb(nA,"Ay",Ay)call Eb(nA,"Cx",Cx)call Eb(nA,"Cy",Cy)call Eb(nA,"Bx",Ax+300*Cos(Atan2(Cy-Ay,Cx-Ax)-45))call Eb(nA,"By",Ay+300*Sin(Atan2(Cy-Ay,Cx-Ax)-45))call Eb(nA,"a",1)call Eb(nA,"AngleOffset",45)call Ec(nA,"FirstPass",true)call TimerStart(nb,.025,true,function M4)call TimerStart(nB,.025,true,function M4)endfunctionfunction gp takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function MZ))call TriggerAddAction(t,function M7)endfunctionfunction nc takes nothing returns booleanreturn GetSpellAbilityId()=='A0B4'endfunctionfunction nC takes nothing returns nothinglocal location iG=GetUnitLoc(GetTriggerUnit())call CreateNUnitsAtLoc(1,'e00E',GetOwningPlayer(GetTriggerUnit()),iG,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,'A0M8')call IssueTargetOrderById(bj_lastCreatedUnit,852101,GetTriggerUnit())call RemoveLocation(iG)endfunctionfunction gs takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function nc))call TriggerAddAction(t,function nC)endfunctionfunction nd takes nothing returns booleanreturn GetUnitAbilityLevel(GetKillingUnit(),'A0B4')>0 and IsUnitType(GetDyingUnit(),UNIT_TYPE_HERO)endfunctionfunction nD takes nothing returns nothinglocal texttag glocal unit fP=GetKillingUnit()local integer fB=GetUnitAbilityLevel(fP,'A0B4')*50call SetPlayerState(GetOwningPlayer(fP),PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(GetOwningPlayer(fP),PLAYER_STATE_RESOURCE_GOLD)+fB)set g=CreateTextTagUnitBJ("+"+I2S(fB),GetDyingUnit(),0,10,90.,84.,.0,0)call SetTextTagVelocityBJ(g,64,90)call PolledWait(2.)call DestroyTextTag(g)endfunctionfunction gS takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(t,Condition(function nd))call TriggerAddAction(t,function nD)endfunctionfunction ne takes nothing returns booleanreturn GetSpellAbilityId()=='A0GP'or GetSpellAbilityId()=='A0FW'endfunctionfunction nE takes integer m8,integer a returns integerif a==0 thenreturn 1elsereturn(m8-1)*4+1+aendifendfunctionfunction nf takes nothing returns nothinglocal unit fw=GetTriggerUnit()local string f8=e4(fw)local unit Jz=EC(f8,"Warpath|Caster")local integer m8=GetUnitAbilityLevel(fw,'A0FV')local integer nF=f3(EH(f8,"Warpath|Level")+1,0,4)local integer ng=nE(m8,nF)call SetUnitAbilityLevel(Jz,'A0EF',ng)call Ea(f8,"Warpath|Level",nF)call PolledWait(10)set m8=GetUnitAbilityLevel(fw,'A0FV')set nF=f3(EH(f8,"Warpath|Level")-1,0,4)set ng=nE(m8,nF)call SetUnitAbilityLevel(Jz,'A0EF',ng)call Ea(f8,"Warpath|Level",nF)endfunctionfunction nG takes nothing returns booleanreturn GetLearnedSkill()=='A0FV'and GetUnitAbilityLevel(GetTriggerUnit(),'A0FV')==1 and IsUnitIllusion(GetTriggerUnit())==falseendfunctionfunction nh takes nothing returns nothinglocal unit fw=GetTriggerUnit()local integer m8=GetUnitAbilityLevel(fw,'A0FV')local unit Jz=CreateUnit(GetOwningPlayer(fw),'e00X',0,0,0)local trigger t=CreateTrigger()call UnitAddAbility(Jz,'A0EF')call e7(e4(fw),"Warpath|Caster",Jz)call SetUnitInvulnerable(Jz,true)call UnitAddAbility(Jz,'Aloc')call TriggerRegisterUnitEvent(t,fw,EVENT_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function ne))call TriggerAddAction(t,function nf)endfunctionfunction gt takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function nG))call TriggerAddAction(t,function nh)call fT('A0EF')endfunctionfunction nH takes nothing returns booleanif(not(GetSpellAbilityId()=='A0FW'))thenreturn falseendifreturn trueendfunctionfunction Trig_Goo_Func001Func001001002 takes nothing returns booleanreturn(GetUnitTypeId(GetFilterUnit())=='e00E')endfunctionfunction ni takes nothing returns nothingcall KillUnit(GetEnumUnit())endfunctionfunction nI takes nothing returns booleanreturn(GetUnitTypeId(GetFilterUnit())=='e00E')endfunctionfunction nj takes nothing returns booleanif(not(GetUnitUserData(GetEnumUnit())==4))thenreturn falseendifreturn trueendfunctionfunction nJ takes nothing returns nothinglocal location iG=GetUnitLoc(GetTriggerUnit())call SetUnitPositionLoc(GetEnumUnit(),iG)if(nj())thencall IssueTargetOrderById(GetEnumUnit(),852662,GetSpellTargetUnit())elsecall IncUnitAbilityLevel(GetEnumUnit(),'A0FZ')call IssueTargetOrderById(GetEnumUnit(),852662,GetSpellTargetUnit())call SetUnitUserData(GetEnumUnit(),(GetUnitUserData(GetEnumUnit())+1))endifcall RemoveLocation(iG)endfunctionfunction nk takes nothing returns nothinglocal location iG=GetUnitLoc(GetTriggerUnit())local location nK=GetUnitLoc(GetSpellTargetUnit())local group nlif(UnitHasBuffBJ(GetSpellTargetUnit(),'B02U'))thenset nl=GetUnitsOfPlayerMatching(GetOwningPlayer(GetSpellTargetUnit()),Condition(function nI))call ForGroupBJ(nl,function nJ)elseset nl=GetUnitsOfPlayerMatching(GetOwningPlayer(GetSpellTargetUnit()),Condition(function nI))call ForGroupBJ(nl,function ni)call DisableTrigger(cA)call CreateNUnitsAtLocFacingLocBJ(1,'e00E',GetOwningPlayer(GetSpellTargetUnit()),iG,nK)call EnableTrigger(cA)call UnitAddAbility(bj_lastCreatedUnit,'A0FZ')call SetUnitAbilityLevelSwapped('A0FZ',bj_lastCreatedUnit,((GetUnitAbilityLevelSwapped('A0FW',GetTriggerUnit())*4)-3))call IssueTargetOrderById(bj_lastCreatedUnit,852662,GetSpellTargetUnit())call SetUnitUserData(bj_lastCreatedUnit,1)endifcall DestroyGroup(nl)call RemoveLocation(iG)call RemoveLocation(nK)endfunctionfunction gT takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function nH))call TriggerAddAction(t,function nk)endfunctionfunction nL takes nothing returns booleanreturn GetLearnedSkill()=='A0M3'and IsUnitIllusion(GetTriggerUnit())==falseendfunctionfunction nm takes nothing returns booleanif(IsUnitType(GetEventDamageSource(),UNIT_TYPE_STRUCTURE))thenreturn falseendifreturn trueendfunctionfunction nM takes unit fw returns nothinglocal unit Jz=CreateUnit(GetOwningPlayer(fw),'e00E',GetUnitX(fw),GetUnitY(fw),0)call UnitAddAbility(Jz,'A0GP')call SetUnitAbilityLevel(Jz,'A0GP',GetUnitAbilityLevel(fw,'A0GP'))call IssueImmediateOrderById(Jz,852526)endfunctionfunction nn takes unit fw,real Fa returns nothinglocal string f8=e4(fw)local real nN=Ei(f8,"Bristleback_DamageStack")if nN>200 thencall Eb(f8,"Bristleback_DamageStack",0)call nM(fw)elsecall Eb(f8,"Bristleback_DamageStack",nN+Fa)endifendfunctionfunction no takes nothing returns nothinglocal unit nO=GetTriggerUnit()local unit KJ=GetEventDamageSource()local real np=Fo(KJ,nO)local real nP=GetUnitFacing(nO)local real nqlocal real Fa=GetEventDamage()local real nQlocal real nrif(Fa>10)thenif((nP-np)<(-180.))thenset nq=(nP-np+360)elseif((nP-np)>180.)thenset nq=(nP-np-360)elseset nq=(nP-np)endifendifset nr=RAbsBJ(nq)if nr<=70 thenset nQ=GetUnitAbilityLevel(nO,'A0M3')*.1*Facall nn(nO,Fa-nQ)call SetUnitState(nO,UNIT_STATE_LIFE,GetUnitState(nO,UNIT_STATE_LIFE)+nQ)elseif nr<='s' thenset nQ=GetUnitAbilityLevel(nO,'A0M3')*.05*Facall SetUnitState(nO,UNIT_STATE_LIFE,GetUnitState(nO,UNIT_STATE_LIFE)+nQ)endifendifendfunctionfunction nR takes nothing returns nothinglocal trigger tif GetUnitAbilityLevel(GetTriggerUnit(),'A0M3')==1 thenset t=CreateTrigger()call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_DAMAGED)call TriggerAddCondition(t,Condition(function nm))call TriggerAddAction(t,function no)endifendfunctionfunction gu takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function nL))call TriggerAddAction(t,function nR)endfunctionfunction ns takes nothing returns booleanreturn GetSpellAbilityId()=='A0GP'endfunctionfunction nS takes nothing returns booleanreturn IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and GetUnitAbilityLevel(GetFilterUnit(),'A04R')!=1endfunctionfunction nt takes nothing returns nothinglocal string nT=e4(GetEnumUnit())local integer nu=EH(AX,nT)call UnitDamageTarget(Ai,GetEnumUnit(),AJ+nu*30,false,true,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)call Ea(AX,nT,nu+1)endfunctionfunction nU takes nothing returns nothinglocal string nT=e4(GetEnumUnit())local integer nu=EH(AX,nT)call Ea(AX,nT,nu-1)endfunctionfunction nv takes nothing returns nothinglocal unit fP=GetTriggerUnit()local group EX=CreateGroup()local boolexpr Ey=Condition(function nS)if IsUnitType(fP,UNIT_TYPE_HERO)==false thenset fP=ay[GetPlayerId(GetOwningPlayer(fP))]endifcall GroupEnumUnitsInRange(EX,GetUnitX(fP),GetUnitY(fP),650,Ey)call DestroyBoolExpr(Ey)set Ai=fPset AJ=GetUnitAbilityLevel(fP,'A0GP')*20set AX=e4(fP)call ForGroup(EX,function nt)call PolledWait(10)set AX=e4(fP)call ForGroup(EX,function nU)call DestroyGroup(EX)endfunctionfunction gU takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function ns))call TriggerAddAction(t,function nv)endfunctionfunction nV takes nothing returns booleanreturn GetSpellAbilityId()=='A00L'endfunctionfunction nw takes nothing returns nothingif(GetUnitStateSwap(UNIT_STATE_LIFE,GetTriggerUnit())>=(100.*I2R(GetUnitAbilityLevelSwapped('A00L',GetTriggerUnit()))))thencall SetWidgetLife(GetTriggerUnit(),(GetUnitStateSwap(UNIT_STATE_LIFE,GetTriggerUnit())-(100.*I2R(GetUnitAbilityLevelSwapped('A00L',GetTriggerUnit())))))elsecall SetWidgetLife(GetTriggerUnit(),1.)endifendfunctionfunction gv takes nothing returns nothingset cz=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(cz,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(cz,Condition(function nV))call TriggerAddAction(cz,function nw)endfunctionfunction nW takes nothing returns booleanreturn GetUnitAbilityLevel(GetTriggerUnit(),'A00V')>0 and GetUnitAbilityLevel(GetAttacker(),'A04R')!=1endfunctionfunction nx takes nothing returns nothingcall UnitDamageTargetBJ(GetTriggerUnit(),GetAttacker(),5.*GetUnitAbilityLevel(GetTriggerUnit(),'A00V'),ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)endfunctionfunction gV takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(t,Condition(function nW))call TriggerAddAction(t,function nx)endfunctionfunction nX takes nothing returns booleanreturn GetSpellAbilityId()=='A0KM'endfunctionfunction ny takes nothing returns nothinglocal trigger t=GetTriggeringTrigger()local unit KJ=GetEventDamageSource()local unit kH=GetTriggerUnit()local unit nY=EC(e4(t),"Chen")local real nz=GetEventDamage()*.07*GetUnitAbilityLevel(nY,'A0KM')if(GetEventDamage()>10)thencall DisableTrigger(t)call UnitDamageTargetBJ(KJ,kH,nz,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)call EnableTrigger(t)endifendfunctionfunction nZ takes nothing returns nothinglocal trigger n0=CreateTrigger()local effect fxlocal unit fP=GetTriggerUnit()call TriggerRegisterUnitEvent(n0,GetSpellTargetUnit(),EVENT_UNIT_DAMAGED)call TriggerAddAction(n0,function ny)call e7(e4(n0),"Chen",fP)set fx=AddSpecialEffectTargetUnitBJ("chest",fP,"Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl")call DestroyEffect(fx)call PolledWait(7.)call DisableTrigger(n0)endfunctionfunction gw takes nothing returns nothingset cZ=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(cZ,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(cZ,Condition(function nX))call TriggerAddAction(cZ,function nZ)endfunctionfunction n1 takes nothing returns booleanif(not(GetSpellAbilityId()=='A0LT'))thenreturn falseendifreturn trueendfunctionfunction n2 takes nothing returns booleanif(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))thenreturn falseendifif(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))thenreturn trueendifreturn falseendfunctionfunction n3 takes nothing returns nothinglocal unit fP=GetTriggerUnit()local integer MU=GetUnitAbilityLevel(fP,'A0LT')local group EX=GetUnitsInRectMatching(bj_mapInitialPlayableArea,Condition(function n2))local unit mfloopset mf=FirstOfGroup(EX)exitwhen mf==nullif(IsUnitAlly(mf,GetOwningPlayer(fP)))thencall SetWidgetLife(mf,(GetUnitStateSwap(UNIT_STATE_LIFE,mf)+'d'+('d'*MU)))call DestroyEffect(AddSpecialEffectTargetUnitBJ("chest",mf,"Abilities\\Spells\\Human\\Resurrect\\ResurrectTarget.mdl"))endifcall GroupRemoveUnit(EX,mf)endloopcall DestroyGroup(EX)set EX=GetUnitsInRectOfPlayer(bj_mapInitialPlayableArea,GetOwningPlayer(fP))loopset mf=FirstOfGroup(EX)exitwhen mf==nullif(IsUnitType(mf,UNIT_TYPE_HERO)==false and GetUnitTypeId(mf)!='n00C')thencall SetUnitLifePercentBJ(mf,'d')call DestroyEffect(AddSpecialEffectTargetUnitBJ("chest",mf,"Abilities\\Spells\\Human\\Resurrect\\ResurrectTarget.mdl"))endifcall GroupRemoveUnit(EX,mf)endloopcall DestroyGroup(EX)endfunctionfunction gW takes nothing returns nothingset c1=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(c1,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(c1,Condition(function n1))call TriggerAddAction(c1,function n3)endfunctionfunction n4 takes nothing returns booleanif(not(GetSpellAbilityId()=='A069'))thenreturn falseendifreturn trueendfunctionfunction n5 takes nothing returns booleanif(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==false)thenif(IsUnitAliveBJ(GetFilterUnit()))thenif GetUnitTypeId(GetFilterUnit())!='n00I'and GetUnitTypeId(GetFilterUnit())!='e01H'thenif(GetUnitTypeId(GetFilterUnit())!='ncop')thenif(GetUnitAbilityLevel(GetFilterUnit(),'Aeth')==1)thenif((GetUnitAbilityLevel(GetFilterUnit(),'A0KO')==1)or(GetUnitAbilityLevel(GetFilterUnit(),'A0KQ')==1)or(GetUnitAbilityLevel(GetFilterUnit(),'A0KR')==1)or(GetUnitAbilityLevel(GetFilterUnit(),'A0KP')==1))thenreturn trueendifendifendifendifendifendifreturn falseendfunctionfunction n6 takes nothing returns nothinglocal unit n7=GetSpellTargetUnit()local unit nY=GetTriggerUnit()local integer MU=GetUnitAbilityLevel(nY,'A069')local integer n8=1local unit mflocal integer playerid=GetPlayerId(GetOwningPlayer(nY))local group EXcall Fg(n7)if(MU==1)thencall UnitAddAbility(n7,'A0KO')endifif(MU==2)thencall UnitAddAbility(n7,'A0KQ')endifif(MU==3)thenset n8=2call UnitAddAbility(n7,'A0KR')endifif(MU==4)thenset n8=3call UnitAddAbility(n7,'A0KP')endifcall UnitAddAbility(n7,'Aeth')call PolledWait(.01)set EX=GetUnitsOfPlayerMatching(GetOwningPlayer(nY),Condition(function n5))loopexitwhen(CountUnitsInGroup(EX)<=n8)set mf=GroupPickRandomUnit(EX)call GroupRemoveUnit(EX,mf)call RemoveUnit(mf)endloopcall DestroyGroup(EX)endfunctionfunction gx takes nothing returns nothingset c2=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(c2,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(c2,Condition(function n4))call TriggerAddAction(c2,function n6)endfunctionfunction n9 takes nothing returns booleanif(not(GetSpellAbilityId()=='A0LV'))thenreturn falseendifreturn trueendfunctionfunction Na takes nothing returns nothinglocal unit Fd=GetSpellTargetUnit()local unit nY=GetTriggerUnit()local location iG=GetUnitLoc(nY)local unit Jzlocal integer MU=GetUnitAbilityLevel(nY,'A0LV')local location NAlocal effect fxif(EJ(GetOwningPlayer(nY)))thenset NA=GetRectCenter(bp)elseset NA=GetRectCenter(bL)endifif(IsUnitAlly(Fd,GetOwningPlayer(nY))==false)thencall UnitDamageTargetBJ(nY,Fd,GetRandomInt(50*MU,'d'*MU),ATTACK_TYPE_HERO,DAMAGE_TYPE_MAGIC)set fx=AddSpecialEffectTargetUnitBJ("chest",Fd,"Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl")call DestroyEffect(fx)elseif(IsUnitType(Fd,UNIT_TYPE_HERO))thenif(EI(e4(GetOwningPlayer(Fd)),"L6")==false)thenset fx=AddSpecialEffectTargetUnitBJ("origin",Fd,"Abilities\\Spells\\NightElf\\Starfall\\StarfallCaster.mdl")call PolledWait(7-MU)call DestroyEffect(fx)call SetUnitPositionLoc(Fd,NA)endifelseif(IsUnitOwnedByPlayer(Fd,GetOwningPlayer(nY)))thencall SetUnitPositionLoc(Fd,NA)endifendifcall RemoveLocation(iG)call RemoveLocation(NA)endfunctionfunction gX takes nothing returns nothingset c3=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(c3,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(c3,Condition(function n9))call TriggerAddAction(c3,function Na)endfunctionfunction Nb takes nothing returns booleanreturn GetSpellAbilityId()=='A03R'or GetSpellAbilityId()=='A0AV'endfunctionfunction NB takes nothing returns nothinglocal trigger t=GetTriggeringTrigger()local string f8=e4(t)local unit fPlocal unit Jzlocal integer m8if(GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST)thenif(GetSpellAbilityId()=='A03R'or GetSpellAbilityId()=='A0AV')thencall DisableTrigger(t)call PolledWait(1)call TriggerRemoveAction(t,EG(f8,"TriggerAction"))call e5(f8)call Fj(t)endifelseset m8=EH(f8,"Level")set fP=EC(f8,"UnitVar")set Jz=CreateUnit(GetOwningPlayer(fP),'e00C',GetUnitX(fP)+GetRandomReal('}',635)*Cos(GetRandomReal(0,360)*bj_DEGTORAD),GetUnitY(fP)+GetRandomReal('}',635)*Sin(GetRandomReal(0,360)*bj_DEGTORAD),270)call UnitAddAbility(Jz,'A03X')call SetUnitAbilityLevel(Jz,'A03X',m8)call SetUnitPathing(Jz,false)call IssueTargetOrderById(Jz,852226,Jz)call UnitApplyTimedLife(Jz,'BTLF',.25)endifendfunctionfunction Nc takes nothing returns nothinglocal unit fP=GetTriggerUnit()local trigger t=CreateTrigger()local string f8=e4(t)local integer m8if(GetSpellAbilityId()=='A03R')thenset m8=GetUnitAbilityLevel(fP,'A03R')elseset m8=GetUnitAbilityLevel(fP,'A0AV')+1endifcall TriggerRegisterTimerEvent(t,.1,true)call TriggerRegisterUnitEvent(t,fP,EVENT_UNIT_SPELL_ENDCAST)call e7(f8,"TriggerAction",TriggerAddAction(t,function NB))call e7(f8,"UnitVar",fP)call Ea(f8,"Level",m8)endfunctionfunction gy takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function Nb))call TriggerAddAction(t,function Nc)call fT('A03X')endfunctionfunction NC takes nothing returns booleanreturn GetLearnedSkill()=='A0CL'and IsUnitIllusion(GetTriggerUnit())==falseendfunctionfunction Nd takes nothing returns nothinglocal unit fw=GetTriggerUnit()call SetPlayerTechResearched(GetOwningPlayer(fw),'R006',GetPlayerTechCount(GetOwningPlayer(fw),'R006',true)+1)endfunctionfunction Hf takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function NC))call TriggerAddAction(t,function Nd)endfunctionfunction ND takes nothing returns booleanif(not(GetSpellAbilityId()=='A0DH'))thenreturn falseendifreturn trueendfunctionfunction Ne takes nothing returns booleanreturn(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))endfunctionfunction NE takes nothing returns booleanreturn(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)endfunctionfunction Nf takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped('A04R',GetFilterUnit())!=1)endfunctionfunction NF takes nothing returns booleanreturn GetBooleanAnd(NE(),Nf())endfunctionfunction Ng takes nothing returns booleanreturn GetBooleanAnd(Ne(),NF())endfunctionfunction NG takes nothing returns nothinglocal location nl=GetUnitLoc(GetEnumUnit())call CreateNUnitsAtLoc(1,'e00E',GetOwningPlayer(GetTriggerUnit()),nl,bj_UNIT_FACING)call SetUnitScalePercent(bj_lastCreatedUnit,25.,25.,25.)call UnitAddAbility(bj_lastCreatedUnit,'A0DM')call SetUnitAbilityLevelSwapped('A0DM',bj_lastCreatedUnit,GetUnitAbilityLevelSwapped('A0DH',GetTriggerUnit()))call IssueImmediateOrderById(bj_lastCreatedUnit,852526)call RemoveLocation(nl)endfunctionfunction Nh takes nothing returns nothinglocal location nl=GetUnitLoc(GetTriggerUnit())local group NH=GetUnitsInRangeOfLocMatching(500.,nl,Condition(function Ng))call PolledWait(.3)call ForGroupBJ(NH,function NG)call RemoveLocation(nl)call DestroyGroup(NH)endfunctionfunction gY takes nothing returns nothingset c4=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(c4,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(c4,Condition(function ND))call TriggerAddAction(c4,function Nh)endfunctionfunction Ni takes nothing returns booleanreturn GetSpellAbilityId()=='A0M0'endfunctionfunction NI takes nothing returns nothinglocal location NA=GetSpellTargetLoc()local location Nj=GetUnitLoc(GetTriggerUnit())local location iGlocal effect fxlocal destructable array NJlocal player EL=GetOwningPlayer(GetTriggerUnit())local real Nk=AngleBetweenPoints(Nj,NA)local integer k9=20local integer NK=R2I(1200/k9)local integer ER=1local integer Es=k9loopexitwhen ER>Esset iG=PolarProjectionBJ(Nj,ER*NK,Nk)call MoveLocation(iG,fs(GetLocationX(iG)),ft(GetLocationY(iG)))set NJ[ER]=CreateDestructableLoc('B000',iG,GetRandomReal(0,360),.5,GetRandomInt(0,2))set fx=AddSpecialEffectLoc("Abilities\\Spells\\Other\\Volcano\\VolcanoDeath.mdl",iG)call RemoveLocation(iG)call DestroyEffect(fx)set ER=ER+1endloopcall PolledWait(8.)set ER=1loopexitwhen ER>Escall RemoveDestructable(NJ[ER])set ER=ER+1endloopcall RemoveLocation(NA)call RemoveLocation(Nj)endfunctionfunction gz takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function Ni))call TriggerAddAction(t,function NI)endfunctionfunction Nl takes nothing returns booleanif((GetSpellAbilityId()=='A0M0'))thenreturn trueendifif((GetSpellAbilityId()=='A0DL'))thenreturn trueendifif((GetSpellAbilityId()=='A0DH'))thenreturn trueendifreturn falseendfunctionfunction Nm takes nothing returns booleanif(not(GetUnitAbilityLevelSwapped('A0DJ',GetSpellAbilityUnit())>0))thenreturn falseendifif(not Nl())thenreturn falseendifreturn trueendfunctionfunction NM takes nothing returns nothinglocal location nl=GetUnitLoc(GetTriggerUnit())call CreateNUnitsAtLoc(1,'e00E',GetOwningPlayer(GetTriggerUnit()),nl,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,'A0DI')call SetUnitAbilityLevelSwapped('A0DI',bj_lastCreatedUnit,GetUnitAbilityLevelSwapped('A0DJ',GetSpellAbilityUnit()))call IssueImmediateOrderById(bj_lastCreatedUnit,852127)call RemoveLocation(nl)endfunctionfunction gZ takes nothing returns nothingset c5=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(c5,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(c5,Condition(function Nm))call TriggerAddAction(c5,function NM)endfunctionfunction Nn takes nothing returns booleanif(GetItemTypeId(GetManipulatedItem())=='pnvu')thenif(GetUnitTypeId(GetTriggerUnit())=='Otch')thenreturn trueendifendifreturn falseendfunctionfunction NN takes nothing returns nothinglocal unit No=GetTriggerUnit()local unit Jzlocal location NO=GetUnitLoc(No)call UnitRemoveAbility(No,'B01P')call PolledWait(.1)set Jz=CreateUnitAtLoc(GetOwningPlayer(No),'e00E',NO,bj_UNIT_FACING)call UnitAddAbility(Jz,'AIrr')call IssueImmediateOrderById(Jz,852164)call RemoveLocation(NO)endfunctionfunction g0 takes nothing returns nothingset c6=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(c6,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(c6,Condition(function Nn))call TriggerAddAction(c6,function NN)endfunctionfunction Np takes nothing returns booleanif(not(UnitHasBuffBJ(GetAttacker(),'Broa')))thenreturn falseendifreturn trueendfunctionfunction Nq takes nothing returns nothingcall PolledWait(.35)call UnitRemoveAbility(GetAttacker(),'Broa')endfunctionfunction g3 takes nothing returns nothingset c7=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(c7,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(c7,Condition(function Np))call TriggerAddAction(c7,function Nq)endfunctionfunction NQ takes nothing returns booleanreturn GetSpellAbilityId()=='A0DX'endfunctionfunction Nr takes nothing returns booleanif(not(IsUnitType(GetSpellTargetUnit(),UNIT_TYPE_HERO)==false))thenreturn falseendifif(not(IsUnitType(GetSpellTargetUnit(),UNIT_TYPE_ANCIENT)==false))thenreturn falseendifif(GetUnitTypeId(GetSpellTargetUnit())=='n01E')thenreturn falseendifif(GetUnitTypeId(GetSpellTargetUnit())=='n019')thenreturn falseendifreturn trueendfunctionfunction NR takes nothing returns booleanreturn(GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(GetTriggerUnit()))endfunctionfunction Ns takes nothing returns booleanreturn(UnitHasBuffBJ(GetFilterUnit(),'Bslo'))endfunctionfunction NS takes nothing returns booleanreturn GetBooleanAnd(NR(),Ns())endfunctionfunction Nt takes nothing returns nothingcall UnitRemoveAbility(GetEnumUnit(),'Bslo')endfunctionfunction NT takes nothing returns nothinglocal group nl=GetUnitsInRectMatching(bj_mapInitialPlayableArea,Condition(function NS))if(Nr())thencall UnitRemoveAbility(GetSpellTargetUnit(),'Bslo')call SetUnitOwner(GetSpellTargetUnit(),GetOwningPlayer(GetSpellAbilityUnit()),true)call UnitApplyTimedLifeBJ(120.,'BTLF',GetSpellTargetUnit())call Fg(GetSpellTargetUnit())call UnitRemoveAbility(GetSpellTargetUnit(),'Bslo')endifcall PolledWait(.5)call ForGroupBJ(nl,function Nt)call DestroyGroup(nl)endfunctionfunction g4 takes nothing returns nothingset c8=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(c8,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(c8,Condition(function NQ))call TriggerAddAction(c8,function NT)endfunctionfunction Nu takes nothing returns booleanif(not(GetSpellAbilityId()=='A01B'))thenreturn falseendifreturn trueendfunctionfunction NU takes nothing returns booleanif(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))thenreturn falseendifif(GetUnitLifePercent(GetFilterUnit())=='d')thenreturn falseendifif(IsUnitAliveBJ(GetFilterUnit())==false)thenreturn falseendifif(GetUnitAbilityLevelSwapped('A04R',GetFilterUnit())>0)thenreturn falseendifif(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==false)thenreturn falseendifreturn trueendfunctionfunction Nv takes nothing returns nothinglocal location iGlocal group EXlocal integer ER=1local integer Es=10local integer NVlocal integer Nw=1+2*GetUnitAbilityLevel(GetTriggerUnit(),'A01B')local unit Nxloopexitwhen ER>Esset iG=GetUnitLoc(GetTriggerUnit())set EX=GetUnitsInRangeOfLocMatching(350.,iG,Condition(function NU))set NV=1loopexitwhen NV>Nwset Nx=GroupPickRandomUnit(EX)if(Nx!=null)thencall SetWidgetLife(Nx,GetUnitState(Nx,UNIT_STATE_LIFE)+10)endifset NV=NV+1endloopcall PolledWait(1.)call DestroyGroup(EX)call RemoveLocation(iG)set ER=ER+1endloopendfunctionfunction g5 takes nothing returns nothingset c9=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(c9,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(c9,Condition(function Nu))call TriggerAddAction(c9,function Nv)endfunctionfunction NX takes nothing returns booleanif(GetLearnedSkill()!='A0DY'and IsUnitIllusion(GetTriggerUnit())==false)thenreturn falseendifreturn trueendfunctionfunction Ny takes real x1,real y1,real x2,real y2 returns realreturn SquareRoot(((x1-x2)*(x1-x2))+((y1-y2)*(y1-y2)))endfunctionfunction NY takes nothing returns nothinglocal texttag glocal real dif UnitHasBuffBJ(GetTriggerUnit(),'B03U') and GetUnitAbilityLevel(GetEventDamageSource(),'A0DY')>0 and EC(e4(GetTriggeringTrigger()),"Source")==GetEventDamageSource()thencall DisableTrigger(GetTriggeringTrigger())set d=.04*I2R(GetUnitAbilityLevel(GetEventDamageSource(),'A0DY'))*Ny(GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),GetUnitX(GetEventDamageSource()),GetUnitY(GetEventDamageSource()))if(d>400)thenset d=400endifset g=CreateTextTagUnitBJ("+"+I2S(R2I(d)),GetTriggerUnit(),64,10,1,85,86,15)call SetTextTagVelocityBJ(g,64,90)call UnitDamageTargetBJ(GetEventDamageSource(),GetTriggerUnit(),d,ATTACK_TYPE_HERO,DAMAGE_TYPE_DIVINE)call PolledWait(1)call DestroyTextTag(g)call DisableTrigger(GetTriggeringTrigger())endifendfunctionfunction Nz takes nothing returns booleanif GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED thenif GetUnitAbilityLevel(GetAttacker(),'A0DY')==0 thenreturn falseelseif EI(e4(GetTriggeringTrigger()),"OrbOn")thenif IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetAttacker()==EC(e4(GetTriggeringTrigger()),"Enchantress")thenreturn trueendifelsereturn falseendifelseif GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER thenif GetIssuedOrderId()==852255thencall Ec(e4(GetTriggeringTrigger()),"OrbOn",true)elseif GetIssuedOrderId()==852256thencall Ec(e4(GetTriggeringTrigger()),"OrbOn",false)endifelseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT thenif GetSpellAbilityId()=='A0DY'thenreturn trueelsereturn falseendifendifreturn falseendfunctionfunction NZ takes nothing returns nothinglocal trigger t=CreateTrigger()local unit Fdlocal unit FCif(GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT)thenset Fd=GetSpellTargetUnit()set FC=GetTriggerUnit()elseset Fd=GetTriggerUnit()set FC=GetAttacker()endifif IsUnitIllusion(FC)==false thencall e7(e4(t),"Source",FC)call TriggerRegisterUnitEvent(t,Fd,EVENT_UNIT_DAMAGED)call TriggerAddAction(t,function NY)endifcall PolledWait(2)call DisableTrigger(t)endfunctionfunction N0 takes nothing returns nothinglocal unit fP=GetTriggerUnit()local trigger tlocal integer m8=GetUnitAbilityLevel(fP,'A0DY')if(m8==1)thenset t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerRegisterUnitEvent(t,fP,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(t,fP,EVENT_UNIT_ISSUED_ORDER)call TriggerAddCondition(t,Condition(function Nz))call TriggerAddAction(t,function NZ)call e7(e4(t),"Enchantress",fP)endifendfunctionfunction g6 takes nothing returns nothingset Ca=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(Ca,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(Ca,Condition(function NX))call TriggerAddAction(Ca,function N0)endfunctionfunction N1 takes nothing returns booleanreturn GetUnitAbilityLevel(GetTriggerUnit(),'A0DW')>0endfunctionfunction N2 takes nothing returns nothinglocal unit Jz=CreateUnit(GetOwningPlayer(GetTriggerUnit()),'e00E',GetUnitX(GetAttacker()),GetUnitY(GetAttacker()),0)call UnitAddAbility(Jz,'A0B0')call SetUnitAbilityLevel(Jz,'A0B0',GetUnitAbilityLevel(GetTriggerUnit(),'A0DW'))call IssueTargetOrderById(Jz,852662,GetAttacker())endfunctionfunction g7 takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(t,Condition(function N1))call TriggerAddAction(t,function N2)endfunctionfunction N3 takes nothing returns booleanreturn GetUnitTypeId(GetSummonedUnit())=='u004'endfunctionfunction N4 takes unit Ew returns booleanlocal integer N5=GetUnitTypeId(Ew)return N5=='n004'or N5=='n01G'or N5=='n01C'or N5=='n018'endfunctionfunction N6 takes nothing returns booleanreturn IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or N4(GetFilterUnit()))and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(EC(e4(GetTriggeringTrigger()),"g8")))endfunctionfunction N7 takes nothing returns nothinglocal location N8=GetUnitLoc(GetEnumUnit())local location N9=GetUnitLoc(EC(e4(GetTriggeringTrigger()),"g8"))local location oa=PolarProjectionBJ(N9,DistanceBetweenPoints(N9,N8)-2,AngleBetweenPoints(N9,N8))call SetUnitPositionLoc(GetEnumUnit(),oa)call RemoveLocation(N8)call RemoveLocation(N9)call RemoveLocation(oa)endfunctionfunction oA takes nothing returns nothinglocal trigger t=GetTriggeringTrigger()local group EXlocal unit g8local string f8=e4(t)if GetTriggerEventId()==EVENT_UNIT_DEATH thencall DisableTrigger(t)call PolledWait(1)call TriggerRemoveAction(t,EG(f8,"TriggerAction"))call e5(f8)call Fj(t)elseset g8=EC(f8,"g8")set EX=CreateGroup()call GroupEnumUnitsInRange(EX,GetUnitX(g8),GetUnitY(g8),400,Condition(function N6))call ForGroup(EX,function N7)call DestroyGroup(EX)endifendfunctionfunction ob takes nothing returns nothinglocal unit fP=GetSummoningUnit()local unit g8=GetSummonedUnit()local trigger t=CreateTrigger()local string f8=e4(t)call e7(f8,"g8",g8)call TriggerRegisterUnitEvent(t,g8,EVENT_UNIT_DEATH)call TriggerRegisterTimerEvent(t,.05,true)call e7(f8,"TriggerAction",TriggerAddAction(t,function oA))call SetUnitAbilityLevel(g8,'A0C0',GetUnitAbilityLevel(fP,'A0BY'))endfunctionfunction g8 takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SUMMON)call TriggerAddAction(t,function ob)call TriggerAddCondition(t,Condition(function N3))call fT('A0C0')endfunctionfunction oB takes nothing returns booleanif(not(GetSpellAbilityId()=='A0B3'))thenreturn falseendifreturn trueendfunctionfunction oc takes nothing returns nothinglocal location nl=GetUnitLoc(GetTriggerUnit())local unit g9=GetSpellTargetUnit()call CreateNUnitsAtLoc(1,'e00E',GetOwningPlayer(GetTriggerUnit()),nl,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,'A01A')call IssueTargetOrderById(bj_lastCreatedUnit,852095,g9)call PolledWait(2)call RemoveLocation(nl)set nl=GetUnitLoc(g9)if(GetUnitAbilityLevelSwapped('A0B3',GetTriggerUnit())>1)thencall CreateNUnitsAtLoc(1,'e00E',GetOwningPlayer(GetTriggerUnit()),nl,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,'A01A')call IssueTargetOrderById(bj_lastCreatedUnit,852095,g9)call PolledWait(2)endifcall RemoveLocation(nl)set nl=GetUnitLoc(g9)if(GetUnitAbilityLevelSwapped('A0B3',GetTriggerUnit())>3)thencall CreateNUnitsAtLoc(1,'e00E',GetOwningPlayer(GetTriggerUnit()),nl,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,'A01A')call IssueTargetOrderById(bj_lastCreatedUnit,852095,g9)call PolledWait(2)endifcall RemoveLocation(nl)endfunctionfunction g9 takes nothing returns nothingset CA=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(CA,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(CA,Condition(function oB))call TriggerAddAction(CA,function oc)endfunctionfunction oC takes nothing returns booleanif(not(GetSpellAbilityId()=='A0B1'))thenreturn falseendifreturn trueendfunctionfunction od takes nothing returns nothinglocal location nl=GetUnitLoc(GetTriggerUnit())local location NH=GetSpellTargetLoc()call CreateNUnitsAtLocFacingLocBJ(1,'e00E',GetOwningPlayer(GetTriggerUnit()),nl,NH)call ShowUnitHide(bj_lastCreatedUnit)call UnitApplyTimedLifeBJ(8.,'BTLF',bj_lastCreatedUnit)call UnitAddAbility(bj_lastCreatedUnit,'A0B2')call SetUnitAbilityLevelSwapped('A0B2',bj_lastCreatedUnit,GetUnitAbilityLevelSwapped('A0B1',GetTriggerUnit()))call IssuePointOrderByIdLoc(bj_lastCreatedUnit,852221,NH)call RemoveLocation(nl)call RemoveLocation(NH)endfunctionfunction Ga takes nothing returns nothingset Cb=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(Cb,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(Cb,Condition(function oC))call TriggerAddAction(Cb,function od)endfunctionfunction oD takes nothing returns booleanif(not(GetSpellAbilityId()=='A0B7'))thenreturn falseendifreturn trueendfunctionfunction oe takes nothing returns nothinglocal integer MU=GetUnitAbilityLevelSwapped('A0B7',GetTriggerUnit())local location iG=GetUnitLoc(GetSpellTargetUnit())local integer k4if(MU==1)thenset k4='hwat'endifif(MU==2)thenset k4='hwt2'endifif(MU==3)thenset k4='hwt3'endifif(MU==4)thenset k4='h006'endifcall RemoveUnit(GetSpellTargetUnit())call UnitApplyTimedLifeBJ(30,'BTLF',CreateUnitAtLoc(GetOwningPlayer(GetTriggerUnit()),k4,iG,bj_UNIT_FACING))call UnitApplyTimedLifeBJ(30,'BTLF',CreateUnitAtLoc(GetOwningPlayer(GetTriggerUnit()),k4,iG,bj_UNIT_FACING))call UnitApplyTimedLifeBJ(30,'BTLF',CreateUnitAtLoc(GetOwningPlayer(GetTriggerUnit()),k4,iG,bj_UNIT_FACING))call RemoveLocation(iG)endfunctionfunction GA takes nothing returns nothingset CB=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(CB,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(CB,Condition(function oD))call TriggerAddAction(CB,function oe)endfunctionfunction oE takes nothing returns booleanreturn GetSpellAbilityId()=='A06Q'endfunctionfunction of takes nothing returns nothinglocal destructable array dxlocal integer ERlocal integer Eslocal fogmodifier oFlocal unit Jz=GetTriggerUnit()local unit Fd=GetSpellTargetUnit()local location NA=GetUnitLoc(Fd)set oF=CreateFogModifierRadiusLocBJ(true,GetOwningPlayer(Jz),FOG_OF_WAR_VISIBLE,NA,1000.)set ER=1set Es=8loopexitwhen ER>Esset dx[ER]=CreateDestructableLoc('LTlt',PolarProjectionBJ(NA,150.,(I2R(ER)*45.)),GetRandomReal(0,360),1,0)set ER=ER+1endloopcall PolledWait((2.25+(.75*I2R(GetUnitAbilityLevelSwapped('A06Q',Jz)))))set ER=1set Es=8loopexitwhen ER>Escall KillDestructable(dx[ER])set ER=ER+1endloopcall DestroyFogModifier(oF)call PolledWait(4.)set ER=1set Es=8loopexitwhen ER>Escall RemoveDestructable(dx[ER])set ER=ER+1endloopcall RemoveLocation(NA)endfunctionfunction og takes nothing returns nothingif GetSpellAbilityId()=='A06Q'and IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))and EI(e4(GetOwningPlayer(GetSpellTargetUnit())),"L6")thencall fp(GetTriggerUnit())call fI(GetOwningPlayer(GetTriggerUnit()),"This target has disablehelp on")endifendfunctionfunction Gb takes nothing returns nothinglocal trigger tset Cc=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(Cc,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(Cc,Condition(function oE))call TriggerAddAction(Cc,function of)set t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddAction(t,function og)endfunctionfunction oG takes nothing returns booleanreturn GetSpellAbilityId()=='A01O'endfunctionfunction oh takes nothing returns nothinglocal location iG=GetSpellTargetLoc()call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\DeathPact\\DeathPactTarget.mdl",GetLocationX(iG),GetLocationY(iG)))call RemoveLocation(iG)endfunctionfunction GB takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_CHANNEL)call TriggerAddCondition(t,Condition(function oG))call TriggerAddAction(t,function oh)endfunctionfunction oH takes nothing returns integerreturn'A0O7'endfunctionfunction oi takes nothing returns integerreturn'A0OB'endfunctionfunction oI takes nothing returns integerreturn'A0OC'endfunctionfunction oj takes nothing returns integerreturn'A0OA'endfunctionfunction oJ takes nothing returns realreturn 200.endfunctionfunction ok takes nothing returns realreturn 250.endfunctionfunction oK takes nothing returns realreturn 550.endfunctionfunction ol takes real x1,real y1,real x2,real y2,real x3,real y3,real x,real y returns booleanlocal real oL=(y-y1)*(x2-x1)-(x-x1)*(y2-y1)local real om=(y-y3)*(x1-x3)-(x-x3)*(y1-y3)local real oM=(y-y2)*(x3-x2)-(x-x2)*(y3-y2)return(oL*om>0)and(oM*om>0)endfunctionfunction on takes nothing returns booleanreturn GetSpellAbilityId()==oH()endfunctionfunction oN takes nothing returns booleanlocal unit fu=GetFilterUnit()local location l=GetUnitLoc(fu)if(IsUnitType(fu,UNIT_TYPE_MAGIC_IMMUNE)==false)and ol(Ah[1],Ah[2],Ah[3],Ah[4],Ah[5],Ah[6],GetLocationX(l),GetLocationY(l))and IsUnitEnemy(fu,GetOwningPlayer(GetTriggerUnit()))thencall RemoveLocation(l)return trueelsecall RemoveLocation(l)return falseendifendfunctionfunction oo takes nothing returns nothinglocal unit oO=CreateUnit(GetOwningPlayer(GetTriggerUnit()),'e00E',GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),270)call UnitAddAbility(oO,oj())call IssueTargetOrderById(oO,852226,GetEnumUnit())endfunctionfunction op takes real oP,real oq,real oQ,real oR,real os,real oS returns nothinglocal real ot=Asin((oR-oQ)/oq)local real x=oQ/Sin(ot)local real y=(oq+oR+x)*Tan(ot)set Ah[1]=os+x*Cos((oP-180)*bj_DEGTORAD)set Ah[2]=oS+x*Sin((oP-180)*bj_DEGTORAD)set Ah[7]=os+(oq+oR)*Cos(oP*bj_DEGTORAD)set Ah[8]=oS+(oq+oR)*Sin(oP*bj_DEGTORAD)set Ah[3]=Ah[7]+y*Cos((oP-90)*bj_DEGTORAD)set Ah[4]=Ah[8]+y*Sin((oP-90)*bj_DEGTORAD)set Ah[5]=Ah[7]+y*Cos((oP+90)*bj_DEGTORAD)set Ah[6]=Ah[8]+y*Sin((oP+90)*bj_DEGTORAD)endfunctionfunction oT takes nothing returns nothinglocal unit u=GetTriggerUnit()local group glocal location l=GetUnitLoc(GetTriggerUnit())local location plocal real flocal integer MU=GetUnitAbilityLevel(u,oH())local unit oOif GetSpellTargetUnit()==null thenset p=GetSpellTargetLoc()elseset p=GetUnitLoc(GetSpellTargetUnit())endifset f=AngleBetweenPoints(l,p)call op(f,oK(),oJ(),ok(),GetLocationX(l),GetLocationY(l))set oO=CreateUnit(GetOwningPlayer(u),'e00E',GetUnitX(u),GetUnitY(u),270)call UnitAddAbility(oO,oi())call SetUnitAbilityLevel(oO,oi(),MU)call IssuePointOrderById(oO,852580,GetLocationX(p),GetLocationY(p))set g=GetUnitsInRectMatching(bj_mapInitialPlayableArea,Condition(function oN))call PolledWait(.2)call SetUnitAnimation(u,"spell")call ForGroup(g,function oo)set oO=CreateUnit(GetOwningPlayer(u),'e00E',GetUnitX(u)+50*Cos(Atan2(GetLocationY(p)-GetUnitY(u),GetLocationX(p)-GetUnitX(u))),GetUnitY(u)+50*Sin(Atan2(GetLocationY(p)-GetUnitY(u),GetLocationX(p)-GetUnitX(u))),270)call UnitAddAbility(oO,oI())call SetUnitAbilityLevel(oO,oI(),MU)call IssuePointOrderById(oO,852560,GetLocationX(p),GetLocationY(p))call PolledWait(.1)call ResetUnitAnimation(u)call DestroyGroup(g)call RemoveLocation(p)call RemoveLocation(l)endfunctionfunction gq takes nothing returns nothingset CC=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(CC,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(CC,Condition(function on))call TriggerAddAction(CC,function oT)call fT(oi())call fT(oI())call fT(oj())endfunctionfunction ou takes nothing returns integerreturn'A0O6'endfunctionfunction oU takes nothing returns integerreturn'A0OF'endfunctionfunction ov takes nothing returns booleanreturn((IsUnitType(GetFilterUnit(),UNIT_TYPE_MAGIC_IMMUNE)==false)and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetDyingUnit())))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)and(GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0))endfunctionfunction oV takes nothing returns booleanreturn GetUnitTypeId(GetDyingUnit())=='e01U'endfunctionfunction ow takes nothing returns nothinglocal unit u=GetDyingUnit()local integer MU=GetUnitUserData(u)local group glocal unit oWlocal unit oxlocal boolexpr Ey=Condition(function ov)set g=CreateGroup()call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),175,Ey)loopset ox=FirstOfGroup(g)exitwhen(ox==null)call GroupRemoveUnit(g,ox)set oW=CreateUnit(GetOwningPlayer(u),'e00E',GetUnitX(ox),GetUnitY(ox),0)call UnitAddAbility(oW,oU())call SetUnitAbilityLevel(oW,oU(),MU)call IssueTargetOrderById(oW,852095,ox)call UnitApplyTimedLife(oW,'BTLF',1)call UnitAddAbility(oW,'Aloc')endloopcall DestroyGroup(g)call DestroyBoolExpr(Ey)call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\FreezingBreath\\FreezingBreathMissile.mdl",GetUnitX(u),GetUnitY(u)))endfunctionfunction oX takes nothing returns nothinglocal timer t=GetExpiredTimer()local string f8=e4(t)local unit fw=EC(f8,"Hero")local integer m8=GetUnitAbilityLevel(fw,ou())local real x=Ei(f8,"IcePathX")local real y=Ei(f8,"IcePathY")local real nr=Ei(f8,"IcePathAngle")local unit oWlocal integer Mf=EH(f8,"IcePath|Counter")set x=x+'d'*Cos(nr*bj_DEGTORAD)set y=y+'d'*Sin(nr*bj_DEGTORAD)call Eb(f8,"IcePathX",x)call Eb(f8,"IcePathY",y)set oW=CreateUnit(GetOwningPlayer(fw),'e01U',x,y,GetRandomReal(0,359))call UnitApplyTimedLife(oW,'BTLF',.5)call SetUnitUserData(oW,m8)call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl",x,y))set Mf=Mf+1call Ea(f8,"IcePath|Counter",Mf)if Mf>=10 thencall PauseTimer(t)call e5(f8)call DestroyTimer(t)endifendfunctionfunction oy takes nothing returns booleanreturn GetSpellAbilityId()==ou()endfunctionfunction oY takes nothing returns nothinglocal timer t=CreateTimer()local unit fw=GetTriggerUnit()local location NA=GetSpellTargetLoc()local location oz=GetUnitLoc(fw)local string f8=e4(t)call e7(f8,"Hero",fw)call Eb(f8,"IcePathX",GetUnitX(fw))call Eb(f8,"IcePathY",GetUnitY(fw))call Eb(f8,"IcePathAngle",AngleBetweenPoints(oz,NA))call Ea(f8,"IcePath|Counter",0)call RemoveLocation(oz)call RemoveLocation(NA)call TimerStart(t,.05,true,function oX)endfunctionfunction gr takes nothing returns nothinglocal trigger oZ=CreateTrigger()set Cd=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(oZ,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(oZ,Condition(function oV))call TriggerAddAction(oZ,function ow)call TriggerRegisterAnyUnitEventBJ(Cd,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(Cd,Condition(function oy))call TriggerAddAction(Cd,function oY)endfunctionfunction o0 takes nothing returns integerreturn'A0O8'endfunctionfunction o1 takes nothing returns integerreturn'A0OD'endfunctionfunction o2 takes integer MU returns reallocal real array o3set o3[1]=25set o3[2]=30set o3[3]=35set o3[4]=40return o3[MU]endfunctionfunction o4 takes nothing returns realreturn 800.endfunctionfunction o5 takes nothing returns booleanlocal unit fu=GetFilterUnit()local unit KP=GetAttacker()local location o6=GetUnitLoc(fu)local location o7=GetUnitLoc(KP)local real Nk=AngleBetweenPoints(o7,o6)local real oP=GetUnitFacing(KP)local real o8=RAbsBJ(oP-(Nk+180))call RemoveLocation(o6)call RemoveLocation(o7)if((o8>=155)and(o8<=205)and(IsUnitType(fu,UNIT_TYPE_MAGIC_IMMUNE)==false)and(IsUnitEnemy(fu,GetOwningPlayer(KP)))and(IsUnitType(fu,UNIT_TYPE_GROUND))and(IsUnitType(fu,UNIT_TYPE_STRUCTURE)==false))thenreturn trueelsereturn falseendifendfunctionfunction o9 takes nothing returns booleanreturn GetUnitAbilityLevel(GetAttacker(),o0())>0 and(IsUnitEnemy(GetAttacker(),GetOwningPlayer(GetTriggerUnit())))endfunctionfunction Oa takes nothing returns nothinglocal unit KP=GetAttacker()local location o7=GetUnitLoc(KP)local real oP=GetUnitFacing(KP)local unit fmlocal group g=GetUnitsInRangeOfLocMatching(o4(),o7,Condition(function o5))local group OAlocal unit Oblocal integer MU=GetUnitAbilityLevel(KP,o0())if GetRandomReal(1,'d')<=o2(MU)and CountUnitsInGroup(g)>0thenset OA=GetRandomSubGroup(1,g)set fm=FirstOfGroup(OA)set Ob=CreateUnit(GetOwningPlayer(KP),'e01V',GetLocationX(o7)+'d'*Cos((oP+20)*bj_DEGTORAD),GetLocationY(o7)+'d'*Sin((oP+20)*bj_DEGTORAD),oP)call UnitAddAbility(Ob,o1())call SetUnitAbilityLevel(Ob,o1(),MU)call IssueTargetOrderById(Ob,851983,fm)call UnitApplyTimedLife(Ob,'BTLF',10)call DestroyGroup(OA)call DisableTrigger(GetTriggeringTrigger())call PolledWait(.5)call UnitAddAbility(Ob,'Abun')call EnableTrigger(GetTriggeringTrigger())endifcall DisableTrigger(GetTriggeringTrigger())call PolledWait(.75)call EnableTrigger(GetTriggeringTrigger())call DestroyGroup(g)call RemoveLocation(o7)endfunctionfunction gQ takes nothing returns nothingset CD=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(CD,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(CD,Condition(function o9))call TriggerAddAction(CD,function Oa)endfunctionfunction OB takes nothing returns booleanreturn GetSpellAbilityId()=='A0O5'endfunctionfunction Oc takes nothing returns nothinglocal timer t=GetExpiredTimer()local string f8=e4(t)local unit fP=EC(f8,"UnitVar")local player EL=GetOwningPlayer(fP)local real nr=Ei(f8,"Angle")local integer m8=GetUnitAbilityLevel(fP,'A0O5')local integer OC=EH(f8,"Count")local location Od=Eg(f8,"SourceLoc")local real Lq=GetLocationX(Od)+150*(3+m8-OC+1)*Cos(nr)local real LQ=GetLocationY(Od)+150*(3+m8-OC+1)*Sin(nr)local unit oO=CreateUnit(EL,'e00E',Lq,LQ,0)call UnitAddAbility(oO,'A0OE')call SetUnitAbilityLevel(oO,'A0OE',m8)call IssuePointOrderById(oO,852488,Lq,LQ)set OC=OC-1call Ea(f8,"Count",OC)if OC==0 or GetUnitState(fP,UNIT_STATE_LIFE)<1 thencall PauseTimer(t)call e5(f8)call RemoveLocation(Od)call SetUnitAnimation(fP,"stand")call DestroyTimer(t)endifendfunctionfunction OD takes nothing returns nothinglocal unit fP=GetTriggerUnit()local location NA=GetSpellTargetLoc()local timer t=CreateTimer()local string f8=e4(t)local integer m8=GetUnitAbilityLevel(fP,'A0O5')call SetUnitAnimation(fP,"spell")call Ea(f8,"Count",3+m8)call Eb(f8,"Angle",Atan2(GetLocationY(NA)-GetUnitY(fP),GetLocationX(NA)-GetUnitX(fP)))call e7(f8,"UnitVar",fP)call e7(f8,"SourceLoc",GetUnitLoc(fP))call TimerStart(t,.2,true,function Oc)call RemoveLocation(NA)endfunctionfunction gR takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function OB))call TriggerAddAction(t,function OD)endfunctionfunction Oe takes nothing returns booleanreturn GetUnitTypeId(GetSummonedUnit())=='o00C'endfunctionfunction OE takes nothing returns nothingcall SetUnitAbilityLevelSwapped('A058',GetSummonedUnit(),GetUnitAbilityLevelSwapped('A047',GetSummoningUnit()))endfunctionfunction Gc takes nothing returns nothingset Ce=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(Ce,EVENT_PLAYER_UNIT_SUMMON)call TriggerAddCondition(Ce,Condition(function Oe))call TriggerAddAction(Ce,function OE)endfunctionfunction Of takes nothing returns booleanreturn GetSpellAbilityId()=='A0M1'endfunctionfunction OF takes nothing returns booleanreturn GetUnitTypeId(GetTriggerUnit())=='Nbbc'endfunctionfunction Og takes nothing returns nothingcall SelectUnitRemoveForPlayer(GetTriggerUnit(),GetOwningPlayer(GetTriggerUnit()))endfunctionfunction OG takes unit Oh,unit Fd returns nothinglocal location NA=GetUnitLoc(Fd)local location OH=GetUnitLoc(Oh)local location iG=PolarProjectionBJ(NA,50,GetRandomReal(0,360))local effect fxcall SetUnitPositionLocFacingBJ(Oh,iG,AngleBetweenPoints(OH,NA))call SetUnitAnimation(Oh,"Attack")call UnitDamageTargetBJ(Oh,Fd,GetRandomReal(150,250),ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)set fx=AddSpecialEffectTargetUnitBJ("chest",Oh,"Abilities\\Spells\\NightElf\\Blink\\BlinkCaster.mdl")call RemoveLocation(NA)call RemoveLocation(OH)call RemoveLocation(iG)call DestroyEffect(fx)endfunctionfunction Oi takes nothing returns booleanif(GetUnitTypeId(GetFilterUnit())!='o003')thenif(GetUnitTypeId(GetFilterUnit())!='e00C')thenif(IsUnitAliveBJ(GetFilterUnit()))thenif(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)thenif(GetUnitAbilityLevelSwapped('A04R',GetFilterUnit())!=1)thenreturn trueendifendifendifendifendifreturn falseendfunctionfunction OI takes unit Oh returns unitlocal player Oj=GetOwningPlayer(Oh)local unit Fdlocal group EXlocal location OH=GetUnitLoc(Oh)local boolean OJ=falseset EX=GetUnitsInRangeOfLocMatching(575,OH,Condition(function Oi))loopexitwhen OJset Fd=GroupPickRandomUnit(EX)if(IsUnitVisible(Fd,Oj))thenif(IsUnitEnemy(Fd,Oj))thenset OJ=trueendifendifcall GroupRemoveUnit(EX,Fd)if(IsUnitGroupEmptyBJ(EX))thenif(OJ==false)thenset Fd=nullendifset OJ=trueendifendloopcall RemoveLocation(OH)call DestroyGroup(EX)set Ai=Fdreturn Aiendfunctionfunction Ok takes nothing returns nothinglocal trigger OK=CreateTrigger()local unit Oh=GetTriggerUnit()local player Oj=GetOwningPlayer(Oh)local unit Fd=GetSpellTargetUnit()local integer MU=GetUnitAbilityLevel(Oh,'A0M1')local integer ER=2local integer Es=3local integer Ol=GetUnitAbilityLevel(Oh,'A05G')if(MU==2)thenset Es=5endifif(MU==3)thenset Es=8endifif(Ol>0)thencall SetPlayerAbilityAvailable(Oj,'A05G',false)endifcall SelectUnitRemoveForPlayer(Oh,Oj)call SetUnitVertexColorBJ(Oh,'d','d','d',50)call SetUnitPathing(Oh,false)call SetUnitInvulnerable(Oh,true)call PolledWait(.01)call TriggerRegisterPlayerSelectionEventBJ(OK,Oj,true)call TriggerAddCondition(OK,Condition(function OF))call TriggerAddAction(OK,function Og)if(IsUnitAliveBJ(Oh))thencall OG(Oh,Fd)call PolledWait(.25)loopexitwhen ER>Esset Fd=OI(Oh)if(Fd!=null)thenif(IsUnitAliveBJ(Oh))thencall OG(Oh,Fd)call PolledWait(.25)endifelseset ER=Es+1endifset ER=ER+1endloopendifcall DisableTrigger(OK)call SetUnitPathing(Oh,true)call SetUnitInvulnerable(Oh,false)call SetUnitScalePercent(Oh,100.,100.,100.)call SetUnitVertexColorBJ(Oh,'d','d','d',.0)call SelectUnitAddForPlayer(Oh,Oj)if(Ol>0)thencall UnitAddAbility(Oh,'A05G')call SetUnitAbilityLevel(Oh,'A05G',Ol)endifcall PolledWait(.01)if(Ol>0)thencall SetPlayerAbilityAvailable(Oj,'A05G',true)endifendfunctionfunction GC takes nothing returns nothingset CE=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(CE,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(CE,Condition(function Of))call TriggerAddAction(CE,function Ok)endfunctionfunction OL takes nothing returns booleanreturn GetSpellAbilityId()=='A07Y'endfunctionfunction Om takes nothing returns nothingcall Ea(e4(GetSpellTargetUnit()),"ManaLeakLevel",GetUnitAbilityLevel(GetTriggerUnit(),'A07Y'))endfunctionfunction Gd takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function OL))call TriggerAddAction(t,function Om)endfunctionfunction OM takes nothing returns booleanreturn GetUnitAbilityLevel(GetTriggerUnit(),'B03V')>0endfunctionfunction On takes nothing returns nothinglocal unit fP=GetTriggerUnit()local integer m8=EH(e4(fP),"ManaLeakLevel")call SetUnitManaBJ(GetTriggerUnit(),(GetUnitStateSwap(UNIT_STATE_MANA,GetTriggerUnit())*(.2*(5.-I2R(m8)))))endfunctionfunction GD takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function OM))call TriggerAddAction(t,function On)endfunctionfunction ON takes nothing returns booleanreturn GetSpellAbilityId()=='A07N'endfunctionfunction Oo takes nothing returns nothinglocal unit Jz=GetTriggerUnit()local unit Fd=GetSpellTargetUnit()call PolledWait(.01)call SetUnitManaBJ(Fd,(GetUnitStateSwap(UNIT_STATE_MANA,Fd)+(75.*I2R(GetUnitAbilityLevelSwapped('A07N',Jz)))))endfunctionfunction Ge takes nothing returns nothingset Cf=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(Cf,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(Cf,Condition(function ON))call TriggerAddAction(Cf,function Oo)endfunctionfunction OO takes nothing returns booleanreturn GetSpellAbilityId()=='A085'endfunctionfunction Op takes nothing returns nothinglocal timer t=GetExpiredTimer()local string f8=e4(t)local integer OP=EH(f8,"Stage")local integer Oq=EH(f8,"MaxStage")local unit Jz=EC(f8,"Caster")set OP=OP+1if(OP>Oq)thenset OP=Oqendifcall SetUnitScalePercent(Jz,(100.+(15.*I2R(OP))),(100.+(15.*I2R(OP))),(100.+(15.*I2R(OP))))call Ea(f8,"Stage",OP)endfunctionfunction OQ takes nothing returns nothinglocal string f8=e4(GetTriggeringTrigger())local timer t=ED(f8,"Timer")local string OR=e4(t)local unit Jz=EC(OR,"Caster")local integer OP=EH(OR,"Stage")local real Os=Ei(OR,"Direction")local location iG=GetUnitLoc(Jz)call CreateNUnitsAtLoc(1,'e00E',GetOwningPlayer(Jz),iG,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,'A087')call SetUnitAbilityLevel(bj_lastCreatedUnit,'A087',OP)call IssuePointOrderByIdLoc(bj_lastCreatedUnit,852580,PolarProjectionBJ(iG,200.,Os))call KillUnit(Jz)call RemoveLocation(iG)call PauseTimer(t)call TriggerRemoveAction(GetTriggeringTrigger(),EG(f8,"TriggerAction"))call e5(f8)call e5(OR)call PolledWait(1)call DestroyTimer(t)call Fj(GetTriggeringTrigger())endfunctionfunction OS takes nothing returns nothinglocal location iG=GetUnitLoc(GetTriggerUnit())local timer t=CreateTimer()local real Ot=.5local trigger OT=CreateTrigger()local string f8=e4(t)call TriggerRegisterUnitEvent(OT,GetTriggerUnit(),EVENT_UNIT_SPELL_ENDCAST)call e7(e4(OT),"TriggerAction",TriggerAddAction(OT,function OQ))call CreateNUnitsAtLoc(1,'u00J',GetOwningPlayer(GetTriggerUnit()),PolarProjectionBJ(iG,150.,GetUnitFacing(GetTriggerUnit())),GetUnitFacing(GetTriggerUnit()))call RemoveLocation(iG)call e7(f8,"OQ",OT)call Ea(f8,"Stage",0)call Ea(f8,"MaxStage",2+GetUnitAbilityLevel(GetTriggerUnit(),'A085')*2)call Eb(f8,"Direction",GetUnitFacing(GetTriggerUnit()))call e7(f8,"Caster",bj_lastCreatedUnit)call e7(e4(OT),"Timer",t)call TimerStart(t,Ot,true,function Op)endfunctionfunction GE takes nothing returns nothingset Cg=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(Cg,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(Cg,Condition(function OO))call TriggerAddAction(Cg,function OS)endfunctionfunction Ou takes nothing returns booleanreturn GetSpellAbilityId()=='A054'or GetSpellAbilityId()=='A00U'endfunctionfunction OU takes nothing returns booleanlocal unit Ov=GetFilterUnit()if IsUnitType(Ov,UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(Ov,'A04R')==0 thenif GetUnitState(Ov,UNIT_STATE_LIFE)>0 and IsUnitVisible(Ov,GetOwningPlayer(Ai))and IsUnitEnemy(Ov,GetOwningPlayer(Ai))thenif EH(e4(be),e4(Ov))<Aj thenreturn trueendifendifendifreturn falseendfunctionfunction OV takes nothing returns nothinglocal trigger t=GetTriggeringTrigger()local string f8=e4(t)local unit Ow=EC(f8,"Luna")local integer OW=EH(f8,"Limit")local integer Oxlocal integer OXlocal integer Oy=GetUnitAbilityLevel(Ow,'A042')local group EX=CreateGroup()local boolexpr Ey=Condition(function OU)local unit Fdlocal unit Jzif GetUnitAbilityLevel(Ow,'A054')>0 thenset Ox=4elseset Ox=5endifif Oy==2 thenset OX='A031'elseif Oy==3 thenset OX='A032'elseif Oy==4 thenset OX='A033'elseset OX='A05O'endifset Ai=Owset Aj=Oxset be=tcall GroupEnumUnitsInRange(EX,GetUnitX(Ow),GetUnitY(Ow),700,Ey)call DestroyBoolExpr(Ey)set Fd=GroupPickRandomUnit(EX)call DestroyGroup(EX)if Fd!=null thencall Ea(f8,e4(Fd),EH(f8,e4(Fd))+1)set Jz=CreateUnit(GetOwningPlayer(Ow),'e00C',GetUnitX(Ow),GetUnitY(Ow),0)call UnitAddAbility(Jz,OX)call IssueTargetOrderById(Jz,852231,Fd)call UnitApplyTimedLife(Jz,'BTLF',2.)call SetUnitPathing(Jz,false)call SetUnitInvulnerable(Jz,true)call UnitAddAbility(Jz,'Aloc')endifset OW=OW-1if OW==0 thencall e5(f8)call DestroyTrigger(t)elsecall Ea(f8,"Limit",OW)endifendfunctionfunction OY takes nothing returns nothinglocal unit Ow=GetTriggerUnit()local trigger t=CreateTrigger()local string f8=e4(t)local integer OWif GetSpellAbilityId()=='A054'thenset OW=1+3*GetUnitAbilityLevel(Ow,'A054')elseset OW=4*GetUnitAbilityLevel(Ow,'A00U')endifcall e7(f8,"Luna",Ow)call Ea(f8,"Limit",OW)call TriggerAddAction(t,function OV)call TriggerExecute(t)call TriggerRegisterTimerEvent(t,.5,true)endfunctionfunction Gf takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function Ou))call TriggerAddAction(t,function OY)endfunctionfunction Oz takes nothing returns booleanif(not(GetLearnedSkill()=='A041'))thenreturn falseendifreturn trueendfunctionfunction OZ takes nothing returns nothinglocal unit Ow=GetTriggerUnit()local player O0=GetOwningPlayer(Ow)local integer MU=GetUnitAbilityLevelSwapped('A041',GetTriggerUnit())call SetPlayerTechResearchedSwap('Remg',MU,O0)endfunctionfunction GF takes nothing returns nothingset CG=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(CG,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(CG,Condition(function Oz))call TriggerAddAction(CG,function OZ)endfunctionfunction O1 takes nothing returns booleanreturn GetSpellAbilityId()=='A0KU'endfunctionfunction O2 takes nothing returns booleanreturn IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) and IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))endfunctionfunction O3 takes nothing returns nothingcall UnitAddAbility(GetEnumUnit(),'A0KT')call SetUnitAbilityLevel(GetEnumUnit(),'A0KT',Aj)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Invisibility\\InvisibilityTarget.mdl",GetEnumUnit(),"chest"))endfunctionfunction O4 takes nothing returns nothingcall UnitRemoveAbility(GetEnumUnit(),'A0KT')endfunctionfunction O5 takes nothing returns nothinglocal timer t=GetExpiredTimer()local string f8=e4(t)local group EX=EE(f8,"Group")call ForGroup(EX,function O4)call DestroyGroup(EX)call Fn(t)endfunctionfunction O6 takes nothing returns nothinglocal unit fw=GetTriggerUnit()local boolexpr Ey=Condition(function O2)local group EX=CreateGroup()local timer t=CreateTimer()local string f8=e4(t)local integer m8=GetUnitAbilityLevel(fw,'A0KU')local real O7=5+2*m8set Aj=m8call GroupEnumUnitsInRange(EX,0,0,9999,Ey)call ForGroup(EX,function O3)call DestroyBoolExpr(Ey)call e7(f8,"Group",EX)call TimerStart(t,O7,false,function O5)endfunctionfunction HI takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function O1))call TriggerAddAction(t,function O6)endfunctionfunction O8 takes nothing returns booleanreturn GetSpellAbilityId()=='A0KV'endfunctionfunction O9 takes nothing returns booleanreturn IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0 and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>1endfunctionfunction pa takes nothing returns nothinglocal real FD=Ff(GetTriggerUnit(),GetEnumUnit())if FD>600 thenif GetRandomInt(1,'d')<61 thencall GroupAddUnit(Aq,GetEnumUnit())endifelseif FD<200 and An==false thencall GroupAddUnit(Aq,GetEnumUnit())set Ai=GetEnumUnit()set An=trueelsecall GroupAddUnit(Aq,GetEnumUnit())endifendfunctionfunction pA takes nothing returns nothingcall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Starfall\\StarfallTarget.mdl",GetEnumUnit(),"origin"))endfunctionfunction pb takes nothing returns nothingcall UnitDamageTarget(Ai,GetEnumUnit(),AJ,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)endfunctionfunction pB takes nothing returns nothinglocal unit fw=GetTriggerUnit()local boolexpr Ey=Condition(function O9)local group EX=CreateGroup()local integer m8=GetUnitAbilityLevel(fw,'A0KV')local group pc=CreateGroup()local unit pClocal effect FX=AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Starfall\\StarfallCaster.mdl",fw,"origin")set Ai=nullset An=falseset Aq=pccall GroupEnumUnitsInRange(EX,GetUnitX(fw),GetUnitY(fw),900,Ey)call ForGroup(EX,function pa)call DestroyBoolExpr(Ey)call DestroyGroup(EX)set pC=Aicall ForGroup(pc,function pA)call PolledWait(.3)set AJ=m8*75set Ai=fwcall ForGroup(pc,function pb)call DestroyGroup(pc)call PolledWait(.5)if pC!=null and GetUnitState(pC,UNIT_STATE_LIFE)>1 thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Starfall\\StarfallTarget.mdl",pC,"origin"))call PolledWait(.3)call UnitDamageTarget(fw,pC,m8*75/2,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)endifcall PolledWait(2)call DestroyEffect(FX)endfunctionfunction Hj takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function O8))call TriggerAddAction(t,function pB)endfunctionfunction pd takes nothing returns booleanreturn GetSpellAbilityId()=='A0L8'endfunctionfunction pD takes nothing returns booleanreturn IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(Ai))and GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0 and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>1 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==falseendfunctionfunction pe takes real pE,real pf,real Fe,real FE returns integerlocal real FD=SquareRoot((Fe-pE)*(Fe-pE)+(FE-pf)*(FE-pf))return f1(R2I(FD/150),10)endfunctionfunction pF takes nothing returns nothinglocal timer t=GetExpiredTimer()local string f8=e4(t)local unit fw=EC(f8,"Hero")local unit pg=EC(f8,"Projectile")local real EW=Ei(f8,"TargetX")local real Ex=Ei(f8,"TargetY")local real nr=Ei(f8,"Angle")local real Fe=GetUnitX(pg)local real FE=GetUnitY(pg)local real pG=fs(GetUnitX(pg)+30*Cos(nr))local real ph=ft(GetUnitY(pg)+30*Sin(nr))local boolexpr Ey=Condition(function pD)local group EX=CreateGroup()local unit Jzlocal unit Fdlocal real pElocal real pfcall SetUnitX(pg,pG)call SetUnitY(pg,ph)set Ai=fwcall GroupEnumUnitsInRange(EX,pG,ph,150,Ey)set Fd=FirstOfGroup(EX)call DestroyGroup(EX)call DestroyBoolExpr(Ey)if Fd!=null thenset pE=Ei(f8,"OriginalX")set pf=Ei(f8,"OriginalY")set Jz=CreateUnit(GetOwningPlayer(fw),'e00E',Fe,FE,0)call UnitAddAbility(Jz,'A0L7')call SetUnitAbilityLevel(Jz,'A0L7',pe(pE,pf,Fe,FE))call IssueTargetOrderById(Jz,852095,Fd)call UnitDamageTarget(fw,Fd,90*GetUnitAbilityLevel(fw,'A0L8'),true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)call KillUnit(pg)call Fn(t)elseif(pG-EW)*(pG-EW)+(ph-Ex)*(ph-Ex)<1600 thencall KillUnit(pg)call Fn(t)endifendfunctionfunction pH takes nothing returns nothinglocal unit fw=GetTriggerUnit()local real Fe=fs(GetUnitX(fw))local real FE=ft(GetUnitY(fw))local location NA=GetSpellTargetLoc()local real EW=GetLocationX(NA)local real Ex=GetLocationY(NA)local real nr=Atan2(Ex-FE,EW-Fe)local timer t=CreateTimer()local string f8=e4(t)local unit pg=CreateUnit(GetOwningPlayer(fw),'h005',Fe,FE,nr*bj_RADTODEG)call RemoveLocation(NA)call SetUnitFacing(pg,nr*bj_RADTODEG)call SetUnitPathing(pg,false)set EW=fs(Fe+3000*Cos(nr))set Ex=ft(FE+3000*Sin(nr))call Eb(f8,"OriginalX",Fe)call Eb(f8,"OriginalY",FE)call Eb(f8,"TargetX",EW)call Eb(f8,"TargetY",Ex)call Eb(f8,"Angle",nr)call e7(f8,"Hero",fw)call e7(f8,"Projectile",pg)call TimerStart(t,.035,true,function pF)endfunctionfunction HJ takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function pd))call TriggerAddAction(t,function pH)call fT('A0L7')endfunctionfunction pi takes nothing returns booleanreturn GetSpellAbilityId()=='A0LN'endfunctionfunction pI takes nothing returns booleanreturn IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) and IsUnitAlly(GetFilterUnit(),GetOwningPlayer(Ai))endfunctionfunction pj takes nothing returns nothinglocal unit fw=GetEnumUnit()local unit Jz=CreateUnit(GetOwningPlayer(fw),'e01R',0,0,0)call UnitAddAbility(Jz,'A0LO')call SetUnitAbilityLevel(Jz,'A0LO',GetUnitAbilityLevel(Ai,'A0LN'))call UnitApplyTimedLife(Jz,'BTLF',10)endfunctionfunction pJ takes unit fw returns nothinglocal group EX=CreateGroup()local boolexpr Ey=Condition(function pI)set Ai=fwcall GroupEnumUnitsInRange(EX,GetUnitX(fw),GetUnitY(fw),800,Ey)call ForGroup(EX,function pj)call DestroyBoolExpr(Ey)call DestroyGroup(EX)endfunctionfunction pk takes unit fw returns nothinglocal string f8=e4(fw)local string pK=Ej(f8,"OrderType")local string pl=OrderId2String(EH(f8,"OrderId"))local real EWlocal real Exlocal unit Fdlocal trigger t=Ee(f8,"Trigger_TrackOrder")local boolean pL=not EI(f8,"Idle")local boolean pm=EI(f8,"SuperOrder")call DisableTrigger(t)call IssueImmediateOrderById(fw,851972)if pK=="Target"and(pL or pm)thenset Fd=EC(f8,"OrderTarget")call IssueTargetOrder(fw,pl,Fd)elseif pK=="Point"and(pL or pm)thenset EW=Ei(f8,"OrderPointX")set Ex=Ei(f8,"OrderPointY")call IssuePointOrder(fw,pl,EW,Ex)elseif(pL or pm)thencall IssueImmediateOrder(fw,"OrderString")endifcall Ec(f8,"SuperOrder",false)call EnableTrigger(t)endfunctionfunction pM takes nothing returns nothinglocal timer t=GetExpiredTimer()local string f8=e4(t)local unit fw=EC(f8,"Hero")local real pn=Ei(f8,"DistanceRemaining")local real pN=Ei(f8,"OriginalDistance")local real nr=Ei(f8,"Angle")local real pG=GetUnitX(fw)+30*Cos(nr*bj_DEGTORAD)local real ph=GetUnitY(fw)+30*Sin(nr*bj_DEGTORAD)local real po=200local real pO=(1-pn/pN)*po*2if pO>po thenset pO=po*2-pOendifcall SetUnitFlyHeight(fw,f6(pO,0),0)call SetUnitX(fw,fs(pG))call SetUnitY(fw,ft(ph))call SetUnitFacing(fw,nr)call Eb(f8,"DistanceRemaining",pn-20)if pO<1 and pn-pN!=0 thencall Ec(e4(fw),"InAir",false)call SetUnitFacing(fw,nr)call SetUnitAnimation(fw,"stand")call SetUnitPathing(fw,true)call SetUnitInvulnerable(fw,false)call pk(fw)call pJ(fw)call PauseTimer(t)call e5(f8)call DestroyTimer(t)endifendfunctionfunction pp takes nothing returns nothinglocal unit fw=GetTriggerUnit()local integer m8=GetUnitAbilityLevel(fw,'A0LN')local real FD=350+50*m8local real nr=GetUnitFacing(fw)local real Fe=GetUnitX(fw)local real FE=GetUnitY(fw)local real EW=fs(Fe+FD*Cos(nr*bj_DEGTORAD))local real Ex=ft(FE+FD*Sin(nr*bj_DEGTORAD))local timer t=CreateTimer()local string f8=e4(t)local trigger pP=Ee(e4(fw),"Trigger_TrackOrder")set FD=SquareRoot((Fe-EW)*(Fe-EW)+(FE-Ex)*(FE-Ex))if FD>'d' thencall UnitAddAbility(fw,'Amrf')call UnitRemoveAbility(fw,'Amrf')call SetUnitPathing(fw,false)call SetUnitInvulnerable(fw,true)call SetUnitAnimationByIndex(fw,6)call DisableTrigger(pP)call IssueImmediateOrderById(fw,851972)call EnableTrigger(pP)call Eb(f8,"DistanceRemaining",FD)call Eb(f8,"OriginalDistance",FD)call Eb(f8,"Angle",nr)call e7(f8,"Hero",fw)call TimerStart(t,.025,true,function pM)call Ec(e4(fw),"Leap_InAir",true)call Ec(e4(fw),"SuperOrder",false)endifcall PolledWait(5)call SetUnitPathing(fw,true)call SetUnitInvulnerable(fw,false)endfunctionfunction pq takes nothing returns nothingendfunctionfunction pQ takes nothing returns booleanreturn OrderId2String(GetIssuedOrderId())!="windwalk"endfunctionfunction pr takes nothing returns nothinglocal unit fw=GetTriggerUnit()local string f8=e4(fw)local boolean pR=EI(f8,"Leap_InAir")call Ea(f8,"OrderId",GetIssuedOrderId())call Ec(f8,"Idle",false)if GetTriggerEventId()==EVENT_UNIT_ISSUED_TARGET_ORDER thencall EB(f8,"OrderType","Target")call e7(f8,"OrderTarget",GetOrderTarget())elseif GetTriggerEventId()==EVENT_UNIT_ISSUED_POINT_ORDER thenif pR or FN(GetUnitX(fw),GetUnitY(fw),GetOrderPointX(),GetOrderPointY())>800 thencall EB(f8,"OrderType","Point")call Eb(f8,"OrderPointX",GetOrderPointX())call Eb(f8,"OrderPointY",GetOrderPointY())elsecall Ec(f8,"Idle",true)endifelsecall EB(f8,"OrderType","Instant")endifif pR thencall Ec(f8,"SuperOrder",true)endifendfunctionfunction ps takes nothing returns nothinglocal unit fw=EC(e4(GetExpiredTimer()),"Hero")local string f8=e4(fw)local real x=GetUnitX(fw)local real y=GetUnitY(fw)local string pK=Ej(f8,"OrderType")if pK=="Point"and FN(GetUnitX(fw),GetUnitY(fw),Ei(f8,"OrderPointX"),Ei(f8,"OrderPointY"))<'d' thencall Ec(f8,"Idle",true)endifendfunctionfunction pS takes nothing returns nothinglocal unit fw=GetTriggerUnit()local trigger t=CreateTrigger()local timer t2call TriggerRegisterUnitEvent(t,fw,EVENT_UNIT_ISSUED_TARGET_ORDER)call TriggerRegisterUnitEvent(t,fw,EVENT_UNIT_ISSUED_POINT_ORDER)call TriggerRegisterUnitEvent(t,fw,EVENT_UNIT_ISSUED_ORDER)call TriggerAddAction(t,function pr)call TriggerAddCondition(t,Condition(function pQ))call e7(e4(fw),"Trigger_TrackOrder",t)set t2=CreateTimer()call e7(e4(t2),"Hero",fw)call TimerStart(t2,.3,true,function ps)call e7(e4(fw),"Timer_CheckIdle",t2)endfunctionfunction pt takes nothing returns nothingif GetUnitAbilityLevel(GetTriggerUnit(),'A0LN')==1 thencall pS()endifendfunctionfunction Hk takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function pi))call TriggerAddAction(t,function pp)set t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(t,Condition(function pi))call TriggerAddAction(t,function pq)set t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddAction(t,function pt)endfunctionfunction pT takes nothing returns nothinglocal unit fP=EC(e4(GetTriggeringTrigger()),"Morphling")if GetUnitTypeId(fP)!='O00P'thencall DisableTrigger(GetTriggeringTrigger())elseif(GetUnitState(fP,UNIT_STATE_LIFE)>0)thencall SetUnitVertexColorBJ(fP,GetRandomReal(.0,255.),GetRandomReal(.0,255.),GetRandomReal(.0,255.),GetRandomReal(.0,10.))endifendfunctionfunction pu takes nothing returns booleanreturn GetUnitTypeId(GetTriggerUnit())=='O00P'and IsUnitIllusion(GetTriggerUnit())==falseendfunctionfunction pU takes nothing returns nothinglocal trigger tif(EI(e4(GetTriggerUnit()),"HasMorphling")==false)thenset t=CreateTrigger()call e7(e4(t),"Morphling",GetTriggerUnit())call e7(e4(GetTriggerUnit()),"ColorTrigger",t)call TriggerAddAction(t,function pT)call TriggerRegisterTimerEvent(t,2.,true)call Ec(e4(GetTriggerUnit()),"HasMorphling",true)call UnitAddItem(GetTriggerUnit(),CreateItem('I00E',GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))endifendfunctionfunction Gg takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterEnterRectSimple(t,bj_mapInitialPlayableArea)call TriggerAddCondition(t,Condition(function pu))call TriggerAddAction(t,function pU)endfunctionfunction pv takes nothing returns booleanreturn GetSpellAbilityId()=='A0FN'endfunctionfunction pV takes nothing returns booleanlocal unit Ov=GetFilterUnit()if IsUnitInGroup(Ov,Aq)thenreturn falseendifif IsUnitEnemy(Ov,GetOwningPlayer(Ai))and GetUnitAbilityLevel(Ov,'A04R')!=1 and GetUnitState(Ov,UNIT_STATE_LIFE)>0 and IsUnitType(Ov,UNIT_TYPE_STRUCTURE)==false thenreturn trueendifreturn falseendfunctionfunction pw takes nothing returns nothingcall UnitDamageTarget(Ai,GetEnumUnit(),AJ,true,true,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)endfunctionfunction pW takes nothing returns nothinglocal timer t=GetExpiredTimer()local string f8=e4(t)local unit Jz=EC(f8,"Caster")local unit fP=EC(f8,"UnitVar")local real nr=Ei(f8,"Angle")local integer px=EH(f8,"Remaining")local group M2=EE(f8,"AlreadyDamaged")local real pX=GetUnitX(fP)local real py=GetUnitY(fP)local real pG=pX+1000*.05*Cos(nr)local real ph=py+1000*.05*Sin(nr)local group EX=CreateGroup()local boolexpr Ey=Condition(function pV)set Ai=fPset AJ=GetUnitAbilityLevel(fP,'A0FN')*75+25set Aq=M2call GroupEnumUnitsInRange(EX,pX,py,280,Ey)call ForGroup(EX,function pw)call GroupAddGroup(EX,M2)call DestroyBoolExpr(Ey)call DestroyGroup(EX)set px=px-1call Ea(f8,"Remaining",px)call SetUnitPosition(fP,pG,ph)call SetUnitPosition(Jz,pG,ph)call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",pX,py))if px==0 thencall RemoveUnit(Jz)call ShowUnit(fP,true)call SetUnitPathing(fP,true)call ClearSelectionForPlayer(GetOwningPlayer(fP))call SelectUnitAddForPlayer(fP,GetOwningPlayer(fP))call PauseTimer(t)call PolledWait(1)call e5(f8)call DestroyTimer(t)endifendfunctionfunction pY takes nothing returns nothinglocal unit fP=GetTriggerUnit()local real Fe=GetUnitX(fP)local real FE=GetUnitY(fP)local location NA=GetSpellTargetLoc()local real EW=GetLocationX(NA)local real Ex=GetLocationY(NA)local timer t=CreateTimer()local string f8=e4(t)local group M2=CreateGroup()local unit Jz=CreateUnit(GetOwningPlayer(fP),'o00G',Fe,FE,0)call RemoveLocation(NA)if GetSpellTargetUnit()!=null thenset EW=GetUnitX(GetSpellTargetUnit())set Ex=GetUnitY(GetSpellTargetUnit())endifcall ShowUnit(fP,false)call SetUnitPathing(fP,false)call SetUnitPathing(Jz,false)call e7(f8,"UnitVar",fP)call e7(f8,"Caster",Jz)call e7(f8,"AlreadyDamaged",M2)call Eb(f8,"Angle",Atan2(Ex-FE,EW-Fe))call Ea(f8,"Remaining",f2(R2I(SquareRoot((EW-Fe)*(EW-Fe)+(Ex-FE)*(Ex-FE))/50),1))call TimerStart(t,.04,true,function pW)if(j[GetPlayerId(GetOwningPlayer(fP))]==false)thenset j[GetPlayerId(GetOwningPlayer(fP))]=truecall PolledWait(5)set j[GetPlayerId(GetOwningPlayer(fP))]=falseendifendfunctionfunction GG takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function pv))call TriggerAddAction(t,function pY)endfunctionfunction pz takes nothing returns nothinglocal unit pZ=EC(e4(GetTriggeringTrigger()),"Morphling")if(GetHeroStatBJ(1,pZ,false)>2*GetUnitAbilityLevel(pZ,'A0KX')and GetUnitState(pZ,UNIT_STATE_MANA)>=20.)thencall SetUnitManaBJ(pZ,GetUnitState(pZ,UNIT_STATE_MANA)-20)call ModifyHeroStat(1,pZ,1,2*GetUnitAbilityLevel(pZ,'A0KX'))call ModifyHeroStat(0,pZ,0,2*GetUnitAbilityLevel(pZ,'A0KX'))endifendfunctionfunction p0 takes nothing returns nothinglocal unit pZ=EC(e4(GetTriggeringTrigger()),"Morphling")if(GetHeroStatBJ(0,pZ,false)>2*GetUnitAbilityLevel(pZ,'A0KX')and GetUnitState(pZ,UNIT_STATE_MANA)>=20.)thencall SetUnitManaBJ(pZ,GetUnitState(pZ,UNIT_STATE_MANA)-20)call ModifyHeroStat(0,pZ,1,2*GetUnitAbilityLevel(pZ,'A0KX'))call ModifyHeroStat(1,pZ,0,2*GetUnitAbilityLevel(pZ,'A0KX'))endifendfunctionfunction p1 takes nothing returns booleanif GetIssuedOrderId()==852550or GetIssuedOrderId()==852547thenif GetTriggerUnit()==EC(e4(GetTriggeringTrigger()),"Morphling")thenreturn trueendifendifreturn falseendfunctionfunction p2 takes nothing returns nothinglocal string f8=e4(GetTriggeringTrigger())local trigger p3=Ee(f8,"MorphStr")local trigger p4=Ee(f8,"MorphAgi")if(GetIssuedOrderId()==852547)thencall DisableTrigger(p3)endifif(GetIssuedOrderId()==852550)thencall DisableTrigger(p4)endifendfunctionfunction p5 takes nothing returns booleanif GetIssuedOrderId()==852549or GetIssuedOrderId()==852546thenif GetTriggerUnit()==EC(e4(GetTriggeringTrigger()),"Morphling")thenreturn trueendifendifreturn falseendfunctionfunction p6 takes nothing returns nothinglocal string f8=e4(GetTriggeringTrigger())local trigger p3=Ee(f8,"MorphStr")local trigger p4=Ee(f8,"MorphAgi")if(GetIssuedOrderId()==852546)thencall EnableTrigger(p3)call DisableTrigger(p4)endifif(GetIssuedOrderId()==852549)thencall DisableTrigger(p3)call EnableTrigger(p4)endifendfunctionfunction p7 takes nothing returns booleanreturn GetLearnedSkill()=='A0KX'and IsUnitIllusion(GetTriggerUnit())==falseendfunctionfunction p8 takes nothing returns nothinglocal unit pZ=GetTriggerUnit()local trigger p9local trigger Palocal trigger p3local trigger p4if(GetUnitAbilityLevel(pZ,'A0KX')==1)thencall UnitAddAbility(pZ,'A0KW')set p4=CreateTrigger()call DisableTrigger(p4)call TriggerRegisterTimerEventPeriodic(p4,1.)call TriggerAddAction(p4,function p0)call e7(e4(p4),"Morphling",pZ)set p3=CreateTrigger()call DisableTrigger(p3)call TriggerRegisterTimerEventPeriodic(p3,1.)call TriggerAddAction(p3,function pz)call e7(e4(p3),"Morphling",pZ)set p9=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(p9,EVENT_PLAYER_UNIT_ISSUED_ORDER)call TriggerAddCondition(p9,Condition(function p5))call TriggerAddAction(p9,function p6)call e7(e4(p9),"MorphAgi",p4)call e7(e4(p9),"MorphStr",p3)call e7(e4(p9),"Morphling",pZ)set Pa=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(Pa,EVENT_PLAYER_UNIT_ISSUED_ORDER)call TriggerAddCondition(Pa,Condition(function p1))call TriggerAddAction(Pa,function p2)call e7(e4(Pa),"MorphAgi",p4)call e7(e4(Pa),"MorphStr",p3)call e7(e4(Pa),"Morphling",pZ)elsecall SetUnitAbilityLevel(pZ,'A0KW',GetUnitAbilityLevel(pZ,'A0KX'))endifendfunctionfunction Gh takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function p7))call TriggerAddAction(t,function p8)endfunctionfunction PA takes nothing returns booleanreturn GetSpellAbilityId()=='A0G6'and GetUnitTypeId(GetSpellTargetUnit())!='n00L'endfunctionfunction Pb takes nothing returns nothinglocal unit fP=GetTriggerUnit()local unit Fd=GetSpellTargetUnit()local integer m8=GetUnitAbilityLevel(fP,'A0G6')local unit Jzlocal location PBlocal real nrif GetHeroAgi(fP,true)>GetHeroStr(fP,true)thencall UnitDamageTarget(fP,Fd,(m8*.4+1)*GetHeroAgi(fP,true)+(30*m8),true,true,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)elseset nr=Atan2(GetUnitY(Fd)-GetUnitY(fP),GetUnitX(Fd)-GetUnitX(fP))set PB=Location(GetUnitX(Fd)+200*Cos(nr),GetUnitY(Fd)+200*Sin(nr))call SetUnitPositionLoc(Fd,PB)call EnumDestructablesInCircleBJ(200,PB,function fv)call RemoveLocation(PB)set Jz=CreateUnit(GetOwningPlayer(fP),'e00C',GetUnitX(Fd),GetUnitY(Fd),0)call UnitAddAbility(Jz,'A0DU')call SetUnitAbilityLevel(Jz,'A0DU',m8)call IssueTargetOrderById(Jz,852231,Fd)call UnitApplyTimedLife(Jz,'BTLF',1)call SetUnitPathing(Jz,false)call SetUnitInvulnerable(Jz,true)call UnitAddAbility(Jz,'Aloc')if GetHeroAgi(fP,true)==GetHeroStr(fP,true)thencall UnitDamageTarget(fP,Fd,(m8*.4+1)*GetHeroAgi(fP,true)+(30*m8),true,true,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)endifendifendfunctionfunction GH takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function PA))call TriggerAddAction(t,function Pb)endfunctionfunction Pc takes nothing returns nothinglocal trigger t=GetTriggeringTrigger()local unit fw=EC(e4(t),"Hero")local unit PC=EC(e4(fw),"Replicate")call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",GetUnitX(PC),GetUnitY(PC)))call RemoveUnit(PC)call UnitRemoveAbility(fw,'A0GC')call SetPlayerAbilityAvailable(GetOwningPlayer(fw),'A0G8',true)call e5(e4(t))call Fj(t)endfunctionfunction Pd takes nothing returns booleanif GetSpellAbilityId()=='A0GC'thenreturn trueendifreturn falseendfunctionfunction PD takes nothing returns nothinglocal unit fw=GetTriggerUnit()local string f8=e4(fw)local unit PC=EC(f8,"Replicate")local real x=GetUnitX(PC)local real y=GetUnitY(PC)call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",GetUnitX(fw),GetUnitY(fw)))call KillUnit(PC)if not EV(fw,x,y)thencall SetUnitX(fw,x)call SetUnitY(fw,y)call PanCameraToTimedForPlayer(GetOwningPlayer(fw),x,y,0)call IssueImmediateOrderById(fw,851972)elsecall fI(GetOwningPlayer(fw),"Unable to Morph Replicate")endifendfunctionfunction Pe takes nothing returns booleanreturn GetUnitAbilityLevel(GetSummonedUnit(),'B030')>0endfunctionfunction PE takes nothing returns nothinglocal unit fw=GetSummoningUnit()local string f8=e4(fw)local unit Fd=EC(f8,"ReplicateTarget")local unit PC=GetSummonedUnit()local trigger tcall SetPlayerAbilityAvailable(GetOwningPlayer(fw),'A0G8',false)call UnitAddAbility(fw,'A0GC')call SetUnitColor(PC,GetPlayerColor(GetOwningPlayer(Fd)))call e7(f8,"Replicate",PC)set t=CreateTrigger()call TriggerRegisterUnitEvent(t,fw,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(t,PC,EVENT_UNIT_DEATH)call TriggerAddAction(t,function Pc)call e7(e4(t),"Hero",fw)endfunctionfunction Pf takes nothing returns booleanreturn GetSpellAbilityId()=='A0G8'endfunctionfunction PF takes nothing returns nothinglocal unit fw=GetTriggerUnit()local unit Fd=GetSpellTargetUnit()call e7(e4(fw),"ReplicateTarget",Fd)endfunctionfunction Gi takes nothing returns nothinglocal trigger tset t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function Pf))call TriggerAddAction(t,function PF)set t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SUMMON)call TriggerAddCondition(t,Condition(function Pe))call TriggerAddAction(t,function PE)set t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function Pd))call TriggerAddAction(t,function PD)endfunctionfunction Pg takes nothing returns nothinglocal unit fP=GetTriggerUnit()local unit Jz=CreateUnit(GetOwningPlayer(fP),'e00C',GetUnitX(fP),GetUnitY(fP),270)call UnitAddAbility(Jz,'A07T')call SetUnitAbilityLevel(Jz,'A07T',GetUnitAbilityLevel(fP,'A07U'))call UnitApplyTimedLife(Jz,'BTLF',1.)call IssueTargetOrderById(Jz,852227,GetEnumUnit())call SetUnitPathing(Jz,false)call SetUnitInvulnerable(Jz,true)call UnitAddAbility(Jz,'Aloc')endfunctionfunction PG takes nothing returns booleanreturn IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==falseendfunctionfunction Ph takes nothing returns booleanreturn GetSpellAbilityId()=='A07U'endfunctionfunction PH takes nothing returns nothinglocal unit fP=GetTriggerUnit()local integer m8=GetUnitAbilityLevel(fP,'A07U')local group EX=CreateGroup()local boolexpr Pi=Condition(function PG)call GroupEnumUnitsInRange(EX,GetUnitX(fP),GetUnitY(fP),500+500*m8,Pi)call ForGroup(EX,function Pg)call DestroyGroup(EX)call DestroyBoolExpr(Pi)endfunctionfunction GI takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function Ph))call TriggerAddAction(t,function PH)endfunctionfunction PI takes nothing returns booleanreturn GetLearnedSkill()=='A088'and IsUnitIllusion(GetTriggerUnit())==falseendfunctionfunction Pj takes nothing returns nothinglocal unit fP=GetTriggerUnit()local player EL=GetOwningPlayer(fP)local string f8=e4(fP)call Ea(f8,"MulticastLevel",EH(f8,"MulticastLevel")+1)endfunctionfunction Gj takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function PI))call TriggerAddAction(t,function Pj)endfunctionfunction PJ takes nothing returns booleanlocal unit Ov=GetFilterUnit()local unit fP=GetTriggerUnit()if IsUnitAlly(Ov,GetOwningPlayer(fP))and GetUnitState(Ov,UNIT_STATE_LIFE)>0 and GetUnitAbilityLevel(Ov,'Bblo')==0 thenif(GetOwningPlayer(Ov)==Ac[0]or GetOwningPlayer(Ov)==AC[0])thenif(GetUnitTypeId(Ov)=='ugho'or GetUnitTypeId(Ov)=='u001'or GetUnitTypeId(Ov)=='unec'or GetUnitTypeId(Ov)=='u002')thenreturn trueendifif(GetUnitTypeId(Ov)=='esen'or GetUnitTypeId(Ov)=='e00V'or GetUnitTypeId(Ov)=='edry'or GetUnitTypeId(Ov)=='e00W')thenreturn trueendifreturn falseelseif IsUnitType(Ov,UNIT_TYPE_HERO) thenreturn trueendifendifreturn falseendfunctionfunction Pk takes nothing returns booleanlocal integer E0=GetRandomInt(1,'d')return E0<=20 or(E0<=30 and GetUnitAbilityLevel(GetTriggerUnit(),'A088')<EH(e4(GetTriggerUnit()),"MulticastLevel"))endfunctionfunction PK takes nothing returns booleanif GetUnitAbilityLevel(GetTriggerUnit(),'A088')>0 and(GetSpellAbilityId()=='A083'or GetSpellAbilityId()=='A08I'or GetSpellAbilityId()=='A08G'or GetSpellAbilityId()=='A08F')thenreturn Pk()endifreturn falseendfunctionfunction Pl takes nothing returns nothinglocal unit fP=GetTriggerUnit()local integer m8=EH(e4(fP),"MulticastLevel")local texttag xlocal group EX=CreateGroup()local boolexpr Ey=Condition(function PJ)local unit Jzlocal unit gnlocal integer fA=GetSpellAbilityId()local integer ER=1set x=CreateTextTagUnitBJ("MULTICAST!",GetTriggerUnit(),5.,10,100.,.0,.0,25.)call SetTextTagVelocityBJ(x,64,90)call GroupEnumUnitsInRange(EX,GetUnitX(fP),GetUnitY(fP),600,Ey)if fP!=GetSpellTargetUnit()thencall GroupAddUnit(EX,fP)endifcall DestroyBoolExpr(Ey)loopexitwhen ER>m8set ER=ER+1set Jz=CreateUnit(GetOwningPlayer(fP),'e00C',GetUnitX(fP),GetUnitY(fP),270)call UnitAddAbility(Jz,fA)call SetUnitAbilityLevel(Jz,fA,GetUnitAbilityLevel(fP,fA))call UnitApplyTimedLife(Jz,'BTLF',1.)set gn=GroupPickRandomUnit(EX)call IssueTargetOrderById(Jz,852101,gn)call SetUnitPathing(Jz,false)call SetUnitInvulnerable(Jz,true)call UnitAddAbility(Jz,'Aloc')call GroupRemoveUnit(EX,gn)endloopcall DestroyGroup(EX)call PolledWait(1.5)call DestroyTextTag(x)endfunctionfunction GJ takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function PK))call TriggerAddAction(t,function Pl)endfunctionfunction PL takes nothing returns booleanlocal integer E0=GetRandomInt(1,'d')return E0<=20 or(E0<=30 and GetUnitAbilityLevel(GetTriggerUnit(),'A088')<EH(e4(GetTriggerUnit()),"MulticastLevel"))endfunctionfunction Pm takes nothing returns booleanif GetUnitAbilityLevel(GetTriggerUnit(),'A088')>0 and(GetSpellAbilityId()=='A04W'or GetSpellAbilityId()=='A08D'or GetSpellAbilityId()=='A08A'or GetSpellAbilityId()=='A089')thenreturn PL()endifreturn falseendfunctionfunction PM takes nothing returns nothinglocal texttag xlocal location iGlocal integer Pn=GetSpellAbilityId()local unit Po=GetSpellTargetUnit()local integer m8=EH(e4(GetTriggerUnit()),"MulticastLevel")call CreateTextTagUnitBJ("MULTICAST!",GetTriggerUnit(),5.,10,100.,.0,.0,25.)set x=bj_lastCreatedTextTagcall SetTextTagVelocityBJ(x,64,90)set iG=GetUnitLoc(Po)call PolledWait(.05)call CreateNUnitsAtLoc(1,'e00C',GetOwningPlayer(GetTriggerUnit()),iG,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,Pn)call SetUnitAbilityLevelSwapped(Pn,bj_lastCreatedUnit,GetUnitAbilityLevelSwapped(Pn,GetTriggerUnit()))call UnitApplyTimedLifeBJ(1.,'BTLF',bj_lastCreatedUnit)call IssueTargetOrderById(bj_lastCreatedUnit,852095,Po)call SetUnitPathing(bj_lastCreatedUnit,false)call SetUnitInvulnerable(bj_lastCreatedUnit,true)call UnitAddAbility(bj_lastCreatedUnit,'Aloc')if(m8>1)thencall PolledWait(.05)call CreateNUnitsAtLoc(1,'e00C',GetOwningPlayer(GetTriggerUnit()),iG,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,Pn)call SetUnitAbilityLevelSwapped(Pn,bj_lastCreatedUnit,GetUnitAbilityLevelSwapped(Pn,GetTriggerUnit()))call UnitApplyTimedLifeBJ(1.,'BTLF',bj_lastCreatedUnit)call IssueTargetOrderById(bj_lastCreatedUnit,852095,Po)call SetUnitPathing(bj_lastCreatedUnit,false)call SetUnitInvulnerable(bj_lastCreatedUnit,true)call UnitAddAbility(bj_lastCreatedUnit,'Aloc')endifif(m8>2)thencall PolledWait(.05)call CreateNUnitsAtLoc(1,'e00C',GetOwningPlayer(GetTriggerUnit()),iG,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,Pn)call SetUnitAbilityLevelSwapped(Pn,bj_lastCreatedUnit,GetUnitAbilityLevelSwapped(Pn,GetTriggerUnit()))call UnitApplyTimedLifeBJ(1.,'BTLF',bj_lastCreatedUnit)call IssueTargetOrderById(bj_lastCreatedUnit,852095,Po)call SetUnitPathing(bj_lastCreatedUnit,false)call SetUnitInvulnerable(bj_lastCreatedUnit,true)call UnitAddAbility(bj_lastCreatedUnit,'Aloc')endifif(m8>3)thencall PolledWait(.05)call CreateNUnitsAtLoc(1,'e00C',GetOwningPlayer(GetTriggerUnit()),iG,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,Pn)call SetUnitAbilityLevelSwapped(Pn,bj_lastCreatedUnit,GetUnitAbilityLevelSwapped(Pn,GetTriggerUnit()))call UnitApplyTimedLifeBJ(1.,'BTLF',bj_lastCreatedUnit)call IssueTargetOrderById(bj_lastCreatedUnit,852095,Po)call SetUnitPathing(bj_lastCreatedUnit,false)call SetUnitInvulnerable(bj_lastCreatedUnit,true)call UnitAddAbility(bj_lastCreatedUnit,'Aloc')endifcall PolledWait(1.5)call DestroyTextTag(x)call RemoveLocation(iG)endfunctionfunction Gk takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function Pm))call TriggerAddAction(t,function PM)endfunctionfunction PO takes nothing returns booleanreturn GetSpellAbilityId()=='A08N'endfunctionfunction Pp takes nothing returns booleanreturn IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),'A04R')!=1 and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))endfunctionfunction PP takes nothing returns nothingcall UnitDamageTarget(GetTriggerUnit(),GetEnumUnit(),AJ,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)endfunctionfunction Pq takes nothing returns nothinglocal boolexpr Ey=Condition(function Pp)local group EX=CreateGroup()local real x=GetUnitX(GetSpellTargetUnit())local real y=GetUnitY(GetSpellTargetUnit())set AJ=90*GetUnitAbilityLevel(GetTriggerUnit(),'A08N')call GroupEnumUnitsInRange(EX,x,y,250,Ey)call ForGroup(EX,function PP)call SetUnitState(GetSpellTargetUnit(),UNIT_STATE_LIFE,GetUnitState(GetSpellTargetUnit(),UNIT_STATE_LIFE)+AJ)call DestroyGroup(EX)call DestroyBoolExpr(Ey)endfunctionfunction GK takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function PO))call TriggerAddAction(t,function Pq)endfunctionfunction PQ takes nothing returns booleanreturn UnitHasBuffBJ(GetTriggerUnit(),'B03A')endfunctionfunction Pr takes nothing returns nothinglocal location iG=GetUnitLoc(ay[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])call SetUnitPositionLoc(GetTriggerUnit(),iG)call RemoveLocation(iG)endfunctionfunction Gl takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterEnterRectSimple(t,bj_mapInitialPlayableArea)call TriggerAddCondition(t,Condition(function PQ))call TriggerAddAction(t,function Pr)endfunctionfunction PR takes nothing returns booleanif(not(IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetAttacker()))))thenreturn falseendifif(not(IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false))thenreturn falseendifif(not(UnitHasBuffBJ(GetAttacker(),'B03B')))thenreturn falseendifif(not(IsUnitType(GetTriggerUnit(),UNIT_TYPE_ANCIENT)==false))thenreturn falseendifreturn trueendfunctionfunction Ps takes nothing returns booleanreturn GetUnitAbilityLevel(GetFilterUnit(),'B03B')>0endfunctionfunction PS takes nothing returns nothinglocal unit fP=GetAttacker()local group EX=CreateGroup()local boolexpr Ey=Condition(function Ps)local integer Pt=GetRandomInt(1,'d')local integer PT=GetUnitAbilityLevel(fP,'A0DB')local integer Pu=GetUnitAbilityLevel(fP,'A0D9')call GroupEnumUnitsOfPlayer(EX,GetOwningPlayer(fP),Ey)call DestroyBoolExpr(Ey)if(CountUnitsInGroup(EX)<9)thenif(IsUnitIllusion(fP)==false and Pt<=(3*PT+2*Pu))thenset bj_lastCreatedUnit=CreateUnit(GetOwningPlayer(fP),'e00E',GetUnitX(fP),GetUnitY(fP),270)set bj_lastCreatedItem=UnitAddItemById(bj_lastCreatedUnit,'I023')call UnitUseItemTarget(bj_lastCreatedUnit,bj_lastCreatedItem,fP)endifif(IsUnitIllusion(fP) and Pt<=(1+2*Pu))thenset bj_lastCreatedUnit=CreateUnit(GetOwningPlayer(fP),'e00E',GetUnitX(fP),GetUnitY(fP),270)set bj_lastCreatedItem=UnitAddItemById(bj_lastCreatedUnit,'I023')call UnitUseItemTarget(bj_lastCreatedUnit,bj_lastCreatedItem,fP)endifendifcall DestroyGroup(EX)endfunctionfunction GL takes nothing returns nothingset Ch=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(Ch,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(Ch,Condition(function PR))call TriggerAddAction(Ch,function PS)endfunctionfunction PU takes nothing returns booleanreturn GetSpellAbilityId()=='A0DA'endfunctionfunction Pv takes nothing returns nothinglocal location iG=GetUnitLoc(GetSpellTargetUnit())call CreateNUnitsAtLoc(1,'e00E',GetOwningPlayer(GetTriggerUnit()),iG,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,'A0D1')call SetUnitAbilityLevelSwapped('A0D1',bj_lastCreatedUnit,GetUnitAbilityLevelSwapped('A0DA',GetTriggerUnit()))call IssueTargetOrderById(bj_lastCreatedUnit,852189,GetSpellTargetUnit())call RemoveLocation(iG)endfunctionfunction Gm takes nothing returns nothingset CH=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(CH,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(CH,Condition(function PU))call TriggerAddAction(CH,function Pv)endfunctionfunction PV takes nothing returns booleanreturn GetSpellAbilityId()=='A0D7'endfunctionfunction Pw takes nothing returns nothinglocal location nl=GetUnitLoc(GetTriggerUnit())call CreateNUnitsAtLocFacingLocBJ(1,'e00E',GetOwningPlayer(GetTriggerUnit()),nl,nl)call UnitAddItemByIdSwapped('I010',bj_lastCreatedUnit)call UnitUseItemTarget(bj_lastCreatedUnit,bj_lastCreatedItem,GetTriggerUnit())call RemoveLocation(nl)endfunctionfunction DW takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function PV))call TriggerAddAction(t,function Pw)endfunctionfunction PW takes nothing returns booleanreturn GetSpellAbilityId()=='A07Z'endfunctionfunction Px takes nothing returns booleanreturn IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>0endfunctionfunction PX takes nothing returns nothinglocal unit fP=GetTriggerUnit()local unit Jz=CreateUnit(GetOwningPlayer(fP),'e00E',GetUnitX(fP),GetUnitY(fP),270)call UnitAddAbility(Jz,'A06T')call SetUnitAbilityLevel(Jz,'A06T',GetUnitAbilityLevel(fP,'A07Z'))call IssueTargetOrderById(Jz,852171,GetEnumUnit())endfunctionfunction Py takes nothing returns nothinglocal unit fP=GetTriggerUnit()local group EX=CreateGroup()local boolexpr Ey=Condition(function Px)call GroupEnumUnitsInRange(EX,GetUnitX(fP),GetUnitY(fP),750,Ey)call ForGroup(EX,function PX)call DestroyBoolExpr(Ey)call DestroyGroup(EX)endfunctionfunction GM takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function PW))call TriggerAddAction(t,function Py)endfunctionfunction PY takes nothing returns booleanreturn GetSpellAbilityId()=='A01Z'endfunctionfunction Pz takes nothing returns booleanif GetDestructableLife(GetEnumDestructable())<=0 thenreturn falseendifif((GetDestructableTypeId(GetEnumDestructable())=='WTst'))thenset An=truereturn trueendifif((GetDestructableTypeId(GetEnumDestructable())=='ITtc'))thenset An=truereturn trueendifif((GetDestructableTypeId(GetEnumDestructable())=='ITtw'))thenset An=truereturn trueendifif((GetDestructableTypeId(GetEnumDestructable())=='NTtw'))thenset An=truereturn trueendifif((GetDestructableTypeId(GetEnumDestructable())=='ATtr'))thenset An=truereturn trueendifreturn falseendfunctionfunction PZ takes nothing returns nothinglocal timer t=GetExpiredTimer()local string f8=e4(t)local unit Fd=EC(f8,"Target")local location iG=GetUnitLoc(Fd)set An=falsecall EnumDestructablesInCircleBJ(375,iG,function Pz)call RemoveLocation(iG)if(An==false)thencall UnitRemoveAbility(Fd,'B021')call PauseTimer(t)call PolledWait(1)call e5(f8)call DestroyTimer(t)endifendfunctionfunction P0 takes nothing returns nothinglocal unit fP=GetTriggerUnit()local unit Fd=GetSpellTargetUnit()local timer t=CreateTimer()call e7(e4(t),"Target",Fd)call TimerStart(t,1.,true,function PZ)endfunctionfunction Gn takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function PY))call TriggerAddAction(t,function P0)endfunctionfunction P3 takes nothing returns booleanreturn GetSpellAbilityId()=='A0KD'endfunctionfunction P4 takes nothing returns nothingif fa(GetSpellAbilityId())or GetSpellAbilityId()=='A06K'thencall UnitRemoveAbility(GetTriggerUnit(),'B05D')call UnitRemoveAbility(GetTriggerUnit(),'B05M')call UnitRemoveAbility(GetTriggerUnit(),'B05N')call UnitRemoveAbility(GetTriggerUnit(),'B05O')call Fj(GetTriggeringTrigger())endifendfunctionfunction P5 takes nothing returns nothinglocal timer t=GetExpiredTimer()local string f8=e4(t)local unit fP=EC(f8,"CurseTarget")local real P6=0if(UnitHasBuffBJ(fP,'B05D'))thenset P6=5.endifif(UnitHasBuffBJ(fP,'B05M'))thenset P6=10.endifif(UnitHasBuffBJ(fP,'B05N'))thenset P6=15.endifif(UnitHasBuffBJ(fP,'B05O'))thenset P6=20.endifcall SetUnitManaBJ(fP,GetUnitState(fP,UNIT_STATE_MANA)-P6)if(P6==.0)thencall PauseTimer(t)call e5(f8)call DestroyTimer(t)endifendfunctionfunction P7 takes nothing returns nothinglocal timer t=CreateTimer()local trigger P8=CreateTrigger()local unit fP=GetSpellTargetUnit()call e7(e4(t),"CurseTarget",fP)call TimerStart(t,1.,true,function P5)call TriggerRegisterUnitEvent(P8,fP,EVENT_UNIT_SPELL_EFFECT)call TriggerAddAction(P8,function P4)endfunctionfunction GN takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function P3))call TriggerAddAction(t,function P7)endfunctionfunction P9 takes nothing returns booleanreturn GetLearnedSkill()=='A0LZ'and IsUnitIllusion(GetTriggerUnit())==falseendfunctionfunction qa takes nothing returns nothinglocal texttag glocal real dif UnitHasBuffBJ(GetTriggerUnit(),'B05X') and GetUnitAbilityLevel(GetEventDamageSource(),'A0LZ')>0 and EC(e4(GetTriggeringTrigger()),"Source")==GetEventDamageSource()thencall DisableTrigger(GetTriggeringTrigger())set d=.15*I2R(GetUnitAbilityLevel(GetEventDamageSource(),'A0LZ')*GetHeroInt(GetEventDamageSource(),true))set g=CreateTextTagUnitBJ("+"+I2S(R2I(d)),GetTriggerUnit(),64,10,1,85,86,15)call SetTextTagVelocityBJ(g,64,90)call UnitDamageTargetBJ(GetEventDamageSource(),GetTriggerUnit(),d,ATTACK_TYPE_HERO,DAMAGE_TYPE_DIVINE)call PolledWait(1)call DestroyTextTag(g)call DisableTrigger(GetTriggeringTrigger())endifendfunctionfunction qA takes nothing returns booleanif(GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED)thenif(GetUnitAbilityLevel(GetAttacker(),'A0LZ')==0)thenreturn falseelseif(EI(e4(GetTriggeringTrigger()),"OrbOn"))thenif IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetAttacker()==EC(e4(GetTriggeringTrigger()),"Silencer")thenreturn trueendifelsereturn falseendifelseif(GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER)thenif(GetIssuedOrderId()==852255)thencall Ec(e4(GetTriggeringTrigger()),"OrbOn",true)elseif(GetIssuedOrderId()==852256)thencall Ec(e4(GetTriggeringTrigger()),"OrbOn",false)endifelseif(GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT)thenif(GetSpellAbilityId()=='A0LZ')thenreturn trueelsereturn falseendifendifreturn falseendfunctionfunction qb takes nothing returns nothinglocal trigger t=CreateTrigger()local unit Fdlocal unit FCif(GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT)thenset Fd=GetSpellTargetUnit()set FC=GetTriggerUnit()elseset Fd=GetTriggerUnit()set FC=GetAttacker()endifif IsUnitIllusion(FC)==false thencall e7(e4(t),"Source",FC)call TriggerRegisterUnitEvent(t,Fd,EVENT_UNIT_DAMAGED)call TriggerAddAction(t,function qa)endifcall PolledWait(2)call DisableTrigger(t)endfunctionfunction qB takes nothing returns nothinglocal unit fP=GetTriggerUnit()local trigger tif GetUnitAbilityLevel(fP,'A0LZ')==1 thenset t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerRegisterUnitEvent(t,GetLearningUnit(),EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(t,GetLearningUnit(),EVENT_UNIT_ISSUED_ORDER)call TriggerAddCondition(t,Condition(function qA))call TriggerAddAction(t,function qb)call e7(e4(t),"Silencer",fP)endifendfunctionfunction GO takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function P9))call TriggerAddAction(t,function qB)endfunctionfunction qc takes nothing returns booleanreturn IsUnitType(GetDyingUnit(),UNIT_TYPE_HERO) and GetUnitAbilityLevel(GetKillingUnit(),'A0LZ')>0 and IsUnitIllusion(GetKillingUnit())==falseendfunctionfunction qC takes nothing returns nothinglocal texttag g1local texttag g2call SetHeroInt(GetDyingUnit(),GetHeroInt(GetDyingUnit(),false)-1,true)call SetHeroInt(GetKillingUnit(),GetHeroInt(GetKillingUnit(),false)+1,true)set g1=CreateTextTagUnitBJ("+1 Int",GetKillingUnit(),'d',10,255,0,0,10)call SetTextTagVelocityBJ(g1,64,90)set g2=CreateTextTagUnitBJ("-1 Int",GetDyingUnit(),'d',10,255,0,0,10)call SetTextTagVelocityBJ(g2,64,90)call PolledWait(3.)call DestroyTextTag(g1)call DestroyTextTag(g2)endfunctionfunction Go takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(t,Condition(function qc))call TriggerAddAction(t,function qC)endfunctionfunction qd takes nothing returns booleanreturn GetSpellAbilityId()=='A0L3'endfunctionfunction qD takes nothing returns nothinglocal location iG=GetUnitLoc(GetTriggerUnit())call CreateNUnitsAtLoc(1,'e00E',GetOwningPlayer(GetTriggerUnit()),iG,bj_UNIT_FACING)call ShowUnitHide(bj_lastCreatedUnit)call UnitApplyTimedLifeBJ(5.,'BTLF',bj_lastCreatedUnit)call UnitAddAbility(bj_lastCreatedUnit,'A0L2')call SetUnitAbilityLevelSwapped('A0L2',bj_lastCreatedUnit,GetUnitAbilityLevel(GetTriggerUnit(),'A0L3'))call IssuePointOrderByIdLoc(bj_lastCreatedUnit,852592,iG)call PolledWait(GetUnitAbilityLevel(GetTriggerUnit(),'A0L3')+3)call RemoveLocation(iG)endfunctionfunction GS takes nothing returns nothingset Ci=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(Ci,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(Ci,Condition(function qd))call TriggerAddAction(Ci,function qD)endfunctionfunction qe takes nothing returns booleanreturn GetUnitAbilityLevel(GetTriggerUnit(),'B05V')>0 and GetSpellAbilityId()!='AIbk'and GetSpellAbilityId()!='A05Z'endfunctionfunction qE takes nothing returns nothinglocal unit Fd=GetTriggerUnit()local unit qf=EC(e4(GetTriggeringTrigger()),"Silencer")local unit Jz=CreateUnit(GetOwningPlayer(qf),'e00E',GetUnitX(Fd),GetUnitY(Fd),0)if E2(qf)==false and IsUnitEnemy(Fd,GetOwningPlayer(qf))thencall UnitAddAbility(Jz,'A0LS')call SetUnitAbilityLevel(Jz,'A0LS',GetUnitAbilityLevel(qf,'A0LR'))call IssueTargetOrderById(Jz,852668,Fd)endifendfunctionfunction qF takes nothing returns booleanreturn GetLearnedSkill()=='A0LR'and IsUnitIllusion(GetTriggerUnit())==falseendfunctionfunction qg takes nothing returns nothinglocal unit fP=GetTriggerUnit()local trigger tif GetUnitAbilityLevel(fP,'A0LR')==1 thenset t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_FINISH)call TriggerAddCondition(t,Condition(function qe))call TriggerAddAction(t,function qE)call e7(e4(t),"Silencer",fP)endifendfunctionfunction Gp takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function qF))call TriggerAddAction(t,function qg)endfunctionfunction qG takes nothing returns booleanreturn GetSpellAbilityId()=='A064'endfunctionfunction qh takes nothing returns nothinglocal location l=GetSpellTargetLoc()local location mlocal location u=GetUnitLoc(GetTriggerUnit())local integer c=4+4*GetUnitAbilityLevelSwapped('A064',GetTriggerUnit())local unit t=GetTriggerUnit()local unit ploopexitwhen c<=0set p=CreateUnit(GetOwningPlayer(t),'e00J',GetUnitX(t),GetUnitY(t),90)set m=PolarProjectionBJ(l,GetRandomReal(0,360),GetRandomReal(0,360))call IssuePointOrderByIdLoc(p,851984,m)call UnitApplyTimedLifeBJ(.5,'BTLF',p)call RemoveLocation(m)set c=c-1endloopcall RemoveLocation(u)call RemoveLocation(l)endfunctionfunction SS takes nothing returns nothingset CI=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(CI,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(CI,Condition(function qG))call TriggerAddAction(CI,function qh)endfunctionfunction qH takes nothing returns booleanif(not(GetUnitTypeId(GetOrderedUnit())=='Usyl'))thenreturn falseendifif(not(GetIssuedOrderId()==852095))thenreturn falseendifreturn trueendfunctionfunction qi takes nothing returns nothinglocal player EL=GetOwningPlayer(GetOrderedUnit())local unit fP=GetOrderTargetUnit()local unit qIcall UnitShareVision(fP,EL,true)set qI=CreateUnit(GetOwningPlayer(GetOrderTargetUnit()),'e01R',0,0,bj_UNIT_FACING)call UnitAddAbility(qI,'A0NI')call PolledWait(3.)call UnitShareVision(fP,EL,false)call RemoveUnit(qI)call UnitRemoveAbility(fP,'B06H')endfunctionfunction GP takes nothing returns nothingset Cj=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(Cj,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)call TriggerAddCondition(Cj,Condition(function qH))call TriggerAddAction(Cj,function qi)endfunctionfunction qj takes nothing returns booleanreturn GetLearnedSkill()=='A03U'endfunctionfunction qJ takes nothing returns nothingcall SetPlayerTechResearchedSwap('R005',GetUnitAbilityLevelSwapped('A03U',GetTriggerUnit()),GetOwningPlayer(GetLearningUnit()))endfunctionfunction Gq takes nothing returns nothingset CJ=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(CJ,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(CJ,Condition(function qj))call TriggerAddAction(CJ,function qJ)endfunctionfunction qk takes nothing returns booleanreturn GetLearnedSkill()=='A00J'and IsUnitIllusion(GetTriggerUnit())==falseendfunctionfunction qK takes nothing returns nothingif(GetUnitAbilityLevel(GetTriggerUnit(),'A0MB')==0)thencall UnitAddAbility(GetTriggerUnit(),'A0MB')endifcall SetUnitAbilityLevel(GetTriggerUnit(),'A0MB',GetUnitAbilityLevel(GetTriggerUnit(),'A00J'))endfunctionfunction II takes nothing returns nothingset Ck=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(Ck,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(Ck,Condition(function qk))call TriggerAddAction(Ck,function qK)endfunctionfunction ql takes nothing returns booleanif((RAbsBJ((GetUnitFacing(GetTriggerUnit())-GetUnitFacing(GetAttacker())))<=105.))thenreturn trueendifreturn falseendfunctionfunction qL takes nothing returns booleanif(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetAttacker())))thenreturn falseendifif(not(GetUnitAbilityLevelSwapped('A0DZ',GetAttacker())>0))thenreturn falseendifif(not(IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false))thenreturn falseendifif(not ql())thenreturn falseendifreturn trueendfunctionfunction qm takes nothing returns nothinglocal effect k0=AddSpecialEffectTargetUnitBJ("chest",GetTriggerUnit(),"Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl")call UnitDamageTargetBJ(GetAttacker(),GetTriggerUnit(),((.25*I2R(GetUnitAbilityLevelSwapped('A0DZ',GetAttacker())))*I2R(GetHeroStatBJ(1,GetAttacker(),true))),ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)call DestroyEffect(k0)endfunctionfunction GQ takes nothing returns nothingset CK=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(CK,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(CK,Condition(function qL))call TriggerAddAction(CK,function qm)endfunctionfunction qM takes nothing returns booleanreturn GetUnitTypeId(GetSummonedUnit())=='e003'endfunctionfunction qn takes nothing returns nothinglocal unit fP=GetSummonedUnit()local player EL=GetOwningPlayer(fP)local integer m8=GetUnitAbilityLevel(GetSummoningUnit(),'A0E6')local real qN=(83+17*m8)*.01call SetUnitScale(fP,qN,qN,qN)if EK(EL)thencall UnitAddAbility(fP,'A019')call SetUnitAbilityLevel(fP,'A019',m8)elsecall UnitAddAbility(fP,'A0E7')call SetUnitAbilityLevel(fP,'A0E7',m8)endifcall IssuePointOrderById(fP,852473,GetUnitX(fP),GetUnitY(fP))endfunctionfunction Gr takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SUMMON)call TriggerAddCondition(t,Condition(function qM))call TriggerAddAction(t,function qn)endfunctionfunction qo takes nothing returns booleanreturn GetSpellAbilityId()=='A0A5'endfunctionfunction qO takes nothing returns booleanif((GetUnitTypeId(GetFilterUnit())=='n01G'))thenreturn trueendifif((GetUnitTypeId(GetFilterUnit())=='n01C'))thenreturn trueendifif((GetUnitTypeId(GetFilterUnit())=='n018'))thenreturn trueendifif((GetUnitTypeId(GetFilterUnit())=='n004'))thenreturn trueendifreturn falseendfunctionfunction qp takes nothing returns nothinglocal string f8=e4(GetOwningPlayer(GetTriggerUnit()))local unit H1=EC(f8,"BearItemHolder")local unit qP=EC(f8,"MyBear")if H1!=null thencall UnitAddItem(qP,UnitRemoveItemFromSlot(H1,0))call UnitAddItem(qP,UnitRemoveItemFromSlot(H1,1))call UnitAddItem(qP,UnitRemoveItemFromSlot(H1,2))call UnitAddItem(qP,UnitRemoveItemFromSlot(H1,3))call UnitAddItem(qP,UnitRemoveItemFromSlot(H1,4))call UnitAddItem(qP,UnitRemoveItemFromSlot(H1,5))endifendfunctionfunction qq takes nothing returns nothinglocal unit fP=GetTriggerUnit()local player EL=GetOwningPlayer(fP)local location iG=GetUnitLoc(fP)local boolexpr Ey=Condition(function qO)local group EX=CreateGroup()local integer m8=GetUnitAbilityLevel(fP,'A0A5')local string f8=e4(EL)local boolean qQcall GroupEnumUnitsOfPlayer(EX,GetOwningPlayer(fP),Ey)call DestroyBoolExpr(Ey)set qQ=CountUnitsInGroup(EX)==0if(m8==1 and qQ)thencall CreateNUnitsAtLoc(1,'n004',GetOwningPlayer(GetTriggerUnit()),iG,bj_UNIT_FACING)call e7(f8,"MyBear",bj_lastCreatedUnit)call AddSpecialEffectTargetUnitBJ("chest",bj_lastCreatedUnit,"Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl")elseif(m8==2 and qQ)thencall CreateNUnitsAtLoc(1,'n018',GetOwningPlayer(GetTriggerUnit()),iG,bj_UNIT_FACING)call e7(f8,"MyBear",bj_lastCreatedUnit)call AddSpecialEffectTargetUnitBJ("chest",bj_lastCreatedUnit,"Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl")elseif(m8==3 and qQ)thencall CreateNUnitsAtLoc(1,'n01C',GetOwningPlayer(GetTriggerUnit()),iG,bj_UNIT_FACING)call e7(f8,"MyBear",bj_lastCreatedUnit)call AddSpecialEffectTargetUnitBJ("chest",bj_lastCreatedUnit,"Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl")elseif(m8==4 and qQ)thencall CreateNUnitsAtLoc(1,'n01G',GetOwningPlayer(GetTriggerUnit()),iG,bj_UNIT_FACING)call e7(f8,"MyBear",bj_lastCreatedUnit)call qp()call AddSpecialEffectTargetUnitBJ("chest",bj_lastCreatedUnit,"Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl")endifcall SetUnitAbilityLevel(bj_lastCreatedUnit,'A09Y',m8)call DestroyGroup(EX)call RemoveLocation(iG)endfunctionfunction Gs takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function qo))call TriggerAddAction(t,function qq)endfunctionfunction qr takes nothing returns booleanreturn GetLearnedSkill()=='A0A5'and IsUnitIllusion(GetTriggerUnit())==falseendfunctionfunction qR takes nothing returns booleanif((GetUnitTypeId(GetFilterUnit())=='n01C'))thenreturn trueendifif((GetUnitTypeId(GetFilterUnit())=='n018'))thenreturn trueendifif((GetUnitTypeId(GetFilterUnit())=='n004'))thenreturn trueendifreturn falseendfunctionfunction qs takes nothing returns nothinglocal unit fP=GetTriggerUnit()local player EL=GetOwningPlayer(fP)local location iG=GetUnitLoc(fP)local boolexpr Ey=Condition(function qR)local group EX=CreateGroup()local integer m8=GetUnitAbilityLevel(fP,'A0A5')local string f8=e4(EL)local integer qSlocal unit qPlocal real qtcall GroupEnumUnitsOfPlayer(EX,GetOwningPlayer(fP),Ey)call DestroyBoolExpr(Ey)set qS=CountUnitsInGroup(EX)if(qS>1)thencall BJDebugMsg("Bug with learn bear")elseif(qS==1)thenset qP=FirstOfGroup(EX)set qt=GetUnitLifePercent(qP)set iG=GetUnitLoc(qP)call RemoveUnit(qP)if(m8==2)thencall CreateNUnitsAtLoc(1,'n018',GetOwningPlayer(GetTriggerUnit()),iG,bj_UNIT_FACING)call AddSpecialEffectTargetUnitBJ("chest",bj_lastCreatedUnit,"Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl")elseif(m8==3)thencall CreateNUnitsAtLoc(1,'n01C',GetOwningPlayer(GetTriggerUnit()),iG,bj_UNIT_FACING)call AddSpecialEffectTargetUnitBJ("chest",bj_lastCreatedUnit,"Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl")elseif(m8==4)thencall CreateNUnitsAtLoc(1,'n01G',GetOwningPlayer(GetTriggerUnit()),iG,bj_UNIT_FACING)call AddSpecialEffectTargetUnitBJ("chest",bj_lastCreatedUnit,"Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl")endifcall SetUnitLifePercentBJ(bj_lastCreatedUnit,qt)call e7(f8,"MyBear",bj_lastCreatedUnit)endifcall DestroyGroup(EX)endfunctionfunction GT takes nothing returns nothingset Cl=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(Cl,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(Cl,Condition(function qr))call TriggerAddAction(Cl,function qs)endfunctionfunction qT takes nothing returns booleanreturn GetUnitTypeId(GetAttacker())=='n01G'or GetUnitTypeId(GetAttacker())=='n01C'or GetUnitTypeId(GetAttacker())=='n018'or GetUnitTypeId(GetAttacker())=='n004'endfunctionfunction qu takes nothing returns nothinglocal unit qP=GetAttacker()local unit qU=ay[GetPlayerId(GetOwningPlayer(qP))]if((GetUnitX(qU)-GetUnitX(qP))*(GetUnitX(qU)-GetUnitX(qP))+(GetUnitY(qU)-GetUnitY(qP))*(GetUnitY(qU)-GetUnitY(qP))>=2250000)thencall SetUnitX(qP,GetUnitX(qU)+GetRandomReal(25,50)*Cos(GetRandomReal(0,360)))call SetUnitY(qP,GetUnitY(qU)+GetRandomReal(25,50)*Sin(GetRandomReal(0,360)))endifendfunctionfunction GR takes nothing returns nothingset CL=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(CL,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(CL,Condition(function qT))call TriggerAddAction(CL,function qu)endfunctionfunction qv takes nothing returns booleanreturn GetSpellAbilityId()=='A0A7'endfunctionfunction qV takes nothing returns nothinglocal unit qP=GetTriggerUnit()local unit qU=ay[GetPlayerId(GetOwningPlayer(qP))]call SetUnitX(qP,GetUnitX(qU)+GetRandomReal(25,50)*Cos(GetRandomReal(0,360)))call SetUnitY(qP,GetUnitY(qU)+GetRandomReal(25,50)*Sin(GetRandomReal(0,360)))endfunctionfunction Gt takes nothing returns nothingset Cm=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(Cm,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(Cm,Condition(function qv))call TriggerAddAction(Cm,function qV)endfunctionfunction qw takes nothing returns booleanreturn GetLearnedSkill()=='A0A8'and IsUnitIllusion(GetTriggerUnit())==falseendfunctionfunction qW takes nothing returns nothingcall SetPlayerTechResearched(GetOwningPlayer(GetTriggerUnit()),'R000',GetPlayerTechCount(GetOwningPlayer(GetTriggerUnit()),'R000',true)+1)call SetPlayerTechResearched(GetOwningPlayer(GetTriggerUnit()),'R001',GetPlayerTechCount(GetOwningPlayer(GetTriggerUnit()),'R001',true)+1)endfunctionfunction Gu takes nothing returns nothingset CM=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(CM,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(CM,Condition(function qw))call TriggerAddAction(CM,function qW)endfunctionfunction qx takes nothing returns booleanreturn(GetUnitTypeId(GetTriggerUnit())=='n01G'or GetUnitTypeId(GetTriggerUnit())=='n01C'or GetUnitTypeId(GetTriggerUnit())=='n018'or GetUnitTypeId(GetTriggerUnit())=='n004')and IsUnitIllusion(GetTriggerUnit())==falseendfunctionfunction qX takes nothing returns nothinglocal string f8=e4(GetOwningPlayer(GetTriggerUnit()))local unit H1=EC(f8,"BearItemHolder")local unit qP=EC(f8,"MyBear")local integer xlocal integer yif H1==null thenif EJ(GetOwningPlayer(qP))thenset x=-6390set y=-5615elseset x=5875set y=5000endifset H1=CreateUnit(GetOwningPlayer(GetTriggerUnit()),'e01F',x,y,0)call e7(f8,"BearItemHolder",H1)endifif(GetItemTypeId(GetEnumItem())!='pspd'and GetItemTypeId(GetEnumItem())!='oflg')thencall UnitAddItem(H1,GetEnumItem())endifcall ShowUnit(H1,true)endfunctionfunction qy takes nothing returns nothinglocal location iG=GetUnitLoc(GetTriggerUnit())local rect M3=RectFromCenterSizeBJ(iG,300.,150.)local unit qU=ay[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]call SetHeroXP(qU,(GetHeroXP(qU)-(GetHeroXP(qU)/('}'-(25*GetUnitAbilityLevel(qU,'A0A5'))))),false)call UnitDamageTargetBJ(GetKillingUnit(),qU,(100.*I2R(GetUnitAbilityLevel(qU,'A0A5'))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL)call EnumItemsInRectBJ(M3,function qX)call RemoveLocation(iG)call RemoveRect(M3)endfunctionfunction GU takes nothing returns nothingset Cn=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(Cn,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(Cn,Condition(function qx))call TriggerAddAction(Cn,function qy)endfunctionfunction qY takes nothing returns booleanreturn(GetUnitTypeId(GetTriggerUnit())=='N013'or GetUnitTypeId(GetTriggerUnit())=='N01O'or GetUnitTypeId(GetTriggerUnit())=='N015'or GetUnitTypeId(GetTriggerUnit())=='N014')and IsUnitIllusion(GetTriggerUnit())==falseendfunctionfunction qz takes nothing returns nothinglocal unit qP=EC(e4(GetOwningPlayer(GetTriggerUnit())),"MyBear")call KillUnit(qP)endfunctionfunction Gv takes nothing returns nothingset CN=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(CN,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(CN,Condition(function qY))call TriggerAddAction(CN,function qz)endfunctionfunction qZ takes nothing returns booleanreturn GetLearnedSkill()=='A0AK'and IsUnitIllusion(GetTriggerUnit())==falseendfunctionfunction q0 takes nothing returns nothingif(GetUnitAbilityLevel(GetTriggerUnit(),'A0AK')==1)thencall UnitAddAbility(GetTriggerUnit(),'A02T')endifendfunctionfunction GV takes nothing returns nothingset Co=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(Co,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(Co,Condition(function qZ))call TriggerAddAction(Co,function q0)endfunctionfunction q1 takes nothing returns booleanif(GetSpellAbilityId()=='A0AM'or GetSpellAbilityId()=='A0A3'or GetSpellAbilityId()=='A0A4'or GetSpellAbilityId()=='A02T')thenreturn trueendifreturn falseendfunctionfunction q2 takes nothing returns booleanif(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))thenif(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)thenif(GetUnitAbilityLevelSwapped('A04R',GetFilterUnit())==0)thenreturn trueendifendifendifreturn falseendfunctionfunction q3 takes nothing returns nothingcall IssueImmediateOrderById(GetEnumUnit(),852556)endfunctionfunction q4 takes nothing returns nothingcall UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),300.,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_FIRE)endfunctionfunction q5 takes nothing returns nothingcall UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),450.,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_FIRE)endfunctionfunction q6 takes nothing returns nothingcall UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),600.,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_FIRE)endfunctionfunction q7 takes nothing returns nothinglocal group EXlocal location iG=GetUnitLoc(GetTriggerUnit())local effect fxif(GetSpellAbilityId()=='A0AM')thenset EX=GetUnitsInRangeOfLocMatching(425.,iG,Condition(function q2))call ForGroupBJ(EX,function q4)set fx=AddSpecialEffectLocBJ(iG,"Abilities\\Spells\\Human\\FlameStrike\\FlameStrike1.mdl")call KillUnit(GetTriggerUnit())call DestroyGroup(EX)endifif(GetSpellAbilityId()=='A0A3')thenset EX=GetUnitsInRangeOfLocMatching(435.,iG,Condition(function q2))call ForGroupBJ(EX,function q5)set fx=AddSpecialEffectLocBJ(iG,"Abilities\\Spells\\Human\\FlameStrike\\FlameStrike1.mdl")call KillUnit(GetTriggerUnit())call DestroyGroup(EX)endifif(GetSpellAbilityId()=='A0A4')thenset EX=GetUnitsInRangeOfLocMatching(450.,iG,Condition(function q2))call ForGroupBJ(EX,function q6)set fx=AddSpecialEffectLocBJ(iG,"Abilities\\Spells\\Human\\FlameStrike\\FlameStrike1.mdl")call KillUnit(GetTriggerUnit())call DestroyGroup(EX)endifif(GetSpellAbilityId()=='A02T')thenset EX=GetUnitsOfPlayerAndTypeId(GetOwningPlayer(GetTriggerUnit()),'o018')call ForGroupBJ(EX,function q3)call DestroyGroup(EX)set EX=GetUnitsOfPlayerAndTypeId(GetOwningPlayer(GetTriggerUnit()),'o002')call ForGroupBJ(EX,function q3)call DestroyGroup(EX)set EX=GetUnitsOfPlayerAndTypeId(GetOwningPlayer(GetTriggerUnit()),'o00B')call ForGroupBJ(EX,function q3)call DestroyGroup(EX)endifcall PolledWait(5.01)call DestroyEffect(fx)call RemoveLocation(iG)endfunctionfunction Gw takes nothing returns nothingset CO=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(CO,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddAction(CO,function q7)call TriggerAddCondition(CO,Condition(function q1))endfunctionfunction q8 takes nothing returns booleanif((GetUnitTypeId(GetTriggerUnit())=='n00O'))thenreturn trueendifif((GetUnitTypeId(GetTriggerUnit())=='n00P'))thenreturn trueendifif((GetUnitTypeId(GetTriggerUnit())=='n00Q'))thenreturn trueendifif((GetUnitTypeId(GetTriggerUnit())=='n00N'))thenreturn trueendifreturn falseendfunctionfunction q9 takes nothing returns booleanif GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(GetTriggerUnit())thenif((GetUnitTypeId(GetFilterUnit())=='n00O'))thenreturn trueendifif((GetUnitTypeId(GetFilterUnit())=='n00P'))thenreturn trueendifif((GetUnitTypeId(GetFilterUnit())=='n00Q'))thenreturn trueendifif((GetUnitTypeId(GetFilterUnit())=='n00N'))thenreturn trueendifendifreturn falseendfunctionfunction Qa takes nothing returns nothinglocal string f8=e4(GetOwningPlayer(GetTriggerUnit()))local group EX=GetUnitsInRectMatching(bj_mapInitialPlayableArea,Condition(function q9))local integer QA=EH(f8,"GMCount")local integer Qb=0local unit QBlocal integer Qclocal unit gnlocal integer QClocal integer ERlocal integer Esset QA=(QA+1)call StartTimerBJ(ED(f8,"MineTimer"+I2S(QA)),false,15000.)call e7(f8,"GMUnit"+I2S(QA),GetTriggerUnit())set Qb=CountUnitsInGroup(EX)if(Qb>15)thenset Qc=99999set ER=1set Es=QAloopexitwhen ER>Esset gn=EC(f8,"GMUnit"+I2S(ER))set QC=R2I(TimerGetRemaining(ED(f8,"MineTimer"+I2S(ER))))if(GetUnitState(gn,UNIT_STATE_LIFE)>0 and QC<Qc)thenset QB=gnset Qc=QCendifset ER=ER+1endloopcall ExplodeUnitBJ(QB)endifcall Ea(f8,"GMCount",QA)call DestroyGroup(EX)endfunctionfunction GW takes nothing returns nothingset Cp=CreateTrigger()call TriggerRegisterEnterRectSimple(Cp,GetWorldBounds())call TriggerAddCondition(Cp,Condition(function q8))call TriggerAddAction(Cp,function Qa)endfunctionfunction Qd takes nothing returns booleanreturn GetSpellAbilityId()=='A0BQ'endfunctionfunction QD takes nothing returns nothinglocal location OA=GetUnitLoc(GetTriggerUnit())local location NH=GetSpellTargetLoc()call CreateNUnitsAtLocFacingLocBJ(1,'e00E',GetOwningPlayer(GetTriggerUnit()),OA,NH)call UnitAddAbility(bj_lastCreatedUnit,'A05F')call SetUnitAbilityLevelSwapped('A05F',bj_lastCreatedUnit,GetUnitAbilityLevelSwapped('A0BQ',GetTriggerUnit()))call IssuePointOrderByIdLoc(bj_lastCreatedUnit,852593,NH)call RemoveLocation(OA)call RemoveLocation(NH)endfunctionfunction Gx takes nothing returns nothingset CP=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(CP,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(CP,Condition(function Qd))call TriggerAddAction(CP,function QD)endfunctionfunction Qe takes nothing returns booleanreturn GetSpellAbilityId()=='A049'endfunctionfunction QE takes nothing returns nothingcall UnitDamageTarget(GetTriggerUnit(),GetSpellTargetUnit(),GetUnitAbilityLevel(GetTriggerUnit(),'A049')*80,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)endfunctionfunction GX takes nothing returns nothingset Cq=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(Cq,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(Cq,Condition(function Qe))call TriggerAddAction(Cq,function QE)endfunctionfunction Qf takes nothing returns booleanreturn GetSpellAbilityId()=='A065'endfunctionfunction QF takes nothing returns nothinglocal integer ER=0local integer Es=5local integer array Qgset Qg[0]=0set Qg[1]=0set Qg[2]=0set Qg[3]=0set Qg[4]=0set Qg[5]=0loopexitwhen ER>Esif(GetItemTypeId(UnitItemInSlot(GetTriggerUnit(),ER))=='rots'or GetItemTypeId(UnitItemInSlot(GetTriggerUnit(),ER))=='ches'or GetItemTypeId(UnitItemInSlot(GetTriggerUnit(),ER))=='pdiv'or GetItemTypeId(UnitItemInSlot(GetTriggerUnit(),ER))=='I002'or GetItemTypeId(UnitItemInSlot(GetTriggerUnit(),ER))=='I001'or GetItemTypeId(UnitItemInSlot(GetTriggerUnit(),ER))=='oven')thenset Qg[ER]=GetItemTypeId(UnitItemInSlot(GetTriggerUnit(),ER))call RemoveItem(UnitItemInSlot(GetTriggerUnit(),ER))endifset ER=ER+1endloopcall UnitResetCooldown(GetTriggerUnit())set ER=0set Es=5loopexitwhen ER>Escall UnitAddItemToSlotById(GetTriggerUnit(),Qg[ER],ER)set ER=ER+1endloopendfunctionfunction Gy takes nothing returns nothingset CQ=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(CQ,EVENT_PLAYER_UNIT_SPELL_FINISH)call TriggerAddCondition(CQ,Condition(function Qf))call TriggerAddAction(CQ,function QF)endfunctionfunction QG takes nothing returns booleanreturn GetLearnedSkill()=='A0CY'and IsUnitIllusion(GetTriggerUnit())==falseendfunctionfunction Qh takes nothing returns nothinglocal unit QH=EC(e4(GetTriggeringTrigger()),"Tiny")local integer m8=GetUnitAbilityLevel(QH,'A0CY')if GetUnitState(QH,UNIT_STATE_LIFE)>1 thencall SetUnitScale(QH,.5+.25*m8,.5+.25*m8,.5+.25*m8)endifendfunctionfunction Qi takes nothing returns nothinglocal trigger tlocal unit QH=GetTriggerUnit()local integer m8=GetUnitAbilityLevel(QH,'A0CY')call SetPlayerTechResearched(GetOwningPlayer(QH),'R00E',m8)if m8==1 thenset t=CreateTrigger()call TriggerAddAction(t,function Qh)call TriggerRegisterTimerEvent(t,2.,true)call e7(e4(t),"Tiny",QH)call SetUnitScale(QH,.5+.25*m8,.5+.25*m8,.5+.25*m8)endifendfunctionfunction GY takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function QG))call TriggerAddAction(t,function Qi)endfunctionfunction QI takes nothing returns booleanif(not(GetSpellAbilityId()=='A0LL'))thenreturn falseendifreturn trueendfunctionfunction Qj takes nothing returns nothinglocal location iG=GetUnitLoc(GetTriggerUnit())call CreateNUnitsAtLoc(1,'e00E',GetOwningPlayer(GetTriggerUnit()),iG,bj_UNIT_FACING)call RemoveLocation(iG)call SetUnitInvulnerable(bj_lastCreatedUnit,true)call ShowUnitHide(bj_lastCreatedUnit)call UnitApplyTimedLifeBJ(10.,'BTLF',bj_lastCreatedUnit)call UnitAddAbility(bj_lastCreatedUnit,'A0KG')call SetUnitAbilityLevelSwapped('A0KG',bj_lastCreatedUnit,GetUnitAbilityLevel(GetTriggerUnit(),'A0LL'))set iG=GetSpellTargetLoc()call IssuePointOrderByIdLoc(bj_lastCreatedUnit,852652,iG)call RemoveLocation(iG)endfunctionfunction Gz takes nothing returns nothingset Cr=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(Cr,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(Cr,Condition(function QI))call TriggerAddAction(Cr,function Qj)endfunctionfunction QJ takes nothing returns booleanif(GetSpellAbilityId()!='A0BZ')thenreturn falseendifif GetUnitTypeId(GetSpellTargetUnit())=='n00I'or GetUnitTypeId(GetSpellTargetUnit())=='e01H'thenreturn falseendifif(GetOwningPlayer(GetSpellTargetUnit())==GetOwningPlayer(GetTriggerUnit()))thenreturn falseendifreturn trueendfunctionfunction Qk takes nothing returns booleanif(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT))thenreturn falseendifif IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE) thenreturn falseelseif IsUnitType(GetFilterUnit(),UNIT_TYPE_FLYING) thenreturn falseelseif GetFilterUnit()==GetSpellAbilityUnit()thenreturn falseelseif IsUnitDeadBJ(GetFilterUnit())thenreturn falseelseif IsUnitType(GetTriggerUnit(),UNIT_TYPE_ANCIENT) thenreturn falseelseif GetUnitTypeId(GetFilterUnit())=='n00L'thenreturn falseelseif IsUnitType(GetTriggerUnit(),UNIT_TYPE_GIANT) thenreturn falseelseif IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetSpellAbilityUnit()))==false thenreturn falseelseif GetUnitAbilityLevelSwapped('A04R',GetFilterUnit())!=0 thenreturn falseelseif(GetUnitTypeId(GetFilterUnit())=='H00F'or GetUnitTypeId(GetFilterUnit())=='H00E'or GetUnitTypeId(GetFilterUnit())=='H00G')thenreturn falseendifreturn trueendfunctionfunction QK takes unit h,real x,real y,real r,real d,integer ID returns nothinglocal group g=CreateGroup()local unit mlocal location lcall GroupEnumUnitsInRange(g,x,y,r,null)loopset m=FirstOfGroup(g)exitwhen m==nullif IsUnitEnemy(m,GetOwningPlayer(h))and IsUnitDeadBJ(m)==false and GetUnitAbilityLevel(m,'A04R')==0 thenif(IsUnitType(m,UNIT_TYPE_STRUCTURE)==false)thencall UnitDamageTargetBJ(h,m,d,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_DEMOLITION)elsecall UnitDamageTargetBJ(h,m,d/3,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_DEMOLITION)endifset l=GetUnitLoc(m)call DestroyEffect(AddSpellEffectByIdLoc(ID,EFFECT_TYPE_CASTER,l))call DestroyEffect(AddSpellEffectByIdLoc(ID,EFFECT_TYPE_CASTER,l))call DestroyEffect(AddSpellEffectByIdLoc(ID,EFFECT_TYPE_CASTER,l))call RemoveLocation(l)call GroupRemoveUnit(g,m)elsecall GroupRemoveUnit(g,m)endifendloopcall GroupClear(g)call DestroyGroup(g)endfunctionfunction Ql takes nothing returns nothinglocal timer t=GetExpiredTimer()local string f8=e4(t)local integer QL=EH(f8,"TossCounter")local real Qm=Ei(f8,"TossDistance")local real QM=Ei(f8,"TossAngle")local location Qn=Eg(f8,"TossTargetLoc")local location QN=Eg(f8,"TossSourceLoc")local unit QH=EC(f8,"Tiny")local unit Qo=EC(f8,"TossSource")local real y=(QL-25)*(QL-25)local real x=Qm*QL/50-Qmlocal location PB=PolarProjectionBJ(Qn,x,QM)if(QL<51)thencall SetUnitPositionLoc(Qo,PB)call SetUnitFlyHeight(Qo,775-y,0)set QL=QL+1if(GetRandomInt(1,4)==2)thencall DestroyEffect(AddSpecialEffectTargetUnitBJ("origin",Qo,"Abilities\\Spells\\Undead\\Cripple\\CrippleTarget.mdl"))endifendifif(QL>50)thencall SetUnitFlyHeight(Qo,GetUnitDefaultFlyHeight(Qo),0)call PauseUnit(Qo,false)call SetUnitPathing(Qo,true)call TerrainDeformationRippleBJ(.2,true,Qn,1.,300.,96.,1,64.)if IsUnitAlly(Qo,GetOwningPlayer(QH))thencall UnitDamageTargetBJ(QH,Qo,.2*75*GetUnitAbilityLevel(QH,'A0BZ'),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_DEMOLITION)elsecall UnitDamageTargetBJ(QH,Qo,(.2+.15*GetUnitAbilityLevel(QH,'A0CY'))*75*GetUnitAbilityLevel(QH,'A0BZ'),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_DEMOLITION)endifcall QK(QH,GetLocationX(Qn),GetLocationY(Qn),300,75.*I2R(GetUnitAbilityLevelSwapped('A0BZ',QH)),'A0BZ')call EnumDestructablesInCircleBJ(300,Qn,function fv)call PauseTimer(GetExpiredTimer())call PolledWait(.01)call e5(f8)call DestroyTimer(GetExpiredTimer())call RemoveLocation(Qn)call RemoveLocation(QN)endifcall Ea(f8,"TossCounter",QL)call RemoveLocation(PB)endfunctionfunction QO takes nothing returns nothinglocal group EX=CreateGroup()local timer tlocal unit QH=GetTriggerUnit()local unit Qolocal location Qnlocal location QNlocal integer QLlocal real Qmlocal real QMlocal string f8call GroupEnumUnitsInRange(EX,GetUnitX(QH),GetUnitY(QH),275,Condition(function Qk))set Qo=GroupPickRandomUnit(EX)call DestroyGroup(EX)set Qn=GetUnitLoc(GetSpellTargetUnit())set QN=GetUnitLoc(Qo)set QL=1set Qm=DistanceBetweenPoints(QN,Qn)set QM=AngleBetweenPoints(QN,Qn)if(Qo!=null and GetUnitTypeId(Qo)!='n00I'and GetUnitTypeId(Qo)!='e01H'and GetOwningPlayer(GetSpellTargetUnit())!=GetOwningPlayer(QH))thencall SetUnitAnimationByIndex(QH,4)call PauseUnit(Qo,true)call SetUnitPathing(Qo,false)call UnitAddAbility(Qo,'AEme')call UnitRemoveAbility(Qo,'AEme')set t=CreateTimer()set f8=e4(t)call e7(f8,"Tiny",QH)call e7(f8,"TossSource",Qo)call e7(f8,"TossTargetLoc",Qn)call e7(f8,"TossSourceLoc",QN)call Ea(f8,"TossCounter",QL)call Eb(f8,"TossDistance",Qm)call Eb(f8,"TossAngle",QM)call TimerStart(t,.02,true,function Ql)endifendfunctionfunction GZ takes nothing returns nothingset CR=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(CR,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(CR,Condition(function QJ))call TriggerAddAction(CR,function QO)endfunctionfunction Qp takes nothing returns booleanif(not(GetUnitAbilityLevelSwapped('A0BU',GetTriggerUnit())>0))thenreturn falseendifif(not(IsUnitType(GetAttacker(),UNIT_TYPE_MELEE_ATTACKER)))thenreturn falseendifreturn trueendfunctionfunction QP takes nothing returns nothinglocal location iG=GetUnitLoc(GetTriggerUnit())if(GetRandomInt(1,'d')<=(GetUnitAbilityLevelSwapped('A0BU',GetTriggerUnit())*6))thencall CreateNUnitsAtLocFacingLocBJ(1,'e00E',GetOwningPlayer(GetTriggerUnit()),iG,GetUnitLoc(GetAttacker()))call UnitAddAbility(bj_lastCreatedUnit,'A0BV')call SetUnitAbilityLevelSwapped('A0BV',bj_lastCreatedUnit,GetUnitAbilityLevelSwapped('A0BU',GetTriggerUnit()))call IssueTargetOrderById(bj_lastCreatedUnit,852095,GetAttacker())endifcall RemoveLocation(iG)endfunctionfunction G0 takes nothing returns nothingset Cs=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(Cs,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(Cs,Condition(function Qp))call TriggerAddAction(Cs,function QP)endfunctionfunction Qq takes nothing returns booleanreturn GetSpellAbilityId()=='A0BE'endfunctionfunction QQ takes nothing returns nothingcall SetUnitAbilityLevel(GetTriggerUnit(),'A09E',GetUnitAbilityLevel(GetTriggerUnit(),'A0BE'))endfunctionfunction G8 takes nothing returns nothingset CS=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(CS,EVENT_PLAYER_UNIT_SPELL_FINISH)call TriggerRegisterAnyUnitEventBJ(CS,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(CS,Condition(function Qq))call TriggerAddAction(CS,function QQ)endfunctionfunction Qr takes nothing returns booleanreturn GetLearnedSkill()=='A0BE'and IsUnitIllusion(GetTriggerUnit())==falseendfunctionfunction QR takes nothing returns nothingcall SetUnitAbilityLevel(GetTriggerUnit(),'A09E',GetUnitAbilityLevel(GetTriggerUnit(),'A0BE'))endfunctionfunction G9 takes nothing returns nothingset Ct=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(Ct,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(Ct,Condition(function Qr))call TriggerAddAction(Ct,function QR)endfunctionfunction Qs takes nothing returns booleanreturn GetUnitAbilityLevel(GetAttacker(),'B02O')>0endfunctionfunction QS takes nothing returns nothingset q[GetPlayerId(GetOwningPlayer(GetDyingUnit()))]=0set q[GetPlayerId(GetOwningPlayer(GetAttacker()))]=(q[GetPlayerId(GetOwningPlayer(GetAttacker()))]+1)if(q[GetPlayerId(GetOwningPlayer(GetAttacker()))]>=5)thencall UnitRemoveAbility(GetAttacker(),'B02O')set q[GetPlayerId(GetOwningPlayer(GetAttacker()))]=0endifendfunctionfunction G1 takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(t,Condition(function Qs))call TriggerAddAction(t,function QS)endfunctionfunction Qt takes nothing returns booleanreturn GetSpellAbilityId()=='A059'endfunctionfunction QT takes nothing returns nothingset q[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]=0endfunctionfunction G2 takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function Qt))call TriggerAddAction(t,function QT)endfunctionfunction Qu takes nothing returns booleanif(UnitHasBuffBJ(GetAttacker(),'B02H')==false)thenreturn falseendifif(IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE))thenreturn falseendifif(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetAttacker())))thenreturn falseendifreturn trueendfunctionfunction QU takes nothing returns nothinglocal real Qv=(GetUnitStateSwap(UNIT_STATE_LIFE,GetAttacker())*(.03+(.01*I2R(GetUnitAbilityLevelSwapped('A0LC',GetAttacker())))))call UnitDamageTargetBJ(GetAttacker(),GetTriggerUnit(),Qv,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)endfunctionfunction G3 takes nothing returns nothingset CT=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(CT,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(CT,Condition(function Qu))call TriggerAddAction(CT,function QU)endfunctionfunction QV takes nothing returns booleanif(GetSpellAbilityId()=='A00G')thenreturn trueendifreturn falseendfunctionfunction Qw takes nothing returns nothingif(IsTerrainPathable(GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),PATHING_TYPE_WALKABILITY))thencall fp(GetTriggerUnit())call fI(GetOwningPlayer(GetTriggerUnit()),"Cannot use nether swap here")endifendfunctionfunction QW takes nothing returns nothinglocal unit Qx=GetSpellAbilityUnit()local unit QX=GetSpellTargetUnit()local location Qy=GetUnitLoc(Qx)local location QY=GetUnitLoc(QX)call PolledWait(.01)call SetUnitPositionLoc(Qx,QY)call SetUnitPositionLoc(QX,Qy)call EnumDestructablesInCircleBJ(300,Qy,function fv)call RemoveLocation(QY)call RemoveLocation(Qy)endfunctionfunction G4 takes nothing returns nothinglocal trigger t=CreateTrigger()set Cu=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(Cu,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(Cu,Condition(function QV))call TriggerAddAction(Cu,function QW)call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(t,Condition(function QV))call TriggerAddAction(t,function Qw)endfunctionfunction Qz takes nothing returns booleanreturn(GetSpellAbilityId()=='A0JC'or GetSpellAbilityId()=='A020'or GetSpellAbilityId()=='A07C'or GetSpellAbilityId()=='A06L')and GetUnitAbilityLevel(GetTriggerUnit(),'A0N5')>0endfunctionfunction QZ takes nothing returns nothinglocal real Q0=.96-.02*GetUnitAbilityLevel(GetTriggerUnit(),'A0N5')local real Q1=GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)local real Fa=Q1-Q1*Q0call UnitDamageTarget(GetTriggerUnit(),GetEnumUnit(),Fa,true,true,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Purge\\PurgeBuffTarget.mdl",GetEnumUnit(),"origin"))endfunctionfunction Q2 takes nothing returns booleanreturn IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))endfunctionfunction Q3 takes nothing returns nothinglocal location iG=GetUnitLoc(GetTriggerUnit())local group EX=CreateGroup()local real x=GetLocationX(iG)local real y=GetLocationY(iG)local boolexpr Ey=Condition(function Q2)call GroupEnumUnitsInRange(EX,x,y,800,Ey)call ForGroup(EX,function QZ)call RemoveLocation(iG)call DestroyGroup(EX)call DestroyBoolExpr(Ey)endfunctionfunction G5 takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function Qz))call TriggerAddAction(t,function Q3)endfunctionfunction Q4 takes nothing returns booleanif((GetSpellAbilityId()=='A07C'))thenreturn trueendifif((GetSpellAbilityId()=='A06L'))thenreturn trueendifreturn falseendfunctionfunction Q5 takes nothing returns booleanif(not Q4())thenreturn falseendifreturn trueendfunctionfunction Q6 takes nothing returns booleanreturn(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and GetUnitTypeId(GetFilterUnit())!='H00J'endfunctionfunction Q7 takes nothing returns booleanreturn(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))endfunctionfunction Q8 takes nothing returns booleanreturn GetBooleanAnd(Q6(),Q7())endfunctionfunction Q9 takes nothing returns booleanif(not(GetSpellAbilityId()=='A07C'))thenreturn falseendifreturn trueendfunctionfunction ra takes nothing returns nothinglocal location iG=GetUnitLoc(GetEnumUnit())if(Q9())thencall CreateNUnitsAtLoc(1,'e000',GetOwningPlayer(GetTriggerUnit()),iG,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,'A05S')call SetUnitAbilityLevelSwapped('A05S',bj_lastCreatedUnit,(4+GetUnitAbilityLevelSwapped('A07C',GetTriggerUnit())))call IssueTargetOrderById(bj_lastCreatedUnit,852119,GetEnumUnit())call UnitApplyTimedLifeBJ(3.,'BTLF',bj_lastCreatedUnit)call SetUnitPathing(bj_lastCreatedUnit,false)call SetUnitInvulnerable(bj_lastCreatedUnit,true)call UnitAddAbility(bj_lastCreatedUnit,'Aloc')elsecall CreateNUnitsAtLoc(1,'e000',GetOwningPlayer(GetTriggerUnit()),iG,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,'A05S')call SetUnitAbilityLevelSwapped('A05S',bj_lastCreatedUnit,(5+GetUnitAbilityLevelSwapped('A06L',GetTriggerUnit())))call IssueTargetOrderById(bj_lastCreatedUnit,852119,GetEnumUnit())call UnitApplyTimedLifeBJ(3.,'BTLF',bj_lastCreatedUnit)call SetUnitPathing(bj_lastCreatedUnit,false)call SetUnitInvulnerable(bj_lastCreatedUnit,true)call UnitAddAbility(bj_lastCreatedUnit,'Aloc')endifcall RemoveLocation(iG)endfunctionfunction rA takes nothing returns nothinglocal group EX=GetUnitsInRectMatching(bj_mapInitialPlayableArea,Condition(function Q8))call ForGroupBJ(EX,function ra)call DestroyGroup(EX)endfunctionfunction G6 takes nothing returns nothingset CU=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(CU,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(CU,Condition(function Q5))call TriggerAddAction(CU,function rA)endfunctionfunction rb takes nothing returns booleanreturn GetSpellAbilityId()=='A0JC'endfunctionfunction rB takes nothing returns nothinglocal unit fw=GetTriggerUnit()local unit Fd=GetSpellTargetUnit()local unit Jz=CreateUnit(GetOwningPlayer(fw),'e000',GetUnitX(Fd),GetUnitY(Fd),0)call UnitAddAbility(Jz,'A05S')call SetUnitAbilityLevel(Jz,'A05S',GetUnitAbilityLevel(fw,'A0JC'))call IssueTargetOrderById(Jz,852119,Fd)call UnitApplyTimedLife(Jz,'BTLF',3)call SetUnitPathing(Jz,false)call UnitAddAbility(Jz,'Aloc')endfunctionfunction G7 takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function rb))call TriggerAddAction(t,function rB)endfunctionfunction rc takes nothing returns booleanreturn GetSpellAbilityId()=='A0I3'endfunctionfunction rC takes nothing returns nothinglocal timer t=GetExpiredTimer()local string f8=e4(t)local unit fw=EC(f8,"Hero")local real Fa=Ei(f8,"Damage")call UnitDamageTarget(fw,fw,Fa,false,true,ATTACK_TYPE_HERO,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)call e5(f8)call PauseTimer(t)call DestroyTimer(t)endfunctionfunction rd takes nothing returns nothinglocal unit fw=GetTriggerUnit()local unit Fd=GetSpellTargetUnit()local real Fa=25+25*GetUnitAbilityLevel(fw,'A0I3')local timer t=CreateTimer()local string f8=e4(t)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl",Fd,"origin"))if IsUnitAlly(Fd,GetOwningPlayer(fw))thencall SetUnitState(Fd,UNIT_STATE_LIFE,GetUnitState(Fd,UNIT_STATE_LIFE)+2*Fa)elsecall UnitDamageTarget(fw,Fd,2*Fa,false,true,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)endifcall e7(f8,"Hero",fw)call Eb(f8,"Damage",Fa)call TimerStart(t,0,false,function rC)endfunctionfunction h5 takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function rc))call TriggerAddAction(t,function rd)endfunctionfunction rD takes nothing returns booleanreturn GetSpellAbilityId()=='A0MF'endfunctionfunction re takes nothing returns booleanif(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))thenreturn falseendifif(GetUnitAbilityLevelSwapped('A04R',GetFilterUnit())!=0)thenreturn falseendifif(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))thenreturn falseendifreturn trueendfunctionfunction rE takes nothing returns nothingset bj_lastCreatedUnit=CreateUnit(GetOwningPlayer(Ai),'e00E',GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,'A0MJ')call SetUnitAbilityLevel(bj_lastCreatedUnit,'A0MJ',GetUnitAbilityLevel(Ai,'A0MF'))call IssueTargetOrderById(bj_lastCreatedUnit,852587,GetEnumUnit())endfunctionfunction rf takes nothing returns nothinglocal location iG=GetUnitLoc(GetTriggerUnit())local group EX=GetUnitsInRangeOfLocMatching(700,iG,Condition(function re))call ForGroup(EX,function rE)call DestroyGroup(EX)call RemoveLocation(iG)endfunctionfunction rF takes nothing returns nothinglocal string f8=e4(GetTriggeringTrigger())local real rg=Ei(f8,"AphoticLife")if(rg<GetEventDamage())thencall FA(GetTriggerUnit(),rg)call DestroyEffect(Ef(f8,"AphoticFX"))call DisableTrigger(GetTriggeringTrigger())call Ec(f8,"AphoticDone",true)set Ai=EC(f8,"AphoticOwner")call rf()elseif(GetEventDamage()>0)thencall FA(GetTriggerUnit(),GetEventDamage())call Eb(f8,"AphoticLife",rg-GetEventDamage())endifendfunctionfunction rG takes nothing returns nothinglocal trigger t=CreateTrigger()local string f8=e4(t)local triggeraction ta=TriggerAddAction(t,function rF)call TriggerRegisterUnitEvent(t,GetSpellTargetUnit(),EVENT_UNIT_DAMAGED)call UnitRemoveBuffsBJ(1,GetSpellTargetUnit())call Eb(f8,"AphoticLife",75+50*GetUnitAbilityLevel(GetTriggerUnit(),'A0MF'))call e7(f8,"AphoticFX",AddSpecialEffectTarget("war3mapImported\\Defensive Barrier big.mdx",GetSpellTargetUnit(),"chest"))call e7(f8,"AphoticOwner",GetTriggerUnit())call Ec(f8,"AphoticDone",false)call PolledWait(20)if(EI(f8,"AphoticDone")==false)thencall DestroyEffect(Ef(f8,"AphoticFX"))endifcall e5(f8)call TriggerRemoveAction(t,ta)call Fj(t)endfunctionfunction rh takes nothing returns booleanreturn GetSpellAbilityId()=='A0MF'endfunctionfunction rH takes nothing returns nothingif GetUnitAbilityLevel(GetSpellTargetUnit(),'BNdo')!=0 thencall fp(GetTriggerUnit())call fI(GetOwningPlayer(GetTriggerUnit()),"Cannot use Aphotic Shield on Doomed Unit")endifendfunctionfunction h7 takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(t,Condition(function rh))call TriggerAddAction(t,function rH)set Cv=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(Cv,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(Cv,Condition(function rD))call TriggerAddAction(Cv,function rG)endfunctionfunction ri takes nothing returns booleanreturn GetLearnedSkill()=='A0NS'and IsUnitIllusion(GetTriggerUnit())==falseendfunctionfunction rI takes nothing returns nothinglocal string f8=e4(GetTriggeringTrigger())local timer O7=CreateTimer()call StartTimerBJ(O7,false,45)loopexitwhen TimerGetRemaining(O7)<=.0call PolledWait(.5)endloopcall Ec(f8,"BTOn",false)call PauseTimer(O7)call PolledWait(1)call DestroyTimer(O7)endfunctionfunction EndDuration3 takes nothing returns nothinglocal string f8=e4(GetTriggeringTrigger())call PolledWait(3)call Ec(f8,"BTDuration",false)call DestroyEffect(Ef(f8,"BTFX"))endfunctionfunction EndDuration4 takes nothing returns nothinglocal string f8=e4(GetTriggeringTrigger())call PolledWait(4)call Ec(f8,"BTDuration",false)call DestroyEffect(Ef(f8,"BTFX"))endfunctionfunction EndDuration5 takes nothing returns nothinglocal string f8=e4(GetTriggeringTrigger())call PolledWait(5)call Ec(f8,"BTDuration",false)call DestroyEffect(Ef(f8,"BTFX"))endfunctionfunction rj takes nothing returns nothinglocal string f8=e4(GetTriggeringTrigger())local boolean rJ=EI(f8,"BTOn")local boolean rk=EI(f8,"BTDuration")if(rk)thencall FA(GetTriggerUnit(),GetEventDamage())elseif(rJ==false and((GetTriggerEventId()==EVENT_UNIT_DAMAGED and GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)<400)or(GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT)))thencall UnitRemoveBuffsBJ(1,GetTriggerUnit())if(GetTriggerEventId()==EVENT_UNIT_DAMAGED)thencall DisableTrigger(GetTriggeringTrigger())call IssueImmediateOrderById(GetTriggerUnit(),852129)call EnableTrigger(GetTriggeringTrigger())endifset rJ=trueset rk=truecall Ec(f8,"BTOn",rJ)call Ec(f8,"BTDuration",rk)call e7(f8,"BTFX",AddSpecialEffectTarget("Abilities\\Spells\\Undead\\Unsummon\\UnsummonTarget.mdl",GetTriggerUnit(),"origin"))call ExecuteFunc("EndDuration"+I2S(2+GetUnitAbilityLevel(GetTriggerUnit(),'A0NS')))call ExecuteFunc("rI")endifendfunctionfunction rK takes nothing returns booleanif(GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT)thenif(GetSpellAbilityId()=='A0NS')thenreturn trueendifendifif(GetTriggerEventId()==EVENT_UNIT_DAMAGED)thenif GetEventDamage()>1 thenreturn trueendifendifreturn falseendfunctionfunction rl takes nothing returns nothinglocal trigger tif(GetUnitAbilityLevel(GetTriggerUnit(),'A0NS')==1)thenset t=CreateTrigger()call Ec(e4(t),"BTOn",false)call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_SPELL_EFFECT)call TriggerAddAction(t,function rj)call TriggerAddCondition(t,Condition(function rK))endifendfunctionfunction h8 takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function ri))call TriggerAddAction(t,function rl)endfunctionfunction rL takes nothing returns booleanreturn GetUnitAbilityLevel(GetTriggerUnit(),'B066')>0endfunctionfunction rm takes nothing returns nothinglocal unit KJ=GetAttacker()local unit Fd=GetTriggerUnit()local unit SourceHerolocal integer m8=GetUnitAbilityLevel(KJ,'A0MG')local unit Jz=CreateUnit(GetOwningPlayer(KJ),'e00E',GetUnitX(KJ),GetUnitY(KJ),0)if m8>0 thencall Ea(e4(Fd),"MarkOfTheAbyss|Level",m8)elseset m8=EH(e4(Fd),"MarkOfTheAbyss|Level")endifcall UnitAddAbility(Jz,'A0MH')call SetUnitAbilityLevel(Jz,'A0MH',m8)call IssueTargetOrderById(Jz,852101,KJ)endfunctionfunction h6 takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(t,Condition(function rL))call TriggerAddAction(t,function rm)endfunctionfunction rM takes nothing returns booleanif(not(UnitHasBuffBJ(GetKillingUnit(),'B03O')))thenreturn falseendifreturn trueendfunctionfunction rn takes nothing returns nothingcall UnitRemoveAbility(GetEnumUnit(),'B03O')endfunctionfunction rN takes nothing returns booleanif(not(GetUnitAbilityLevelSwapped('A04R',GetKillingUnit())>0))thenreturn falseendifreturn trueendfunctionfunction ro takes nothing returns nothinglocal group EX=GetUnitsOfPlayerAll(GetOwningPlayer(GetKillingUnit()))if(rM())thencall UnitRemoveAbility(GetKillingUnit(),'B03O')endifif(rN())thencall ForGroupBJ(EX,function rn)endifcall DestroyGroup(EX)endfunctionfunction ha takes nothing returns nothingset CV=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(CV,EVENT_PLAYER_UNIT_DEATH)call TriggerAddAction(CV,function ro)endfunctionfunction rO takes nothing returns booleanif(not(UnitHasBuffBJ(GetTriggerUnit(),'B03P')))thenreturn falseendifif(not(IsUnitType(GetAttacker(),UNIT_TYPE_STRUCTURE)==false))thenreturn falseendifif(not(IsUnitType(GetAttacker(),UNIT_TYPE_MECHANICAL)==false))thenreturn falseendifif(GetUnitAbilityLevelSwapped('A04R',GetAttacker())!=0)thenreturn falseendifif(IsUnitAlly(GetAttacker(),GetTriggerPlayer()))thenreturn falseendifreturn trueendfunctionfunction rp takes nothing returns booleanif(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))thenreturn falseendifif(IsUnitDeadBJ(GetFilterUnit()))thenreturn falseendifif(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))thenreturn falseendifif(GetUnitAbilityLevelSwapped('A04R',GetFilterUnit())!=0)thenreturn falseendifif(UnitHasBuffBJ(GetFilterUnit(),'B02J'))thenreturn falseendifreturn trueendfunctionfunction rP takes nothing returns nothinglocal effect k0=AddSpecialEffectTargetUnitBJ("origin",GetEnumUnit(),"Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl")call DestroyEffect(k0)call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),I2R(75+(25*GetUnitAbilityLevelSwapped('A0C6',GetTriggerUnit()))),ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)endfunctionfunction rq takes nothing returns booleanif(GetRandomReal(0,100.)<15.)thenreturn trueendifreturn falseendfunctionfunction rQ takes nothing returns nothinglocal group EXlocal location iGif(rq())thenset iG=GetUnitLoc(GetTriggerUnit())set EX=GetUnitsInRangeOfLocMatching(300.,iG,Condition(function rp))call ForGroupBJ(EX,function rP)call SetUnitAnimation(GetTriggerUnit(),"spin")call DisableTrigger(GetTriggeringTrigger())call PolledWait(.6)call ResetUnitAnimation(GetTriggerUnit())call EnableTrigger(GetTriggeringTrigger())call DestroyGroup(EX)call RemoveLocation(iG)endifendfunctionfunction hA takes nothing returns nothingset Cw=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(Cw,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(Cw,Condition(function rO))call TriggerAddAction(Cw,function rQ)endfunctionfunction rr takes nothing returns booleanif(not(GetSpellAbilityId()=='A0C7'))thenreturn falseendifreturn trueendfunctionfunction rR takes nothing returns booleanif(UnitHasBuffBJ(GetFilterUnit(),'BHwe'))thenif((UnitHasBuffBJ(GetFilterUnit(),'B008')==false)or(UnitHasBuffBJ(GetFilterUnit(),'Bcyc')==false))thenif IsUnitPaused(GetFilterUnit())==false thenreturn trueendifendifendifreturn falseendfunctionfunction rs takes nothing returns nothingcall IssueTargetOrderById(GetEnumUnit(),851983,Ai)endfunctionfunction rS takes nothing returns booleanreturn(UnitHasBuffBJ(GetFilterUnit(),'BHwe'))endfunctionfunction rt takes nothing returns booleanreturn GetOwningPlayer(GetFilterUnit())==Ac[0]or GetOwningPlayer(GetFilterUnit())==AC[0]endfunctionfunction rT takes nothing returns booleanreturn GetBooleanAnd(rS(),rt())endfunctionfunction ru takes nothing returns nothingif(GetOwningPlayer(GetEnumUnit())==Ac[0])thencall UnitRemoveAbility(GetEnumUnit(),'BHwe')call IssuePointOrderByIdLoc(GetEnumUnit(),851983,GetRectCenter(bZ))endifif(GetOwningPlayer(GetEnumUnit())==AC[0])thencall UnitRemoveAbility(GetEnumUnit(),'BHwe')call IssuePointOrderByIdLoc(GetEnumUnit(),851983,GetRectCenter(bz))endifendfunctionfunction rU takes nothing returns booleanreturn GetUnitAbilityLevel(GetTriggerUnit(),'BHwe')>0endfunctionfunction rv takes nothing returns nothinglocal unit M5=EC(e4(GetTriggeringTrigger()),"Axe")if GetUnitState(M5,UNIT_STATE_LIFE)>0 thencall DisableTrigger(GetTriggeringTrigger())call IssueTargetOrderById(GetTriggerUnit(),851983,M5)call EnableTrigger(GetTriggeringTrigger())endifendfunctionfunction rV takes nothing returns nothinglocal location iG=GetUnitLoc(GetTriggerUnit())local group EXlocal trigger t=CreateTrigger()local unit rw=GetSpellAbilityUnit()call e7(e4(t),"Axe",GetTriggerUnit())call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER)call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_ISSUED_ORDER)call TriggerAddCondition(t,Condition(function rU))call TriggerAddAction(t,function rv)call PolledWait(.2)call CreateNUnitsAtLocFacingLocBJ(1,'e00E',GetOwningPlayer(GetTriggerUnit()),iG,iG)call RemoveLocation(iG)call UnitAddAbility(bj_lastCreatedUnit,'A0E1')call SetUnitAbilityLevelSwapped('A0E1',bj_lastCreatedUnit,GetUnitAbilityLevel(rw,'A0C7'))call IssueTargetOrderById(bj_lastCreatedUnit,852066,GetTriggerUnit())set iG=GetUnitLoc(rw)set EX=GetUnitsInRangeOfLocMatching(550.,iG,Condition(function rR))set Ai=rwcall ForGroupBJ(EX,function rs)call RemoveLocation(iG)call DestroyGroup(EX)call PolledWait(1+.5*GetUnitAbilityLevel(rw,'A0C7'))set EX=GetUnitsInRectMatching(bj_mapInitialPlayableArea,Condition(function rT))call ForGroupBJ(EX,function ru)call DestroyGroup(EX)call e5(e4(t))call TriggerClearActions(t)call Fj(t)endfunctionfunction hb takes nothing returns nothingset CW=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(CW,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(CW,Condition(function rr))call TriggerAddAction(CW,function rV)endfunctionfunction rW takes nothing returns booleanif(not(GetSpellAbilityId()=='A0E2'))thenreturn falseendifreturn trueendfunctionfunction rx takes nothing returns booleanif(not(GetUnitAbilityLevelSwapped('A0E2',GetSpellAbilityUnit())==1))thenreturn falseendifif(not(GetUnitStateSwap(UNIT_STATE_LIFE,GetSpellTargetUnit())<=300.))thenreturn falseendifreturn trueendfunctionfunction rX takes nothing returns booleanif(not(GetUnitAbilityLevelSwapped('A0E2',GetSpellAbilityUnit())==2))thenreturn falseendifif(not(GetUnitStateSwap(UNIT_STATE_LIFE,GetSpellTargetUnit())<=450.))thenreturn falseendifreturn trueendfunctionfunction ry takes nothing returns booleanif(not(GetUnitAbilityLevelSwapped('A0E2',GetSpellAbilityUnit())==3))thenreturn falseendifif(not(GetUnitStateSwap(UNIT_STATE_LIFE,GetSpellTargetUnit())<=625.))thenreturn falseendifreturn trueendfunctionfunction rY takes nothing returns nothinglocal location nl=GetUnitLoc(GetTriggerUnit())if(rx())thencall UnitRemoveBuffsBJ(2,GetSpellTargetUnit())call CreateNUnitsAtLoc(1,'e00E',GetOwningPlayer(GetTriggerUnit()),nl,bj_UNIT_FACING)call UnitDamageTargetBJ(bj_lastCreatedUnit,GetSpellTargetUnit(),100000000.,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)endifif(rX())thencall UnitRemoveBuffsBJ(2,GetSpellTargetUnit())call CreateNUnitsAtLoc(1,'e00E',GetOwningPlayer(GetTriggerUnit()),nl,bj_UNIT_FACING)call UnitDamageTargetBJ(bj_lastCreatedUnit,GetSpellTargetUnit(),100000000.,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)endifif(ry())thencall UnitRemoveBuffsBJ(2,GetSpellTargetUnit())call CreateNUnitsAtLoc(1,'e00E',GetOwningPlayer(GetTriggerUnit()),nl,bj_UNIT_FACING)call UnitDamageTargetBJ(bj_lastCreatedUnit,GetSpellTargetUnit(),100000000.,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)endifcall RemoveLocation(nl)endfunctionfunction hB takes nothing returns nothingset CX=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(CX,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(CX,Condition(function rW))call TriggerAddAction(CX,function rY)endfunctionfunction rz takes nothing returns booleanreturn GetSpellAbilityId()=='A0GK'endfunctionfunction rZ takes nothing returns nothingcall UnitDamageTargetBJ(GetTriggerUnit(),GetSpellTargetUnit(),75*GetUnitAbilityLevel(GetTriggerUnit(),'A0GK'),ATTACK_TYPE_HERO,DAMAGE_TYPE_MAGIC)call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+75*GetUnitAbilityLevel(GetTriggerUnit(),'A0GK'))endfunctionfunction r0 takes nothing returns booleanreturn GetSpellAbilityId()=='A04Y'and GetUnitTypeId(GetSpellTargetUnit())!='n00I'and GetUnitTypeId(GetSpellTargetUnit())!='e01H'endfunctionfunction r1 takes nothing returns booleanreturn GetUnitAbilityLevel(GetTriggerUnit(),'B02F')>0endfunctionfunction r2 takes nothing returns nothinglocal unit fP=EC(e4(GetTriggeringTrigger()),"UnitVar")local integer m8=GetUnitAbilityLevel(fP,'A04Y')local unit Jz=CreateUnit(GetOwningPlayer(fP),'e00C',GetUnitX(fP),GetUnitY(fP),270)call UnitRemoveAbility(GetTriggerUnit(),'B02F')call UnitApplyTimedLife(Jz,'BTLF',10.)call UnitAddAbility(Jz,'A04Y')call SetUnitAbilityLevel(Jz,'A04Y',m8)call IssueTargetOrderById(Jz,852227,GetAttacker())call SetUnitPathing(Jz,false)call SetUnitInvulnerable(Jz,true)call UnitAddAbility(Jz,'Aloc')endfunctionfunction r3 takes nothing returns nothinglocal timer t=GetExpiredTimer()local string f8=e4(t)local unit Fd=EC(f8,"Target")local unit fP=EC(f8,"UnitVar")if GetUnitAbilityLevel(Fd,'B02F')>0 thenif(GetUnitState(Fd,UNIT_STATE_LIFE)>20)thencall SetUnitState(Fd,UNIT_STATE_LIFE,f6(0,GetUnitState(Fd,UNIT_STATE_LIFE)-20))elsecall UnitDamageTargetBJ(fP,Fd,50,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)endifelsecall PauseTimer(t)call e5(e4(Ee(f8,"Trigger")))call Fj(Ee(f8,"Trigger"))call PolledWait(1)call e5(f8)call DestroyTimer(t)endifendfunctionfunction r4 takes nothing returns nothinglocal unit fP=GetTriggerUnit()local unit Fd=GetSpellTargetUnit()local timer t=CreateTimer()local string f8=e4(t)local trigger r5=CreateTrigger()call e7(f8,"Target",Fd)call e7(f8,"UnitVar",fP)call e7(f8,"Trigger",r5)call TimerStart(t,1.,true,function r3)call e7(e4(r5),"UnitVar",fP)call TriggerRegisterAnyUnitEventBJ(r5,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(r5,Condition(function r1))call TriggerAddAction(r5,function r2)call UnitDamageTargetBJ(fP,Fd,5.,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)endfunctionfunction Nightmare_CheckHelp takes nothing returns nothingif GetUnitTypeId(GetTriggerUnit())!='e00C'and GetSpellAbilityId()=='A04Y'and EI(e4(GetOwningPlayer(GetSpellTargetUnit())),"L6")and GetSpellTargetUnit()!=GetTriggerUnit()thencall fp(GetTriggerUnit())call fI(GetOwningPlayer(GetTriggerUnit()),"This target has disablehelp on")endifendfunctionfunction hc takes nothing returns nothinglocal trigger tset Cz=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(Cz,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(Cz,Condition(function r0))call TriggerAddAction(Cz,function r4)endfunctionfunction r6 takes nothing returns booleanreturn GetSpellAbilityId()=='A02Q'endfunctionfunction r7 takes nothing returns nothinglocal trigger t=GetTriggeringTrigger()local string f8=e4(t)local unit fP=EC(e4(t),"UnitVar")if(GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST or GetUnitState(fP,UNIT_STATE_MANA)<=20.)thencall IssueImmediateOrderById(fP,851972)call e5(f8)call Fj(t)elsecall SetUnitManaBJ(fP,GetUnitState(fP,UNIT_STATE_MANA)-4-4*GetUnitAbilityLevel(fP,'A02Q'))call UnitDamageTargetBJ(fP,fP,4+4*GetUnitAbilityLevel(fP,'A02Q'),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MIND)endifendfunctionfunction r8 takes nothing returns nothinglocal unit fP=GetTriggerUnit()local trigger t=CreateTrigger()local string f8=e4(t)call TriggerRegisterTimerEvent(t,.2,true)call TriggerRegisterUnitEvent(t,fP,EVENT_UNIT_SPELL_ENDCAST)call TriggerAddAction(t,function r7)call e7(f8,"UnitVar",fP)endfunctionfunction hC takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function r6))call TriggerAddAction(t,function r8)endfunctionfunction r9 takes nothing returns booleanif(GetUnitTypeId(GetDyingUnit())=='n00L')thenreturn falseendifif(IsUnitType(GetDyingUnit(),UNIT_TYPE_STRUCTURE))thenreturn falseendifif(GetUnitAbilityLevel(GetKillingUnit(),'A0LE')>0)thenreturn trueendifreturn falseendfunctionfunction Ra takes nothing returns nothinglocal real RA=.05local real Rblocal effect fxif(IsUnitType(GetDyingUnit(),UNIT_TYPE_HERO))thenset RA=.1endifset Rb=GetUnitAbilityLevel(GetKillingUnit(),'A0LE')*RA*GetUnitState(GetDyingUnit(),UNIT_STATE_MAX_LIFE)call SetWidgetLife(GetKillingUnit(),GetUnitState(GetKillingUnit(),UNIT_STATE_LIFE)+Rb)set fx=AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HeroBloodElfBlood.mdl",GetKillingUnit(),"overhead")call PolledWait(1.)call DestroyEffect(fx)endfunctionfunction hd takes nothing returns nothingset CZ=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(CZ,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(CZ,Condition(function r9))call TriggerAddAction(CZ,function Ra)endfunctionfunction RB takes nothing returns booleanreturn GetSpellAbilityId()=='A0LH'endfunctionfunction Rc takes nothing returns nothinglocal timer t=GetExpiredTimer()local string f8=e4(t)local unit RC=EC(f8,"RuptureCaster")local unit Rd=EC(f8,"RuptureTarget")local location Re=Eg(f8,"RuptureOldLoc")local location RE=GetUnitLoc(Rd)local real Qv=.2*GetUnitAbilityLevel(RC,'A0LH')*DistanceBetweenPoints(Re,RE)if(Qv>200)thenset Qv=0endifif(Qv>5)thencall DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl",Rd,"origin"))endifif(Qv>0)thencall UnitDamageTargetBJ(RC,Rd,Qv,ATTACK_TYPE_HERO,DAMAGE_TYPE_MAGIC)endifcall RemoveLocation(Re)call e7(f8,"RuptureOldLoc",RE)endfunctionfunction Rf takes nothing returns nothinglocal unit RC=GetTriggerUnit()local unit Rd=GetSpellTargetUnit()local location RF=GetUnitLoc(Rd)local integer m8=GetUnitAbilityLevel(RC,'A0LH')local timer t=CreateTimer()local string f8=e4(t)local unit qIcall UnitDamageTargetBJ(RC,Rd,50+'d'*m8,ATTACK_TYPE_HERO,DAMAGE_TYPE_MAGIC)call e7(f8,"RuptureCaster",RC)call e7(f8,"RuptureTarget",Rd)call e7(f8,"RuptureOldLoc",RF)call TimerStart(t,.25,true,function Rc)set qI=CreateUnit(GetOwningPlayer(Rd),'e01R',0,0,bj_UNIT_FACING)call UnitAddAbility(qI,'A0NH')call PolledWait(3+(2*m8))call RemoveUnit(qI)call UnitRemoveAbility(Rd,'B067')call PauseTimer(t)call PolledWait(1)call e5(f8)call DestroyTimer(t)endfunctionfunction hD takes nothing returns nothingset C0=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(C0,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(C0,Condition(function RB))call TriggerAddAction(C0,function Rf)endfunctionfunction Rg takes nothing returns booleanreturn GetLearnedSkill()=='A0I8'and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),'A0I8')==1endfunctionfunction RG takes nothing returns booleanreturn IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(Ai))endfunctionfunction Rh takes nothing returns nothinglocal real FD=Ff(GetEnumUnit(),Ai)if Aj==0 or GetUnitState(Ai,UNIT_STATE_LIFE)<1 thencall UnitShareVision(GetEnumUnit(),GetOwningPlayer(Ai),false)elseif FD>=Aj*1500 or(FD<Aj*1500 and GetUnitStatePercent(GetEnumUnit(),UNIT_STATE_LIFE,UNIT_STATE_MAX_LIFE)>40)thencall UnitShareVision(GetEnumUnit(),GetOwningPlayer(Ai),false)endifif FD<Aj*1500 and GetUnitLifePercent(GetEnumUnit())<=40 thencall UnitShareVision(GetEnumUnit(),GetOwningPlayer(Ai),true)set An=trueendifendifendfunctionfunction RH takes nothing returns nothinglocal unit Jz=CreateUnit(GetOwningPlayer(Ai),'e00E',GetUnitX(Ai),GetUnitY(Ai),0)call UnitAddAbility(Jz,'A0LG')call SetUnitAbilityLevel(Jz,'A0LG',Aj)call IssueTargetOrderById(Jz,852101,Ai)endfunctionfunction Ri takes nothing returns nothingcall UnitRemoveAbility(Ai,'B05R')endfunctionfunction RI takes nothing returns nothinglocal unit fw=EC(e4(GetExpiredTimer()),"Hero")local group EX=CreateGroup()local boolexpr Ey=Condition(function RG)local integer m8=GetUnitAbilityLevel(fw,'A0I8')set Ai=fwset Aj=m8set An=falsecall GroupEnumUnitsInRect(EX,GetWorldBounds(),Ey)call ForGroup(EX,function Rh)if An thencall RH()elsecall Ri()endifcall DestroyBoolExpr(Ey)call DestroyGroup(EX)endfunctionfunction Rj takes nothing returns nothinglocal unit fw=GetTriggerUnit()local timer t=CreateTimer()call e7(e4(t),"Hero",fw)call TimerStart(t,.5,true,function RI)endfunctionfunction he takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function Rg))call TriggerAddAction(t,function Rj)endfunctionfunction RJ takes nothing returns booleanreturn GetUnitTypeId(GetSummonedUnit())=='o003'endfunctionfunction Rk takes nothing returns nothinglocal unit RK=GetSummonedUnit()local unit Rl=GetSummoningUnit()local string f8=e4(Rl)local integer m8=GetUnitAbilityLevel(Rl,'A0BG')local integer RL=EH(f8,"TotalWebs")local unit Rm=EC(f8,"Web1")local integer x=1set RL=RL+1call SetUnitVertexColorBJ(RK,'d','d','d',70)call PolledWait(.1)call UnitAddAbility(RK,'Aloc')call e7(f8,"Web"+I2S(RL),RK)if(RL>m8*2)thencall KillUnit(Rm)loopexitwhen x==RLcall e7(f8,"Web"+I2S(x),EC(f8,"Web"+I2S(x+1)))set x=x+1endloopset RL=RL-1endifcall Ea(f8,"TotalWebs",RL)call SetUnitAbilityLevel(RK,'A0BF',m8)endfunctionfunction hE takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SUMMON)call TriggerAddCondition(t,Condition(function RJ))call TriggerAddAction(t,function Rk)endfunctionfunction RM takes unit Rl returns nothinglocal string f8=e4(Rl)local integer m8=GetUnitAbilityLevel(Rl,'A0BG')local integer RL=EH(f8,"TotalWebs")local integer x=1local unit OAloopexitwhen x>RLset OA=EC(f8,"Web"+I2S(x))call SetUnitAbilityLevel(OA,'A0BF',m8)set x=x+1endloopendfunctionfunction Rn takes nothing returns booleanreturn GetLearnedSkill()=='A0BG'and IsUnitIllusion(GetTriggerUnit())==falseendfunctionfunction RN takes nothing returns nothinglocal unit Rl=EC(e4(GetTriggeringTrigger()),"Spider")if GetUnitAbilityLevel(Rl,'B01C')>0 thencall UnitAddAbility(Rl,'A021')elsecall UnitRemoveAbility(Rl,'A021')endifendfunctionfunction Ro takes nothing returns nothinglocal unit fP=GetTriggerUnit()local trigger tif(GetUnitAbilityLevel(fP,'A0BG')==1)thenset t=CreateTrigger()call TriggerRegisterTimerEventPeriodic(t,1.5)call TriggerAddAction(t,function RN)call e7(e4(t),"Spider",fP)elsecall RM(fP)endifendfunctionfunction hf takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function Rn))call TriggerAddAction(t,function Ro)endfunctionfunction RO takes nothing returns booleanreturn GetSpellAbilityId()=='A055'endfunctionfunction Rp takes nothing returns nothinglocal location iG=GetUnitLoc(GetSpellTargetUnit())local integer m8=GetUnitAbilityLevel(GetTriggerUnit(),'A055')local integer Rq=GetRandomInt(1,m8)local unit fP=GetTriggerUnit()local unit Fd=GetSpellTargetUnit()local real Fa=GetRandomReal(1,200)if(m8==4)thenset Rq=GetRandomInt(2,4)endifcall CreateNUnitsAtLoc(1,'e00E',GetOwningPlayer(fP),iG,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,'A04U')call SetUnitAbilityLevel(bj_lastCreatedUnit,'A04U',Rq)call IssueTargetOrderById(bj_lastCreatedUnit,852095,Fd)call UnitDamageTargetBJ(fP,Fd,Fa,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)endfunctionfunction hF takes nothing returns nothingset C1=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(C1,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(C1,Condition(function RO))call TriggerAddAction(C1,function Rp)endfunctionfunction RQ takes nothing returns booleanreturn GetLearnedSkill()=='AHfa'and IsUnitIllusion(GetTriggerUnit())==falseendfunctionfunction Rr takes nothing returns nothingif(UnitHasBuffBJ(GetTriggerUnit(),'BOwk'))thencall UnitRemoveAbility(GetTriggerUnit(),'BOwk')endifcall DisableTrigger(C2)endfunctionfunction h4 takes nothing returns nothingset C2=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(C2,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(C2,Condition(function RQ))call TriggerAddAction(C2,function Rr)endfunctionfunction RR takes nothing returns booleanreturn(GetLearnedSkill()=='A0OG')and(IsUnitIllusion(GetTriggerUnit())==false)endfunctionfunction Rs takes nothing returns booleanreturn GetUnitAbilityLevel(GetTriggerUnit(),'B06X')>0 and(fa(GetSpellAbilityId())or GetSpellAbilityId()=='A0OI')endfunctionfunction RS takes nothing returns nothinglocal string f8=e4(GetTriggeringTrigger())local unit fP=GetTriggerUnit()local unit Rt=EC(f8,"Destroyer")local integer MU=GetUnitAbilityLevel(Rt,'A0OG')if GetRandomInt(1,'d')<=MU*10 and Fc(fP,Rt,1400)thencall SetUnitState(fP,UNIT_STATE_MANA,GetUnitState(fP,UNIT_STATE_MANA)+.25*GetUnitState(fP,UNIT_STATE_MAX_MANA))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishMana\\ReplenishManaCasterOverhead.mdl",fP,"overhead"))endifendfunctionfunction RT takes nothing returns nothinglocal unit fP=GetTriggerUnit()local integer MU=GetUnitAbilityLevel(fP,'A0OG')local trigger tif(MU==1)thenset t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function Rs))call TriggerAddAction(t,function RS)call e7(e4(t),"Destroyer",fP)endifif(MU==1)thencall UnitAddAbility(fP,'A0OL')elseif(MU==2)thencall UnitAddAbility(fP,'A0OM')elseif(MU==3)thencall UnitAddAbility(fP,'A0ON')elseif(MU==4)thencall UnitAddAbility(fP,'A0OH')endifendfunctionfunction Hd takes nothing returns nothingset C3=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(C3,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(C3,Condition(function RR))call TriggerAddAction(C3,function RT)endfunctionfunction Ru takes nothing returns booleanreturn GetLearnedSkill()=='A0OI'endfunctionfunction RU takes nothing returns nothinglocal texttag glocal real dlocal effect fxlocal unit fPlocal unit Fd=GetTriggerUnit()if UnitHasBuffBJ(Fd,'B06Y') and GetUnitAbilityLevel(GetEventDamageSource(),'A0OI')>0 and EC(e4(GetTriggeringTrigger()),"Source")==GetEventDamageSource()thencall DisableTrigger(GetTriggeringTrigger())set fP=GetEventDamageSource()set d=.01*(5+GetUnitAbilityLevel(fP,'A0OI'))*(GetUnitState(fP,UNIT_STATE_MANA)+'d')if(IsUnitType(Fd,UNIT_TYPE_SUMMONED) or IsUnitIllusion(Fd))and GetUnitTypeId(Fd)!='n004'and GetUnitTypeId(Fd)!='n018'and GetUnitTypeId(Fd)!='n01C'and GetUnitTypeId(Fd)!='n01G'thenset d=d+'d'*GetUnitAbilityLevel(fP,'A0OI')endifset g=CreateTextTagUnitBJ("+"+I2S(R2I(d)),Fd,64,10,75,25,'d',15)call SetTextTagVelocityBJ(g,64,90)call UnitDamageTargetBJ(fP,Fd,d,ATTACK_TYPE_HERO,DAMAGE_TYPE_MAGIC)if((GetRandomInt(1,'d')<=GetUnitAbilityLevel(fP,'A0OG')*5)and(EI(e4(GetTriggeringTrigger()),"DoneViaSpell")==false))thencall SetUnitState(fP,UNIT_STATE_MANA,GetUnitState(fP,UNIT_STATE_MANA)+.25*GetUnitState(fP,UNIT_STATE_MAX_MANA))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishMana\\ReplenishManaCasterOverhead.mdl",fP,"overhead"))endifcall PolledWait(1)call DestroyTextTag(g)call DisableTrigger(GetTriggeringTrigger())endifendfunctionfunction Rv takes nothing returns booleanif GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED thenif GetUnitAbilityLevel(GetAttacker(),'A0OI')==0 thenreturn falseelseif EI(e4(GetTriggeringTrigger()),"OrbOn")thenif IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetAttacker()==EC(e4(GetTriggeringTrigger()),"Destroyer")thenreturn trueendifelsereturn falseendifelseif GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER thenif GetIssuedOrderId()==852255thencall Ec(e4(GetTriggeringTrigger()),"OrbOn",true)elseif GetIssuedOrderId()==852256thencall Ec(e4(GetTriggeringTrigger()),"OrbOn",false)endifelseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT thenif GetSpellAbilityId()=='A0OI'thenreturn trueelsereturn falseendifendifreturn falseendfunctionfunction Rw takes nothing returns nothinglocal trigger t=CreateTrigger()local unit Fdlocal unit FCif(GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT)thenset Fd=GetSpellTargetUnit()set FC=GetTriggerUnit()call Ec(e4(t),"DoneViaSpell",true)elseset Fd=GetTriggerUnit()set FC=GetAttacker()call Ec(e4(t),"DoneViaSpell",false)endifif IsUnitIllusion(FC)==false thencall e7(e4(t),"Source",FC)call TriggerRegisterUnitEvent(t,Fd,EVENT_UNIT_DAMAGED)call TriggerAddAction(t,function RU)endifcall PolledWait(2)call DisableTrigger(t)endfunctionfunction RW takes nothing returns nothinglocal unit fP=GetTriggerUnit()local integer MU=GetUnitAbilityLevel(fP,'A0OI')local trigger tif(MU==1)thenset t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerRegisterUnitEvent(t,GetLearningUnit(),EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(t,GetLearningUnit(),EVENT_UNIT_ISSUED_ORDER)call TriggerAddCondition(t,Condition(function Rv))call TriggerAddAction(t,function Rw)call e7(e4(t),"Destroyer",fP)endifendfunctionfunction HD takes nothing returns nothingset C4=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(C4,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(C4,Condition(function Ru))call TriggerAddAction(C4,function RW)endfunctionfunction Rx takes nothing returns booleanreturn GetSpellAbilityId()=='A0OJ'endfunctionfunction RX takes nothing returns nothinglocal unit Fd=Ailocal integer Ry=Ajloopif GetUnitState(Fd,UNIT_STATE_LIFE)>1 thencall SetHeroInt(Fd,GetHeroInt(Fd,false)+Ry,true)exitwhen trueelsecall PolledWait(5)endifendloopendfunctionfunction RY takes nothing returns nothinglocal unit fP=Ailocal integer Ry=Ajloopif GetUnitState(fP,UNIT_STATE_LIFE)>1 thencall SetHeroInt(fP,GetHeroInt(fP,false)-Ry,true)exitwhen trueelsecall PolledWait(5)endifendloopendfunctionfunction Rz takes nothing returns nothinglocal unit fP=GetTriggerUnit()local unit Fd=GetSpellTargetUnit()local integer MU=GetUnitAbilityLevel(fP,'A0OJ')local integer Ry=f1(GetHeroInt(Fd,false),MU*2)local integer ER=1local effect fx=AddSpecialEffect("Abilities\\Spells\\Demon\\DarkConversion\\ZombifyTarget.mdl",GetUnitX(Fd),GetUnitY(Fd))if(IsUnitEnemy(Fd,GetOwningPlayer(fP)))thencall SetHeroInt(Fd,GetHeroInt(Fd,false)-Ry,true)endifcall SelectUnitRemoveForPlayer(Fd,GetOwningPlayer(Fd))call SetUnitInvulnerable(Fd,true)call PauseUnit(Fd,true)call ShowUnit(Fd,false)if(GetHeroInt(Fd,false)<MU*2)thencall SetHeroInt(fP,GetHeroInt(fP,false)+Ry,true)call PolledWait(MU)elseloopexitwhen ER>MUif(IsUnitEnemy(Fd,GetOwningPlayer(fP)))thencall SetHeroInt(fP,GetHeroInt(fP,false)+(Ry/MU),true)endifset ER=ER+1call PolledWait(.85)endloopendifcall DestroyEffect(fx)call SetUnitInvulnerable(Fd,false)call PauseUnit(Fd,false)call ShowUnit(Fd,true)call ClearSelectionForPlayer(GetOwningPlayer(Fd))call SelectUnitAddForPlayer(Fd,GetOwningPlayer(Fd))if(IsUnitEnemy(Fd,GetOwningPlayer(fP)))thencall PolledWait(60)if GetUnitState(Fd,UNIT_STATE_LIFE)>1 thencall SetHeroInt(Fd,GetHeroInt(Fd,false)+Ry,true)elseset Ai=Fdset Aj=Rycall ExecuteFunc("RX")endifif GetUnitState(fP,UNIT_STATE_LIFE)>1 thencall SetHeroInt(fP,GetHeroInt(fP,false)-Ry,true)elseset Ai=fPset Aj=Rycall ExecuteFunc("RY")endifendifendfunctionfunction RZ takes nothing returns nothingif GetSpellAbilityId()=='A0OJ'and IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))and EI(e4(GetOwningPlayer(GetSpellTargetUnit())),"L6")and GetSpellTargetUnit()!=GetTriggerUnit()thencall fp(GetTriggerUnit())call fI(GetOwningPlayer(GetTriggerUnit()),"This target has disablehelp on")endifendfunctionfunction He takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function Rx))call TriggerAddAction(t,function Rz)set t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddAction(t,function RZ)endfunctionfunction R0 takes nothing returns booleanreturn GetSpellAbilityId()=='A0OK'endfunctionfunction R1 takes nothing returns nothinglocal unit Fd=GetEnumUnit()local unit Rt=GetTriggerUnit()local integer R2=GetHeroInt(Rt,true)-GetHeroInt(Fd,true)local integer array R3local integer R4=8+2*GetUnitAbilityLevel(Rt,'A0OK')set R3[1]=10set R3[2]=30set R3[3]=50if(R2>0)thencall UnitDamageTarget(Rt,Fd,R2*R4,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)if(R2<R3[GetUnitAbilityLevel(Rt,'A0OK')])thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Feedback\\SpellBreakerAttack.mdl",Fd,"overhead"))call SetUnitState(Fd,UNIT_STATE_MANA,GetUnitState(Fd,UNIT_STATE_MANA)*.25)endifendifendfunctionfunction R5 takes nothing returns booleanif(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))thenif(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))thenreturn trueendifendifreturn falseendfunctionfunction R6 takes nothing returns nothinglocal unit fP=GetTriggerUnit()local integer MU=GetUnitAbilityLevel(fP,'A0OK')local real x=GetLocationX(GetSpellTargetLoc())local real y=GetLocationY(GetSpellTargetLoc())local boolexpr R7=Condition(function R5)local group EX=CreateGroup()local integer R8=0call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosTarget.mdl",x,y))loopexitwhen R8>=360call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosTarget.mdl",x+(200+MU*50)*Cos(R8*bj_DEGTORAD),y+(200+MU*50)*Sin(R8*bj_DEGTORAD)))set R8=R8+45endloopcall GroupEnumUnitsInRange(EX,x,y,300+MU*'d',R7)call ForGroup(EX,function R1)call PolledWait(1)call DestroyGroup(EX)call DestroyBoolExpr(R7)endfunctionfunction HE takes nothing returns nothingset C5=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(C5,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(C5,Condition(function R0))call TriggerAddAction(C5,function R6)endfunctionfunction R9 takes nothing returns booleanreturn GetSpellAbilityId()=='A0LK'endfunctionfunction sa takes nothing returns nothinglocal timer t=GetExpiredTimer()local string f8=e4(t)local unit fP=EC(f8,"TimeWalkUnit")local real pX=GetUnitX(fP)local real py=GetUnitY(fP)local real EW=Ei(f8,"TimeWalkTargetX")local real Ex=Ei(f8,"TimeWalkTargetY")local real FD=Ei(f8,"TimeWalkDistance")local real nr=Ei(f8,"Angle")local real sA=Ei(f8,"TimeWalkElapsed")call SetUnitPosition(fP,pX+FD/40*Cos(nr),py+FD/40*Sin(nr))call Eb(f8,"TimeWalkElapsed",sA+.01)if((pX-EW)*(pX-EW)+(py-Ex)*(py-Ex)<25 or sA>.6)thenset bj_lastCreatedUnit=CreateUnit(GetOwningPlayer(fP),'e00E',GetUnitX(fP),GetUnitY(fP),270)call UnitAddAbility(bj_lastCreatedUnit,'A0LA')call SetUnitAbilityLevel(bj_lastCreatedUnit,'A0LA',GetUnitAbilityLevel(fP,'A0LK'))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)call SetUnitPathing(bj_lastCreatedUnit,false)call SetUnitInvulnerable(bj_lastCreatedUnit,true)call IssueImmediateOrderById(bj_lastCreatedUnit,852096)call SetUnitPathing(fP,true)call SetUnitAnimation(fP,"stand")call SetUnitInvulnerable(fP,false)call SetUnitVertexColorBJ(fP,0,255,150,.0)call ClearSelectionForPlayer(GetOwningPlayer(fP))call SelectUnitAddForPlayer(fP,GetOwningPlayer(fP))call PauseTimer(t)endifendfunctionfunction sb takes nothing returns nothinglocal unit fP=GetTriggerUnit()local location NAlocal location sB=GetUnitLoc(fP)local timer t=CreateTimer()local string f8=e4(t)if GetSpellTargetUnit()==null thenset NA=GetSpellTargetLoc()elseset NA=GetUnitLoc(GetSpellTargetUnit())endifif((fP!=null)and(NA!=null)and(sB!=null))thencall SetUnitAnimationByIndex(fP,0)call SetUnitPathing(fP,false)call SetUnitInvulnerable(fP,true)call SetUnitVertexColorBJ(fP,0,0,0,25.)call Eb(f8,"TimeWalkDistance",DistanceBetweenPoints(sB,NA))call e7(f8,"TimeWalkUnit",fP)call Eb(f8,"TimeWalkTargetX",GetLocationX(NA))call Eb(f8,"TimeWalkTargetY",GetLocationY(NA))call Eb(f8,"TimeWalkElapsed",0)call Eb(f8,"Angle",AngleBetweenPoints(sB,NA)*bj_DEGTORAD)call TimerStart(t,.01,true,function sa)endifcall PolledWait(2.)call PauseTimer(t)call SetUnitPathing(fP,true)call ResetUnitAnimation(fP)call SetUnitInvulnerable(fP,false)call SetUnitVertexColorBJ(fP,0,255,150,.0)call ClearSelectionForPlayer(GetOwningPlayer(fP))call SelectUnitAddForPlayer(fP,GetOwningPlayer(fP))call PolledWait(1)call e5(f8)call DestroyTimer(t)call RemoveLocation(NA)call RemoveLocation(sB)endfunctionfunction hg takes nothing returns nothingset C6=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(C6,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(C6,Condition(function R9))call TriggerAddAction(C6,function sb)endfunctionfunction sc takes nothing returns booleanreturn GetLearnedSkill()=='A0CZ'and IsUnitIllusion(GetTriggerUnit())==falseendfunctionfunction sC takes nothing returns nothinglocal unit fP=GetTriggerUnit()local real Fa=GetEventDamage()if(Fa>0)thenif(GetRandomInt(1,'d')<=(5+(5*GetUnitAbilityLevel(fP,'A0CZ'))))thencall SetUnitState(fP,UNIT_STATE_LIFE,GetUnitState(fP,UNIT_STATE_LIFE)+Fa)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\WingedSerpentMissile\\WingedSerpentMissile.mdl",fP,"hand,left"))endifendifendfunctionfunction sd takes nothing returns nothinglocal trigger tif GetUnitAbilityLevel(GetTriggerUnit(),'A0CZ')==1 thenset t=CreateTrigger()call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_DAMAGED)call TriggerAddAction(t,function sC)endifendfunctionfunction hG takes nothing returns nothingset C7=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(C7,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(C7,Condition(function sc))call TriggerAddAction(C7,function sd)endfunctionfunction sD takes nothing returns booleanreturn GetSpellAbilityId()=='A0J1'endfunctionfunction se takes nothing returns nothinglocal timer t=GetExpiredTimer()local string f8=e4(t)local unit sE=EC(f8,"Caster")call SetUnitTimeScale(sE,0)call PauseTimer(t)call e5(f8)call DestroyTimer(t)endfunctionfunction sf takes unit Ew returns booleanlocal integer ID=GetUnitTypeId(Ew)return ID=='osp4'or ID=='o008'or ID=='o009'or ID=='umtw'or ID=='ebal'endfunctionfunction sF takes nothing returns booleanreturn GetOwningPlayer(GetFilterUnit())!=GetOwningPlayer(Ai)and(GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0 or sf(GetFilterUnit()))endfunctionfunction sg takes nothing returns nothingcall PauseUnit(GetEnumUnit(),true)call SetUnitTimeScale(GetEnumUnit(),0)call UnitRemoveAbility(GetEnumUnit(),'BUsl')call UnitRemoveAbility(GetEnumUnit(),'BUsp')call UnitRemoveAbility(GetEnumUnit(),'BUst')endfunctionfunction sG takes nothing returns nothingcall PauseUnit(GetEnumUnit(),false)call SetUnitTimeScale(GetEnumUnit(),1)endfunctionfunction sh takes nothing returns nothinglocal timer t=GetExpiredTimer()local string f8=e4(t)local unit sE=EC(f8,"Caster")local unit fw=EC(f8,"Hero")local integer m8=GetUnitAbilityLevel(fw,'A0J1')local group sH=EE(f8,"Group")local integer Mf=EH(f8,"Counter")local real EW=GetUnitX(sE)local real Ex=GetUnitY(sE)local boolexpr Ey=Condition(function sF)local group si=CreateGroup()call ForGroup(sH,function sG)set Ai=fwcall GroupEnumUnitsInRange(si,EW,Ex,425,Ey)call GroupClear(sH)call GroupAddGroup(si,sH)call ForGroup(si,function sg)call DestroyGroup(si)call DestroyBoolExpr(Ey)set Mf=Mf+1call Ea(f8,"Counter",Mf)if Mf>15+m8*15 thenif A5==false thencall ForGroup(sH,function sG)endifcall RemoveUnit(sE)call DestroyGroup(sH)call PauseTimer(t)call e5(f8)call DestroyTimer(t)endifendfunctionfunction sI takes nothing returns nothinglocal unit fw=GetTriggerUnit()local integer m8=GetUnitAbilityLevel(fw,'A0J1')local location Fd=GetSpellTargetLoc()local real EW=GetLocationX(Fd)local real Ex=GetLocationY(Fd)local unit sE=CreateUnit(GetOwningPlayer(fw),'u00L',EW,Ex,0)local timer t=CreateTimer()local string f8=e4(t)local group sH=CreateGroup()call e7(e4(t),"Caster",sE)call TimerStart(t,.8,false,function se)set t=CreateTimer()set f8=e4(t)call e7(f8,"Caster",sE)call e7(f8,"Hero",fw)call e7(f8,"Group",sH)call Ea(f8,"Counter",0)call TimerStart(t,.1,true,function sh)call RemoveLocation(Fd)endfunctionfunction hh takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function sD))call TriggerAddAction(t,function sI)endfunctionfunction sj takes unit Ew returns booleanreturn(GetUnitTypeId(Ew)=='H00I'or GetUnitTypeId(Ew)=='H00J')and GetUnitState(Ew,UNIT_STATE_LIFE)>.5 and GetOwningPlayer(Ew)==GetOwningPlayer(GetTriggerUnit())endfunctionfunction sJ takes nothing returns booleanreturn GetSpellAbilityId()=='A0N8'endfunctionfunction sk takes nothing returns booleanreturn sj(GetFilterUnit())endfunctionfunction sK takes nothing returns nothinglocal unit my=GetEnumUnit()local real sl=FF(my,bG)if sl<AJ thenset AJ=slset Ai=myendifendfunctionfunction sL takes nothing returns booleanreturn IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0endfunctionfunction sm takes nothing returns nothingcall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Feedback\\ArcaneTowerAttack.mdl",GetEnumUnit(),"origin"))call UnitDamageTarget(GetTriggerUnit(),GetEnumUnit(),AJ,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_FIRE,WEAPON_TYPE_WHOKNOWS)endfunctionfunction sM takes nothing returns nothinglocal unit FC=GetTriggerUnit()local unit Fd=GetSpellTargetUnit()local location NAlocal real xlocal real ylocal real Fe=GetUnitX(FC)local real FE=GetUnitY(FC)local group EXlocal boolexpr Eylocal boolean sn=falseif Fd!=null and sj(Fd)thenset x=GetUnitX(Fd)set y=GetUnitY(Fd)set sn=trueelseif Fd==null thenset Ey=Condition(function sk)set EX=CreateGroup()call GroupEnumUnitsInRange(EX,0,0,999999,Ey)set NA=GetSpellTargetLoc()set Ai=FirstOfGroup(EX)if Ai!=null thenset sn=truecall GroupRemoveUnit(EX,Ai)set AJ=FF(Ai,NA)set bG=NAcall ForGroup(EX,function sK)set Fd=Aiset x=GetUnitX(Fd)set y=GetUnitY(Fd)endifcall DestroyGroup(EX)call DestroyBoolExpr(Ey)call RemoveLocation(NA)endifif sn thencall DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Other\\ToonBoom\\ToonBoom.mdl",Fe,FE))call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Other\\ToonBoom\\ToonBoom.mdl",x,y))call SetUnitX(FC,x)call SetUnitY(FC,y)set AJ=GetUnitAbilityLevel(GetTriggerUnit(),'A0N8')*40set Ey=Condition(function sL)set EX=CreateGroup()call GroupEnumUnitsInRange(EX,Fe,FE,400,Ey)call ForGroup(EX,function sm)call DestroyGroup(EX)set EX=CreateGroup()call GroupEnumUnitsInRange(EX,x,y,400,Ey)call ForGroup(EX,function sm)call DestroyGroup(EX)call DestroyBoolExpr(Ey)endifendfunctionfunction sN takes nothing returns booleanreturn GetSpellAbilityId()=='A0N8'endfunctionfunction so takes nothing returns nothingcall SetUnitAnimationByIndex(EC(e4(GetExpiredTimer()),"UnitVar"),2)endfunctionfunction sO takes nothing returns nothinglocal timer t=CreateTimer()call SetUnitAnimationByIndex(GetTriggerUnit(),2)call e7(e4(t),"UnitVar",GetTriggerUnit())call TimerStart(t,1.334,false,function so)endfunctionfunction HK takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_CHANNEL)call TriggerAddCondition(t,Condition(function sN))call TriggerAddAction(t,function sO)set t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function sJ))call TriggerAddAction(t,function sM)endfunctionfunction sp takes nothing returns booleanreturn GetSpellAbilityId()=='A0NB'endfunctionfunction sP takes nothing returns booleanreturn IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(Ai))and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(Ai)) and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>.5 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0 and GetUnitTypeId(GetFilterUnit())!='n00L'endfunctionfunction sq takes nothing returns nothinglocal unit Jz=CreateUnit(GetOwningPlayer(Ai),'e00E',AJ,bh,0)call UnitAddAbility(Jz,'A0NC')call IssueTargetOrderById(Jz,852106,GetEnumUnit())endfunctionfunction sQ takes unit pg,real x,real y returns nothinglocal boolexpr Ey=Condition(function sP)local group EX=CreateGroup()set Ai=pgcall GroupEnumUnitsInRange(EX,x,y,245,Ey)set AJ=xset bh=ycall ForGroup(EX,function sq)call DestroyGroup(EX)call DestroyBoolExpr(Ey)endfunctionfunction sr takes nothing returns nothinglocal timer t=GetExpiredTimer()local string f8=e4(t)local unit pg=EC(f8,"Projectile")local real EW=Ei(f8,"TargetX")local real Ex=Ei(f8,"TargetY")local real nr=Ei(f8,"Angle")local real Fe=GetUnitX(pg)local real FE=GetUnitY(pg)local real pG=GetUnitX(pg)+30*Cos(nr)local real ph=GetUnitY(pg)+30*Sin(nr)if(pG-EW)*(pG-EW)+(ph-Ex)*(ph-Ex)<1200 thencall SetUnitX(pg,EW)call SetUnitY(pg,Ex)call sQ(pg,EW,Ex)call PauseTimer(t)call e5(f8)call KillUnit(pg)call DestroyTimer(t)elsecall SetUnitX(pg,pG)call SetUnitY(pg,ph)endifendfunctionfunction sR takes nothing returns nothinglocal unit fw=GetTriggerUnit()local location NA=GetSpellTargetLoc()local real EW=fs(GetLocationX(NA))local real Ex=ft(GetLocationY(NA))local real Fe=fs(GetUnitX(fw))local real FE=ft(GetUnitY(fw))local unit pg=CreateUnit(GetOwningPlayer(fw),'h00C',Fe,FE,0)local real nr=Atan2(Ex-FE,EW-Fe)local timer t=CreateTimer()local string f8=e4(t)call SetUnitScale(pg,2,2,2)call e7(f8,"Projectile",pg)call Eb(f8,"TargetX",EW)call Eb(f8,"TargetY",Ex)call Eb(f8,"Angle",nr)call TimerStart(t,.035,true,function sr)call RemoveLocation(NA)endfunctionfunction Hl takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddAction(t,function sR)call TriggerAddCondition(t,Condition(function sp))endfunctionfunction ss takes unit Ew returns booleanreturn GetUnitTypeId(Ew)=='H00I'or GetUnitTypeId(Ew)=='H00J'endfunctionfunction DoubleTrouble_IsKoboldCondition takes nothing returns booleanreturn GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(Ai)and GetFilterUnit()!=Ai and(GetUnitTypeId(GetFilterUnit())=='H00I'or GetUnitTypeId(GetFilterUnit())=='H00J')endfunctionfunction sS takes nothing returns booleanreturn IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) and IsUnitAlly(GetFilterUnit(),GetOwningPlayer(Ai)) and ss(GetFilterUnit())==falseendfunctionfunction st takes nothing returns nothingcall AddHeroXP(GetEnumUnit(),Aj,true)endfunctionfunction sT takes nothing returns nothinglocal string su=e4(GetTriggeringTrigger())local player EL=Ed(su,"PlayerVar")local string sU=e4(EL)local unit gi=EC(sU,"Kobold0")local unit gI=EC(sU,"Kobold1")local unit gj=EC(sU,"Kobold2")local unit gJ=EC(sU,"Kobold3")local string sv=e4(gi)local string sV=e4(gI)local string sw=e4(gj)local string sW=e4(gJ)local integer sx=EH(sv,"XPEarned")local integer sX=EH(sv,"XPGiven")local integer sy=EH(sV,"XPEarned")local integer sY=EH(sV,"XPGiven")local integer sz=EH(sw,"XPEarned")local integer sZ=EH(sw,"XPGiven")local integer s0=EH(sW,"XPEarned")local integer s1=EH(sW,"XPGiven")local integer s2=GetHeroXP(gi)local integer s3=GetHeroXP(gI)local integer s4=GetHeroXP(gj)local integer s5=GetHeroXP(gJ)local integer s6=s2-sx-sXlocal integer s7=s3-sy-sYlocal integer s8=s4-sz-sZlocal integer s9=s5-s0-s1set sx=sx+s6set sy=sy+s7set sz=sz+s8set s0=s0+s9if gi!=null thencall AddHeroXP(gI,s6,false)if GetHeroXP(gI)!=s3 thenset sY=sY+s6endifcall AddHeroXP(gj,s6,false)if GetHeroXP(gj)!=s4 thenset sZ=sZ+s6endifcall AddHeroXP(gJ,s6,false)if GetHeroXP(gJ)!=s5 thenset s1=s1+s6endifendifif gI!=null thencall AddHeroXP(gi,s7,false)if GetHeroXP(gi)!=s2 thenset sX=sX+s7endifcall AddHeroXP(gj,s7,false)if GetHeroXP(gj)!=s4 thenset sZ=sZ+s7endifcall AddHeroXP(gJ,s7,false)if GetHeroXP(gJ)!=s5 thenset s1=s1+s7endifendifif gj!=null thencall AddHeroXP(gI,s8,false)if GetHeroXP(gI)!=s3 thenset sY=sY+s8endifcall AddHeroXP(gi,s8,false)if GetHeroXP(gi)!=s2 thenset sX=sX+s8endifcall AddHeroXP(gJ,s8,false)if GetHeroXP(gJ)!=s5 thenset s1=s1+s8endifendifif gJ!=null thencall AddHeroXP(gI,s9,false)if GetHeroXP(gI)!=s3 thenset sY=sY+s9endifcall AddHeroXP(gj,s9,false)if GetHeroXP(gj)!=s4 thenset sZ=sZ+s9endifcall AddHeroXP(gi,s9,false)if GetHeroXP(gi)!=s2 thenset sX=sX+s9endifendifcall Ea(sv,"XPEarned",sx)call Ea(sv,"XPGiven",sX)call Ea(sV,"XPEarned",sy)call Ea(sV,"XPGiven",sY)call Ea(sw,"XPEarned",sz)call Ea(sw,"XPGiven",sZ)call Ea(sW,"XPEarned",s0)call Ea(sW,"XPGiven",s1)endfunctionfunction Sa takes nothing returns booleanreturn ss(GetTriggerUnit())and IsUnitIllusion(GetTriggerUnit())==falseendfunctionfunction SA takes nothing returns nothinglocal unit gG=GetTriggerUnit()local string f8=e4(GetOwningPlayer(gG))local unit gi=EC(f8,"Kobold0")local unit gI=EC(f8,"Kobold1")local unit gj=EC(f8,"Kobold2")local unit gJ=EC(f8,"Kobold3")local boolean iC=falsecall DisableTrigger(Bq)if gi!=null and gi!=gG thencall KillUnit(gi)endifif gI!=null and gI!=gG thencall KillUnit(gI)endifif gj!=null and gj!=gG thencall KillUnit(gj)endifif gJ!=null and gJ!=gG thencall KillUnit(gJ)endifcall EnableTrigger(Bq)endfunctionfunction Sb takes nothing returns booleanreturn ss(GetTriggerUnit())and IsUnitIllusion(GetTriggerUnit())==falseendfunctionfunction SB takes unit ly,unit fw returns nothinglocal trigger t=Ee(e4(GetOwningPlayer(fw)),"Kobold|ItemTrigger")local integer i=0local boolean F7=falselocal boolean F8=falselocal boolean F9=falsecall DisableTrigger(t)loopexitwhen i>5if GetItemTypeId(UnitItemInSlot(fw,i))=='tgxp'thenset F7=trueendifif GetItemTypeId(UnitItemInSlot(fw,i))=='hlst'thenset F8=trueendifif GetItemTypeId(UnitItemInSlot(fw,i))=='tlum'thenset F9=trueendifset i=i+1endloopif F9 thencall UnitAddItem(ly,CreateItem('tlum',0,0))elseif F8 thencall UnitAddItem(ly,CreateItem('hlst',0,0))elseif F7 thencall UnitAddItem(ly,CreateItem('tgxp',0,0))endifcall EnableTrigger(t)endfunctionfunction Sc takes nothing returns nothinglocal unit gk=GetTriggerUnit()local integer i=0local boolean F7=falselocal boolean F8=falselocal boolean F9=falselocal string sU=e4(GetOwningPlayer(gk))local unit gi=EC(sU,"Kobold0")local unit gI=EC(sU,"Kobold1")local unit gj=EC(sU,"Kobold2")local unit gJ=EC(sU,"Kobold3")local integer kIlocal boolean Sd=falselocal integer SD=0local integer Se=0local integer SE=0call DisableTrigger(GetTriggeringTrigger())if GetUnitTypeId(gk)=='H00J'thencall UnitRemoveItemFromSlot(gk,0)call EnableTrigger(GetTriggeringTrigger())returnendifif not(GetItemTypeId(GetManipulatedItem())=='tgxp'or GetItemTypeId(GetManipulatedItem())=='hlst'or GetItemTypeId(GetManipulatedItem())=='tlum')thencall EnableTrigger(GetTriggeringTrigger())returnendifif GetTriggerEventId()==EVENT_PLAYER_UNIT_DROP_ITEM thenset Sd=trueendifloopexitwhen i>5set kI=GetItemTypeId(UnitItemInSlot(gk,i))if kI=='tgxp'thenset SD=SD+1if(not(Sd and kI==GetItemTypeId(GetManipulatedItem())))or(SD>1 and kI==GetItemTypeId(GetManipulatedItem()))thenset F7=trueendifendifif kI=='hlst'thenset Se=Se+1if(not(Sd and kI==GetItemTypeId(GetManipulatedItem())))or(Se>1 and kI==GetItemTypeId(GetManipulatedItem()))thenset F8=trueendifendifif kI=='tlum'thenset SE=SE+1if(not(Sd and kI==GetItemTypeId(GetManipulatedItem())))or(SE>1 and kI==GetItemTypeId(GetManipulatedItem()))thenset F9=trueendifendifset i=i+1endloopcall RemoveItem(UnitRemoveItemFromSlot(gI,0))if gj!=null thencall RemoveItem(UnitRemoveItemFromSlot(gj,0))endifif gj!=null thencall RemoveItem(UnitRemoveItemFromSlot(gJ,0))endifif F9 thencall UnitAddItem(gI,CreateItem('tlum',0,0))if gj!=null thencall UnitAddItem(gj,CreateItem('tlum',0,0))endifif gJ!=null thencall UnitAddItem(gJ,CreateItem('tlum',0,0))endifelseif F8 thencall UnitAddItem(gI,CreateItem('hlst',0,0))if gj!=null thencall UnitAddItem(gj,CreateItem('hlst',0,0))endifif gJ!=null thencall UnitAddItem(gJ,CreateItem('hlst',0,0))endifelseif F7 thencall UnitAddItem(gI,CreateItem('tgxp',0,0))if gj!=null thencall UnitAddItem(gj,CreateItem('tgxp',0,0))endifif gJ!=null thencall UnitAddItem(gJ,CreateItem('tgxp',0,0))endifendifcall EnableTrigger(GetTriggeringTrigger())endfunctionfunction Sf takes nothing returns nothinglocal trigger tset t=CreateTrigger()call TriggerRegisterTimerEvent(t,.1,true)call TriggerAddAction(t,function sT)call e7(e4(t),"PlayerVar",GetOwningPlayer(GetTriggerUnit()))call e7(e4(GetOwningPlayer(GetTriggerUnit())),"Kobold|XPTrigger",t)set t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_DEATH)call TriggerAddAction(t,function SA)call TriggerAddCondition(t,Condition(function Sa))set t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_DROP_ITEM)call TriggerAddAction(t,function Sc)call TriggerAddCondition(t,Condition(function Sb))call e7(e4(GetOwningPlayer(GetTriggerUnit())),"Kobold|ItemTrigger",t)call ExecuteFunc("SF")endfunctionfunction Sg takes unit SG,integer Sh returns nothinglocal string sU=e4(GetOwningPlayer(SG))local unit gi=EC(sU,"Kobold0")local unit gI=EC(sU,"Kobold1")local unit gj=EC(sU,"Kobold2")local unit gJ=EC(sU,"Kobold3")if gi!=null and gi!=SG thencall SelectHeroSkill(gi,Sh)endifif gI!=null and gI!=SG thencall SelectHeroSkill(gI,Sh)endifif gj!=null and gj!=SG thencall SelectHeroSkill(gj,Sh)endifif gJ!=null and gJ!=SG thencall SelectHeroSkill(gJ,Sh)endifendfunctionfunction Si takes integer mw,unit mW,unit mx returns nothinglocal integer ER=1local integer Es=GetUnitAbilityLevel(mW,mw)loopexitwhen ER>Escall SelectHeroSkill(mx,mw)set ER=ER+1endloopendfunctionfunction SI takes unit ly,unit Sj returns nothingcall AddHeroXP(ly,GetHeroXP(Sj),false)call Ea(e4(ly),"XPGiven",GetHeroXP(Sj))call Ea(e4(ly),"XPEarned",0)call Si('A0N8',Sj,ly)call Si('A0NB',Sj,ly)call Si('A0N7',Sj,ly)call Si('Aamk',Sj,ly)call Si('A0MW',Sj,ly)endfunctionfunction SJ takes nothing returns nothinglocal unit fw=GetTriggerUnit()local player EL=GetOwningPlayer(fw)local string f8=e4(EL)local unit lycall Sg(fw,'A0MW')set ly=CreateUnit(GetOwningPlayer(fw),'H00J',GetUnitX(fw),GetUnitY(fw),0)call SI(ly,fw)call SB(ly,fw)call e7(f8,"Kobold"+I2S(GetUnitAbilityLevel(fw,'A0MW')),ly)endfunctionfunction Sk takes unit gI,unit gj,integer Sh,integer SD,integer Se returns nothingif SD>Se thencall SelectHeroSkill(gj,Sh)elseif Se>SD thencall SelectHeroSkill(gI,Sh)endifendfunctionfunction SK takes unit gI,unit gj returns nothinglocal integer s3=GetHeroXP(gI)local integer s4=GetHeroXP(gj)local string sV=e4(gI)local string sw=e4(gj)local integer sY=EH(sV,"XPGiven")local integer sZ=EH(sw,"XPGiven")local integer OAif s3>s4 thenset OA=s3-s4call AddHeroXP(gj,OA,true)if s4!=GetHeroXP(gj)thencall Ea(sw,"XPGiven",sZ+OA)endifelseif s3<s4 thenset OA=s4-s3call AddHeroXP(gI,OA,true)if s3!=GetHeroXP(gI)thencall Ea(sV,"XPGiven",sY+OA)endifendifendfunctionfunction Sl takes unit gI,unit gj returns nothinglocal integer SL=GetUnitAbilityLevel(gI,'A0N8')local integer Sm=GetUnitAbilityLevel(gI,'A0NB')local integer SM=GetUnitAbilityLevel(gI,'A0N7')local integer Sn=GetUnitAbilityLevel(gI,'A0MW')local integer SN=GetUnitAbilityLevel(gI,'Aamk')local integer So=GetUnitAbilityLevel(gj,'A0N8')local integer SO=GetUnitAbilityLevel(gj,'A0NB')local integer Sp=GetUnitAbilityLevel(gj,'A0N7')local integer Sq=GetUnitAbilityLevel(gj,'A0MW')local integer SQ=GetUnitAbilityLevel(gj,'Aamk')call SK(gI,gj)call Sk(gI,gj,'A0N8',SL,So)call Sk(gI,gj,'A0NB',Sm,SO)call Sk(gI,gj,'A0N7',SM,Sp)call Sk(gI,gj,'A0MW',Sn,Sq)call Sk(gI,gj,'Aamk',SN,SQ)endfunctionfunction Sr takes unit gI,unit gj returns nothingif gI!=null and gj!=null thencall Sl(gI,gj)endifendfunctionfunction SR takes nothing returns nothinglocal string sU=e4(Ed(e4(GetTriggeringTrigger()),"PlayerVar"))local unit gi=EC(sU,"Kobold0")local unit gI=EC(sU,"Kobold1")local unit gj=EC(sU,"Kobold2")local unit gJ=EC(sU,"Kobold3")call DisableTrigger(e1)call Sr(gi,gI)call Sr(gi,gj)call Sr(gi,gJ)call Sr(gI,gj)call Sr(gI,gJ)call Sr(gj,gJ)call EnableTrigger(e1)endfunctionfunction SF takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterTimerEvent(t,.2,true)call TriggerAddAction(t,function SR)call e7(e4(t),"PlayerVar",GetOwningPlayer(GetTriggerUnit()))endfunctionfunction Ss takes nothing returns nothinglocal integer Sh=GetLearnedSkill()if IsUnitIllusion(GetTriggerUnit())or ss(GetTriggerUnit())==false thenreturnendifif Sh=='A0MW'and GetUnitAbilityLevel(GetTriggerUnit(),Sh)==1 thencall TriggerExecute(Ee(e4(GetOwningPlayer(GetTriggerUnit())),"Kobold|XPTrigger"))call e7(e4(GetOwningPlayer(GetTriggerUnit())),"Kobold0",GetTriggerUnit())call Ea(e4(GetTriggerUnit()),"XPEarned",GetHeroXP(GetTriggerUnit()))call Ea(e4(GetTriggerUnit()),"XPGiven",0)call DisableTrigger(GetTriggeringTrigger())call Sf()call EnableTrigger(GetTriggeringTrigger())endifif Sh=='A0MW'thencall TriggerExecute(Ee(e4(GetOwningPlayer(GetTriggerUnit())),"Kobold|XPTrigger"))call DisableTrigger(GetTriggeringTrigger())call SJ()call EnableTrigger(GetTriggeringTrigger())endifif Sh=='A0N8'or Sh=='A0NB'or Sh=='A0N7'or Sh=='Aamk'thencall TriggerExecute(Ee(e4(GetOwningPlayer(GetTriggerUnit())),"Kobold|XPTrigger"))call DisableTrigger(GetTriggeringTrigger())call Sg(GetTriggerUnit(),Sh)call EnableTrigger(GetTriggeringTrigger())endifendfunctionfunction HL takes nothing returns nothingset e1=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(e1,EVENT_PLAYER_HERO_SKILL)call TriggerAddAction(e1,function Ss)endfunctionfunction St takes nothing returns booleanreturn GetSpellAbilityId()=='A035'endfunctionfunction ST takes nothing returns booleanreturn IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(Ai))and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>0 and GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0endfunctionfunction Su takes nothing returns nothinglocal unit SU=EC(e4(GetExpiredTimer()),"Leshrac")local group EX=CreateGroup()local boolexpr Ey=Condition(function ST)local unit Svset Ai=SUcall GroupEnumUnitsInRange(EX,GetUnitX(SU),GetUnitY(SU),500,Ey)set Sv=GroupPickRandomUnit(EX)call AddSpecialEffectTarget("Abilities\\Weapons\\SteamTank\\SteamTankImpact.mdl",Sv,"chest")call UnitDamageTarget(SU,Sv,12.5*GetUnitAbilityLevel(SU,'A035'),true,true,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)call DestroyBoolExpr(Ey)call DestroyGroup(EX)endfunctionfunction SV takes nothing returns nothinglocal timer t=CreateTimer()local string f8=e4(t)call e7(f8,"Leshrac",GetTriggerUnit())call TimerStart(t,.25,true,function Su)call PolledWait(8.)call PauseTimer(t)call e5(f8)call DestroyTimer(t)endfunctionfunction hH takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function St))call TriggerAddAction(t,function SV)endfunctionfunction Sw takes nothing returns booleanif(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))thenreturn falseendifif(GetUnitAbilityLevelSwapped('A04R',GetFilterUnit())==1)thenreturn falseendifif(IsUnitAliveBJ(GetFilterUnit())==false)thenreturn falseendifif(GetUnitTypeId(GetFilterUnit())=='o003')thenreturn falseendifreturn trueendfunctionfunction SW takes nothing returns booleanif((GetSpellAbilityId()=='A05T'))thenreturn trueendifif((GetSpellAbilityId()=='A08H'))thenreturn trueendifreturn falseendfunctionfunction Sx takes nothing returns booleanif(not SW())thenreturn falseendifreturn trueendfunctionfunction SX takes nothing returns booleanif(not(GetSpellAbilityId()=='A05T'))thenreturn falseendifreturn trueendfunctionfunction Sy takes nothing returns nothinglocal player SY=GetOwningPlayer(GetTriggerUnit())local integer Sz=0local integer SZlocal unit S0local unit S1local unit oOlocal integer ERlocal integer Eslocal group S2=CreateGroup()local group S3=CreateGroup()local unit mflocal location S4local location S5local location nl=GetUnitLoc(GetSpellAbilityUnit())if(SX())thenset SZ=GetUnitAbilityLevelSwapped('A05T',GetTriggerUnit())elseset SZ=(GetUnitAbilityLevelSwapped('A08H',GetTriggerUnit())+1)endifset S0=GetSpellTargetUnit()set S4=GetUnitLoc(S0)set S1=CreateUnitAtLoc(SY,'e009',nl,bj_UNIT_FACING)call IssuePointOrderByIdLoc(S1,851986,S4)call SetUnitPathing(S1,false)call UnitAddAbility(S1,'Aloc')call SetUnitInvulnerable(S1,true)set S5=GetUnitLoc(S1)call PolledWait(((DistanceBetweenPoints(S5,S4)-90.)/575.))loopexitwhen Sz>5set Sz=(Sz+1)call RemoveLocation(S4)set S4=GetUnitLoc(S0)set oO=CreateUnitAtLoc(SY,'e00C',S4,bj_UNIT_FACING)call UnitAddAbility(oO,'A091')call SetUnitAbilityLevelSwapped('A091',oO,SZ)call IssueTargetOrderById(oO,852226,S0)call SetUnitInvulnerable(oO,true)call SetUnitPathing(oO,false)call UnitAddAbility(oO,'Aloc')call UnitApplyTimedLifeBJ(2.,'BTLF',oO)call RemoveUnit(S1)if(Sz<6)thencall GroupClear(S2)call DestroyGroup(S3)set S3=GetUnitsInRangeOfLocMatching(600.,S4,Condition(function Sw))loopset mf=FirstOfGroup(S3)exitwhen mf==nullif(IsUnitEnemy(mf,SY))thenif(mf!=S0)thenif(IsUnitVisible(mf,SY))thencall GroupAddUnit(S2,mf)endifendifendifcall GroupRemoveUnit(S3,mf)endloopif(IsUnitGroupEmptyBJ(S2)==false)thencall RemoveLocation(S4)set S4=GetUnitLoc(S0)set S1=CreateUnitAtLoc(SY,'e009',S4,bj_UNIT_FACING)call RemoveLocation(S5)set S5=GetUnitLoc(S1)call RemoveLocation(S4)set S0=GroupPickRandomUnit(S2)set S4=GetUnitLoc(S0)call IssuePointOrderByIdLoc(S1,851986,S4)call SetUnitPathing(S1,false)call UnitAddAbility(S1,'Aloc')call SetUnitInvulnerable(S1,true)call PolledWait(((DistanceBetweenPoints(S5,S4)-90.)/575.))elseset Sz=99endifendifendloopcall RemoveLocation(S5)call RemoveLocation(S4)call RemoveLocation(nl)call DestroyGroup(S2)call DestroyGroup(S3)endfunctionfunction CF takes nothing returns nothingset C8=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(C8,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(C8,Condition(function Sx))call TriggerAddAction(C8,function Sy)endfunctionfunction S6 takes nothing returns booleanreturn GetSpellAbilityId()=='A094'endfunctionfunction S7 takes nothing returns booleanif(not(ModuloReal(I2R(GetHeroLevel(GetSpellTargetUnit())),(7.-I2R(GetUnitAbilityLevelSwapped('A094',GetTriggerUnit()))))==.0))thenreturn falseendifreturn trueendfunctionfunction S8 takes nothing returns nothingif(S7())thencall UnitDamageTargetBJ(GetTriggerUnit(),GetSpellTargetUnit(),250.,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL)endifendfunctionfunction hi takes nothing returns nothingset C9=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(C9,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(C9,Condition(function S6))call TriggerAddAction(C9,function S8)endfunctionfunction S9 takes nothing returns booleanif(not(GetUnitTypeId(GetTransportUnit())=='UC42'))thenreturn falseendifreturn trueendfunctionfunction tA takes nothing returns booleanif(not(IsUnitInTransport(GetTriggerUnit(),GetTransportUnit())))thenreturn falseendifreturn trueendfunctionfunction tb takes nothing returns nothinglocal texttag gcall PolledWait(((GetUnitStateSwap(UNIT_STATE_LIFE,GetTriggerUnit())-20.)/20.))if(tA())thencall SetPlayerStateBJ(GetOwningPlayer(GetTransportUnit()),PLAYER_STATE_RESOURCE_GOLD,(GetPlayerState(GetOwningPlayer(GetTransportUnit()),PLAYER_STATE_RESOURCE_GOLD)+(10*GetUnitAbilityLevelSwapped('A05Y',GetTransportUnit()))))set g=CreateTextTagUnitBJ(("+"+I2S((GetUnitAbilityLevelSwapped('A05Y',GetTransportUnit())*10))),GetTransportUnit(),0,10,90.,84.,.0,0)call SetTextTagVelocityBJ(g,64,90)call PolledWait(2.)call DestroyTextTag(g)endifendfunctionfunction hI takes nothing returns nothingset da=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(da,EVENT_PLAYER_UNIT_LOADED)call TriggerAddCondition(da,Condition(function S9))call TriggerAddAction(da,function tb)endfunctionfunction tB takes nothing returns booleanif(not(GetSpellAbilityId()=='A0FE'))thenreturn falseendifreturn trueendfunctionfunction tc takes nothing returns nothinglocal location iG=GetSpellTargetLoc()call CreateNUnitsAtLoc(1,'e00E',GetOwningPlayer(GetTriggerUnit()),iG,bj_UNIT_FACING)call ShowUnitHide(bj_lastCreatedUnit)call UnitApplyTimedLifeBJ(20.,'BTLF',bj_lastCreatedUnit)call UnitAddAbility(bj_lastCreatedUnit,'A0FF')call SetUnitAbilityLevelSwapped('A0FF',bj_lastCreatedUnit,GetUnitAbilityLevelSwapped('A0FE',GetTriggerUnit()))call UnitAddAbility(bj_lastCreatedUnit,'A0FG')call SetUnitAbilityLevelSwapped('A0FG',bj_lastCreatedUnit,GetUnitAbilityLevelSwapped('A0FE',GetTriggerUnit()))call RemoveLocation(iG)endfunctionfunction hj takes nothing returns nothingset dA=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(dA,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(dA,Condition(function tB))call TriggerAddAction(dA,function tc)endfunctionfunction tC takes nothing returns booleanif(not(GetSpellAbilityId()=='A06F'))thenreturn falseendifreturn trueendfunctionfunction td takes nothing returns booleanif(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)thenif(GetUnitTypeId(GetFilterUnit())!='n00L')thenreturn trueendifendifreturn falseendfunctionfunction tD takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped('A04R',GetFilterUnit())!=1)endfunctionfunction te takes nothing returns booleanreturn GetBooleanAnd(td(),tD())endfunctionfunction tE takes nothing returns booleanreturn(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))endfunctionfunction tf takes nothing returns booleanreturn(IsUnitDeadBJ(GetFilterUnit())==false)endfunctionfunction tF takes nothing returns booleanreturn GetBooleanAnd(tE(),tf())endfunctionfunction tg takes nothing returns booleanreturn GetBooleanAnd(te(),tF())endfunctionfunction tG takes nothing returns nothinglocal location iG=GetUnitLoc(GetSpellAbilityUnit())local location nK=PolarProjectionBJ(iG,GetRandomReal(20.,70.),GetRandomReal(0,360))call SetUnitPositionLoc(GetEnumUnit(),nK)call RemoveLocation(iG)call RemoveLocation(nK)endfunctionfunction th takes nothing returns nothinglocal location iG=GetUnitLoc(GetTriggerUnit())local group EX=GetUnitsInRangeOfLocMatching(480.,iG,Condition(function tg))call ForGroupBJ(EX,function tG)call DestroyGroup(EX)call RemoveLocation(iG)endfunctionfunction RP takes nothing returns nothingset db=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(db,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(db,Condition(function tC))call TriggerAddAction(db,function th)endfunctionfunction tH takes nothing returns booleanif(not(GetUnitAbilityLevelSwapped('A012',GetDyingUnit())>0))thenreturn falseendifreturn trueendfunctionfunction ti takes nothing returns booleanif(not(GetUnitAbilityLevelSwapped('A012',GetTriggerUnit())>0))thenreturn falseendifif(not(GetIssuedOrderId()==852055))thenreturn falseendifreturn trueendfunctionfunction tI takes nothing returns booleanif(not(GetUnitAbilityLevelSwapped('A012',GetTriggerUnit())>0))thenreturn falseendifif(not(GetIssuedOrderId()==852056))thenreturn falseendifreturn trueendfunctionfunction tj takes nothing returns nothingif(tH())thencall UnitRemoveAbility(GetDyingUnit(),'A09J')endifif(ti())thencall UnitAddAbility(GetTriggerUnit(),'A09J')endifif(tI())thencall UnitRemoveAbility(GetTriggerUnit(),'A09J')endifendfunctionfunction hJ takes nothing returns nothingset dB=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(dB,EVENT_PLAYER_UNIT_ISSUED_ORDER)call TriggerRegisterAnyUnitEventBJ(dB,EVENT_PLAYER_UNIT_DEATH)call TriggerAddAction(dB,function tj)endfunctionfunction tJ takes nothing returns booleanif(not(UnitHasBuffBJ(GetKillingUnit(),'B02R')))thenreturn falseendifreturn trueendfunctionfunction tk takes nothing returns nothingcall SetUnitManaBJ(GetKillingUnit(),(GetUnitStateSwap(UNIT_STATE_MANA,GetKillingUnit())+(12.*I2R(GetUnitAbilityLevelSwapped('A060',GetKillingUnit())))))endfunctionfunction hk takes nothing returns nothingset dc=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(dc,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(dc,Condition(function tJ))call TriggerAddAction(dc,function tk)endfunctionfunction tK takes nothing returns booleanif(not(GetSpellAbilityId()=='A05V'))thenreturn falseendifreturn trueendfunctionfunction tl takes nothing returns nothinglocal location iG=GetUnitLoc(GetTriggerUnit())call CreateNUnitsAtLoc(1,'e00E',GetOwningPlayer(GetTriggerUnit()),iG,bj_UNIT_FACING)call RemoveLocation(iG)call UnitAddAbility(bj_lastCreatedUnit,'A05W')call SetUnitAbilityLevelSwapped('A05W',bj_lastCreatedUnit,GetUnitAbilityLevelSwapped('A05V',GetTriggerUnit()))call IssueImmediateOrderById(bj_lastCreatedUnit,852526)endfunctionfunction hK takes nothing returns nothingset dC=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(dC,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(dC,Condition(function tK))call TriggerAddAction(dC,function tl)endfunctionfunction tL takes nothing returns booleanreturn GetSpellAbilityId()=='A067'or GetSpellAbilityId()=='A08P'endfunctionfunction tM takes nothing returns nothinglocal integer tn=GetUnitAbilityLevel(GetTriggerUnit(),'A067')local integer tN=GetUnitAbilityLevel(GetTriggerUnit(),'A08P')if tn==1 thenset AJ=.4endifif tn==2 or tN==1 thenset AJ=.6endifif tn==3 or tN==2 thenset AJ=.9endifif tN==3 thenset AJ=1.1endifcall UnitDamageTargetBJ(GetTriggerUnit(),GetSpellTargetUnit(),(AJ*(GetUnitStateSwap(UNIT_STATE_MAX_LIFE,GetSpellTargetUnit())-GetUnitStateSwap(UNIT_STATE_LIFE,GetSpellTargetUnit()))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_FIRE)endfunctionfunction hl takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function tL))call TriggerAddAction(t,function tM)endfunctionfunction to takes nothing returns booleanif((GetUnitTypeId(GetKillingUnit())=='Nfir'))thenreturn trueendifif((GetUnitTypeId(GetDyingUnit())=='Nfir'))thenreturn trueendifif((GetUnitTypeId(GetKillingUnit())=='e00F'))thenreturn trueendifreturn falseendfunctionfunction tO takes nothing returns booleanif(not to())thenreturn falseendifreturn trueendfunctionfunction tp takes nothing returns nothingcall KillUnit(GetEnumUnit())endfunctionfunction tP takes nothing returns booleanif(not(GetUnitTypeId(GetDyingUnit())=='Nfir'))thenreturn falseendifreturn trueendfunctionfunction tq takes nothing returns booleanif(not(IsUnitIllusion(GetDyingUnit())==false))thenreturn falseendifif(not((GetUnitAbilityLevelSwapped('A0CQ',GetKillingUnit())-1)<(7.5*GetUnitAbilityLevelSwapped('A0BR',GetKillingUnit()))))thenreturn falseendifif(not(GetUnitTypeId(GetKillingUnit())=='Nfir'))thenreturn falseendifreturn trueendfunctionfunction tQ takes nothing returns booleanif(not((GetUnitAbilityLevelSwapped('A0CQ',GetEnumUnit())+1)<(7.5*GetUnitAbilityLevelSwapped('A0BR',GetEnumUnit()))))thenreturn falseendifreturn trueendfunctionfunction tr takes nothing returns nothingif(tQ())thencall SetUnitAbilityLevelSwapped('A0CQ',GetEnumUnit(),(GetUnitAbilityLevelSwapped('A0CQ',GetEnumUnit())+1))endifendfunctionfunction tR takes nothing returns booleanif(not(IsUnitIllusion(GetDyingUnit())==false))thenreturn falseendifif(not(GetUnitTypeId(GetKillingUnit())=='e00F'))thenreturn falseendifreturn trueendfunctionfunction ts takes nothing returns nothinglocal group EXif(tP())thencall SetUnitAbilityLevelSwapped('A0CQ',GetDyingUnit(),1+R2I((.5*I2R(GetUnitAbilityLevelSwapped('A0CQ',GetDyingUnit())))))set EX=GetUnitsOfPlayerAndTypeId(GetOwningPlayer(GetDyingUnit()),'e007')call ForGroupBJ(EX,function tp)call DestroyGroup(EX)endifif(tq())thencall SetUnitAbilityLevelSwapped('A0CQ',GetKillingUnit(),(GetUnitAbilityLevelSwapped('A0CQ',GetKillingUnit())+1))endifif(tR())thenset EX=GetUnitsOfPlayerAndTypeId(GetOwningPlayer(GetKillingUnit()),'Nfir')call ForGroupBJ(EX,function tr)call DestroyGroup(EX)endifendfunctionfunction hL takes nothing returns nothingset dd=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(dd,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(dd,Condition(function tO))call TriggerAddAction(dd,function ts)endfunctionfunction tS takes nothing returns booleanreturn(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)endfunctionfunction tT takes nothing returns booleanreturn(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))endfunctionfunction tu takes nothing returns booleanreturn('BNab'=='BNab')endfunctionfunction tU takes nothing returns booleanreturn GetBooleanAnd(tT(),tu())endfunctionfunction tv takes nothing returns booleanreturn GetBooleanAnd(tS(),tU())endfunctionfunction tV takes nothing returns nothingcall UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),(75.*I2R(GetUnitAbilityLevelSwapped('A0EY',GetTriggerUnit()))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_DEATH)endfunctionfunction tw takes nothing returns booleanif(not(GetSpellAbilityId()=='A0EY'))thenreturn falseendifreturn trueendfunctionfunction tW takes nothing returns booleanreturn(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)endfunctionfunction tx takes nothing returns booleanreturn(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))endfunctionfunction tX takes nothing returns booleanreturn('BNab'=='BNab')endfunctionfunction ty takes nothing returns booleanreturn GetBooleanAnd(tx(),tX())endfunctionfunction tY takes nothing returns booleanreturn GetBooleanAnd(tW(),ty())endfunctionfunction tz takes nothing returns nothingcall UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),(75.*I2R(GetUnitAbilityLevelSwapped('A0EY',GetTriggerUnit()))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_DEATH)endfunctionfunction tZ takes nothing returns booleanif(not(GetSpellAbilityId()=='A0FH'))thenreturn falseendifreturn trueendfunctionfunction t0 takes nothing returns booleanreturn(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)endfunctionfunction t3 takes nothing returns booleanreturn(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))endfunctionfunction t4 takes nothing returns booleanreturn('BNab'=='BNab')endfunctionfunction t5 takes nothing returns booleanreturn GetBooleanAnd(t3(),t4())endfunctionfunction t6 takes nothing returns booleanreturn GetBooleanAnd(t0(),t5())endfunctionfunction t7 takes nothing returns nothingcall UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),(75.*I2R(GetUnitAbilityLevelSwapped('A0EY',GetTriggerUnit()))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_DEATH)endfunctionfunction t8 takes nothing returns booleanif(not(GetSpellAbilityId()=='A0F0'))thenreturn falseendifreturn trueendfunctionfunction t9 takes nothing returns nothinglocal location iG=GetUnitLoc(GetTriggerUnit())local location nKlocal location nl=PolarProjectionBJ(iG,200.,GetUnitFacing(GetTriggerUnit()))local group NHif(tw())thencall CreateNUnitsAtLoc(1,'e006',GetOwningPlayer(GetTriggerUnit()),nl,bj_UNIT_FACING)call UnitApplyTimedLifeBJ(2.,'BTLF',bj_lastCreatedUnit)set nK=GetUnitLoc(bj_lastCreatedUnit)set NH=GetUnitsInRangeOfLocMatching(325.,nK,Condition(function tv))call ForGroupBJ(NH,function tV)call DestroyGroup(NH)call RemoveLocation(nK)endifcall RemoveLocation(nl)set nl=PolarProjectionBJ(iG,450.,GetUnitFacing(GetTriggerUnit()))if(tZ())thencall CreateNUnitsAtLoc(1,'e006',GetOwningPlayer(GetTriggerUnit()),nl,bj_UNIT_FACING)call UnitApplyTimedLifeBJ(2.,'BTLF',bj_lastCreatedUnit)set nK=GetUnitLoc(bj_lastCreatedUnit)set NH=GetUnitsInRangeOfLocMatching(325.,nK,Condition(function tY))call ForGroupBJ(NH,function tz)call DestroyGroup(NH)call RemoveLocation(nK)endifcall RemoveLocation(nl)set nl=PolarProjectionBJ(iG,700.,GetUnitFacing(GetTriggerUnit()))if(t8())thencall CreateNUnitsAtLoc(1,'e006',GetOwningPlayer(GetTriggerUnit()),nl,bj_UNIT_FACING)call UnitApplyTimedLifeBJ(2.,'BTLF',bj_lastCreatedUnit)set nK=GetUnitLoc(bj_lastCreatedUnit)set NH=GetUnitsInRangeOfLocMatching(325.,nK,Condition(function t6))call ForGroupBJ(NH,function t7)call DestroyGroup(NH)call RemoveLocation(nK)endifcall RemoveLocation(nl)call RemoveLocation(iG)endfunctionfunction hm takes nothing returns nothingset dD=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(dD,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddAction(dD,function t9)endfunctionfunction Ta takes nothing returns nothingif(GetLearnedSkill()=='A0EY')thenif(GetUnitAbilityLevelSwapped('A0EY',GetTriggerUnit())==1)thencall UnitAddAbility(GetTriggerUnit(),'A0F0')call UnitAddAbility(GetTriggerUnit(),'A0FH')elsecall SetUnitAbilityLevelSwapped('A0F0',GetTriggerUnit(),GetUnitAbilityLevelSwapped('A0EY',GetTriggerUnit()))call SetUnitAbilityLevelSwapped('A0FH',GetTriggerUnit(),GetUnitAbilityLevelSwapped('A0EY',GetTriggerUnit()))endifendifif(GetLearnedSkill()=='A0BR')thenif(GetUnitAbilityLevelSwapped('A0BR',GetTriggerUnit())==1)thencall UnitAddAbility(GetTriggerUnit(),'A0CQ')endifendifendfunctionfunction NL takes nothing returns nothingset de=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(de,EVENT_PLAYER_HERO_SKILL)call TriggerAddAction(de,function Ta)endfunctionfunction TA takes nothing returns booleanif(not(GetSpellAbilityId()=='A0HE'))thenreturn falseendifreturn trueendfunctionfunction Tb takes nothing returns nothinglocal integer TB=GetUnitAbilityLevelSwapped('A0CQ',GetTriggerUnit())local integer Tclocal integer Eslocal unit fP=GetTriggerUnit()local location iG=GetUnitLoc(GetTriggerUnit())local location nKset TB=TB/2set Tc=1set Es=TBloopexitwhen Tc>Esset nK=PolarProjectionBJ(iG,50.,(I2R(Tc)*(360/TB)))call CreateNUnitsAtLoc(1,'e00C',GetOwningPlayer(fP),iG,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,'A0HG')call SetUnitAbilityLevelSwapped('A0HG',bj_lastCreatedUnit,GetUnitAbilityLevelSwapped('A0HE',GetTriggerUnit()))call UnitApplyTimedLifeBJ(2.,'BTLF',bj_lastCreatedUnit)call IssuePointOrderByIdLoc(bj_lastCreatedUnit,852218,nK)call SetUnitPathing(bj_lastCreatedUnit,false)call SetUnitInvulnerable(bj_lastCreatedUnit,true)call UnitAddAbility(bj_lastCreatedUnit,'Aloc')call RemoveLocation(nK)set Tc=Tc+1endloopcall RemoveLocation(iG)endfunctionfunction hM takes nothing returns nothingset dE=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(dE,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(dE,Condition(function TA))call TriggerAddAction(dE,function Tb)endfunctionfunction TC takes nothing returns booleanif(not(GetSpellAbilityId()=='A0HE'))thenreturn falseendifreturn trueendfunctionfunction Td takes nothing returns booleanif(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))thenreturn falseendifif(GetUnitAbilityLevelSwapped('A04R',GetFilterUnit())==1)thenreturn falseendifif(IsUnitAliveBJ(GetFilterUnit())==false)thenreturn falseendifif(GetUnitTypeId(GetFilterUnit())=='o003')thenreturn falseendifif(IsUnitEnemy(GetFilterUnit(),GetTriggerPlayer())==false)thenreturn falseendifif(GetTriggerUnit()==GetFilterUnit())thenreturn falseendifif(IsUnitVisible(GetFilterUnit(),GetTriggerPlayer())==false)thenreturn falseendifreturn trueendfunctionfunction TD takes nothing returns nothinglocal unit fP=GetTriggerUnit()local location iG=GetUnitLoc(fP)call CreateNUnitsAtLoc(1,'e00C',GetOwningPlayer(fP),iG,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,'A0HH')call SetUnitAbilityLevelSwapped('A0HH',bj_lastCreatedUnit,GetUnitAbilityLevelSwapped('A0HE',GetTriggerUnit()))call UnitApplyTimedLifeBJ(2.,'BTLF',bj_lastCreatedUnit)call IssueTargetOrderById(bj_lastCreatedUnit,852189,GetEnumUnit())call SetUnitPathing(bj_lastCreatedUnit,false)call SetUnitInvulnerable(bj_lastCreatedUnit,true)call UnitAddAbility(bj_lastCreatedUnit,'Aloc')call RemoveLocation(iG)endfunctionfunction Te takes nothing returns nothinglocal unit fP=GetTriggerUnit()local location iG=GetUnitLoc(fP)call CreateNUnitsAtLoc(1,'e00C',GetOwningPlayer(fP),iG,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,'A0HH')call SetUnitAbilityLevelSwapped('A0HJ',bj_lastCreatedUnit,GetUnitAbilityLevelSwapped('A0HE',GetTriggerUnit()))call UnitApplyTimedLifeBJ(2.,'BTLF',bj_lastCreatedUnit)call IssueTargetOrderById(bj_lastCreatedUnit,852189,GetEnumUnit())call SetUnitPathing(bj_lastCreatedUnit,false)call SetUnitInvulnerable(bj_lastCreatedUnit,true)call UnitAddAbility(bj_lastCreatedUnit,'Aloc')call RemoveLocation(iG)endfunctionfunction TE takes nothing returns nothinglocal unit fP=GetTriggerUnit()local location iG=GetUnitLoc(fP)call CreateNUnitsAtLoc(1,'e00C',GetOwningPlayer(fP),iG,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,'A0HH')call SetUnitAbilityLevelSwapped('A0HI',bj_lastCreatedUnit,GetUnitAbilityLevelSwapped('A0HE',GetTriggerUnit()))call UnitApplyTimedLifeBJ(2.,'BTLF',bj_lastCreatedUnit)call IssueTargetOrderById(bj_lastCreatedUnit,852189,GetEnumUnit())call SetUnitPathing(bj_lastCreatedUnit,false)call SetUnitInvulnerable(bj_lastCreatedUnit,true)call UnitAddAbility(bj_lastCreatedUnit,'Aloc')call RemoveLocation(iG)endfunctionfunction Tf takes nothing returns nothinglocal location iG=GetUnitLoc(GetTriggerUnit())local unit fP=GetTriggerUnit()local group EXset EX=GetUnitsInRangeOfLocMatching(700,iG,Condition(function Td))call ForGroup(EX,function TD)set EX=GetUnitsInRangeOfLocMatching(400,iG,Condition(function Td))call ForGroup(EX,function Te)set EX=GetUnitsInRangeOfLocMatching(200,iG,Condition(function Td))call ForGroup(EX,function TE)call RemoveLocation(iG)call DestroyGroup(EX)endfunctionfunction hn takes nothing returns nothingset df=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(df,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(df,Condition(function TC))call TriggerAddAction(df,function Tf)endfunctionfunction TF takes nothing returns booleanreturn GetSpellAbilityId()=='A02H'endfunctionfunction Tg takes nothing returns nothinglocal unit Jzif(fq()==false)thenset Jz=CreateUnit(GetOwningPlayer(GetTriggerUnit()),'e00E',GetUnitX(GetSpellTargetUnit()),GetUnitY(GetSpellTargetUnit()),bj_UNIT_FACING)call UnitAddAbility(Jz,'A02R')call IssueTargetOrderById(Jz,852075,GetSpellTargetUnit())endifendfunctionfunction ho takes nothing returns nothingset dF=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(dF,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(dF,Condition(function TF))call TriggerAddAction(dF,function Tg)endfunctionfunction TG takes nothing returns booleanreturn(GetLearnedSkill()=='A086'or GetLearnedSkill()=='A08E')and IsUnitIllusion(GetTriggerUnit())==falseendfunctionfunction Th takes nothing returns nothinglocal unit TH=EC(e4(GetTriggeringTrigger()),"NightStalker")if(TH!=null and fq()and GetUnitState(TH,UNIT_STATE_LIFE)>1)thencall SetUnitAbilityLevel(TH,'S00A',5)call SetUnitAbilityLevel(TH,'A08C',5)elseif(TH!=null and fq()==false and GetUnitState(TH,UNIT_STATE_LIFE)>1)thencall SetUnitAbilityLevel(TH,'S00A',GetUnitAbilityLevel(TH,'A086'))call SetUnitAbilityLevel(TH,'A08C',GetUnitAbilityLevel(TH,'A08E'))endifendfunctionfunction Ti takes nothing returns nothinglocal string f8=e4(GetTriggerUnit())local trigger tif(EI(f8,"NightStalkerAlreadyLearned")==false)thencall Ec(f8,"NightStalkerAlreadyLearned",true)set t=CreateTrigger()call TriggerRegisterTimerEventPeriodic(t,2.)call TriggerRegisterGameStateEventTimeOfDay(t,LESS_THAN,6.)call TriggerRegisterGameStateEventTimeOfDay(t,GREATER_THAN,18.)call TriggerAddAction(t,function Th)call e7(e4(t),"NightStalker",GetTriggerUnit())endifif(GetLearnedSkill()=='A086')thencall UnitAddAbility(GetTriggerUnit(),'S00A')if(fq())thencall SetUnitAbilityLevel(GetTriggerUnit(),'S00A',5)elsecall SetUnitAbilityLevel(GetTriggerUnit(),'S00A',GetUnitAbilityLevel(GetTriggerUnit(),'A086'))endifendifif(GetLearnedSkill()=='A08E')thencall UnitAddAbility(GetTriggerUnit(),'A08C')if(fq())thencall SetUnitAbilityLevel(GetTriggerUnit(),'A08C',5)elsecall SetUnitAbilityLevel(GetTriggerUnit(),'A08C',GetUnitAbilityLevel(GetTriggerUnit(),'A08E'))endifendifendfunctionfunction hN takes nothing returns nothingset dg=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(dg,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(dg,Condition(function TG))call TriggerAddAction(dg,function Ti)endfunctionfunction TI takes nothing returns nothinglocal unit Tj=EC(e4(GetTriggeringTrigger()),"PhantomAssassin")local integer MU=GetUnitAbilityLevel(Tj,'A03P')if(GetUnitState(Tj,UNIT_STATE_LIFE)>1)thenif(MU==1)thencall SetUnitVertexColorBJ(Tj,'d','d','d',40.)endifif(MU==2)thencall SetUnitVertexColorBJ(Tj,'d','d','d',60.)endifif(MU==3)thencall SetUnitVertexColorBJ(Tj,'d','d','d',80.)endifif(MU==4)thencall SetUnitVertexColorBJ(Tj,'d','d','d',98.)endifendifendfunctionfunction TJ takes nothing returns booleanreturn GetLearnedSkill()=='A03P'and IsUnitIllusion(GetTriggerUnit())==falseendfunctionfunction Tk takes nothing returns nothinglocal integer MU=GetUnitAbilityLevelSwapped('A03P',GetTriggerUnit())local trigger tlocal unit Tj=GetTriggerUnit()if(MU==1)thencall SetUnitVertexColorBJ(Tj,'d','d','d',40.)set t=CreateTrigger()call TriggerAddAction(t,function TI)call TriggerRegisterTimerEventPeriodic(t,2.)call e7(e4(t),"PhantomAssassin",Tj)endifif(MU==2)thencall SetUnitVertexColorBJ(Tj,'d','d','d',60.)endifif(MU==3)thencall SetUnitVertexColorBJ(Tj,'d','d','d',80.)endifif(MU==4)thencall SetUnitVertexColorBJ(Tj,'d','d','d',98.)endifendfunctionfunction hO takes nothing returns nothingset dG=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(dG,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(dG,Condition(function TJ))call TriggerAddAction(dG,function Tk)endfunctionfunction TK takes nothing returns booleanreturn GetUnitAbilityLevel(GetTriggerUnit(),'A06K')>0endfunctionfunction Tl takes nothing returns nothingif(GetIssuedOrderId()==852177)thencall UnitAddAbility(GetTriggerUnit(),'A0AZ')endifif(GetIssuedOrderId()==852178)thencall UnitRemoveAbility(GetTriggerUnit(),'A0AZ')endifendfunctionfunction hp takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_ISSUED_ORDER)call TriggerAddCondition(t,Condition(function TK))call TriggerAddAction(t,function Tl)endfunctionfunction TL takes nothing returns booleanreturn GetUnitAbilityLevel(GetKillingUnit(),'A06D')>0endfunctionfunction Tm takes nothing returns nothinglocal string f8=e4(GetKillingUnit())local real TM=Ei(f8,"FleshHeap")if(IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO))thenset TM=TM+.3*GetUnitAbilityLevel(GetKillingUnit(),'A06D')elseset TM=TM+.03*GetUnitAbilityLevel(GetKillingUnit(),'A06D')endifif(TM>=1.)thenset TM=TM-1call ModifyHeroStat(0,GetKillingUnit(),0,1)endifcall Eb(f8,"FleshHeap",TM)endfunctionfunction hP takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(t,Condition(function TL))call TriggerAddAction(t,function Tm)endfunctionfunction Tn takes nothing returns booleanreturn GetSpellAbilityId()=='A06I'endfunctionfunction TN takes nothing returns nothinglocal timer t=GetExpiredTimer()local timer To=ED(e4(t),"ExtendCache")local string f8=e4(To)local integer TO=EH(f8,"ChainLinkNumber")local unit Fd=EC(f8,"Target")local unit Tp=EC(f8,"Pudge")local unit gn=EC(f8,"ChainLinks"+I2S(TO))if(Fd!=null)thencall SetUnitX(Fd,GetUnitX(gn))call SetUnitY(Fd,GetUnitY(gn))endifcall RemoveUnit(gn)call Ea(f8,"ChainLinkNumber",TO-1)if(TO==1)thencall PauseTimer(t)call e5(f8)call e5(e4(t))call PolledWait(1)call DestroyTimer(t)call DestroyTimer(To)endifendfunctionfunction TP takes nothing returns booleanif(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE) or GetUnitAbilityLevel(GetFilterUnit(),'A04R')==1)or GetFilterUnit()==Ai thenreturn falseendifif GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)<=0 or GetUnitTypeId(GetFilterUnit())=='u00H'or GetUnitTypeId(GetFilterUnit())=='u00F'or IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT) thenreturn falseendifreturn trueendfunctionfunction Tq takes nothing returns nothinglocal timer t=GetExpiredTimer()local string f8=e4(t)local integer TO=EH(f8,"ChainLinkNumber")local unit Tp=EC(f8,"Pudge")local real nr=Ei(f8,"Angle")local integer m8=GetUnitAbilityLevel(Tp,'A06I')local unit gnlocal group EXlocal real xlocal real ylocal boolexpr TQlocal timer Trlocal string Cache2if(TO<5+6*m8)thenset TO=TO+1set x=GetUnitX(Tp)+TO*40*Cos(nr*bj_DEGTORAD)set y=GetUnitY(Tp)+TO*40*Sin(nr*bj_DEGTORAD)set gn=CreateUnit(GetOwningPlayer(Tp),'u00H',x,y,nr)call e7(f8,"ChainLinks"+I2S(TO),gn)call Ea(f8,"ChainLinkNumber",TO)set EX=CreateGroup()set Ai=Tpset TQ=Condition(function TP)call GroupEnumUnitsInRange(EX,x,y,'}',TQ)call DestroyBoolExpr(TQ)set gn=FirstOfGroup(EX)call DestroyGroup(EX)if(gn!=null)thencall e7(f8,"Target",gn)if IsUnitEnemy(gn,GetOwningPlayer(Tp))thencall UnitDamageTargetBJ(Tp,gn,m8*'d',ATTACK_TYPE_NORMAL,DAMAGE_TYPE_ENHANCED)call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl",gn,"origin"))endifcall PauseTimer(t)set Tr=CreateTimer()call e7(e4(Tr),"ExtendCache",t)call TimerStart(Tr,.03,true,function TN)endifelsecall PauseTimer(t)set Tr=CreateTimer()call e7(e4(Tr),"ExtendCache",t)call TimerStart(Tr,.03,true,function TN)endifendfunctionfunction Ts takes nothing returns nothinglocal location TS=GetUnitLoc(GetSpellAbilityUnit())local location nK=GetSpellTargetLoc()local timer t=CreateTimer()local unit Tp=GetTriggerUnit()local real nr=AngleBetweenPoints(TS,nK)local string f8=e4(t)call e7(f8,"Pudge",Tp)call Eb(f8,"Angle",nr)call TimerStart(t,.03,true,function Tq)call RemoveLocation(TS)call RemoveLocation(nK)endfunctionfunction hq takes nothing returns nothingset dh=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(dh,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(dh,Condition(function Tn))call TriggerAddAction(dh,function Ts)endfunctionfunction Tt takes nothing returns booleanif(GetUnitTypeId(GetSummonedUnit())=='o00L')thenreturn trueendifif(GetUnitTypeId(GetSummonedUnit())=='o00M')thenreturn trueendifif(GetUnitTypeId(GetSummonedUnit())=='o00N')thenreturn trueendifif(GetUnitTypeId(GetSummonedUnit())=='o00O')thenreturn trueendifreturn falseendfunctionfunction TT takes nothing returns nothingcall SetUnitAbilityLevelSwapped('A08T',GetSummonedUnit(),GetUnitAbilityLevelSwapped('A09D',GetSummoningUnit()))call SetUnitAbilityLevelSwapped('A0CF',GetSummonedUnit(),GetUnitAbilityLevelSwapped('A09D',GetSummoningUnit()))call IssueImmediateOrderById(GetSummonedUnit(),852512)endfunctionfunction NW takes nothing returns nothingset dH=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(dH,EVENT_PLAYER_UNIT_SUMMON)call TriggerAddCondition(dH,Condition(function Tt))call TriggerAddAction(dH,function TT)endfunctionfunction Tu takes nothing returns booleanreturn GetLearnedSkill()=='A04B'and IsUnitIllusion(GetTriggerUnit())==falseendfunctionfunction TU takes nothing returns nothinglocal unit fw=GetTriggerUnit()local unit Jz=CreateUnit(GetOwningPlayer(fw),'e00E',GetUnitX(fw),GetUnitY(fw),0)call UnitAddAbility(Jz,'A0PG')call IssueTargetOrderById(Jz,852502,fw)endfunctionfunction Ho takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddAction(t,function TU)call TriggerAddCondition(t,Condition(function Tu))endfunctionfunction Tv takes nothing returns booleanif(not(GetSpellAbilityId()=='A06O'))thenreturn falseendifif(GetUnitTypeId(GetTriggerUnit())=='U00I')thenreturn falseendifreturn trueendfunctionfunction TV takes nothing returns nothinglocal unit Tw=GetTriggerUnit()local integer MU=GetUnitAbilityLevelSwapped('A06O',GetTriggerUnit())local real nrlocal location TW=GetUnitLoc(Tw)local location iG=GetSpellTargetLoc()if GetSpellTargetUnit()!=null thencall RemoveLocation(iG)set iG=GetUnitLoc(GetSpellTargetUnit())endifset nr=AngleBetweenPoints(TW,iG)if(MU==1)thencall CreateNUnitsAtLoc(1,'e00E',GetOwningPlayer(GetTriggerUnit()),PolarProjectionBJ(TW,-100.,nr),GetUnitFacing(GetTriggerUnit()))call UnitAddAbility(bj_lastCreatedUnit,'A075')call SetUnitAbilityLevelSwapped('A075',bj_lastCreatedUnit,(R2I(DistanceBetweenPoints(TW,iG))/'d'))call IssuePointOrderByIdLoc(bj_lastCreatedUnit,852555,iG)call PolledWait((DistanceBetweenPoints(TW,iG)/4000.))call SetUnitPositionLoc(Tw,iG)call SetUnitAnimation(Tw,"morph ALTERNATE")endifif(MU==2)thencall CreateNUnitsAtLoc(1,'e00E',GetOwningPlayer(GetTriggerUnit()),PolarProjectionBJ(TW,-100.,nr),GetUnitFacing(GetTriggerUnit()))call UnitAddAbility(bj_lastCreatedUnit,'A070')call SetUnitAbilityLevelSwapped('A070',bj_lastCreatedUnit,(R2I(DistanceBetweenPoints(TW,iG))/'d'))call IssuePointOrderByIdLoc(bj_lastCreatedUnit,852555,iG)call PolledWait((DistanceBetweenPoints(TW,iG)/4000.))call SetUnitPositionLoc(Tw,iG)call SetUnitAnimation(Tw,"morph ALTERNATE")endifif(MU==3)thencall CreateNUnitsAtLoc(1,'e00E',GetOwningPlayer(GetTriggerUnit()),PolarProjectionBJ(TW,-100.,nr),GetUnitFacing(GetTriggerUnit()))call UnitAddAbility(bj_lastCreatedUnit,'A06Z')call SetUnitAbilityLevelSwapped('A06Z',bj_lastCreatedUnit,(R2I(DistanceBetweenPoints(TW,iG))/'d'))call IssuePointOrderByIdLoc(bj_lastCreatedUnit,852555,iG)call PolledWait((DistanceBetweenPoints(TW,iG)/4000.))call SetUnitPositionLoc(Tw,iG)call SetUnitAnimation(Tw,"morph ALTERNATE")endifif(MU==4)thencall CreateNUnitsAtLoc(1,'e00E',GetOwningPlayer(GetTriggerUnit()),PolarProjectionBJ(TW,-100.,nr),GetUnitFacing(GetTriggerUnit()))call UnitAddAbility(bj_lastCreatedUnit,'A077')call SetUnitAbilityLevelSwapped('A077',bj_lastCreatedUnit,(R2I(DistanceBetweenPoints(TW,iG))/'d'))call IssuePointOrderByIdLoc(bj_lastCreatedUnit,852555,iG)call PolledWait((DistanceBetweenPoints(TW,iG)/4000.))call SetUnitPositionLoc(Tw,iG)call SetUnitAnimation(Tw,"morph ALTERNATE")endifcall RemoveLocation(TW)call RemoveLocation(iG)endfunctionfunction hQ takes nothing returns nothingset di=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(di,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(di,Condition(function Tv))call TriggerAddAction(di,function TV)endfunctionfunction Tx takes nothing returns booleanif(not(GetSpellAbilityId()=='A06R'))thenreturn falseendifif(GetUnitTypeId(GetTriggerUnit())=='U00I')thenreturn falseendifreturn trueendfunctionfunction TX takes nothing returns nothingcall RemoveUnit(GetEnumUnit())endfunctionfunction Ty takes nothing returns nothinglocal location iGlocal unit fPlocal group EX=CreateGroup()local integer TY=1local integer Tz=(4+(GetUnitAbilityLevelSwapped('A06R',GetTriggerUnit())*2))loopexitwhen TY>Tzset iG=GetUnitLoc(GetTriggerUnit())call CreateNUnitsAtLoc(1,'e00C',GetOwningPlayer(GetTriggerUnit()),iG,bj_UNIT_FACING)call RemoveLocation(iG)set fP=bj_lastCreatedUnitcall GroupAddUnit(EX,fP)call ShowUnitHide(fP)call UnitAddAbility(fP,'A07L')call SetUnitAbilityLevelSwapped('A07L',fP,TY)call IssueImmediateOrderById(fP,852096)call PolledWait(.05)set iG=GetUnitLoc(fP)call TerrainDeformationRippleBJ(.03,false,iG,(150.+(100.*I2R(TY))),(150.+(100.*I2R(TY))),72.,.03,512)call RemoveLocation(iG)set TY=TY+1endloopcall PolledWait(2)call ForGroupBJ(EX,function TX)call RemoveLocation(iG)call DestroyGroup(EX)endfunctionfunction hr takes nothing returns nothingset dI=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(dI,EVENT_PLAYER_UNIT_SPELL_FINISH)call TriggerAddCondition(dI,Condition(function Tx))call TriggerAddAction(dI,function Ty)call fT('A07L')endfunctionfunction TZ takes nothing returns booleanif(not(GetSpellAbilityId()=='A0H0'))thenreturn falseendifreturn trueendfunctionfunction T0 takes nothing returns nothinglocal unit T1local unit T2=GetTriggerUnit()local unit array T3local integer Mfcall EnableTrigger(dJ)set T1=CreateUnit(GetOwningPlayer(T2),'e00Q',GetUnitX(T2),GetUnitY(T2),bj_UNIT_FACING)call SetUnitPathing(T1,false)call SetUnitInvulnerable(T1,true)call UnitAddAbility(T1,'Aloc')call UnitAddAbility(T1,'A0HM')call UnitAddAbility(T1,'A0HO')call PolledWait(.25)call SetUnitAbilityLevelSwapped('A0HM',T1,GetUnitAbilityLevelSwapped('A0H0',T2))call SetUnitAbilityLevelSwapped('A0HO',T1,GetUnitAbilityLevelSwapped('A0H0',T2))call IssueImmediateOrderById(T1,852177)call IssueTargetOrderById(T1,852069,T2)set Mf=1set T3[Mf]=CreateUnit(GetOwningPlayer(T2),'e00Q',GetUnitX(T2)+150,GetUnitY(T2)+150,bj_UNIT_FACING)call SetUnitTimeScalePercent(T3[Mf],.0)call SetUnitPathing(T3[Mf],false)call SetUnitInvulnerable(T3[Mf],true)call UnitAddAbility(T3[Mf],'Aloc')set Mf=2set T3[Mf]=CreateUnit(GetOwningPlayer(T2),'e00Q',GetUnitX(T2)+150,GetUnitY(T2)-150,bj_UNIT_FACING)call SetUnitTimeScalePercent(T3[Mf],.0)call SetUnitPathing(T3[Mf],false)call SetUnitInvulnerable(T3[Mf],true)call UnitAddAbility(T3[Mf],'Aloc')set Mf=3set T3[Mf]=CreateUnit(GetOwningPlayer(T2),'e00Q',GetUnitX(T2)-150,GetUnitY(T2)+150,bj_UNIT_FACING)call SetUnitTimeScalePercent(T3[Mf],.0)call SetUnitPathing(T3[Mf],false)call SetUnitInvulnerable(T3[Mf],true)call UnitAddAbility(T3[Mf],'Aloc')set Mf=4set T3[Mf]=CreateUnit(GetOwningPlayer(T2),'e00Q',GetUnitX(T2)-150,GetUnitY(T2)-150,bj_UNIT_FACING)call SetUnitTimeScalePercent(T3[Mf],.0)call SetUnitPathing(T3[Mf],false)call SetUnitInvulnerable(T3[Mf],true)call UnitAddAbility(T3[Mf],'Aloc')call PolledWait(20*GetUnitAbilityLevel(T2,'A0H0'))if(T3[1]!=null)thencall RemoveUnit(T3[1])endifif(T3[2]!=null)thencall RemoveUnit(T3[2])endifif(T3[3]!=null)thencall RemoveUnit(T3[3])endifif(T3[4]!=null)thencall RemoveUnit(T3[4])endifendfunctionfunction hR takes nothing returns nothingset dj=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(dj,EVENT_PLAYER_UNIT_SPELL_CHANNEL)call TriggerAddCondition(dj,Condition(function TZ))call TriggerAddAction(dj,function T0)endfunctionfunction T4 takes nothing returns booleanif(not(GetSpellAbilityId()=='A0H0'))thenreturn falseendifreturn trueendfunctionfunction T5 takes nothing returns booleanreturn(GetUnitTypeId(GetFilterUnit())=='e00Q')endfunctionfunction T6 takes nothing returns nothingcall RemoveUnit(GetEnumUnit())endfunctionfunction Trig_Sand_Storm_Turn_Off_Func005001002 takes nothing returns booleanreturn(GetUnitTypeId(GetFilterUnit())=='U00K')endfunctionfunction Trig_Sand_Storm_Turn_Off_Func005A takes nothing returns nothingcall UnitRemoveAbility(GetEnumUnit(),'B04R')endfunctionfunction T7 takes nothing returns nothinglocal unit T2=GetTriggerUnit()local group EXcall PolledWait(GetUnitAbilityLevel(T2,'A0H0')*.3)set EX=GetUnitsOfPlayerMatching(GetOwningPlayer(T2),Condition(function T5))call ForGroupBJ(EX,function T6)call UnitRemoveAbility(T2,'B04R')call DestroyGroup(EX)endfunctionfunction hs takes nothing returns nothingset dJ=CreateTrigger()call DisableTrigger(dJ)call TriggerRegisterAnyUnitEventBJ(dJ,EVENT_PLAYER_UNIT_SPELL_ENDCAST)call TriggerAddCondition(dJ,Condition(function T4))call TriggerAddAction(dJ,function T7)endfunctionfunction T8 takes nothing returns booleanif(not(GetSpellAbilityId()=='A01W'))thenreturn falseendifreturn trueendfunctionfunction T9 takes nothing returns nothinglocal location iG=GetUnitLoc(GetTriggerUnit())call CreateNUnitsAtLoc(1,'e00E',GetOwningPlayer(GetTriggerUnit()),iG,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,'A0M9')call SetUnitAbilityLevel(bj_lastCreatedUnit,'A0M9',GetUnitAbilityLevel(GetTriggerUnit(),'A01W'))call IssueImmediateOrderById(bj_lastCreatedUnit,852096)call RemoveLocation(iG)endfunctionfunction hS takes nothing returns nothingset dk=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(dk,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(dk,Condition(function T8))call TriggerAddAction(dk,function T9)endfunctionfunction ua takes nothing returns integerreturn'A0HW'endfunctionfunction uA takes nothing returns integerreturn'A0I2'endfunctionfunction ub takes nothing returns integerreturn'A0HY'endfunctionfunction uB takes nothing returns integerreturn'B047'endfunctionfunction uc takes nothing returns integerreturn'h002'endfunctionfunction uC takes nothing returns integerreturn'h003'endfunctionfunction ud takes nothing returns nothinglocal timer t=GetExpiredTimer()local string f8=e4(t)local unit fP=EC(f8,"UnitVar")local unit e6=EC(f8,"Owner")local unit Jzlocal real O7=Ei(f8,"Duration")local integer m8=GetUnitAbilityLevel(e6,ua())local real uD=Ei(f8,"x")local real ue=Ei(f8,"y")local real pG=GetUnitX(fP)local real ph=GetUnitY(fP)if(pG-uD)*(pG-uD)+(ph-ue)*(ph-ue)>900 thenset Jz=CreateUnit(GetOwningPlayer(e6),uc(),GetUnitX(fP),GetUnitY(fP),0)call SetUnitAbilityLevel(Jz,uA(),m8)call SetUnitAbilityLevel(Jz,ub(),m8)call UnitApplyTimedLife(Jz,'BTLF',7)call Eb(f8,"x",pG)call Eb(f8,"y",ph)endifset O7=O7+.2call Eb(f8,"Duration",O7)if O7>7 or GetUnitState(fP,UNIT_STATE_LIFE)<1 thencall PauseTimer(t)call e5(f8)endifendfunctionfunction uE takes nothing returns nothinglocal unit Fd=GetEnumUnit()local sound filocal timer tlocal string f8call UnitDamageTarget(Ai,Fd,AJ,true,true,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)call GroupAddUnit(Aq,Fd)if IsUnitType(Fd,UNIT_TYPE_HERO) thenset t=CreateTimer()set f8=e4(t)set fi=CreateSound("Sounds\\Spectral Dagger.mp3",false,true,true,10,10,"DefaultEAXON")call SetSoundPosition(fi,GetUnitX(Fd),GetUnitY(Fd),0)call SetSoundDistanceCutoff(fi,700)call StartSound(fi)call KillSoundWhenDone(fi)call e7(f8,"UnitVar",Fd)call e7(f8,"Owner",Ai)call Eb(f8,"x",GetUnitX(Fd))call Eb(f8,"y",GetUnitY(Fd))call TimerStart(t,.2,true,function ud)endifendfunctionfunction uf takes nothing returns booleanreturn IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(Ai))and IsUnitInGroup(GetFilterUnit(),Aq)==false and GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0 and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>1 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==falseendfunctionfunction uF takes nothing returns nothinglocal timer t=GetExpiredTimer()local string f8=e4(t)local group M2=EE(f8,"AlreadyDamaged")local group EX=CreateGroup()local boolexpr Ey=Condition(function uf)local unit fw=EC(f8,"Hero")local unit pg=EC(f8,"Projectile")local unit Fd=EC(f8,"Target")local real EW=GetUnitX(Fd)local real Ex=GetUnitY(Fd)local real Fe=GetUnitX(pg)local real FE=GetUnitY(pg)local real nr=Atan2(Ex-FE,EW-Fe)local real pG=fs(GetUnitX(pg)+30*Cos(nr))local real ph=ft(GetUnitY(pg)+30*Sin(nr))local unit Jzlocal integer m8=GetUnitAbilityLevel(fw,ua())if EI(f8,"TrailNext")thencall Ec(f8,"TrailNext",false)set Jz=CreateUnit(GetOwningPlayer(fw),uc(),Fe,FE,0)call SetUnitAbilityLevel(Jz,uA(),m8)call SetUnitAbilityLevel(Jz,ub(),m8)call UnitApplyTimedLife(Jz,'BTLF',12)elsecall Ec(f8,"TrailNext",true)endifcall SetUnitX(pg,pG)call SetUnitY(pg,ph)call SetUnitFacing(pg,nr*bj_RADTODEG)set Aq=M2set Ai=fwset AJ=50*GetUnitAbilityLevel(fw,ua())call GroupEnumUnitsInRange(EX,pG,ph,150,Ey)call ForGroup(EX,function uE)call DestroyGroup(EX)call DestroyBoolExpr(Ey)if(pG-EW)*(pG-EW)+(ph-Ex)*(ph-Ex)<1600 thencall PauseTimer(t)call e5(f8)call KillUnit(pg)call DestroyGroup(M2)endifendfunctionfunction ug takes nothing returns nothinglocal timer t=GetExpiredTimer()local string f8=e4(t)local group M2=EE(f8,"AlreadyDamaged")local group EX=CreateGroup()local boolexpr Ey=Condition(function uf)local unit fw=EC(f8,"Hero")local unit pg=EC(f8,"Projectile")local real EW=Ei(f8,"TargetX")local real Ex=Ei(f8,"TargetY")local real Fe=GetUnitX(pg)local real FE=GetUnitY(pg)local real nr=Ei(f8,"Angle")local real pG=fs(GetUnitX(pg)+30*Cos(nr))local real ph=ft(GetUnitY(pg)+30*Sin(nr))local unit Jzlocal integer m8=GetUnitAbilityLevel(fw,ua())if EI(f8,"TrailNext")thencall Ec(f8,"TrailNext",false)set Jz=CreateUnit(GetOwningPlayer(fw),uc(),Fe,FE,0)call SetUnitAbilityLevel(Jz,uA(),m8)call SetUnitAbilityLevel(Jz,ub(),m8)call UnitApplyTimedLife(Jz,'BTLF',12)elsecall Ec(f8,"TrailNext",true)endifcall SetUnitX(pg,pG)call SetUnitY(pg,ph)set Aq=M2set Ai=fwset AJ=50*GetUnitAbilityLevel(fw,ua())call GroupEnumUnitsInRange(EX,pG,ph,150,Ey)call ForGroup(EX,function uE)call DestroyGroup(EX)call DestroyBoolExpr(Ey)if(pG-EW)*(pG-EW)+(ph-Ex)*(ph-Ex)<1600 thencall PauseTimer(t)call e5(f8)call KillUnit(pg)call DestroyGroup(M2)endifendfunctionfunction uG takes unit fP,integer fZ returns booleanif(GetItemTypeId(UnitItemInSlot(fP,fZ))=='pspd')thenreturn trueendifif(GetItemTypeId(UnitItemInSlot(fP,fZ))=='oflg')thenreturn trueendifreturn falseendfunctionfunction uh takes nothing returns nothinglocal timer t=GetExpiredTimer()local string f8=e4(t)local unit fw=EC(f8,"Hero")local real O7=Ei(f8,"Duration")local integer ER=0loopexitwhen ER>5if uG(fw,ER)thenif GetUnitAbilityLevel(fw,uB())==0 thencall SetItemDropOnDeath(UnitItemInSlot(fw,ER),true)if GetItemTypeId(UnitItemInSlot(fw,ER))=='oflg'thencall SetItemDroppable(UnitItemInSlot(fw,ER),true)endifelsecall SetItemDropOnDeath(UnitItemInSlot(fw,ER),false)if GetItemTypeId(UnitItemInSlot(fw,ER))=='oflg'thencall SetItemDroppable(UnitItemInSlot(fw,ER),false)endifendifendifset ER=ER+1endloopset O7=O7+.2call Eb(f8,"Duration",O7)if GetUnitAbilityLevel(fw,uB())==0 thencall SetUnitPathing(fw,true)elsecall SetUnitPathing(fw,false)endifif O7>20 thencall PauseTimer(t)call e5(f8)call SetUnitPathing(fw,true)set ER=0loopexitwhen ER>5if uG(fw,ER)thencall SetItemDropOnDeath(UnitItemInSlot(fw,ER),true)if GetItemTypeId(UnitItemInSlot(fw,ER))=='oflg'thencall SetItemDroppable(UnitItemInSlot(fw,ER),true)endifendifset ER=ER+1endloopendifendfunctionfunction uH takes nothing returns booleanreturn GetSpellAbilityId()==ua()endfunctionfunction ui takes nothing returns nothinglocal unit fw=GetTriggerUnit()local unit Fd=GetSpellTargetUnit()local real Fe=fs(GetUnitX(fw))local real FE=ft(GetUnitY(fw))local unit pg=CreateUnit(GetOwningPlayer(fw),uC(),Fe,FE,0)local timer t=CreateTimer()local string f8=e4(t)local group M2=CreateGroup()local location NAlocal real nrlocal real EWlocal real Excall SetUnitPathing(pg,false)call e7(f8,"AlreadyDamaged",M2)call e7(f8,"Hero",fw)call e7(f8,"Projectile",pg)if Fd!=null thencall e7(f8,"Target",Fd)call TimerStart(t,.035,true,function uF)elseset NA=GetSpellTargetLoc()set EW=GetLocationX(NA)set Ex=GetLocationY(NA)set nr=Atan2(Ex-FE,EW-Fe)call SetUnitFacing(pg,nr*bj_RADTODEG)set EW=fs(Fe+2100*Cos(nr))set Ex=ft(FE+2100*Sin(nr))call Eb(f8,"TargetX",EW)call Eb(f8,"TargetY",Ex)call Eb(f8,"Angle",nr)call TimerStart(t,.035,true,function ug)endifset t=CreateTimer()set f8=e4(t)call SetUnitPathing(fw,false)call e7(f8,"Hero",fw)call PolledWait(3)call TimerStart(t,.2,true,function uh)endfunctionfunction h9 takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function uH))call TriggerAddAction(t,function ui)call CreateSound("Sounds\\Spectral Dagger.mp3",false,false,false,10,10,"DefaultEAXON")call fT(uA())call fT(ub())endfunctionfunction uI takes nothing returns booleanreturn IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO) and GetUnitAbilityLevel(GetAttacker(),'A0FX')>0endfunctionfunction uj takes nothing returns booleanreturn IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0 and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>1 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==falseendfunctionfunction uJ takes nothing returns nothinglocal unit KJ=GetAttacker()local unit nO=GetTriggerUnit()local group EX=CreateGroup()local boolexpr Ey=Condition(function uj)local string f8call GroupEnumUnitsInRange(EX,GetUnitX(nO),GetUnitY(nO),900,Ey)call GroupRemoveUnit(EX,nO)if FirstOfGroup(EX)==null thenset f8=e4(KJ)if EI(f8,"Desolate|InCooldown")==false thencall UnitDamageTarget(KJ,nO,5+10*GetUnitAbilityLevel(KJ,'A0FX'),true,true,ATTACK_TYPE_HERO,DAMAGE_TYPE_DIVINE,WEAPON_TYPE_WHOKNOWS)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayTarget.mdl",nO,"overhead"))call Ec(f8,"Desolate|InCooldown",true)call PolledWait(.4)call Ec(f8,"Desolate|InCooldown",false)endifendifcall DestroyGroup(EX)call DestroyBoolExpr(Ey)endfunctionfunction Ha takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(t,Condition(function uI))call TriggerAddAction(t,function uJ)endfunctionfunction uk takes nothing returns booleanreturn IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0 and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))endfunctionfunction uK takes nothing returns nothinglocal unit fw=GetTriggerUnit()local unit Fd=GetEnumUnit()local unit Jz=CreateUnit(GetOwningPlayer(fw),'e00E',GetUnitX(fw),GetUnitY(fw),0)local real Fa=AJcall UnitAddAbility(Jz,'A0NN')call IssueTargetOrderById(Jz,852095,Fd)call UnitDamageTarget(fw,Fd,Fa,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)endfunctionfunction ul takes nothing returns booleanreturn GetRandomInt(1,'d')<=GetUnitAbilityLevel(GetTriggerUnit(),'A0NA')*4 and GetEventDamage()>5 and GetUnitTypeId(GetEventDamageSource())!='nfoh'and GetUnitTypeId(GetEventDamageSource())!='ndfl'endfunctionfunction uL takes nothing returns nothinglocal unit fw=GetTriggerUnit()local unit Jzlocal group EX=CreateGroup()local real Fa=GetEventDamage()local boolexpr Ey=Condition(function uk)local real FB=GetUnitState(fw,UNIT_STATE_LIFE)set AJ=f5(Fa,FB)call FA(fw,Fa)call GroupEnumUnitsInRange(EX,GetUnitX(fw),GetUnitY(fw),400,Ey)call ForGroup(EX,function uK)call DestroyGroup(EX)call DestroyBoolExpr(Ey)set Jz=CreateUnit(GetOwningPlayer(fw),'e01Q',GetUnitX(fw),GetUnitY(fw),0)call SetUnitPathing(Jz,false)call SetUnitInvulnerable(Jz,true)call SetUnitAnimation(Jz,"Death")call PolledWait(2)call RemoveUnit(Jz)endfunctionfunction um takes nothing returns booleanreturn GetLearnedSkill()=='A0NA'and GetUnitAbilityLevel(GetTriggerUnit(),'A0NA')==1 and IsUnitIllusion(GetTriggerUnit())==falseendfunctionfunction uM takes nothing returns nothinglocal trigger t=CreateTrigger()local unit fw=GetTriggerUnit()call TriggerRegisterUnitEvent(t,fw,EVENT_UNIT_DAMAGED)call TriggerAddCondition(t,Condition(function ul))call TriggerAddAction(t,function uL)endfunctionfunction HA takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function um))call TriggerAddAction(t,function uM)endfunctionfunction un takes nothing returns booleanreturn GetSpellAbilityId()=='A0H9'endfunctionfunction uN takes nothing returns nothinglocal unit Fd=GetEnumUnit()local unit fw=GetTriggerUnit()local unit Jz=CreateUnit(GetOwningPlayer(fw),'e00E',GetUnitX(Fd),GetUnitY(Fd),0)call e7(e4(Jz),"HauntTarget",Fd)call UnitAddAbility(Jz,'A0N9')call SetUnitAbilityLevel(Jz,'A0N9',GetUnitAbilityLevel(fw,'A0H9'))call IssueTargetOrderById(Jz,852274,fw)endfunctionfunction uo takes nothing returns booleanreturn IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))endfunctionfunction uO takes nothing returns nothinglocal string f8=e4(GetTriggeringTrigger())local unit up=EC(f8,"HauntImage")local unit Fd=EC(f8,"HauntTarget")if GetTriggerEventId()==EVENT_UNIT_DEATH thencall DisableTrigger(GetTriggeringTrigger())call e5(e4(GetTriggeringTrigger()))if Fd==GetTriggerUnit()thencall KillUnit(up)endifelseif IsUnitPaused(up)==false thencall DisableTrigger(GetTriggeringTrigger())call IssueTargetOrderById(up,851983,Fd)call EnableTrigger(GetTriggeringTrigger())endifendfunctionfunction uP takes nothing returns booleanreturn GetUnitAbilityLevel(GetSummonedUnit(),'B06L')>0endfunctionfunction uq takes nothing returns nothinglocal unit Jz=GetSummoningUnit()local unit up=GetSummonedUnit()local unit Fd=EC(e4(Jz),"HauntTarget")local trigger t=CreateTrigger()call e7(e4(ay[GetPlayerId(GetOwningPlayer(Jz))]),"HauntTarget"+e4(up),Fd)call SetUnitPathing(up,false)call SetUnitMoveSpeed(up,400)call SetUnitX(up,GetUnitX(Fd))call SetUnitY(up,GetUnitY(Fd))call IssueTargetOrderById(up,851983,Fd)call TriggerRegisterUnitEvent(t,up,EVENT_UNIT_ISSUED_TARGET_ORDER)call TriggerRegisterUnitEvent(t,up,EVENT_UNIT_ISSUED_POINT_ORDER)call TriggerRegisterUnitEvent(t,up,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(t,Fd,EVENT_UNIT_DEATH)call TriggerRegisterTimerEvent(t,.5,true)call TriggerAddAction(t,function uO)call e7(e4(t),"HauntTarget",Fd)call e7(e4(t),"HauntImage",up)call e5(e4(Jz))endfunctionfunction uQ takes nothing returns nothinglocal unit fw=GetTriggerUnit()local group EX=CreateGroup()local boolexpr Ey=Condition(function uo)local sound ficall GroupEnumUnitsInRect(EX,bj_mapInitialPlayableArea,Ey)call ForGroup(EX,function uN)if FirstOfGroup(EX)!=null thenset fi=CreateSound("Abilities\\Spells\\Other\\ANsa\\SacrificeUnit.wav",false,false,false,10,10,"DefaultEAXON")call StartSound(fi)call KillSoundWhenDone(fi)endifcall DestroyBoolExpr(Ey)call DestroyGroup(EX)endfunctionfunction ur takes nothing returns booleanreturn GetLearnedSkill()=='A0H9'and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),'A0H9')==1endfunctionfunction uR takes nothing returns nothingcall UnitAddAbility(GetTriggerUnit(),'A0HA')endfunctionfunction Hb takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function un))call TriggerAddAction(t,function uQ)set t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SUMMON)call TriggerAddCondition(t,Condition(function uP))call TriggerAddAction(t,function uq)set t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function ur))call TriggerAddAction(t,function uR)call CreateSound("Abilities\\Spells\\Other\\ANsa\\SacrificeUnit.wav",false,false,false,10,10,"DefaultEAXON")call fT('A0N9')endfunctionfunction us takes nothing returns booleanreturn GetSpellAbilityId()=='A0HA'endfunctionfunction uS takes nothing returns booleanreturn GetUnitAbilityLevel(GetFilterUnit(),'B06L')>0endfunctionfunction ut takes nothing returns nothinglocal unit fPlocal real FD=FF(GetEnumUnit(),GetSpellTargetLoc())if FD<AJ thenset Ai=GetEnumUnit()set AJ=FDendifendfunctionfunction uT takes nothing returns unitlocal group EX=CreateGroup()local boolexpr Ey=Condition(function uS)set Ai=nullset AJ=9999999call GroupEnumUnitsOfPlayer(EX,GetOwningPlayer(GetTriggerUnit()),Ey)call ForGroup(EX,function ut)call DestroyBoolExpr(Ey)call DestroyGroup(EX)return Aiendfunctionfunction uu takes nothing returns nothinglocal unit fw=GetTriggerUnit()local unit Fd=uT()local unit uU=EC(e4(fw),"HauntTarget"+e4(Fd))local real EWlocal real Exif Fd==null thencall fI(GetOwningPlayer(fw),"Cannot find any of your Haunting illusions")elseset EW=GetUnitX(Fd)set Ex=GetUnitY(Fd)call KillUnit(Fd)call SetUnitX(fw,EW)call SetUnitY(fw,Ex)call PanCameraToTimedForPlayer(GetOwningPlayer(fw),EW,Ex,0)call IssueTargetOrderById(fw,851983,uU)endifendfunctionfunction Reality_CheckValid takes nothing returns nothinglocal unit fw=GetTriggerUnit()local unit Fd=uT()if Fd==null thencall fp(fw)call fI(GetOwningPlayer(fw),"Cannot find any of your Haunting illusions")endifendfunctionfunction HB takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function us))call TriggerAddAction(t,function uu)endfunctionfunction uv takes nothing returns booleanreturn GetSpellAbilityId()=='A0ML'endfunctionfunction uV takes nothing returns nothinglocal trigger t=GetTriggeringTrigger()local string f8=e4(t)local unit uw=EC(f8,"Spiritbreaker")local unit Fd=EC(f8,"Target")local unit Jz=EC(f8,"Caster")local trigger uW=Ee(f8,"TrigAttack")local trigger ux=Ee(f8,"TrigAccelerate")call DisableTrigger(uW)call DisableTrigger(ux)call DisableTrigger(t)call RemoveUnit(Jz)call UnitRemoveAbility(uw,'B01Z')call UnitRemoveAbility(Fd,'B01Y')call SetUnitPathing(uw,true)call SetUnitVertexColorBJ(uw,'d','d','d',0)call PolledWait(1)call e5(e4(uW))call Fj(uW)call e5(e4(ux))call Fj(ux)call e5(f8)call Fj(t)endfunctionfunction uX takes nothing returns booleanreturn EC(e4(GetTriggeringTrigger()),"Spiritbreaker")==GetAttacker()endfunctionfunction uy takes nothing returns nothinglocal trigger t=GetTriggeringTrigger()local string f8=e4(t)local unit uw=EC(f8,"Spiritbreaker")local unit Fd=EC(f8,"Target")local unit Jz=EC(f8,"Caster")local integer m8=GetUnitAbilityLevel(uw,'A0ML')local unit uY=CreateUnit(GetOwningPlayer(uw),'e00E',GetUnitX(uw),GetUnitY(uw),0)local trigger uz=Ee(f8,"TrigOff")local trigger ux=Ee(f8,"TrigAccelerate")call DisableTrigger(t)call DisableTrigger(uz)call DisableTrigger(ux)call UnitAddAbility(uY,'A0GS')call SetUnitAbilityLevel(uY,'A0GS',m8)call IssueTargetOrderById(uY,852095,Fd)call RemoveUnit(Jz)call UnitRemoveAbility(uw,'B01Z')call UnitRemoveAbility(Fd,'B01Y')call SetUnitPathing(uw,true)call SetUnitVertexColorBJ(uw,'d','d','d',0)call PolledWait(1)call e5(e4(uz))call Fj(uz)call e5(e4(ux))call Fj(ux)call e5(f8)call Fj(t)endfunctionfunction uZ takes nothing returns nothinglocal string f8=e4(GetTriggeringTrigger())local unit uw=EC(f8,"Spiritbreaker")local unit Fd=EC(f8,"Target")local unit Jz=EC(f8,"Caster")local integer Sh=EH(f8,"Ability")local integer u0=GetTriggerExecCount(GetTriggeringTrigger())local integer u1=GetUnitAbilityLevel(uw,'A0ML')local trigger uz=Ee(f8,"TrigOff")local trigger uW=Ee(f8,"TrigAttack")call SetUnitVertexColorBJ(uw,'d','d','d',u1*u0)if ModuloInteger(u0,4)==0 thencall SetUnitAbilityLevel(Jz,Sh,GetUnitAbilityLevel(Jz,Sh)+1)endifcall DisableTrigger(uz)call DisableTrigger(uW)call IssueTargetOrderById(uw,851983,Fd)call EnableTrigger(uz)call EnableTrigger(uW)if GetUnitAbilityLevel(Fd,'B01Z')==0 thencall IssueTargetOrderById(uw,851983,Fd)endifendfunctionfunction u2 takes nothing returns nothinglocal unit uw=GetTriggerUnit()local unit Fd=GetSpellTargetUnit()local integer m8=GetUnitAbilityLevel(uw,'A0ML')local integer Shlocal location iG=GetUnitLoc(uw)local unit Jzlocal trigger ux=CreateTrigger()local trigger uz=CreateTrigger()local trigger uW=CreateTrigger()call UnitShareVision(Fd,GetOwningPlayer(uw),true)set Jz=CreateUnit(GetOwningPlayer(uw),'e00C',GetUnitX(uw),GetUnitY(uw),0)call SetUnitPathing(Jz,false)call UnitAddAbility(Jz,'Aloc')call e7(e4(GetOwningPlayer(uw)),"ChargeUnit",Jz)call SetUnitInvulnerable(Jz,true)if(m8==1)thencall UnitAddAbility(Jz,'A0GE')set Sh='A0GE'elseif(m8==2)thencall UnitAddAbility(Jz,'A0GF')set Sh='A0GF'elseif(m8==3)thencall UnitAddAbility(Jz,'A0GG')set Sh='A0GG'elseif(m8==4)thencall UnitAddAbility(Jz,'A0GH')set Sh='A0GH'endifcall PolledWait(.1)call UnitAddAbility(Jz,'A0GJ')call IssueTargetOrderById(Jz,852149,Fd)call IssueTargetOrderById(uw,851983,Fd)call SetUnitPathing(uw,false)call TriggerRegisterTimerEvent(ux,1.,true)call TriggerAddAction(ux,function uZ)call e7(e4(ux),"TrigOff",uz)call e7(e4(ux),"TrigAttack",uW)call e7(e4(ux),"Spiritbreaker",uw)call e7(e4(ux),"Caster",Jz)call e7(e4(ux),"Target",Fd)call Ea(e4(ux),"Ability",Sh)call TriggerRegisterUnitEvent(uW,Fd,EVENT_UNIT_ATTACKED)call TriggerAddCondition(uW,Condition(function uX))call TriggerAddAction(uW,function uy)call e7(e4(uW),"TrigOff",uz)call e7(e4(uW),"TrigAccelerate",ux)call e7(e4(uW),"Spiritbreaker",uw)call e7(e4(uW),"Caster",Jz)call e7(e4(uW),"Target",Fd)call TriggerRegisterUnitEvent(uz,uw,EVENT_UNIT_ISSUED_ORDER)call TriggerRegisterUnitEvent(uz,uw,EVENT_UNIT_ISSUED_POINT_ORDER)call TriggerRegisterUnitEvent(uz,uw,EVENT_UNIT_ISSUED_TARGET_ORDER)call TriggerRegisterUnitEvent(uz,uw,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(uz,Fd,EVENT_UNIT_DEATH)call TriggerAddAction(uz,function uV)call e7(e4(uz),"TrigAttack",uW)call e7(e4(uz),"TrigAccelerate",ux)call e7(e4(uz),"Spiritbreaker",uw)call e7(e4(uz),"Caster",Jz)call e7(e4(uz),"Target",Fd)call PolledWait(.1)call UnitShareVision(Fd,GetOwningPlayer(uw),false)if GetUnitState(uw,UNIT_STATE_LIFE)<=0 thencall e5(e4(ux))call e5(e4(uW))call e5(e4(uz))call DisableTrigger(ux)call DisableTrigger(uW)call DisableTrigger(uz)call PolledWait(1)call Fj(ux)call Fj(uW)call Fj(uz)call RemoveUnit(Jz)endifendfunctionfunction ht takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function uv))call TriggerAddAction(t,function u2)endfunctionfunction u3 takes nothing returns booleanreturn GetUnitAbilityLevel(GetAttacker(),'A0ES')>0 and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetAttacker()))endfunctionfunction u4 takes nothing returns nothinglocal unit KJ=GetAttacker()local unit nO=GetTriggerUnit()local real Fa=GetUnitMoveSpeed(KJ)*.04*GetUnitAbilityLevel(KJ,'A0ES')call DisableTrigger(GetTriggeringTrigger())call UnitDamageTargetBJ(KJ,nO,Fa,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_NORMAL)call PolledWait(.5)call EnableTrigger(GetTriggeringTrigger())endfunctionfunction hT takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(t,Condition(function u3))call TriggerAddAction(t,function u4)endfunctionfunction u5 takes nothing returns booleanreturn GetUnitAbilityLevel(GetAttacker(),'A0G5')>0 and IsUnitIllusion(GetAttacker())==false and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitTypeId(GetTriggerUnit())!='n00L'and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetAttacker()))and GetRandomInt(1,'d')<=17endfunctionfunction u6 takes nothing returns nothinglocal timer t=GetExpiredTimer()local string f8=e4(t)local unit nO=EC(f8,"Defender")local real nr=Ei(f8,"Angle")local integer u7=EH(f8,"Brake")local real u8=Ei(f8,"Movement")local location u9if u7==1 thencall Eb(f8,"Movement",u8*.98)endifif(GetUnitState(nO,UNIT_STATE_LIFE)>0)thenset u9=GetUnitLoc(nO)call EnumDestructablesInCircleBJ(150.,u9,function fv)call DestroyEffect(AddSpellEffectByIdLoc('A0G5',EFFECT_TYPE_SPECIAL,u9))call RemoveLocation(u9)call SetUnitPosition(nO,GetUnitX(nO)+u8*Cos(nr),GetUnitY(nO)+u8*Sin(nr))endifendfunctionfunction Ua takes nothing returns nothinglocal timer t=CreateTimer()local string f8=e4(t)local unit nO=GetTriggerUnit()local unit KJ=GetAttacker()local real nr=Atan2(GetUnitY(nO)-GetUnitY(KJ),GetUnitX(nO)-GetUnitX(KJ))local integer m8=GetUnitAbilityLevel(KJ,'A0G5')call DestroyEffect(AddSpecialEffectTargetUnitBJ("weapon",KJ,"Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl"))call DisableTrigger(GetTriggeringTrigger())call e7(f8,"Defender",nO)call Eb(f8,"Angle",nr)call Eb(f8,"Movement",2)call Ea(f8,"Brake",0)call UnitDamageTargetBJ(KJ,nO,25*m8,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_UNKNOWN)call TimerStart(t,.01,true,function u6)call PolledWait(.1)call Ea(f8,"Brake",1)call PolledWait(.4+m8*.2)call PauseTimer(t)call PolledWait(1.25)call EnableTrigger(GetTriggeringTrigger())call e5(f8)call DestroyTimer(t)endfunctionfunction hu takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(t,Condition(function u5))call TriggerAddAction(t,function Ua)endfunctionfunction UA takes nothing returns booleanreturn GetSpellAbilityId()=='A0G4'endfunctionfunction Ub takes nothing returns nothinglocal timer t=GetExpiredTimer()local string f8=e4(t)local unit nO=EC(f8,"Defender")local real nr=Ei(f8,"Angle")local integer u7=EH(f8,"Brake")local real u8=Ei(f8,"Movement")local location u9if u7==1 thencall Eb(f8,"Movement",u8*.98)endifif(GetUnitState(nO,UNIT_STATE_LIFE)>0)thenset u9=GetUnitLoc(nO)call EnumDestructablesInCircleBJ(150.,u9,function fv)call DestroyEffect(AddSpellEffectByIdLoc('A0G5',EFFECT_TYPE_SPECIAL,u9))call RemoveLocation(u9)call SetUnitPosition(nO,GetUnitX(nO)+u8*Cos(nr),GetUnitY(nO)+u8*Sin(nr))endifendfunctionfunction UB takes nothing returns nothinglocal timer t=CreateTimer()local string f8=e4(t)local unit KJ=Ailocal unit nO=Aplocal real nr=Atan2(GetUnitY(nO)-GetUnitY(KJ),GetUnitX(nO)-GetUnitX(KJ))local integer m8=GetUnitAbilityLevel(KJ,'A0G5')call DestroyEffect(AddSpecialEffectTargetUnitBJ("weapon",KJ,"Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl"))call e7(f8,"Defender",nO)call Eb(f8,"Angle",nr)call Eb(f8,"Movement",2)call Ea(f8,"Brake",0)call UnitDamageTargetBJ(KJ,nO,25*m8,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_UNKNOWN)call TimerStart(t,.01,true,function Ub)call PolledWait(.1)call Ea(f8,"Brake",1)call PolledWait(.4+m8*.2)call PauseTimer(t)call PolledWait(1)call e5(f8)call DestroyTimer(t)endfunctionfunction Uc takes nothing returns nothinglocal unit Mu=EC(e4(GetTriggeringTrigger()),"caster")if(GetEventDamageSource()==Mu)thencall DisableTrigger(GetTriggeringTrigger())call UnitDamageTargetBJ(Mu,GetTriggerUnit(),'d'*I2R(GetUnitAbilityLevel(Mu,'A0G4')),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL)endifendfunctionfunction UC takes nothing returns nothinglocal string f8=e4(GetExpiredTimer())local integer Ud=EH(f8,"Fade")call SetUnitVertexColorBJ(EC(f8,"caster"),'d','d','d',Ud)call Ea(f8,"Fade",Ud+1)endfunctionfunction UD takes nothing returns nothinglocal string f8=e4(GetExpiredTimer())local integer Ud=EH(f8,"Fade")call SetUnitVertexColorBJ(EC(f8,"caster"),'d','d','d',Ud)call Ea(f8,"Fade",Ud-1)endfunctionfunction Ue takes nothing returns nothinglocal unit Mu=GetTriggerUnit()local unit fm=GetSpellTargetUnit()local timer t1=CreateTimer()local timer t2=CreateTimer()local location iGlocal location nKlocal trigger UE=CreateTrigger()call UnitShareVision(fm,GetOwningPlayer(Mu),true)call IssueImmediateOrder(Mu,"halt")call Ea(e4(t1),"Fade",0)call e7(e4(t1),"caster",Mu)call TimerStart(t1,.01,true,function UC)call PolledWait(1)call PauseTimer(t1)set iG=GetUnitLoc(fm)set nK=GetUnitLoc(Mu)call SetUnitPositionLocFacingLocBJ(Mu,PolarProjectionBJ(iG,80.,AngleBetweenPoints(nK,iG)),iG)set Ai=Muset Ap=fmcall ExecuteFunc("UB")call SetUnitAnimation(Mu,"attack")call IssueTargetOrderById(Mu,851983,fm)call TriggerRegisterUnitEvent(UE,fm,EVENT_UNIT_DAMAGED)call TriggerAddAction(UE,function Uc)call e7(e4(UE),"caster",Mu)call Ea(e4(t2),"Fade",'d')call e7(e4(t2),"caster",Mu)call TimerStart(t2,.01,true,function UD)call PolledWait(1)call PauseTimer(t2)call SetUnitVertexColorBJ(Mu,'d','d','d',0)call UnitShareVision(fm,GetOwningPlayer(Mu),false)call PolledWait(.01)call DestroyTimer(t1)call DestroyTimer(t2)call RemoveLocation(iG)call RemoveLocation(nK)endfunctionfunction hU takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function UA))call TriggerAddAction(t,function Ue)endfunctionfunction Uf takes nothing returns booleanreturn GetSpellAbilityId()=='A0H4'endfunctionfunction UF takes nothing returns nothinglocal unit fP=GetTriggerUnit()local integer m8=GetUnitAbilityLevel(fP,'A0H4')local unit Jz=CreateUnit(GetOwningPlayer(fP),'e00E',GetUnitX(fP),GetUnitY(fP),0)call UnitAddAbility(Jz,'A08Q')call SetUnitAbilityLevel(Jz,'A08Q',m8)call IssueTargetOrderById(Jz,852274,fP)endfunctionfunction hV takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function Uf))call TriggerAddAction(t,function UF)endfunctionfunction Ug takes nothing returns booleanreturn GetSpellAbilityId()=='A07Q'endfunctionfunction UG takes nothing returns booleanreturn GetSpellAbilityId()=='A07R'endfunctionfunction Uh takes nothing returns nothinglocal trigger t=GetTriggeringTrigger()local string f8=e4(t)local unit FC=EC(f8,"Source")local unit Fd=EC(f8,"Target")local real UH=Ei(f8,"SourceLifePercent")local real Ui=Ei(f8,"TargetLifePercent")local integer m8=GetUnitAbilityLevel(FC,'A07Q')if GetSpellTargetUnit()==FC thencall SetUnitLifePercentBJ(FC,Ui)endifif GetSpellTargetUnit()==Fd thencall SetUnitLifePercentBJ(Fd,UH)if GetUnitLifePercent(Fd)<33. and m8==1 thencall SetUnitLifePercentBJ(Fd,33.)endifif GetUnitLifePercent(Fd)<28. and m8==2 thencall SetUnitLifePercentBJ(Fd,28.)endifif GetUnitLifePercent(Fd)<23. and m8==3 thencall SetUnitLifePercentBJ(Fd,23.)endifendifif GetTriggerExecCount(t)==2 thencall DisableTrigger(t)call PolledWait(1)call e5(f8)call Fj(t)endifendfunctionfunction UI takes nothing returns nothinglocal trigger t=CreateTrigger()local string f8=e4(t)local unit FC=GetTriggerUnit()local unit Fd=GetSpellTargetUnit()local unit Jzcall e7(f8,"Source",FC)call e7(f8,"Target",Fd)call Eb(f8,"SourceLifePercent",GetUnitLifePercent(FC))call Eb(f8,"TargetLifePercent",GetUnitLifePercent(Fd))call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function UG))call TriggerAddAction(t,function Uh)set Jz=CreateUnit(GetOwningPlayer(Fd),'e00Y',GetUnitX(Fd),GetUnitY(Fd),0)call UnitAddAbility(Jz,'A07R')call IssueTargetOrderById(Jz,852095,FC)call ShowUnit(Jz,false)call SetUnitPathing(Jz,false)call SetUnitInvulnerable(Jz,true)call UnitApplyTimedLife(Jz,'BTLF',.2)set Jz=CreateUnit(GetOwningPlayer(FC),'e00Y',GetUnitX(FC),GetUnitY(FC),0)call UnitAddAbility(Jz,'A07R')call IssueTargetOrderById(Jz,852095,Fd)call ShowUnit(Jz,false)call SetUnitPathing(Jz,false)call SetUnitInvulnerable(Jz,true)call UnitApplyTimedLife(Jz,'BTLF',.2)endfunctionfunction hv takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function Ug))call TriggerAddAction(t,function UI)endfunctionfunction Uj takes nothing returns nothingcall UnitRemoveBuffsBJ(1,EC(e4(GetExpiredTimer()),"UnitVar"))endfunctionfunction UJ takes nothing returns booleanreturn GetLearnedSkill()=='A04E'and IsUnitIllusion(GetTriggerUnit())==falseendfunctionfunction Uk takes nothing returns nothinglocal unit fP=GetTriggerUnit()local integer m8=GetUnitAbilityLevel(fP,'A04E')local timer tif m8==1 thenset t=CreateTimer()call TimerStart(t,11,true,function Uj)call e7(e4(t),"UnitVar",fP)call e7(e4(fP),"KrakenTimer",t)elseset t=ED(e4(fP),"KrakenTimer")call TimerStart(t,12-m8,true,function Uj)endifendfunctionfunction hw takes nothing returns nothingset dK=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(dK,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(dK,Condition(function UJ))call TriggerAddAction(dK,function Uk)endfunctionfunction UK takes nothing returns booleanreturn GetSpellAbilityId()=='A046'endfunctionfunction Ul takes nothing returns nothinglocal unit t=GetSpellTargetUnit()local real UL=(60.+(50.*I2R(GetUnitAbilityLevelSwapped('A046',GetTriggerUnit()))))local effect k0=AddSpecialEffectTargetUnitBJ("chest",t,"Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl")call UnitDamageTargetBJ(GetTriggerUnit(),t,UL,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_COLD)call PolledWait(.1)call DestroyEffect(k0)endfunctionfunction hW takes nothing returns nothingset dl=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(dl,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(dl,Condition(function UK))call TriggerAddAction(dl,function Ul)endfunctionfunction Um takes nothing returns booleanreturn GetSpellAbilityId()=='A03Z'endfunctionfunction UM takes nothing returns nothinglocal location iG=GetUnitLoc(GetTriggerUnit())local location nKset bj_forLoopAIndex=1set bj_forLoopAIndexEnd=16loopexitwhen bj_forLoopAIndex>bj_forLoopAIndexEndcall CreateNUnitsAtLoc(1,'e00E',GetOwningPlayer(GetTriggerUnit()),iG,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,'A084')call SetUnitAbilityLevelSwapped('A084',bj_lastCreatedUnit,GetUnitAbilityLevelSwapped('A03Z',GetTriggerUnit()))set nK=PolarProjectionBJ(iG,100.,(22.5*I2R(bj_forLoopAIndex)))call IssuePointOrderByIdLoc(bj_lastCreatedUnit,852555,nK)call RemoveLocation(nK)set bj_forLoopAIndex=bj_forLoopAIndex+1endloopcall RemoveLocation(iG)endfunctionfunction hx takes nothing returns nothingset dL=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(dL,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(dL,Condition(function Um))call TriggerAddAction(dL,function UM)endfunctionfunction Un takes nothing returns booleanreturn GetSpellAbilityId()=='A0OR'endfunctionfunction UN takes nothing returns booleanreturn IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(Ai))and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0endfunctionfunction Uo takes nothing returns nothingcall FQ(Ai,GetEnumUnit(),dR,AJ)endfunctionfunction UO takes unit FC,unit Fd,real Fa returns nothinglocal group EX=CreateGroup()local boolexpr Ey=Condition(function UN)set Ai=FCset AJ=Facall GroupEnumUnitsInRange(EX,GetUnitX(Fd),GetUnitY(Fd),180,Ey)call ForGroup(EX,function Uo)call DestroyBoolExpr(Ey)call DestroyGroup(EX)endfunctionfunction Up takes nothing returns booleanreturn GetFilterUnit()!=Ai and IsUnitInGroup(GetFilterUnit(),Aq)==false and IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0 and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>1endfunctionfunction UP takes group Uq,unit UQ,unit FC returns unitlocal group EX=CreateGroup()local boolexpr Ey=Condition(function Up)local unit Ur=nulllocal unit URset Aq=Uqset Ai=FCcall GroupEnumUnitsInRange(EX,GetUnitX(UQ),GetUnitY(UQ),500,Ey)set UR=FirstOfGroup(EX)set Ur=URloopexitwhen UR==nullif GetUnitState(UR,UNIT_STATE_LIFE)!=GetUnitState(UR,UNIT_STATE_MAX_LIFE)thenif IsUnitType(UR,UNIT_TYPE_HERO) and IsUnitType(Ur,UNIT_TYPE_HERO)==false thenset Ur=URelseif GetUnitState(UR,UNIT_STATE_LIFE)<GetUnitState(Ur,UNIT_STATE_LIFE)and IsUnitType(UR,UNIT_TYPE_HERO) and IsUnitType(Ur,UNIT_TYPE_HERO) thenset Ur=URelseif IsUnitType(Ur,UNIT_TYPE_HERO)==false and GetUnitState(UR,UNIT_STATE_LIFE)<GetUnitState(Ur,UNIT_STATE_LIFE)thenset Ur=URendifendifcall GroupRemoveUnit(EX,UR)set UR=FirstOfGroup(EX)endloopcall DestroyGroup(EX)call DestroyBoolExpr(Ey)return Urendfunctionfunction Us takes nothing returns nothinglocal unit fw=GetTriggerUnit()local unit Fd=GetSpellTargetUnit()local string US="Abilities\\Spells\\Undead\\ReplenishMana\\ReplenishManaCaster.mdl"local string Ut="origin"local effect array FXlocal unit array UTlocal integer xlocal integer i=1local real Fa=60+GetUnitAbilityLevel(fw,'A0OR')*20local group Uq=CreateGroup()local integer Uu=4local boolean UU=falseset UT[i]=Fdif Fd!=fw thencall Fp("SPLK",GetUnitX(fw),GetUnitY(fw),GetUnitX(Fd),GetUnitY(Fd),.3,.5,.9,1,.7)endifset FX[i]=AddSpecialEffectTarget(US,UT[i],Ut)call SetUnitState(UT[i],UNIT_STATE_LIFE,GetUnitState(UT[i],UNIT_STATE_LIFE)+Fa)call UO(fw,UT[i],Fa)call GroupAddUnit(Uq,UT[i])set i=2loopexitwhen i>Uu or UUset UT[i]=UP(Uq,UT[i-1],fw)if UT[i]==null thenset UU=trueelsecall GroupAddUnit(Uq,UT[i])set FX[i]=AddSpecialEffectTarget(US,UT[i],Ut)call SetUnitState(UT[i],UNIT_STATE_LIFE,GetUnitState(UT[i],UNIT_STATE_LIFE)+Fa)call UO(fw,UT[i],Fa)call Fp("SPLK",GetUnitX(UT[i-1]),GetUnitY(UT[i-1]),GetUnitX(UT[i]),GetUnitY(UT[i]),.3,.5,.9,1,.7)set i=i+1endifendloopcall DestroyGroup(Uq)call PolledWait(2)set x=1loopexitwhen x==icall DestroyEffect(FX[x])set x=x+1endloopendfunctionfunction Hm takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function Un))call TriggerAddAction(t,function Us)endfunctionfunction Uv takes nothing returns booleanreturn GetSpellAbilityId()=='A0NQ'endfunctionfunction UV takes unit FC,unit Fd,integer m8 returns nothinglocal unit Jz=CreateUnit(GetOwningPlayer(FC),'e00E',GetUnitX(Fd),GetUnitY(Fd),0)call UnitAddAbility(Jz,'A0NJ')call SetUnitAbilityLevel(Jz,'A0NJ',m8)call IssueTargetOrderById(Jz,852075,Fd)endfunctionfunction Uw takes unit FC,unit Fd returns nothinglocal unit Jz=CreateUnit(GetOwningPlayer(FC),'e00E',GetUnitX(Fd),GetUnitY(Fd),0)call UnitAddAbility(Jz,'A0NK')call IssueTargetOrderById(Jz,852095,Fd)endfunctionfunction UW takes nothing returns nothinglocal trigger t=GetTriggeringTrigger()local string f8=e4(t)local unit FC=EC(f8,"Source")local unit Fd=EC(f8,"Target")local integer m8=GetUnitAbilityLevel(FC,'A0NQ')local integer u0=GetTriggerExecCount(t)local real Fa=7*m8if m8==1 thencall UnitAddAbility(Fd,'A0OW')call FQ(FC,Fd,dR,Fa)if u0==8 thencall UnitRemoveAbility(Fd,'A0OW')call e5(f8)call DisableTrigger(t)call PolledWait(5)call DestroyTrigger(t)endifendifif m8==2 thenif u0==1 thencall UV(FC,Fd,2)endifif u0>1 thencall UnitAddAbility(Fd,'A0OW')call FQ(FC,Fd,dR,Fa)endifif u0==9 thencall UnitRemoveAbility(Fd,'A0OW')call e5(f8)call DisableTrigger(t)call PolledWait(5)call DestroyTrigger(t)endifendifif m8==3 thenif u0==1 thencall UV(FC,Fd,2)endifif u0==2 thencall Uw(FC,Fd)endifif u0>2 thencall UnitAddAbility(Fd,'A0OW')call FQ(FC,Fd,dR,Fa)endifif u0==10 thencall UnitRemoveAbility(Fd,'A0OW')call e5(f8)call DisableTrigger(t)call PolledWait(5)call DestroyTrigger(t)endifendifif m8==4 thenif u0==1 thencall UV(FC,Fd,2)endifif u0==2 thencall Uw(FC,Fd)endifif u0>2 thencall UnitAddAbility(Fd,'A0OW')call FQ(FC,Fd,dR,Fa)endifif u0==10 thencall UnitRemoveAbility(Fd,'A0OW')call e5(f8)call DisableTrigger(t)call PolledWait(5)call DestroyTrigger(t)endifendifendfunctionfunction Ux takes nothing returns nothinglocal trigger t=CreateTrigger()local string f8=e4(t)call TriggerRegisterTimerEvent(t,1,true)call TriggerAddAction(t,function UW)call e7(f8,"Source",GetTriggerUnit())call e7(f8,"Target",GetSpellTargetUnit())call UV(GetTriggerUnit(),GetSpellTargetUnit(),1)endfunctionfunction HM takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function Uv))call TriggerAddAction(t,function Ux)call fT('A0NJ')call fT('A0NK')endfunctionfunction UX takes nothing returns booleanreturn GetSpellAbilityId()=='A0NV'endfunctionfunction Uy takes nothing returns nothinglocal trigger t=GetTriggeringTrigger()local string f8=e4(t)local unit Fd=EC(f8,"Target")local unit fw=EC(f8,"Hero")local integer UY=GetTriggerExecCount(t)local boolean Uz=GetUnitState(Fd,UNIT_STATE_LIFE)<.5local integer m8=GetUnitAbilityLevel(fw,'A0NV')if UY==18 or Uz thenif not Uz thencall UnitRemoveAbility(Fd,'A0NW')call UnitRemoveAbility(Fd,'A0OX')endifcall e5(f8)call DestroyTrigger(t)elseif m8==1 and(UY==5 or UY==10 or UY==15)thencall SetUnitAbilityLevel(Fd,'A0NW',GetUnitAbilityLevel(Fd,'A0NW')+1)endifif m8==2 and(UY==3 or UY==5 or UY==7 or UY==9 or UY==11 or UY==13 or UY==15)thencall SetUnitAbilityLevel(Fd,'A0NW',GetUnitAbilityLevel(Fd,'A0NW')+1)endifif m8==3 and(UY==2 or UY==3 or UY==5 or UY==6 or UY==8 or UY==9 or UY==11 or UY==12 or UY==14 or UY==15 or UY==16)thencall SetUnitAbilityLevel(Fd,'A0NW',GetUnitAbilityLevel(Fd,'A0NW')+1)endifif m8==4 and UY<16 thencall SetUnitAbilityLevel(Fd,'A0NW',GetUnitAbilityLevel(Fd,'A0NW')+1)endifendifendfunctionfunction UZ takes nothing returns nothinglocal trigger t=GetTriggeringTrigger()local string f8=e4(t)local unit Fd=EC(f8,"Target")local unit fw=EC(f8,"Hero")local integer UY=GetTriggerExecCount(t)local boolean Uz=GetUnitState(Fd,UNIT_STATE_LIFE)<.5local integer m8=GetUnitAbilityLevel(fw,'A0NV')if UY==18 or Uz thenif not Uz thencall UnitRemoveAbility(Fd,'A0NU')call UnitRemoveAbility(Fd,'A0OY')endifcall e5(f8)call DestroyTrigger(t)elseif m8==1 and(UY==5 or UY==10 or UY==15)thencall SetUnitAbilityLevel(Fd,'A0NU',GetUnitAbilityLevel(Fd,'A0NU')+1)endifif m8==2 and(UY==3 or UY==5 or UY==7 or UY==9 or UY==11 or UY==13 or UY==15)thencall SetUnitAbilityLevel(Fd,'A0NU',GetUnitAbilityLevel(Fd,'A0NU')+1)endifif m8==3 and(UY==2 or UY==3 or UY==5 or UY==6 or UY==8 or UY==9 or UY==11 or UY==12 or UY==14 or UY==15 or UY==16)thencall SetUnitAbilityLevel(Fd,'A0NU',GetUnitAbilityLevel(Fd,'A0NU')+1)endifif m8==4 and UY<16 thencall SetUnitAbilityLevel(Fd,'A0NU',GetUnitAbilityLevel(Fd,'A0NU')+1)endifendifendfunctionfunction U0 takes nothing returns nothinglocal unit fw=GetTriggerUnit()local unit Fd=GetSpellTargetUnit()local trigger t=CreateTrigger()local string f8=e4(t)call e7(f8,"Target",Fd)call e7(f8,"Hero",fw)call TriggerRegisterTimerEvent(t,1,true)if IsUnitAlly(Fd,GetOwningPlayer(fw))thencall UnitAddAbility(Fd,'A0NW')call UnitAddAbility(Fd,'A0OX')call TriggerAddAction(t,function Uy)elsecall UnitAddAbility(Fd,'A0NU')call UnitAddAbility(Fd,'A0OY')call TriggerAddAction(t,function UZ)endifendfunctionfunction Hn takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function UX))call TriggerAddAction(t,function U0)call fT('A0NW')call fT('A0NU')endfunctionfunction iD takes nothing returns nothinglocal unit gG=Ailocal unit Fd=Aplocal unit FC=EC(e4(gG),"ShallowGraveSource")local real LT=Fo(gG,Fd)local unit Jz=CreateUnit(GetOwningPlayer(FC),'h00L',GetUnitX(FC),GetUnitY(gG),LT)call UnitAddAbility(Jz,'Amrf')call UnitRemoveAbility(Jz,'Amrf')call SetUnitFlyHeight(Jz,-'d',0)call UnitApplyTimedLife(Jz,'BTLF',4)call PolledWait(1.4)call FQ(FC,Fd,dR,150*GetUnitAbilityLevel(FC,'A0OS'))endfunctionfunction U1 takes nothing returns booleanreturn GetSpellAbilityId()=='A0OS'endfunctionfunction QuickRevive_Expire takes nothing returns nothingcall UnitRemoveAbility(EC(e4(GetTriggeringTrigger()),"Unit"),'A0OV')call DisableTrigger(GetTriggeringTrigger())endfunctionfunction U2 takes nothing returns nothinglocal trigger t=GetTriggeringTrigger()local unit fP=EC(e4(t),"Unit")if GetUnitState(fP,UNIT_STATE_LIFE)<1 thencall DisableTrigger(t)elseif GetTriggerExecCount(t)>300 thencall DisableTrigger(t)call UnitRemoveAbility(fP,'A0OV')elseif GetUnitAbilityLevel(fP,'A0OV')==0 thencall UnitAddAbility(fP,'A0OV')endifendfunctionfunction U3 takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterTimerEvent(t,1,true)call TriggerAddAction(t,function U2)call e7(e4(t),"Unit",GetSpellTargetUnit())call UnitAddAbility(GetSpellTargetUnit(),'A0OV')call e7(e4(GetSpellTargetUnit()),"ShallowGraveSource",GetTriggerUnit())endfunctionfunction HN takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function U1))call TriggerAddAction(t,function U3)endfunctionfunction U4 takes nothing returns booleanreturn GetBooleanAnd(GetBooleanAnd((IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))),GetBooleanAnd(GetBooleanAnd((UnitHasBuffBJ(GetFilterUnit(),'B027')==false),(UnitHasBuffBJ(GetFilterUnit(),'B028')==false)),(IsUnitAliveBJ(GetFilterUnit()))))endfunctionfunction U5 takes nothing returns booleanif((GetSpellAbilityId()=='A013'))thenreturn trueendifif((GetSpellAbilityId()=='A0A6'))thenreturn trueendifreturn falseendfunctionfunction U6 takes nothing returns nothinglocal integer U7local integer ERlocal integer Eslocal integer U8=200local real array PNlocal unit array U9local unit va=GetTriggerUnit()local unit mflocal location vA=GetUnitLoc(GetTriggerUnit())local location vblocal location vBlocal group vcif(GetSpellAbilityId()=='A013')thenset U7=GetUnitAbilityLevelSwapped('A013',GetTriggerUnit())elseset U7=(GetUnitAbilityLevelSwapped('A0A6',GetTriggerUnit())+1)endifset ER=1set Es=18loopexitwhen ER>Esset vb=GetUnitLoc(GetTriggerUnit())call CreateNUnitsAtLoc(1,'e017',GetOwningPlayer(va),vb,PN[ER])if(GetSpellAbilityId()=='A013')thencall SetUnitAbilityLevelSwapped('A057',bj_lastCreatedUnit,GetUnitAbilityLevelSwapped('A013',GetSpellAbilityUnit()))elsecall SetUnitAbilityLevelSwapped('A057',bj_lastCreatedUnit,(GetUnitAbilityLevelSwapped('A0A6',GetSpellAbilityUnit())+1))endifset U9[ER]=bj_lastCreatedUnitcall IssuePointOrderByIdLoc(bj_lastCreatedUnit,851986,PolarProjectionBJ(vb,675.,(I2R(ER)*20.)))call RemoveLocation(vb)set ER=ER+1endloopset ER=1set Es=5loopexitwhen ER>Esset vc=GetUnitsInRangeOfLocMatching(U8,vA,Condition(function U4))loopset mf=FirstOfGroup(vc)exitwhen mf==nullset vB=GetUnitLoc(mf)call CreateNUnitsAtLoc(1,'o00I',GetOwningPlayer(va),vB,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,'A057')call SetUnitAbilityLevelSwapped('A057',bj_lastCreatedUnit,U7)call UnitApplyTimedLifeBJ(1.,'BTLF',bj_lastCreatedUnit)call IssueTargetOrderById(bj_lastCreatedUnit,851983,mf)call SetUnitPathing(bj_lastCreatedUnit,false)call SetUnitInvulnerable(bj_lastCreatedUnit,true)call UnitAddAbility(bj_lastCreatedUnit,'Aloc')call RemoveLocation(vB)call GroupRemoveUnit(vc,mf)endloopset U8=U8+200call PolledWait(.18)set ER=ER+1endloopset ER=1set Es=18loopexitwhen ER>Escall RemoveUnit(U9[ER])set ER=ER+1endloopcall RemoveLocation(vA)call RemoveLocation(vb)call DestroyGroup(vc)endfunctionfunction hX takes nothing returns nothingset dm=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(dm,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(dm,Condition(function U5))call TriggerAddAction(dm,function U6)endfunctionfunction vC takes nothing returns booleanif(GetUnitAbilityLevelSwapped('A0MM',GetTriggerUnit())>0)thenif(GetUnitAbilityLevelSwapped('A04R',GetAttacker())==0)thenif(IsUnitType(GetAttacker(),UNIT_TYPE_STRUCTURE)==false)thenif(IsUnitEnemy(GetAttacker(),GetTriggerPlayer()))thenreturn trueendifendifendifendifreturn falseendfunctionfunction vd takes nothing returns nothinglocal location iG=GetUnitLoc(GetAttacker())call CreateNUnitsAtLoc(1,'o00S',GetOwningPlayer(GetTriggerUnit()),iG,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,'A0KI')call SetUnitAbilityLevelSwapped('A0KI',bj_lastCreatedUnit,GetUnitAbilityLevelSwapped('A0MM',GetTriggerUnit()))call UnitApplyTimedLifeBJ(1.,'BTLF',bj_lastCreatedUnit)call IssueTargetOrderById(bj_lastCreatedUnit,851983,GetAttacker())call SetUnitPathing(bj_lastCreatedUnit,false)call SetUnitInvulnerable(bj_lastCreatedUnit,true)call UnitAddAbility(bj_lastCreatedUnit,'Aloc')call RemoveLocation(iG)endfunctionfunction hy takes nothing returns nothingset dM=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(dM,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(dM,Condition(function vC))call TriggerAddAction(dM,function vd)endfunctionfunction vD takes nothing returns booleanif((GetUnitTypeId(GetSummonedUnit())=='u003'))thenreturn trueendifif((GetUnitTypeId(GetSummonedUnit())=='u005'))thenreturn trueendifif((GetUnitTypeId(GetSummonedUnit())=='u009'))thenreturn trueendifreturn falseendfunctionfunction ve takes nothing returns booleanif(not vD())thenreturn falseendifreturn trueendfunctionfunction vE takes nothing returns nothingcall SetUnitAbilityLevel(GetSummonedUnit(),'A0E0',GetUnitAbilityLevel(GetSummoningUnit(),'A07K'))endfunctionfunction hY takes nothing returns nothingset dn=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(dn,EVENT_PLAYER_UNIT_SUMMON)call TriggerAddCondition(dn,Condition(function ve))call TriggerAddAction(dn,function vE)endfunctionfunction vf takes nothing returns booleanreturn GetSpellAbilityId()=='A08X'endfunctionfunction vF takes nothing returns nothinglocal location iG=GetUnitLoc(GetSpellAbilityUnit())call CreateNUnitsAtLocFacingLocBJ(1,'e00E',GetOwningPlayer(GetSpellAbilityUnit()),iG,iG)call RemoveLocation(iG)call UnitAddAbility(bj_lastCreatedUnit,'A09C')call SetUnitAbilityLevelSwapped('A09C',bj_lastCreatedUnit,GetUnitAbilityLevelSwapped('A08X',GetSpellAbilityUnit()))call IssueTargetOrderById(bj_lastCreatedUnit,852101,GetSpellAbilityUnit())endfunctionfunction hz takes nothing returns nothingset dN=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(dN,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(dN,Condition(function vf))call TriggerAddAction(dN,function vF)endfunctionfunction vg takes nothing returns booleanif(not(GetUnitTypeId(GetEnteringUnit())=='ndr1'))thenreturn falseendifreturn trueendfunctionfunction vG takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped('A0C4',GetFilterUnit())!=0)endfunctionfunction vh takes nothing returns nothingcall SetWidgetLife(GetEnumUnit(),((10.*I2R(GetUnitAbilityLevelSwapped('A0C4',GetEnumUnit())))+GetUnitStateSwap(UNIT_STATE_LIFE,GetEnumUnit())))endfunctionfunction vH takes nothing returns nothinglocal group nl=GetUnitsOfPlayerMatching(GetOwningPlayer(GetEnteringUnit()),Condition(function vG))call ForGroupBJ(nl,function vh)call DestroyGroup(nl)endfunctionfunction hZ takes nothing returns nothingset do=CreateTrigger()call TriggerRegisterEnterRectSimple(do,bj_mapInitialPlayableArea)call TriggerAddCondition(do,Condition(function vg))call TriggerAddAction(do,function vH)endfunctionfunction vi takes nothing returns booleanreturn GetLearnedSkill()=='A0MD'and IsUnitIllusion(GetTriggerUnit())==falseendfunctionfunction vI takes nothing returns nothingif GetUnitAbilityLevel(GetEnumUnit(),'B064')>0 and GetEventDamage()>10 and IsUnitEnemy(GetEnumUnit(),GetOwningPlayer(GetTriggerUnit()))thencall UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),.05*(GetUnitAbilityLevel(GetTriggerUnit(),'A0MD'))*GetEventDamage(),ATTACK_TYPE_HERO,DAMAGE_TYPE_MAGIC)endifendfunctionfunction vj takes nothing returns nothinglocal group EXlocal unit fP=GetTriggerUnit()local real Fa=.05*(GetUnitAbilityLevel(fP,'A0MD'))*GetEventDamage()if(GetEventDamage()<1400)thencall SetWidgetLife(fP,GetUnitStateSwap(UNIT_STATE_LIFE,fP)+Fa)set EX=CreateGroup()call GroupEnumUnitsInRange(EX,GetUnitX(fP),GetUnitY(fP),600,null)call ForGroup(EX,function vI)call DestroyGroup(EX)endifendfunctionfunction vJ takes nothing returns nothinglocal trigger tif GetUnitAbilityLevel(GetTriggerUnit(),'A0MD')==1 thenset t=CreateTrigger()call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_DAMAGED)call TriggerAddAction(t,function vj)endifendfunctionfunction h0 takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function vi))call TriggerAddAction(t,function vJ)endfunctionfunction vk takes nothing returns booleanreturn GetSpellAbilityId()=='A06P'endfunctionfunction vK takes nothing returns booleanreturn IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(Ai))and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0 and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>1endfunctionfunction vl takes nothing returns nothinglocal unit Fd=GetEnumUnit()local unit Jz=CreateUnit(GetOwningPlayer(Ai),'e00E',GetUnitX(Fd),GetUnitY(Fd),0)call UnitAddAbility(Jz,'A0JE')call SetUnitAbilityLevel(Jz,'A0JE',Aj)call IssueTargetOrderById(Jz,852075,Fd)endfunctionfunction vL takes unit fw returns nothinglocal group EX=CreateGroup()local boolexpr Ey=Condition(function vK)set Ai=fwcall GroupEnumUnitsInRange(EX,GetUnitX(fw),GetUnitY(fw),675,Ey)call ForGroup(EX,function vl)call DestroyGroup(EX)call DestroyBoolExpr(Ey)endfunctionfunction vm takes nothing returns nothinglocal trigger t=GetTriggeringTrigger()local string f8=e4(t)local unit fwlocal unit Jz=EC(f8,"Caster")if GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST thencall KillUnit(Jz)call e5(f8)call Fj(t)elsecall SetUnitAnimation(Jz,"birth")set fw=EC(f8,"Hero")set Aj=GetTriggerExecCount(t)*GetUnitAbilityLevel(fw,'A06P')/2call vL(fw)endifendfunctionfunction vM takes nothing returns nothinglocal unit fw=GetTriggerUnit()local location iG=GetSpellTargetLoc()local trigger t=CreateTrigger()local string f8=e4(t)local real x=GetLocationX(iG)local real y=GetLocationY(iG)local unit Jz=CreateUnit(GetOwningPlayer(fw),'e01G',x,y,0)call RemoveLocation(iG)call TriggerRegisterUnitEvent(t,fw,EVENT_UNIT_SPELL_ENDCAST)call TriggerRegisterTimerEvent(t,.5,true)call TriggerAddAction(t,function vm)call e7(f8,"Hero",fw)call e7(f8,"Caster",Jz)endfunctionfunction Hh takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddAction(t,function vM)call TriggerAddCondition(t,Condition(function vk))call fT('A0JE')endfunctionfunction vn takes nothing returns booleanreturn GetSpellAbilityId()=='A0J5'endfunctionfunction vN takes nothing returns nothingcall UnitAddAbility(GetEnumUnit(),'A0P2')endfunctionfunction vo takes nothing returns nothingcall UnitRemoveAbility(GetEnumUnit(),'A0P2')endfunctionfunction vO takes nothing returns nothinglocal lightning Fq=bacall TriggerSleepAction(0)call DestroyLightning(Fq)endfunctionfunction vp takes unit vP,unit vq returns nothinglocal lightning Fqif vP!=null and vq!=null thenset Fq=AddLightning("CLPB",true,GetUnitX(vP),GetUnitY(vP),GetUnitX(vq),GetUnitY(vq))call SetLightningColor(Fq,.7,.1,.9,1)set ba=Fqcall ExecuteFunc("vO")endifendfunctionfunction vQ takes nothing returns nothingif GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)>1 and GetEnumUnit()!=GetTriggerUnit()thencall UnitDamageTarget(Ai,GetEnumUnit(),AJ,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)endifendfunctionfunction vr takes nothing returns nothinglocal trigger t=GetTriggeringTrigger()local string f8=e4(t)local real Falocal unit fPlocal unit fwlocal group EX=EE(f8,"Group")if GetTriggerEventId()!=EVENT_UNIT_DAMAGED thencall ForGroup(EX,function vo)call e5(f8)call DestroyGroup(EX)call Fj(t)elseif GetEventDamage()>10 and GetEventDamage()<6000 thenset fw=EC(f8,"Hero")set Fa=GetUnitAbilityLevel(fw,'A0J5')*.05*GetEventDamage()set AJ=f5(Fa,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE))set Ai=fwcall DisableTrigger(t)call ForGroup(EX,function vQ)call EnableTrigger(t)endifendfunctionfunction vR takes nothing returns booleanreturn IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0 and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>1endfunctionfunction vs takes nothing returns nothinglocal unit fw=GetTriggerUnit()local unit Fd=GetSpellTargetUnit()local group EX=CreateGroup()local boolexpr Ey=Condition(function vR)local trigger t=CreateTrigger()local string f8=e4(t)local integer i=2local group vS=CreateGroup()local unit array vtlocal string vT="Abilities\\Spells\\Undead\\Curse\\CurseTarget.mdl"call e7(f8,"Hero",fw)call vp(fw,Fd)call Fl(vT,Fd,"overhead",25)set vt[1]=Fdcall e7(f8,"Unit1",vt[1])call TriggerRegisterUnitEvent(t,vt[1],EVENT_UNIT_DAMAGED)call GroupEnumUnitsInRange(EX,GetUnitX(Fd),GetUnitY(Fd),600,Ey)call GroupRemoveUnit(EX,Fd)call GroupAddUnit(vS,Fd)call e7(f8,"Group",vS)loopexitwhen i>5 or FirstOfGroup(EX)==nullset vt[i]=FirstOfGroup(EX)call vp(vt[i-1],vt[i])call TriggerRegisterUnitEvent(t,vt[i],EVENT_UNIT_DAMAGED)call GroupAddUnit(vS,vt[i])call GroupRemoveUnit(EX,vt[i])call Fl(vT,vt[i],"overhead",25)set i=i+1endloopcall Ea(f8,"FXCount",i-1)set Aj=GetUnitAbilityLevel(fw,'A0J5')call ForGroup(vS,function vN)call TriggerRegisterTimerEvent(t,25,false)call TriggerAddAction(t,function vr)endfunctionfunction HH takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function vn))call TriggerAddAction(t,function vs)call fT('A0J9')endfunctionfunction vu takes nothing returns booleanreturn GetSpellAbilityId()=='A0AS'endfunctionfunction vU takes nothing returns nothinglocal timer t=GetExpiredTimer()local string f8=e4(t)local integer Mf=EH(f8,"Counter")local unit fw=EC(f8,"Hero")local unit Fd=EC(f8,"Target")local integer m8=GetUnitAbilityLevel(fw,'A0AS')if Mf>7 or GetUnitState(Fd,UNIT_STATE_LIFE)<1 thencall DestroyEffect(Ef(f8,"Effect"))call UnitRemoveAbility(Fd,'A0P0')call PauseTimer(t)call e5(f8)call DestroyTimer(t)elseset Mf=Mf+1call UnitDamageTarget(fw,Fd,m8*8,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_DIVINE,WEAPON_TYPE_WHOKNOWS)call Ea(f8,"Counter",Mf)endifendfunctionfunction vv takes nothing returns nothinglocal timer t=GetExpiredTimer()local string f8=e4(t)local integer Mf=EH(f8,"Counter")local unit fw=EC(f8,"Hero")local unit Fd=EC(f8,"Target")local integer m8=GetUnitAbilityLevel(fw,'A0AS')if Mf>7 or GetUnitState(Fd,UNIT_STATE_LIFE)<1 thencall DestroyEffect(Ef(f8,"Effect"))call UnitRemoveAbility(Fd,'A0P0')call PauseTimer(t)call e5(f8)call DestroyTimer(t)elseset Mf=Mf+1call Fi(Fd,m8*10)call Ea(f8,"Counter",Mf)endifendfunctionfunction vV takes nothing returns nothinglocal unit fw=GetTriggerUnit()local unit Fd=GetSpellTargetUnit()local timer t=CreateTimer()local string f8=e4(t)call UnitAddAbility(Fd,'A0P0')call e7(f8,"Target",Fd)call e7(f8,"Hero",fw)call Ea(f8,"Counter",0)if IsUnitAlly(Fd,GetOwningPlayer(fw))thencall e7(f8,"Effect",AddSpecialEffectTarget("Abilities\\Spells\\Items\\StaffOfSanctuary\\Staff_Sanctuary_Target.mdl",Fd,"chest"))call TimerStart(t,1,true,function vv)elsecall e7(f8,"Effect",AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Voodoo\\VoodooAuraTarget.mdl",Fd,"overhead"))call TimerStart(t,1,true,function vU)endifendfunctionfunction Hi takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function vu))call TriggerAddAction(t,function vV)call fT('A0JF')endfunctionfunction vw takes nothing returns booleanreturn GetSpellAbilityId()=='A0CA'endfunctionfunction vW takes nothing returns nothinglocal unit fw=GetTriggerUnit()call UnitAddAbility(fw,'A0C9')call SetUnitAbilityLevel(fw,'A0C9',GetUnitAbilityLevel(fw,'A0CA'))call PolledWait(.1)loopexitwhen GetUnitAbilityLevel(fw,'BHfs')==0call PolledWait(.1)endloopcall UnitRemoveAbility(fw,'A0C9')endfunctionfunction h1 takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function vw))call TriggerAddAction(t,function vW)endfunctionfunction vx takes nothing returns booleanreturn GetSpellAbilityId()=='A0CT'endfunctionfunction vX takes nothing returns nothinglocal string f8=e4(GetTriggerUnit())local real vy=f6(Ei(f8,"TLLife1"),1)local real vY=f6(Ei(f8,"TLMana1"),1)local location PB=Eg(f8,"TLPoint1")local unit fP=GetTriggerUnit()if Ei(f8,"TLLife1")>1 thencall AddSpecialEffect("Abilities\\Spells\\NightElf\\Blink\\BlinkTarget.mdl",GetUnitX(fP),GetUnitY(fP))call SetUnitX(fP,GetLocationX(PB))call SetUnitY(fP,GetLocationY(PB))call SetUnitState(fP,UNIT_STATE_LIFE,vy)call SetUnitState(fP,UNIT_STATE_MANA,vY)call UnitRemoveBuffs(fP,false,true)call RemoveLocation(PB)call TriggerSleepAction(0)call SetUnitState(fP,UNIT_STATE_MANA,vY)endifendfunctionfunction h2 takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function vx))call TriggerAddAction(t,function vX)endfunctionfunction vz takes nothing returns nothinglocal trigger t=GetTriggeringTrigger()local unit fP=EC(e4(t),"UnitVar")local string f8=e4(fP)local integer ER=1local integer Es=10call RemoveLocation(Eg(f8,"TLPoint0"))loopexitwhen ER>Escall e7(f8,"TLPoint"+I2S(ER-1),Eg(f8,"TLPoint"+I2S(ER)))call Eb(f8,"TLLife"+I2S(ER-1),Ei(f8,"TLLife"+I2S(ER)))call Eb(f8,"TLMana"+I2S(ER-1),Ei(f8,"TLMana"+I2S(ER)))set ER=ER+1endloopcall e7(f8,"TLPoint10",GetUnitLoc(fP))call Eb(f8,"TLLife10",GetUnitState(fP,UNIT_STATE_LIFE))call Eb(f8,"TLMana10",GetUnitState(fP,UNIT_STATE_MANA))endfunctionfunction vZ takes nothing returns booleanreturn GetLearnedSkill()=='A0CT'and IsUnitIllusion(GetTriggerUnit())==falseendfunctionfunction v0 takes nothing returns nothinglocal unit fP=GetTriggerUnit()local integer m8=GetUnitAbilityLevel(fP,'A0CT')local trigger tif m8==1 thenset t=CreateTrigger()call TriggerRegisterTimerEventPeriodic(t,.5)call TriggerAddAction(t,function vz)call e7(e4(t),"UnitVar",fP)endifendfunctionfunction h3 takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function vZ))call TriggerAddAction(t,function v0)endfunctionfunction v1 takes nothing returns booleanreturn GetSpellAbilityId()=='A0NM'endfunctionfunction v2 takes nothing returns booleanif(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))thenreturn falseendifif(GetUnitAbilityLevelSwapped('A04R',GetFilterUnit())==1)thenreturn falseendifif(IsUnitAliveBJ(GetFilterUnit())==false)thenreturn falseendifif(GetUnitTypeId(GetFilterUnit())=='o003')thenreturn falseendifif(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==false)thenreturn falseendifif(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==false)thenreturn falseendifreturn trueendfunctionfunction v3 takes nothing returns nothinglocal integer m8=GetUnitAbilityLevelSwapped('A0NM',GetTriggerUnit())local unit Fd=GetSpellTargetUnit()local unit Jzlocal unit v4local unit v5=GetTriggerUnit()local integer ERlocal integer Eslocal integer Mf=0local group EXlocal location NAloopexitwhen Mf>(m8*2)set Mf=Mf+1set Jz=CreateUnit(GetOwningPlayer(GetTriggerUnit()),'e00E',GetUnitX(v5),GetUnitY(v5),bj_UNIT_FACING)call UnitAddAbility(Jz,'A0NL')call IssueTargetOrderById(Jz,852095,Fd)call PolledWait(((GetUnitX(Fd)-GetUnitX(Jz))*(GetUnitX(Fd)-GetUnitX(Jz))+(GetUnitY(Fd)-GetUnitY(Jz))*(GetUnitY(Fd)-GetUnitY(Jz)))/360000)if IsUnitType(Fd,UNIT_TYPE_HERO)==false thencall UnitDamageTarget(GetTriggerUnit(),Fd,50+25*m8,true,true,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)endifif(Mf<(m8*2+1))thenset NA=GetUnitLoc(Fd)set EX=GetUnitsInRangeOfLocMatching(600.,NA,Condition(function v2))call RemoveLocation(NA)loopset v4=GroupPickRandomUnit(EX)if(v4==null)thenset Mf='d'call DestroyGroup(EX)exitwhen 1==1elseif(v4!=Fd)thenset v5=Fdset Fd=v4call DestroyGroup(EX)exitwhen 1==1endifcall GroupRemoveUnit(EX,v4)endloopendifendloopendfunctionfunction Hc takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function v1))call TriggerAddAction(t,function v3)endfunctionfunction v6 takes unit fP,real v7 returns nothingcall SetUnitState(fP,UNIT_STATE_LIFE,f6(0,GetUnitState(fP,UNIT_STATE_LIFE)+v7))endfunctionfunction v8 takes nothing returns booleanif(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))thenreturn falseendifif(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(Ai))==false)thenreturn falseendifreturn trueendfunctionfunction v9 takes nothing returns nothingcall v6(GetEnumUnit(),GetUnitAbilityLevel(Ai,'A0NE')*6)endfunctionfunction Va takes nothing returns nothinglocal trigger t=GetTriggeringTrigger()local unit VA=EC(e4(t),"WitchDoctor")local group EX=CreateGroup()if(GetUnitState(VA,UNIT_STATE_MANA)<10)thencall DisableTrigger(t)endifset Ai=VAcall GroupEnumUnitsInRange(EX,GetUnitX(VA),GetUnitY(VA),350,Condition(function v8))call GroupAddUnit(EX,VA)call ForGroup(EX,function v9)call DestroyGroup(EX)endfunctionfunction Vb takes nothing returns booleanif(GetIssuedOrderId()==852177or GetIssuedOrderId()==852178)thenif(GetUnitTypeId(GetTriggerUnit())=='E01A')thenreturn trueendifendifreturn falseendfunctionfunction VB takes nothing returns nothinglocal unit fP=GetTriggerUnit()local trigger t=Ee(e4(fP),"VoodooTrigger")if(t==null)thenset t=CreateTrigger()call TriggerRegisterTimerEventPeriodic(t,1.)call TriggerAddAction(t,function Va)call e7(e4(t),"WitchDoctor",fP)call e7(e4(fP),"VoodooTrigger",t)endifif(GetIssuedOrderId()==852177)thencall EnableTrigger(t)elsecall DisableTrigger(t)endifendfunctionfunction VR takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_ISSUED_ORDER)call TriggerAddCondition(t,Condition(function Vb))call TriggerAddAction(t,function VB)endfunctionfunction Vc takes nothing returns booleanif(GetSpellAbilityId()=='A0NO')thenreturn trueendifreturn falseendfunctionfunction VC takes nothing returns booleanif(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==false)thenreturn falseendifif(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==false)thenreturn falseendifreturn trueendfunctionfunction Vd takes nothing returns nothinglocal location iG=GetSpellTargetLoc()local group EX=GetUnitsInRangeOfLocMatching(160,iG,Condition(function VC))local integer gD=CountUnitsInGroup(EX)local integer m8=GetUnitAbilityLevel(GetTriggerUnit(),'A0NO')local real VDlocal unit array Velocal real array VElocal effect array Vflocal integer VF=1local integer Vg=12local integer ER=1local integer Es=gDlocal integer VGloopexitwhen ER>Esset Ve[ER]=FirstOfGroup(EX)set VE[ER]=GetUnitState(Ve[ER],UNIT_STATE_LIFE)call GroupRemoveUnit(EX,Ve[ER])set Vf[ER]=AddSpecialEffectTarget("Abilities\\Spells\\Orc\\SpiritLink\\SpiritLinkTarget.mdl",Ve[ER],"overhead")set ER=ER+1endlooploopexitwhen VF>Vgset ER=1set Es=gDloopexitwhen ER>Esif(IsUnitAliveBJ(Ve[ER]))thencall UnitDamageTargetBJ(GetTriggerUnit(),Ve[ER],m8*5,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)if(ModuloInteger(VF,4)==0)thenset VD=f6((VE[ER]-GetUnitState(Ve[ER],UNIT_STATE_LIFE)),0)set VG=m8*10*R2I(VD/'d')if(VG>0)thencall UnitDamageTargetBJ(GetTriggerUnit(),Ve[ER],m8*10*R2I(VD/'d'),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)call fl(I2S(R2I(m8*10*R2I(VD/'d')))+"!",Ve[ER],2.,218,165,32,255)endifendifendifset ER=ER+1endloopset VF=VF+1call PolledWait(1)endloopset ER=1set Es=gDloopexitwhen ER>Escall DestroyEffect(Vf[ER])set ER=ER+1endloopcall DestroyGroup(EX)call RemoveLocation(iG)endfunctionfunction HC takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function Vc))call TriggerAddAction(t,function Vd)endfunctionfunction Vh takes nothing returns booleanreturn GetSpellAbilityId()=='A01O'or GetSpellAbilityId()=='A07W'endfunctionfunction VH takes nothing returns nothinglocal unit fP=GetTriggerUnit()local location iG=GetSpellTargetLoc()if EV(fP,GetLocationX(iG),GetLocationY(iG))thencall fp(fP)call fI(GetOwningPlayer(fP),"You cannot teleport there.")endifcall RemoveLocation(iG)endfunctionfunction Vi takes nothing returns booleanreturn GetSpellAbilityId()=='A0K9'endfunctionfunction VI takes nothing returns nothinglocal unit fP=GetTriggerUnit()local unit Fd=GetSpellTargetUnit()local real Fa=30*GetUnitAbilityLevel(fP,GetSpellAbilityId())call SetUnitX(fP,GetUnitX(Fd))call SetUnitY(fP,GetUnitY(Fd))if IsUnitEnemy(Fd,GetOwningPlayer(fP))thencall UnitDamageTargetBJ(fP,Fd,Fa,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)call IssueTargetOrderById(fP,851983,Fd)endifendfunctionfunction Vj takes nothing returns booleanif GetUnitTypeId(GetSpellTargetUnit())=='n00I'or GetUnitTypeId(GetSpellTargetUnit())=='e01H'thenreturn falseendifif(GetSpellAbilityId()=='A04Q')thenreturn trueendifif(GetSpellAbilityId()=='A053')thenreturn trueendifif(GetSpellAbilityId()=='A08L')thenreturn trueendifreturn falseendfunctionfunction VJ takes nothing returns nothinglocal unit fP=GetTriggerUnit()local unit Vk=GetSpellTargetUnit()if(GetSpellAbilityId()=='A04Q')thencall SetWidgetLife(fP,(GetUnitStateSwap(UNIT_STATE_LIFE,fP)+(GetUnitStateSwap(UNIT_STATE_LIFE,Vk)*(.15+(I2R(GetUnitAbilityLevelSwapped('A04Q',fP))*.4)))))call KillUnit(Vk)endifif(GetSpellAbilityId()=='A053')thencall SetUnitManaBJ(fP,(GetUnitStateSwap(UNIT_STATE_MANA,fP)+(GetUnitStateSwap(UNIT_STATE_LIFE,Vk)*(I2R(GetUnitAbilityLevelSwapped('A053',fP))*.15))))call KillUnit(Vk)endifif(GetSpellAbilityId()=='A08L')thencall SetWidgetLife(fP,(GetUnitStateSwap(UNIT_STATE_LIFE,fP)+(GetUnitStateSwap(UNIT_STATE_LIFE,Vk)*.85)))call PolledWait(.01)call SetUnitManaBJ(fP,(GetUnitStateSwap(UNIT_STATE_MANA,fP)+(GetUnitStateSwap(UNIT_STATE_LIFE,Vk)*.15)))call KillUnit(Vk)endifendfunctionfunction InitCustomTeams takes nothing returns nothingcall SetPlayerTeam(Player(1),0)call SetPlayerTeam(Player(2),0)call SetPlayerTeam(Player(3),0)call SetPlayerTeam(Player(4),0)call SetPlayerTeam(Player(5),0)call SetPlayerTeam(Player(7),1)call SetPlayerTeam(Player(8),1)call SetPlayerTeam(Player(9),1)call SetPlayerTeam(Player(10),1)call SetPlayerTeam(Player(11),1)endfunctionfunction main takes nothing returns nothinglocal weathereffect welocal player plocal unit ulocal integer unitIDlocal trigger tlocal real lifelocal integer icall SetCameraBounds(-7424.+GetCameraMargin(CAMERA_MARGIN_LEFT),-7680.+GetCameraMargin(CAMERA_MARGIN_BOTTOM),7424.-GetCameraMargin(CAMERA_MARGIN_RIGHT),7168.-GetCameraMargin(CAMERA_MARGIN_TOP),-7424.+GetCameraMargin(CAMERA_MARGIN_LEFT),7168.-GetCameraMargin(CAMERA_MARGIN_TOP),7424.-GetCameraMargin(CAMERA_MARGIN_RIGHT),-7680.+GetCameraMargin(CAMERA_MARGIN_BOTTOM))call SetDayNightModels("Environment\\DNC\\DNCFelwood\\DNCFelwoodTerrain\\DNCFelwoodTerrain.mdl","Environment\\DNC\\DNCFelwood\\DNCFelwoodUnit\\DNCFelwoodUnit.mdl")call SetWaterBaseColor(0,0,255,255)call NewSoundEnvironment("Default")call SetAmbientDaySound("FelwoodDay")call SetAmbientNightSound("FelwoodNight")call SetMapMusic("Music",true,0)set BH=CreateSound("Sounds\\Dominating.mp3",false,false,false,10,10,"DefaultEAXON")call SetSoundDuration(BH,1802)call SetSoundChannel(BH,0)call SetSoundVolume(BH,127)call SetSoundPitch(BH,1.)set Bi=CreateSound("Sounds\\Double_Kill.mp3",false,false,false,10,10,"DefaultEAXON")call SetSoundDuration(Bi,2012)call SetSoundChannel(Bi,0)call SetSoundVolume(Bi,127)call SetSoundPitch(Bi,1.)set BI=CreateSound("Sounds\\firstblood.mp3",false,false,false,10,10,"DefaultEAXON")call SetSoundDuration(BI,1567)call SetSoundChannel(BI,0)call SetSoundVolume(BI,127)call SetSoundPitch(BI,1.)set Bj=CreateSound("Sounds\\GodLike.mp3",false,false,false,10,10,"DefaultEAXON")call SetSoundDuration(Bj,1828)call SetSoundChannel(Bj,0)call SetSoundVolume(Bj,127)call SetSoundPitch(Bj,1.)set BJ=CreateSound("Sounds\\Killing_Spree.mp3",false,false,false,10,10,"DefaultEAXON")call SetSoundDuration(BJ,2377)call SetSoundChannel(BJ,0)call SetSoundVolume(BJ,127)call SetSoundPitch(BJ,1.)set Bk=CreateSound("Sounds\\MegaKill.mp3",false,false,false,10,10,"DefaultEAXON")call SetSoundDuration(Bk,2612)call SetSoundChannel(Bk,0)call SetSoundVolume(Bk,127)call SetSoundPitch(Bk,1.)set BK=CreateSound("Sounds\\Ownage.mp3",false,false,false,10,10,"DefaultEAXON")call SetSoundDuration(BK,2586)call SetSoundChannel(BK,0)call SetSoundVolume(BK,127)call SetSoundPitch(BK,1.)set Bl=CreateSound("Sounds\\triple_kill.mp3",false,false,false,10,10,"DefaultEAXON")call SetSoundDuration(Bl,1907)call SetSoundChannel(Bl,0)call SetSoundVolume(Bl,127)call SetSoundPitch(Bl,1.)set BL=CreateSound("Sounds\\Unstoppable.mp3",false,false,false,10,10,"DefaultEAXON")call SetSoundDuration(BL,2038)call SetSoundChannel(BL,0)call SetSoundVolume(BL,127)call SetSoundPitch(BL,1.)set Bm=CreateSound("Sounds\\WhickedSick.mp3",false,false,false,10,10,"DefaultEAXON")call SetSoundDuration(Bm,2612)call SetSoundChannel(Bm,0)call SetSoundVolume(Bm,127)call SetSoundPitch(Bm,1.)set BM=CreateSound("Sounds\\MonsterKill.mp3",false,false,false,10,10,"DefaultEAXON")call SetSoundDuration(BM,3344)call SetSoundChannel(BM,0)call SetSoundVolume(BM,127)call SetSoundPitch(BM,1.)set Bn=CreateSound("Sounds\\HolyShit.mp3",false,false,false,10,10,"DefaultEAXON")call SetSoundDuration(Bn,2325)call SetSoundChannel(Bn,0)call SetSoundVolume(Bn,127)call SetSoundPitch(Bn,1.)set BN=CreateSound("Abilities\\Spells\\Undead\\Sleep\\SleepBirth1.wav",false,true,true,10,10,"SpellsEAX")call SetSoundParamsFromLabel(BN,"Sleep")call SetSoundDuration(BN,3203)set Bo=CreateSound("Sounds\\Animality.mp3",false,false,false,10,10,"DefaultEAXON")call SetSoundChannel(Bo,0)call SetSoundVolume(Bo,127)call SetSoundPitch(Bo,1.)set bk=Rect(5600.,2848.,5952.,3168.)set bK=Rect(3424.,2816.,3744.,3104.)set bl=Rect(2880.,6016.,3296.,6464.)set bL=Rect(5824.,5056.,6272.,5344.)set bm=Rect(-3680.,-6368.,-3392.,-6016.)set bM=Rect(-6272.,-4480.,-5920.,-4096.)set bn=Rect(-4864.,-5056.,-4576.,-4768.)set bN=Rect(5568.,3392.,5920.,3712.)set bo=Rect(3456.,3424.,3776.,3744.)set bO=Rect(3168.,5440.,3520.,5792.)set bp=Rect(-6624.,-5760.,-6240.,-5504.)set bP=Rect(-3392.,-6816.,-3072.,-6496.)set bq=Rect(-6656.,-4224.,-6240.,-3808.)set bQ=Rect(-4544.,-4832.,-4224.,-4512.)set br=Rect(2912.,-2944.,3104.,-2720.)set bR=Rect(5472.,5888.,6624.,7008.)set bs=Rect(-6848.,-7456.,-5696.,-6272.)set bS=Rect(-2464.,1536.,-2240.,1760.)set bt=Rect(4032.,-2688.,4288.,-2400.)set bT=Rect(-3328.,-416.,-3104.,-96.)set bu=Rect(1440.,-4096.,1728.,-3872.)set bU=Rect(-4512.,3232.,-4352.,3424.)set bv=Rect(-608.,3072.,-384.,3328.)set bV=Rect(2848.,-5088.,3072.,-4928.)set bw=Rect(-1728.,2208.,-1376.,2432.)set bW=Rect(3008.,-3776.,3136.,-3648.)set bx=Rect(736.,864.,864.,1024.)set bX=Rect(-416.,-3456.,-160.,-3200.)set by=Rect(-6368.,-6944.,-6176.,-6752.)set bY=Rect(5920.,6272.,6112.,6464.)set bz=Rect(-5152.,-7264.,-4448.,-6560.)set bZ=Rect(4672.,4256.,5376.,4960.)set b0=Rect(2240.,-800.,2688.,-320.)set b1=Rect(3264.,-2784.,4736.,-1216.)set b2=Rect(-3552.,-768.,-2208.,320.)set b3=Rect(1056.,-5216.,2368.,-3744.)set b4=Rect(-5280.,3072.,-3808.,4384.)set b5=Rect(-1248.,2656.,352.,4800.)set b6=Rect(2272.,-6080.,3776.,-4928.)set b7=Rect(-2432.,2016.,-864.,3456.)set b8=Rect(384.,576.,1120.,1952.)set b9=Rect(2592.,-4800.,3744.,-3328.)set Ba=Rect(-960.,-3712.,416.,-2304.)set BA=Rect(-6912.,-6144.,-5888.,-5184.)set Bb=Rect(5504.,4576.,6624.,5728.)set BB=Rect(-512.,992.,352.,2272.)set Bc=Rect(-96.,1248.,96.,1376.)set BC=Rect(-1632.,-5056.,-768.,-3904.)set Bd=Rect(-1152.,-4704.,-960.,-4480.)set BD=Rect(-480.,-800.,-256.,-512.)set Be=Rect(2048.,-1216.,3104.,-160.)set BE=Rect(7264.,-5504.,7488.,-5280.)set Bf=Rect(-7520.,6528.,-7328.,6720.)call CameraSetupSetField(BF,CAMERA_FIELD_ZOFFSET,.0,.0)call CameraSetupSetField(BF,CAMERA_FIELD_ROTATION,90.,.0)call CameraSetupSetField(BF,CAMERA_FIELD_ANGLE_OF_ATTACK,335.,.0)call CameraSetupSetField(BF,CAMERA_FIELD_TARGET_DISTANCE,1200.,.0)call CameraSetupSetField(BF,CAMERA_FIELD_ROLL,.0,.0)call CameraSetupSetField(BF,CAMERA_FIELD_FIELD_OF_VIEW,70.,.0)call CameraSetupSetField(BF,CAMERA_FIELD_FARZ,5000.,.0)call CameraSetupSetDestPosition(BF,-1583.,-1320.4,.0)call CameraSetupSetField(Bg,CAMERA_FIELD_ZOFFSET,.0,.0)call CameraSetupSetField(Bg,CAMERA_FIELD_ROTATION,121.,.0)call CameraSetupSetField(Bg,CAMERA_FIELD_ANGLE_OF_ATTACK,335.,.0)call CameraSetupSetField(Bg,CAMERA_FIELD_TARGET_DISTANCE,800.,.0)call CameraSetupSetField(Bg,CAMERA_FIELD_ROLL,.0,.0)call CameraSetupSetField(Bg,CAMERA_FIELD_FIELD_OF_VIEW,70.,.0)call CameraSetupSetField(Bg,CAMERA_FIELD_FARZ,5000.,.0)call CameraSetupSetDestPosition(Bg,-404.2,-643.,.0)call CameraSetupSetField(BG,CAMERA_FIELD_ZOFFSET,.0,.0)call CameraSetupSetField(BG,CAMERA_FIELD_ROTATION,90.,.0)call CameraSetupSetField(BG,CAMERA_FIELD_ANGLE_OF_ATTACK,304.,.0)call CameraSetupSetField(BG,CAMERA_FIELD_TARGET_DISTANCE,1024.5,.0)call CameraSetupSetField(BG,CAMERA_FIELD_ROLL,.0,.0)call CameraSetupSetField(BG,CAMERA_FIELD_FIELD_OF_VIEW,70.,.0)call CameraSetupSetField(BG,CAMERA_FIELD_FARZ,5000.,.0)call CameraSetupSetDestPosition(BG,-6220.8,-6784.,.0)call CameraSetupSetField(Bh,CAMERA_FIELD_ZOFFSET,.0,.0)call CameraSetupSetField(Bh,CAMERA_FIELD_ROTATION,90.,.0)call CameraSetupSetField(Bh,CAMERA_FIELD_ANGLE_OF_ATTACK,304.,.0)call CameraSetupSetField(Bh,CAMERA_FIELD_TARGET_DISTANCE,1024.5,.0)call CameraSetupSetField(Bh,CAMERA_FIELD_ROLL,.0,.0)call CameraSetupSetField(Bh,CAMERA_FIELD_FIELD_OF_VIEW,70.,.0)call CameraSetupSetField(Bh,CAMERA_FIELD_FARZ,5000.,.0)call CameraSetupSetDestPosition(Bh,5570.6,6444.4,.0)set p=Player(15)set u=CreateUnit(p,'uC74',3008.,.0,270.)call SetUnitColor(u,ConvertPlayerColor(12))set u=CreateUnit(p,'uC74',-4608.,1152.,270.)call SetUnitColor(u,ConvertPlayerColor(12))set p=Player(15)set dp=CreateUnit(p,'e00D',-6043.9,5314.7,212.15)set dQ=CreateUnit(p,'e00B',-713.7,-515.7,325.6)set dq=CreateUnit(p,'e00A',5853.5,-6214.9,64.)set dP=CreateUnit(p,'e008',-4690.8,-6680.8,349.599)set dO=CreateUnit(p,'e001',4836.,4372.2,212.11)call InitBlizzard()set i=0set i=0loopexitwhen(i>16)set A[i]=0set C[i]=0set D[i]=0set q[i]=0set i=i+1endloopset i=0loopexitwhen(i>'d')set B[i]=falseset au[i]=0set aU[i]=0set av[i]=0set aV[i]=0set aW[i]=0set aX[i]=0set Ag[i]=0set i=i+1endloopset i=0loopexitwhen(i>4)set E[i]=0set i=i+1endloopset i=0loopexitwhen(i>2)set G[i]=falseset Q[i]=0set a3[i]=0set i=i+1endloopset i=0loopexitwhen(i>12)set I[i]=""set J[i]=CreateTimer()set K[i]=0set M[i]=0set i=i+1endloopset i=0loopexitwhen(i>13)set j[i]=falseset L[i]=CreateTimer()set ab[i]=falseset a7[i]=0set a8[i]=0set Aa[i]=0set bC[i]=falseset i=i+1endloopset i=0loopexitwhen(i>1)set N[i]=0set Y[i]=0set AZ[i]=""set A1[i]=falseset A2[i]=0set bc[i]=falseset i=i+1endloopset i=0loopexitwhen(i>17)set ay[i]=nullset i=i+1endloopset i=0loopexitwhen(i>40)set a4[i]=0set a5[i]=0set a6[i]=0set i=i+1endloopset i=0loopexitwhen(i>10)set Ah[i]=0set i=i+1endloopset i=0loopexitwhen(i>14)set bb[i]=falseset i=i+1endloopset i=0loopexitwhen(i>15)set bJ[i]="N/A"set i=i+1endloopcall FR()call Fs()call FS()call Ft()call Fx()call Fz()call F0()call gb()call F5()call gB()call TriggerRegisterTimerEventSingle(BO,.01)call TriggerAddAction(BO,function gc)set t=CreateTrigger()call TriggerRegisterPlayerEventLeave(t,Ac[1])call TriggerRegisterPlayerEventLeave(t,Ac[2])call TriggerRegisterPlayerEventLeave(t,Ac[3])call TriggerRegisterPlayerEventLeave(t,Ac[4])call TriggerRegisterPlayerEventLeave(t,Ac[5])call TriggerRegisterPlayerEventLeave(t,AC[1])call TriggerRegisterPlayerEventLeave(t,AC[2])call TriggerRegisterPlayerEventLeave(t,AC[3])call TriggerRegisterPlayerEventLeave(t,AC[4])call TriggerRegisterPlayerEventLeave(t,AC[5])call TriggerAddAction(t,function gE)call e7("Global","Trig|Leave",t)set t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_HERO_REVIVE_FINISH)call TriggerAddAction(t,function gL)set t=CreateTrigger()call TriggerRegisterEnterRectSimple(t,bj_mapInitialPlayableArea)call TriggerAddCondition(t,Condition(function Hp))call TriggerAddAction(t,function Hr)call TriggerRegisterTimerEventPeriodic(Bp,7.)call TriggerAddAction(Bp,function Hs)call TriggerRegisterAnyUnitEventBJ(BP,EVENT_PLAYER_UNIT_DEATH)call TriggerAddAction(BP,function HS)set t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(t,Condition(function H4))call TriggerAddAction(t,function H5)set Bq=tcall TriggerRegisterAnyUnitEventBJ(BQ,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(BQ,Condition(function ie))call TriggerAddAction(BQ,function iE)call TriggerRegisterAnyUnitEventBJ(Br,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(Br,Condition(function iF))call TriggerAddAction(Br,function ii)set t=CreateTrigger()call TriggerRegisterPlayerUnitEvent(t,Ac[0],EVENT_PLAYER_UNIT_DEATH,null)call TriggerRegisterPlayerUnitEvent(t,AC[0],EVENT_PLAYER_UNIT_DEATH,null)call TriggerAddAction(t,function il)call TriggerAddCondition(t,Condition(function iI))call TriggerRegisterTimerExpireEvent(BR,J[1])call TriggerAddAction(BR,function in)call TriggerRegisterTimerExpireEvent(Bs,J[2])call TriggerAddAction(Bs,function iN)call TriggerRegisterTimerExpireEvent(BS,J[3])call TriggerAddAction(BS,function io)call TriggerRegisterTimerExpireEvent(Bt,J[4])call TriggerAddAction(Bt,function iO)call TriggerRegisterTimerExpireEvent(BT,J[5])call TriggerAddAction(BT,function ip)call TriggerRegisterTimerExpireEvent(Bu,J[7])call TriggerAddAction(Bu,function iP)call TriggerRegisterTimerExpireEvent(BU,J[8])call TriggerAddAction(BU,function iq)call TriggerRegisterTimerExpireEvent(Bv,J[9])call TriggerAddAction(Bv,function iQ)call TriggerRegisterTimerExpireEvent(BV,J[10])call TriggerAddAction(BV,function ir)call TriggerRegisterTimerExpireEvent(Bw,J[11])call TriggerAddAction(Bw,function iR)call TriggerRegisterTimerEventSingle(BW,14.)call TriggerAddAction(BW,function is)call TriggerRegisterTimerEventSingle(BX,65.)call TriggerAddAction(BX,function iS)call TriggerRegisterTimerEventSingle(BY,90.)call TriggerAddAction(BY,function it)call TriggerRegisterTimerEventSingle(Bz,120.)call TriggerAddAction(Bz,function iT)call TriggerRegisterTimerEventSingle(BZ,.01)call TriggerAddAction(BZ,function iu)call TriggerAddAction(B0,function iV)call TriggerRegisterAnyUnitEventBJ(B1,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(B1,Condition(function iw))call TriggerAddAction(B1,function iW)call TriggerRegisterAnyUnitEventBJ(B2,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(B2,Condition(function ix))call TriggerAddAction(B2,function iX)call TriggerRegisterTimerEventPeriodic(B3,1.)call TriggerAddAction(B3,function iy)call TriggerRegisterTimerEventSingle(B4,1.)call TriggerAddAction(B4,function iY)if AQ thenset t=CreateTrigger()call TriggerRegisterTimerEvent(t,1,true)call TriggerAddAction(t,function jc)set ev=tendifcall TriggerRegisterUnitEvent(B5,DN,EVENT_UNIT_DEATH)call TriggerAddAction(B5,function jg)call TriggerRegisterUnitEvent(B6,dy,EVENT_UNIT_DEATH)call TriggerAddAction(B6,function jh)call TriggerRegisterAnyUnitEventBJ(B7,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(B7,Condition(function jH))call TriggerAddAction(B7,function jk)call TriggerRegisterTimerEventPeriodic(B8,300.)call TriggerAddAction(B8,function jl)call TriggerRegisterAnyUnitEventBJ(B9,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(B9,Condition(function jL))call TriggerAddAction(B9,function jm)call TriggerRegisterAnyUnitEventBJ(ca,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(ca,Condition(function jM))call TriggerAddAction(ca,function jn)call TriggerRegisterEnterRectSimple(cA,bj_mapInitialPlayableArea)call TriggerAddCondition(cA,Condition(function jo))call TriggerAddAction(cA,function jO)call TriggerRegisterAnyUnitEventBJ(cb,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(cb,Condition(function jp))call TriggerAddAction(cb,function jQ)call TriggerRegisterAnyUnitEventBJ(cB,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(cB,Condition(function jr))call TriggerAddAction(cB,function jS)if jT()thencall jx()endifset t=CreateTrigger()call TriggerRegisterPlayerChatEvent(t,AH,"-wtf",true)call TriggerAddAction(t,function jY)call TriggerAddCondition(t,Condition(function jX))set t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_DEATH)call TriggerAddAction(t,function j1)call TriggerAddCondition(t,Condition(function j0))call j2()call TriggerRegisterUnitInRangeSimple(cc,300.,dq)call TriggerRegisterUnitInRangeSimple(cc,300.,dQ)call TriggerRegisterUnitInRangeSimple(cc,300.,dp)call TriggerAddCondition(cc,Condition(function j3))call TriggerAddAction(cc,function j4)call TriggerRegisterTimerEventSingle(cC,3599.)call TriggerAddAction(cC,function j5)call TriggerRegisterTimerEventSingle(cd,1199.)call TriggerRegisterTimerEventSingle(cd,2398.)call TriggerRegisterTimerEventSingle(cd,3597.)call TriggerAddAction(cd,function j6)call TriggerRegisterEnterRectSimple(cD,bQ)call TriggerRegisterEnterRectSimple(cD,bn)call TriggerAddCondition(cD,Condition(function j7))call TriggerAddAction(cD,function j8)call TriggerRegisterEnterRectSimple(ce,bo)call TriggerRegisterEnterRectSimple(ce,bK)call TriggerAddCondition(ce,Condition(function j9))call TriggerAddAction(ce,function Ja)call TriggerRegisterEnterRectSimple(cE,bq)call TriggerRegisterEnterRectSimple(cE,bM)call TriggerAddCondition(cE,Condition(function JA))call TriggerAddAction(cE,function Jb)call TriggerRegisterEnterRectSimple(cf,bl)call TriggerRegisterEnterRectSimple(cf,bO)call TriggerAddCondition(cf,Condition(function JB))call TriggerAddAction(cf,function Jc)call TriggerRegisterEnterRectSimple(cF,bN)call TriggerRegisterEnterRectSimple(cF,bk)call TriggerAddCondition(cF,Condition(function JC))call TriggerAddAction(cF,function Jd)call TriggerRegisterEnterRectSimple(cg,bm)call TriggerRegisterEnterRectSimple(cg,bP)call TriggerAddCondition(cg,Condition(function JD))call TriggerAddAction(cg,function Je)call TriggerRegisterTimerEventPeriodic(cG,30.)call TriggerAddCondition(cG,Condition(function JE))call TriggerAddAction(cG,function JG)call TriggerRegisterUnitEvent(ch,DA,EVENT_UNIT_DEATH)call TriggerAddAction(ch,function JH)call TriggerRegisterUnitEvent(cH,Db,EVENT_UNIT_DEATH)call TriggerAddAction(cH,function Ji)call TriggerRegisterUnitEvent(ci,DB,EVENT_UNIT_DEATH)call TriggerAddAction(ci,function JI)call TriggerRegisterUnitEvent(cI,d8,EVENT_UNIT_DEATH)call TriggerAddAction(cI,function Jj)call TriggerRegisterUnitEvent(cj,d9,EVENT_UNIT_DEATH)call TriggerAddAction(cj,function JJ)call TriggerRegisterUnitEvent(cJ,Da,EVENT_UNIT_DEATH)call TriggerAddAction(cJ,function Jk)call TriggerRegisterUnitEvent(ck,DV,EVENT_UNIT_DEATH)call TriggerAddAction(ck,function JK)call TriggerRegisterUnitEvent(cK,Dw,EVENT_UNIT_DEATH)call TriggerAddAction(cK,function Jl)call TriggerRegisterUnitEvent(cl,Dx,EVENT_UNIT_DEATH)call TriggerAddAction(cl,function JL)call TriggerRegisterUnitEvent(cL,DT,EVENT_UNIT_DEATH)call TriggerAddAction(cL,function Jm)call TriggerRegisterUnitEvent(cm,Du,EVENT_UNIT_DEATH)call TriggerAddAction(cm,function JM)call TriggerRegisterUnitEvent(cM,Dv,EVENT_UNIT_DEATH)call TriggerAddAction(cM,function Jn)call TriggerRegisterAnyUnitEventBJ(cn,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(cn,Condition(function JN))call TriggerAddAction(cn,function Jo)call TriggerRegisterAnyUnitEventBJ(cN,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(cN,Condition(function JO))call TriggerAddAction(cN,function Jp)call TriggerRegisterTimerEventPeriodic(co,450.)call TriggerAddAction(co,function JP)call TriggerRegisterTimerEventSingle(cO,75.)call TriggerAddAction(cO,function Jq)call TriggerRegisterTimerEventSingle(cp,90.)call TriggerAddAction(cp,function JQ)call DisableTrigger(cP)call TriggerRegisterTimerEventPeriodic(cP,60.)call TriggerAddAction(cP,function Js)call DisableTrigger(cq)call TriggerRegisterTimerEventPeriodic(cq,780.)call TriggerAddAction(cq,function Jt)set t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SELL_ITEM)call TriggerAddAction(t,function JT)set t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function JV))call TriggerAddAction(t,function Jw)set t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function JX))call TriggerAddAction(t,function JZ)set t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddAction(t,function J3)call TriggerAddCondition(t,Condition(function J2))set t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_USE_ITEM)call TriggerAddCondition(t,Condition(function J6))call TriggerAddAction(t,function J8)call TriggerRegisterAnyUnitEventBJ(cQ,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(cQ,Condition(function J9))call TriggerAddAction(cQ,function ka)set t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function kA))call TriggerAddAction(t,function kc)set t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_USE_ITEM)call TriggerAddCondition(t,Condition(function kG))call TriggerAddAction(t,function kh)set t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddAction(t,function kg)call TriggerRegisterAnyUnitEventBJ(cr,EVENT_PLAYER_UNIT_USE_ITEM)call TriggerAddCondition(cr,Condition(function kj))call TriggerAddAction(cr,function kK)set t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(t,Condition(function kl))call TriggerAddAction(t,function kL)set t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddAction(t,function km)set t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_DROP_ITEM)call TriggerAddAction(t,function kM)call TriggerRegisterAnyUnitEventBJ(cR,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(cR,Condition(function kn))call TriggerAddAction(cR,function kN)call TriggerRegisterAnyUnitEventBJ(cs,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(cs,Condition(function ko))call TriggerAddAction(cs,function kO)call TriggerRegisterAnyUnitEventBJ(cS,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(cS,Condition(function kp))call TriggerAddAction(cS,function kP)call TriggerRegisterAnyUnitEventBJ(ct,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(ct,Condition(function kq))call TriggerAddAction(ct,function kQ)call TriggerRegisterAnyUnitEventBJ(cT,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(cT,Condition(function kr))call TriggerAddAction(cT,function kR)call TriggerRegisterAnyUnitEventBJ(cu,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(cu,Condition(function ks))call TriggerAddAction(cu,function kt)call TriggerRegisterAnyUnitEventBJ(cU,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(cU,Condition(function kT))call TriggerAddAction(cU,function ku)call TriggerRegisterTimerEventPeriodic(cv,120.)call TriggerAddAction(cv,function kv)set t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(t,Condition(function kV))call TriggerAddAction(t,function kX)call TriggerRegisterAnyUnitEventBJ(cV,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddAction(cV,function k1)set t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(t,Condition(function k2))call TriggerAddAction(t,function k3)set t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(t,Condition(function k6))call TriggerAddAction(t,function k7)call TriggerRegisterAnyUnitEventBJ(cw,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddAction(cw,function k8)call TriggerRegisterAnyUnitEventBJ(cW,EVENT_PLAYER_UNIT_USE_ITEM)call TriggerAddCondition(cW,Condition(function Ka))call TriggerAddAction(cW,function KA)call TriggerRegisterTimerEventPeriodic(cx,1.)call TriggerAddAction(cx,function Kc)set t=CreateTrigger()call TriggerRegisterTimerEvent(t,1,false)call TriggerAddAction(t,function Kt)set t=CreateTrigger()call TriggerRegisterEnterRectSimple(t,GetWorldBounds())call TriggerAddCondition(t,Condition(function KT))call TriggerAddAction(t,function Ku)set t=CreateTrigger()call TriggerRegisterUnitInRangeSimple(t,300.,dq)call TriggerRegisterUnitInRangeSimple(t,300.,dQ)call TriggerRegisterUnitInRangeSimple(t,300.,dp)call TriggerAddCondition(t,Condition(function KU))call TriggerAddAction(t,function Kv)set t=CreateTrigger()call TriggerRegisterTimerEvent(t,25,false)call TriggerAddAction(t,function KY)set t=CreateTrigger()call TriggerRegisterTimerEvent(t,25,false)call TriggerAddAction(t,function K1)set t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(t,Condition(function K5))call TriggerAddAction(t,function K7)set t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddAction(t,function lc)call TriggerAddCondition(t,Condition(function lA))set t=CreateTrigger()call TriggerRegisterTimerEvent(t,2,true)call TriggerAddAction(t,function ld)set t=CreateTrigger()call TriggerRegisterPlayerChatEvent(t,AH,"-",false)call TriggerAddAction(t,function lj)call TriggerAddCondition(t,Condition(function lD))set t=CreateTrigger()call TriggerRegisterPlayerChatEvent(t,Ac[1],"-",false)call TriggerRegisterPlayerChatEvent(t,Ac[2],"-",false)call TriggerRegisterPlayerChatEvent(t,Ac[3],"-",false)call TriggerRegisterPlayerChatEvent(t,Ac[4],"-",false)call TriggerRegisterPlayerChatEvent(t,Ac[5],"-",false)call TriggerRegisterPlayerChatEvent(t,AC[1],"-",false)call TriggerRegisterPlayerChatEvent(t,AC[2],"-",false)call TriggerRegisterPlayerChatEvent(t,AC[3],"-",false)call TriggerRegisterPlayerChatEvent(t,AC[4],"-",false)call TriggerRegisterPlayerChatEvent(t,AC[5],"-",false)call TriggerAddAction(t,function Lz)set t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_FINISH)call TriggerAddCondition(t,Condition(function mv))call TriggerAddAction(t,function mX)set t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_FINISH)call TriggerAddCondition(t,Condition(function mZ))call TriggerAddAction(t,function m0)call TriggerRegisterAnyUnitEventBJ(CY,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(CY,Condition(function rz))call TriggerAddAction(CY,function rZ)set t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(t,Condition(function Vh))call TriggerAddAction(t,function VH)set t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function Vi))call TriggerAddAction(t,function VI)set t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function Vj))call TriggerAddAction(t,function VJ)endfunctionfunction config takes nothing returns nothingcall SetMapName("DotA Allstars v6.41")call SetMapDescription("Choose from 82 unique heroes in an epic battle to defend the Ancients.\n\nModes: |c001e90ff-ap, -ar, -lm, -rd, -mm, -tr, -dm, -vr, -rv, -mr, -du, -sp, -sh, -aa, -ai, -as, -id, -em, -sc, -np|r")call SetPlayers(10)call SetTeams(10)call SetGamePlacement(MAP_PLACEMENT_TEAMS_TOGETHER)call DefineStartLocation(0,-6272.,-6912.)call DefineStartLocation(1,-6272.,-6912.)call DefineStartLocation(2,-6272.,-6912.)call DefineStartLocation(3,-6272.,-6912.)call DefineStartLocation(4,-6272.,-6912.)call DefineStartLocation(5,6080.,6400.)call DefineStartLocation(6,6080.,6400.)call DefineStartLocation(7,6080.,6400.)call DefineStartLocation(8,6080.,6400.)call DefineStartLocation(9,6080.,6400.)call SetPlayerStartLocation(Player(1),0)call ForcePlayerStartLocation(Player(1),0)call SetPlayerColor(Player(1),ConvertPlayerColor(1))call SetPlayerRacePreference(Player(1),RACE_PREF_NIGHTELF)call SetPlayerRaceSelectable(Player(1),false)call SetPlayerController(Player(1),MAP_CONTROL_USER)call SetPlayerStartLocation(Player(2),1)call ForcePlayerStartLocation(Player(2),1)call SetPlayerColor(Player(2),ConvertPlayerColor(2))call SetPlayerRacePreference(Player(2),RACE_PREF_NIGHTELF)call SetPlayerRaceSelectable(Player(2),false)call SetPlayerController(Player(2),MAP_CONTROL_USER)call SetPlayerStartLocation(Player(3),2)call ForcePlayerStartLocation(Player(3),2)call SetPlayerColor(Player(3),ConvertPlayerColor(3))call SetPlayerRacePreference(Player(3),RACE_PREF_NIGHTELF)call SetPlayerRaceSelectable(Player(3),false)call SetPlayerController(Player(3),MAP_CONTROL_USER)call SetPlayerStartLocation(Player(4),3)call ForcePlayerStartLocation(Player(4),3)call SetPlayerColor(Player(4),ConvertPlayerColor(4))call SetPlayerRacePreference(Player(4),RACE_PREF_NIGHTELF)call SetPlayerRaceSelectable(Player(4),false)call SetPlayerController(Player(4),MAP_CONTROL_USER)call SetPlayerStartLocation(Player(5),4)call ForcePlayerStartLocation(Player(5),4)call SetPlayerColor(Player(5),ConvertPlayerColor(5))call SetPlayerRacePreference(Player(5),RACE_PREF_NIGHTELF)call SetPlayerRaceSelectable(Player(5),false)call SetPlayerController(Player(5),MAP_CONTROL_USER)call SetPlayerStartLocation(Player(7),5)call ForcePlayerStartLocation(Player(7),5)call SetPlayerColor(Player(7),ConvertPlayerColor(7))call SetPlayerRacePreference(Player(7),RACE_PREF_UNDEAD)call SetPlayerRaceSelectable(Player(7),false)call SetPlayerController(Player(7),MAP_CONTROL_USER)call SetPlayerStartLocation(Player(8),6)call ForcePlayerStartLocation(Player(8),6)call SetPlayerColor(Player(8),ConvertPlayerColor(8))call SetPlayerRacePreference(Player(8),RACE_PREF_UNDEAD)call SetPlayerRaceSelectable(Player(8),false)call SetPlayerController(Player(8),MAP_CONTROL_USER)call SetPlayerStartLocation(Player(9),7)call ForcePlayerStartLocation(Player(9),7)call SetPlayerColor(Player(9),ConvertPlayerColor(9))call SetPlayerRacePreference(Player(9),RACE_PREF_UNDEAD)call SetPlayerRaceSelectable(Player(9),false)call SetPlayerController(Player(9),MAP_CONTROL_USER)call SetPlayerStartLocation(Player(10),8)call ForcePlayerStartLocation(Player(10),8)call SetPlayerColor(Player(10),ConvertPlayerColor(10))call SetPlayerRacePreference(Player(10),RACE_PREF_UNDEAD)call SetPlayerRaceSelectable(Player(10),false)call SetPlayerController(Player(10),MAP_CONTROL_USER)call SetPlayerStartLocation(Player(11),9)call ForcePlayerStartLocation(Player(11),9)call SetPlayerColor(Player(11),ConvertPlayerColor(11))call SetPlayerRacePreference(Player(11),RACE_PREF_UNDEAD)call SetPlayerRaceSelectable(Player(11),false)call SetPlayerController(Player(11),MAP_CONTROL_USER)call InitCustomTeams()call SetStartLocPrioCount(0,4)call SetStartLocPrio(0,0,1,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(0,1,2,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(0,2,3,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(0,3,4,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount(1,4)call SetStartLocPrio(1,0,0,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(1,1,2,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(1,2,3,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(1,3,4,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount(2,4)call SetStartLocPrio(2,0,0,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(2,1,1,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(2,2,3,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(2,3,4,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount(3,4)call SetStartLocPrio(3,0,0,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(3,1,1,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(3,2,2,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(3,3,4,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount(4,4)call SetStartLocPrio(4,0,0,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(4,1,1,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(4,2,2,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(4,3,3,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount(5,4)call SetStartLocPrio(5,0,6,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(5,1,7,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(5,2,8,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(5,3,9,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount(6,4)call SetStartLocPrio(6,0,5,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(6,1,7,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(6,2,8,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(6,3,9,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount(7,4)call SetStartLocPrio(7,0,5,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(7,1,6,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(7,2,8,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(7,3,9,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount(8,4)call SetStartLocPrio(8,0,5,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(8,1,6,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(8,2,7,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(8,3,9,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount(9,4)call SetStartLocPrio(9,0,5,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(9,1,6,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(9,2,7,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(9,3,8,MAP_LOC_PRIO_HIGH)endfunction